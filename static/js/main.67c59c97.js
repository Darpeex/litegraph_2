/*! For license information please see main.67c59c97.js.LICENSE.txt */
(()=>{var __webpack_modules__={532:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function m(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case s:case a:case d:case h:return t;default:switch(t=t&&t.$$typeof){case c:case u:case p:case g:case f:case l:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference")},457:(t,e,n)=>{"use strict";n(532)},110:(t,e,n)=>{"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=h(n);i&&i!==f&&t(e,i,r)}var a=c(n);p&&(a=a.concat(p(n)));for(var s=l(e),g=l(n),v=0;v<a.length;++v){var m=a[v];if(!o[m]&&(!r||!r[m])&&(!g||!g[m])&&(!s||!s[m])){var _=d(n,m);try{u(e,m,_)}catch(y){}}}}return e}},746:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case p:case o:case s:case a:case h:return t;default:switch(t=t&&t.$$typeof){case u:case d:case v:case g:case l:return t;default:return e}}case i:return e}}}function w(t){return x(t)===p}e.AsyncMode=c,e.ConcurrentMode=p,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=v,e.Memo=g,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=h,e.isAsyncMode=function(t){return w(t)||x(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===u},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===v},e.isMemo=function(t){return x(t)===g},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===s},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===h},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===p||t===s||t===a||t===h||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===g||t.$$typeof===l||t.$$typeof===u||t.$$typeof===d||t.$$typeof===_||t.$$typeof===y||t.$$typeof===b||t.$$typeof===m)},e.typeOf=x},309:(t,e,n)=>{"use strict";t.exports=n(746)},100:function(__unused_webpack_module,exports){(function(global){var LiteGraph=global.LiteGraph={VERSION:.4,CANVAS_GRID_SIZE:10,NODE_TITLE_HEIGHT:30,NODE_TITLE_TEXT_Y:20,NODE_SLOT_HEIGHT:20,NODE_WIDGET_HEIGHT:20,NODE_WIDTH:140,NODE_MIN_WIDTH:50,NODE_COLLAPSED_RADIUS:10,NODE_COLLAPSED_WIDTH:80,NODE_TITLE_COLOR:"#999",NODE_SELECTED_TITLE_COLOR:"#FFF",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#AAA",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#333",NODE_DEFAULT_BGCOLOR:"#353535",NODE_DEFAULT_BOXCOLOR:"#666",NODE_DEFAULT_SHAPE:"box",NODE_BOX_OUTLINE_COLOR:"#FFF",DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0.5)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#222",WIDGET_OUTLINE_COLOR:"#666",WIDGET_TEXT_COLOR:"#DDD",WIDGET_SECONDARY_TEXT_COLOR:"#999",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#A86",CONNECTING_LINK_COLOR:"#AFA",MAX_NUMBER_OF_NODES:1e3,DEFAULT_POSITION:[100,100],VALID_SHAPES:["default","box","round","card"],BOX_SHAPE:1,ROUND_SHAPE:2,CIRCLE_SHAPE:3,CARD_SHAPE:4,ARROW_SHAPE:5,GRID_SHAPE:6,INPUT:1,OUTPUT:2,EVENT:-1,ACTION:-1,NODE_MODES:["Always","On Event","Never","On Trigger"],NODE_MODES_COLORS:["#666","#422","#333","#224","#626"],ALWAYS:0,ON_EVENT:1,NEVER:2,ON_TRIGGER:3,UP:1,DOWN:2,LEFT:3,RIGHT:4,CENTER:5,LINK_RENDER_MODES:["Straight","Linear","Spline"],STRAIGHT_LINK:0,LINEAR_LINK:1,SPLINE_LINK:2,NORMAL_TITLE:0,NO_TITLE:1,TRANSPARENT_TITLE:2,AUTOHIDE_TITLE:3,VERTICAL_LAYOUT:"vertical",proxy:null,node_images_path:"",debug:!1,catch_exceptions:!0,throw_errors:!0,allow_scripts:!1,use_deferred_actions:!0,registered_node_types:{},node_types_by_file_extension:{},Nodes:{},Globals:{},searchbox_extras:{},auto_sort_node_types:!1,node_box_coloured_when_on:!1,node_box_coloured_by_mode:!1,dialog_close_on_mouse_leave:!0,dialog_close_on_mouse_leave_delay:500,shift_click_do_break_link_from:!1,click_do_break_link_to:!1,search_hide_on_mouse_leave:!0,search_filter_enabled:!1,search_show_all_on_open:!0,auto_load_slot_types:!1,registered_slot_in_types:{},registered_slot_out_types:{},slot_types_in:[],slot_types_out:[],slot_types_default_in:[],slot_types_default_out:[],alt_drag_do_clone_nodes:!1,do_add_triggers_slots:!1,allow_multi_output_for_events:!0,middle_click_slot_add_default_node:!1,release_link_on_empty_shows_menu:!1,pointerevents_method:"mouse",ctrl_shift_v_paste_connect_unselected_outputs:!1,use_uuids:!1,registerNodeType:function(t,e){if(!e.prototype)throw"Cannot register a simple object, it must be a class with a prototype";e.type=t,LiteGraph.debug&&console.log("Node registered: "+t);const n=e.name,r=t.lastIndexOf("/");for(var i in e.category=t.substring(0,r),e.title||(e.title=n),LGraphNode.prototype)e.prototype[i]||(e.prototype[i]=LGraphNode.prototype[i]);const o=this.registered_node_types[t];if(o&&console.log("replacing node type: "+t),!Object.prototype.hasOwnProperty.call(e.prototype,"shape")&&(Object.defineProperty(e.prototype,"shape",{set:function(t){switch(t){case"default":delete this._shape;break;case"box":this._shape=LiteGraph.BOX_SHAPE;break;case"round":this._shape=LiteGraph.ROUND_SHAPE;break;case"circle":this._shape=LiteGraph.CIRCLE_SHAPE;break;case"card":this._shape=LiteGraph.CARD_SHAPE;break;default:this._shape=t}},get:function(){return this._shape},enumerable:!0,configurable:!0}),e.supported_extensions))for(let a in e.supported_extensions){const t=e.supported_extensions[a];t&&t.constructor===String&&(this.node_types_by_file_extension[t.toLowerCase()]=e)}this.registered_node_types[t]=e,e.constructor.name&&(this.Nodes[n]=e),LiteGraph.onNodeTypeRegistered&&LiteGraph.onNodeTypeRegistered(t,e),o&&LiteGraph.onNodeTypeReplaced&&LiteGraph.onNodeTypeReplaced(t,e,o),e.prototype.onPropertyChange&&console.warn("LiteGraph node class "+t+" has onPropertyChange method, it must be called onPropertyChanged with d at the end"),this.auto_load_slot_types&&new e(e.title||"tmpnode")},unregisterNodeType:function(t){const e=t.constructor===String?this.registered_node_types[t]:t;if(!e)throw"node type not found: "+t;delete this.registered_node_types[e.type],e.constructor.name&&delete this.Nodes[e.constructor.name]},registerNodeAndSlotType:function(t,e,n){n=n||!1;const r=(t.constructor===String&&"anonymous"!==this.registered_node_types[t]?this.registered_node_types[t]:t).constructor.type;let i=[];i="string"===typeof e?e.split(","):e==this.EVENT||e==this.ACTION?["_event_"]:["*"];for(let o=0;o<i.length;++o){let t=i[o];""===t&&(t="*");const e=n?"registered_slot_out_types":"registered_slot_in_types";void 0===this[e][t]&&(this[e][t]={nodes:[]}),this[e][t].nodes.includes(r)||this[e][t].nodes.push(r),n?this.slot_types_out.includes(t.toLowerCase())||(this.slot_types_out.push(t.toLowerCase()),this.slot_types_out.sort()):this.slot_types_in.includes(t.toLowerCase())||(this.slot_types_in.push(t.toLowerCase()),this.slot_types_in.sort())}},buildNodeClassFromObject:function(t,e){var n="";if(e.inputs)for(var r=0;r<e.inputs.length;++r){var i=e.inputs[r][0];(o=e.inputs[r][1])&&o.constructor===String&&(o='"'+o+'"'),n+="this.addInput('"+i+"',"+o+");\n"}if(e.outputs)for(r=0;r<e.outputs.length;++r){var o;i=e.outputs[r][0];(o=e.outputs[r][1])&&o.constructor===String&&(o='"'+o+'"'),n+="this.addOutput('"+i+"',"+o+");\n"}if(e.properties)for(var r in e.properties){var a=e.properties[r];a&&a.constructor===String&&(a='"'+a+'"'),n+="this.addProperty('"+r+"',"+a+");\n"}n+="if(this.onCreate)this.onCreate()";var s=Function(n);for(var r in e)"inputs"!=r&&"outputs"!=r&&"properties"!=r&&(s.prototype[r]=e[r]);return s.title=e.title||t.split("/").pop(),s.desc=e.desc||"Generated from object",this.registerNodeType(t,s),s},wrapFunctionAsNode:function(t,e,n,r,i){var o=Array(e.length),a="";if(null!==n)for(var s=LiteGraph.getParameterNames(e),l=0;l<s.length;++l){var u=0;n&&(null!=n[l]&&n[l].constructor===String?u="'"+n[l]+"'":null!=n[l]&&(u=n[l])),a+="this.addInput('"+s[l]+"',"+u+");\n"}null!==r&&(a+="this.addOutput('out',"+(null!=r?r.constructor===String?"'"+r+"'":r:0)+");\n"),i&&(a+="this.properties = "+JSON.stringify(i)+";\n");var c=Function(a);return c.title=t.split("/").pop(),c.desc="Generated from "+e.name,c.prototype.onExecute=function(){for(var t=0;t<o.length;++t)o[t]=this.getInputData(t);var n=e.apply(this,o);this.setOutputData(0,n)},this.registerNodeType(t,c),c},clearRegisteredTypes:function(){this.registered_node_types={},this.node_types_by_file_extension={},this.Nodes={},this.searchbox_extras={}},addNodeMethod:function(t,e){for(var n in LGraphNode.prototype[t]=e,this.registered_node_types){var r=this.registered_node_types[n];r.prototype[t]&&(r.prototype["_"+t]=r.prototype[t]),r.prototype[t]=e}},createNode:function(t,e,n){var r=this.registered_node_types[t];if(!r)return LiteGraph.debug&&console.log('GraphNode type "'+t+'" not registered.'),null;r.prototype;e=e||r.title||t;var i=null;if(LiteGraph.catch_exceptions)try{i=new r(e)}catch(a){return console.error(a),null}else i=new r(e);if(i.type=t,!i.title&&e&&(i.title=e),i.properties||(i.properties={}),i.properties_info||(i.properties_info=[]),i.flags||(i.flags={}),i.size||(i.size=i.computeSize()),i.pos||(i.pos=LiteGraph.DEFAULT_POSITION.concat()),i.mode||(i.mode=LiteGraph.ALWAYS),n)for(var o in n)i[o]=n[o];return i.onNodeCreated&&i.onNodeCreated(),i},getNodeType:function(t){return this.registered_node_types[t]},getNodeTypesInCategory:function(t,e){var n=[];for(var r in this.registered_node_types){var i=this.registered_node_types[r];i.filter==e&&(""==t?null==i.category&&n.push(i):i.category==t&&n.push(i))}return this.auto_sort_node_types&&n.sort((function(t,e){return t.title.localeCompare(e.title)})),n},getNodeTypesCategories:function(t){var e={"":1};for(var n in this.registered_node_types){var r=this.registered_node_types[n];if(r.category&&!r.skip_list){if(r.filter!=t)continue;e[r.category]=1}}var i=[];for(var n in e)i.push(n);return this.auto_sort_node_types?i.sort():i},reloadNodes:function(t){for(var e=document.getElementsByTagName("script"),n=[],r=0;r<e.length;r++)n.push(e[r]);var i=document.getElementsByTagName("head")[0];t=document.location.href+t;for(r=0;r<n.length;r++){var o=n[r].src;if(o&&o.substr(0,t.length)==t)try{LiteGraph.debug&&console.log("Reloading: "+o);var a=document.createElement("script");a.type="text/javascript",a.src=o,i.appendChild(a),i.removeChild(n[r])}catch(s){if(LiteGraph.throw_errors)throw s;LiteGraph.debug&&console.log("Error while reloading "+o)}}LiteGraph.debug&&console.log("Nodes reloaded")},cloneObject:function(t,e){if(null==t)return null;var n=JSON.parse(JSON.stringify(t));if(!e)return n;for(var r in n)e[r]=n[r];return e},uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^16*Math.random()>>t/4).toString(16)))},isValidConnection:function(t,e){if(""!=t&&"*"!==t||(t=0),""!=e&&"*"!==e||(e=0),!t||!e||t==e||t==LiteGraph.EVENT&&e==LiteGraph.ACTION)return!0;if(t=String(t),e=String(e),t=t.toLowerCase(),e=e.toLowerCase(),-1==t.indexOf(",")&&-1==e.indexOf(","))return t==e;for(var n=t.split(","),r=e.split(","),i=0;i<n.length;++i)for(var o=0;o<r.length;++o)if(this.isValidConnection(n[i],r[o]))return!0;return!1},registerSearchboxExtra:function(t,e,n){this.searchbox_extras[e.toLowerCase()]={type:t,desc:e,data:n}},fetchFile:function(t,e,n,r){if(!t)return null;if(e=e||"text",t.constructor===String)return"http"==t.substr(0,4)&&LiteGraph.proxy&&(t=LiteGraph.proxy+t.substr(t.indexOf(":")+3)),fetch(t).then((function(t){if(!t.ok)throw new Error("File not found");return"arraybuffer"==e?t.arrayBuffer():"text"==e||"string"==e?t.text():"json"==e?t.json():"blob"==e?t.blob():void 0})).then((function(t){n&&n(t)})).catch((function(e){console.error("error fetching file:",t),r&&r(e)}));if(t.constructor===File||t.constructor===Blob){var i=new FileReader;if(i.onload=function(t){var r=t.target.result;"json"==e&&(r=JSON.parse(r)),n&&n(r)},"arraybuffer"==e)return i.readAsArrayBuffer(t);if("text"==e||"json"==e)return i.readAsText(t);if("blob"==e)return i.readAsBinaryString(t)}return null}};function LGraph(t){LiteGraph.debug&&console.log("Graph created"),this.list_of_graphcanvas=null,this.clear(),t&&this.configure(t)}function LLink(t,e,n,r,i,o){this.id=t,this.type=e,this.origin_id=n,this.origin_slot=r,this.target_id=i,this.target_slot=o,this._data=null,this._pos=new Float32Array(2)}function LGraphNode(t){this._ctor(t)}function LGraphGroup(t){this._ctor(t)}function DragAndScale(t,e){this.offset=new Float32Array([0,0]),this.scale=1,this.max_scale=10,this.min_scale=.1,this.onredraw=null,this.enabled=!0,this.last_mouse=[0,0],this.element=null,this.visible_area=new Float32Array(4),t&&(this.element=t,e||this.bindEvents(t))}function LGraphCanvas(t,e,n){this.options=n=n||{},this.background_image=LGraphCanvas.DEFAULT_BACKGROUND_IMAGE,t&&t.constructor===String&&(t=document.querySelector(t)),this.ds=new DragAndScale,this.zoom_modify_alpha=!0,this.title_text_font=LiteGraph.NODE_TEXT_SIZE+"px Arial",this.inner_text_font="normal "+LiteGraph.NODE_SUBTEXT_SIZE+"px Arial",this.node_title_color=LiteGraph.NODE_TITLE_COLOR,this.default_link_color=LiteGraph.LINK_COLOR,this.default_connection_color={input_off:"#778",input_on:"#7F7",output_off:"#778",output_on:"#7F7"},this.default_connection_color_byType={},this.default_connection_color_byTypeOff={},this.highquality_render=!0,this.use_gradients=!1,this.editor_alpha=1,this.pause_rendering=!1,this.clear_background=!0,this.clear_background_color="#222",this.read_only=!1,this.render_only_selected=!0,this.live_mode=!1,this.show_info=!0,this.allow_dragcanvas=!0,this.allow_dragnodes=!0,this.allow_interaction=!0,this.multi_select=!1,this.allow_searchbox=!0,this.allow_reconnect_links=!0,this.align_to_grid=!1,this.drag_mode=!1,this.dragging_rectangle=null,this.filter=null,this.set_canvas_dirty_on_mouse_event=!0,this.always_render_background=!1,this.render_shadows=!0,this.render_canvas_border=!0,this.render_connections_shadows=!1,this.render_connections_border=!0,this.render_curved_connections=!1,this.render_connection_arrows=!1,this.render_collapsed_slots=!0,this.render_execution_order=!1,this.render_title_colored=!0,this.render_link_tooltip=!0,this.links_render_mode=LiteGraph.SPLINE_LINK,this.mouse=[0,0],this.graph_mouse=[0,0],this.canvas_mouse=this.graph_mouse,this.onSearchBox=null,this.onSearchBoxSelection=null,this.onMouse=null,this.onDrawBackground=null,this.onDrawForeground=null,this.onDrawOverlay=null,this.onDrawLinkTooltip=null,this.onNodeMoved=null,this.onSelectionChange=null,this.onConnectingChange=null,this.onBeforeChange=null,this.onAfterChange=null,this.connections_width=3,this.round_radius=8,this.current_node=null,this.node_widget=null,this.over_link_center=null,this.last_mouse_position=[0,0],this.visible_area=this.ds.visible_area,this.visible_links=[],this.viewport=n.viewport||null,e&&e.attachCanvas(this),this.setCanvas(t,n.skip_events),this.clear(),n.skip_render||this.startRendering(),this.autoresize=n.autoresize}"undefined"!=typeof performance?LiteGraph.getTime=performance.now.bind(performance):"undefined"!=typeof Date&&Date.now?LiteGraph.getTime=Date.now.bind(Date):"undefined"!=typeof process?LiteGraph.getTime=function(){var t=process.hrtime();return.001*t[0]+1e-6*t[1]}:LiteGraph.getTime=function(){return(new Date).getTime()},global.LGraph=LiteGraph.LGraph=LGraph,LGraph.supported_types=["number","string","boolean"],LGraph.prototype.getSupportedTypes=function(){return this.supported_types||LGraph.supported_types},LGraph.STATUS_STOPPED=1,LGraph.STATUS_RUNNING=2,LGraph.prototype.clear=function(){if(this.stop(),this.status=LGraph.STATUS_STOPPED,this.last_node_id=0,this.last_link_id=0,this._version=-1,this._nodes)for(var t=0;t<this._nodes.length;++t){var e=this._nodes[t];e.onRemoved&&e.onRemoved()}this._nodes=[],this._nodes_by_id={},this._nodes_in_order=[],this._nodes_executable=null,this._groups=[],this.links={},this.iteration=0,this.config={},this.vars={},this.extra={},this.globaltime=0,this.runningtime=0,this.fixedtime=0,this.fixedtime_lapse=.01,this.elapsed_time=.01,this.last_update_time=0,this.starttime=0,this.catch_errors=!0,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[],this.inputs={},this.outputs={},this.change(),this.sendActionToCanvas("clear")},LGraph.prototype.attachCanvas=function(t){if(t.constructor!=LGraphCanvas)throw"attachCanvas expects a LGraphCanvas instance";t.graph&&t.graph!=this&&t.graph.detachCanvas(t),t.graph=this,this.list_of_graphcanvas||(this.list_of_graphcanvas=[]),this.list_of_graphcanvas.push(t)},LGraph.prototype.detachCanvas=function(t){if(this.list_of_graphcanvas){var e=this.list_of_graphcanvas.indexOf(t);-1!=e&&(t.graph=null,this.list_of_graphcanvas.splice(e,1))}},LGraph.prototype.start=function(t){if(this.status!=LGraph.STATUS_RUNNING){this.status=LGraph.STATUS_RUNNING,this.onPlayEvent&&this.onPlayEvent(),this.sendEventToAllNodes("onStart"),this.starttime=LiteGraph.getTime(),this.last_update_time=this.starttime;var e=this;if(0==(t=t||0)&&"undefined"!=typeof window&&window.requestAnimationFrame){this.execution_timer_id=-1,function t(){-1==e.execution_timer_id&&(window.requestAnimationFrame(t),e.onBeforeStep&&e.onBeforeStep(),e.runStep(1,!e.catch_errors),e.onAfterStep&&e.onAfterStep())}()}else this.execution_timer_id=setInterval((function(){e.onBeforeStep&&e.onBeforeStep(),e.runStep(1,!e.catch_errors),e.onAfterStep&&e.onAfterStep()}),t)}},LGraph.prototype.stop=function(){this.status!=LGraph.STATUS_STOPPED&&(this.status=LGraph.STATUS_STOPPED,this.onStopEvent&&this.onStopEvent(),null!=this.execution_timer_id&&(-1!=this.execution_timer_id&&clearInterval(this.execution_timer_id),this.execution_timer_id=null),this.sendEventToAllNodes("onStop"))},LGraph.prototype.runStep=function(t,e,n){t=t||1;var r=LiteGraph.getTime();this.globaltime=.001*(r-this.starttime);var i=this._nodes_executable?this._nodes_executable:this._nodes;if(i){if(n=n||i.length,e){for(var o=0;o<t;o++){for(var a=0;a<n;++a){var s=i[a];LiteGraph.use_deferred_actions&&s._waiting_actions&&s._waiting_actions.length&&s.executePendingActions(),s.mode==LiteGraph.ALWAYS&&s.onExecute&&s.doExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute()}else try{for(o=0;o<t;o++){for(a=0;a<n;++a){s=i[a];LiteGraph.use_deferred_actions&&s._waiting_actions&&s._waiting_actions.length&&s.executePendingActions(),s.mode==LiteGraph.ALWAYS&&s.onExecute&&s.onExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute(),this.errors_in_execution=!1}catch(c){if(this.errors_in_execution=!0,LiteGraph.throw_errors)throw c;LiteGraph.debug&&console.log("Error during execution: "+c),this.stop()}var l=LiteGraph.getTime(),u=l-r;0==u&&(u=1),this.execution_time=.001*u,this.globaltime+=.001*u,this.iteration+=1,this.elapsed_time=.001*(l-this.last_update_time),this.last_update_time=l,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[]}},LGraph.prototype.updateExecutionOrder=function(){this._nodes_in_order=this.computeExecutionOrder(!1),this._nodes_executable=[];for(var t=0;t<this._nodes_in_order.length;++t)this._nodes_in_order[t].onExecute&&this._nodes_executable.push(this._nodes_in_order[t])},LGraph.prototype.computeExecutionOrder=function(t,e){for(var n=[],r=[],i={},o={},a={},s=0,l=this._nodes.length;s<l;++s){var u=this._nodes[s];if(!t||u.onExecute){i[u.id]=u;var c=0;if(u.inputs)for(var p=0,d=u.inputs.length;p<d;p++)u.inputs[p]&&null!=u.inputs[p].link&&(c+=1);0==c?(r.push(u),e&&(u._level=1)):(e&&(u._level=0),a[u.id]=c)}}for(;0!=r.length;){u=r.shift();if(n.push(u),delete i[u.id],u.outputs)for(s=0;s<u.outputs.length;s++){var h=u.outputs[s];if(null!=h&&null!=h.links&&0!=h.links.length)for(p=0;p<h.links.length;p++){var f=h.links[p],g=this.links[f];if(g&&!o[g.id]){var v=this.getNodeById(g.target_id);null!=v?(e&&(!v._level||v._level<=u._level)&&(v._level=u._level+1),o[g.id]=!0,a[v.id]-=1,0==a[v.id]&&r.push(v)):o[g.id]=!0}}}}for(var s in i)n.push(i[s]);n.length!=this._nodes.length&&LiteGraph.debug&&console.warn("something went wrong, nodes missing");for(l=n.length,s=0;s<l;++s)n[s].order=s;n=n.sort((function(t,e){var n=t.constructor.priority||t.priority||0,r=e.constructor.priority||e.priority||0;return n==r?t.order-e.order:n-r}));for(s=0;s<l;++s)n[s].order=s;return n},LGraph.prototype.getAncestors=function(t){for(var e=[],n=[t],r={};n.length;){var i=n.shift();if(i.inputs){r[i.id]||i==t||(r[i.id]=!0,e.push(i));for(var o=0;o<i.inputs.length;++o){var a=i.getInputNode(o);a&&-1==e.indexOf(a)&&n.push(a)}}}return e.sort((function(t,e){return t.order-e.order})),e},LGraph.prototype.arrange=function(t,e){t=t||100;const n=this.computeExecutionOrder(!1,!0),r=[];for(let o=0;o<n.length;++o){const t=n[o],e=t._level||1;r[e]||(r[e]=[]),r[e].push(t)}let i=t;for(let o=0;o<r.length;++o){const n=r[o];if(!n)continue;let a=100,s=t+LiteGraph.NODE_TITLE_HEIGHT;for(let r=0;r<n.length;++r){const o=n[r];o.pos[0]=e==LiteGraph.VERTICAL_LAYOUT?s:i,o.pos[1]=e==LiteGraph.VERTICAL_LAYOUT?i:s;const l=e==LiteGraph.VERTICAL_LAYOUT?1:0;o.size[l]>a&&(a=o.size[l]);const u=e==LiteGraph.VERTICAL_LAYOUT?0:1;s+=o.size[u]+t+LiteGraph.NODE_TITLE_HEIGHT}i+=a+t}this.setDirtyCanvas(!0,!0)},LGraph.prototype.getTime=function(){return this.globaltime},LGraph.prototype.getFixedTime=function(){return this.fixedtime},LGraph.prototype.getElapsedTime=function(){return this.elapsed_time},LGraph.prototype.sendEventToAllNodes=function(t,e,n){n=n||LiteGraph.ALWAYS;var r=this._nodes_in_order?this._nodes_in_order:this._nodes;if(r)for(var i=0,o=r.length;i<o;++i){var a=r[i];a.constructor!==LiteGraph.Subgraph||"onExecute"==t?a[t]&&a.mode==n&&(void 0===e?a[t]():e&&e.constructor===Array?a[t].apply(a,e):a[t](e)):a.mode==n&&a.sendEventToAllNodes(t,e,n)}},LGraph.prototype.sendActionToCanvas=function(t,e){if(this.list_of_graphcanvas)for(var n=0;n<this.list_of_graphcanvas.length;++n){var r=this.list_of_graphcanvas[n];r[t]&&r[t].apply(r,e)}},LGraph.prototype.add=function(t,e){if(t){if(t.constructor===LGraphGroup)return this._groups.push(t),this.setDirtyCanvas(!0),this.change(),t.graph=this,void this._version++;if(-1!=t.id&&null!=this._nodes_by_id[t.id]&&(console.warn("LiteGraph: there is already a node with this ID, changing it"),LiteGraph.use_uuids?t.id=LiteGraph.uuidv4():t.id=++this.last_node_id),this._nodes.length>=LiteGraph.MAX_NUMBER_OF_NODES)throw"LiteGraph: max number of nodes in a graph reached";return LiteGraph.use_uuids?null!=t.id&&-1!=t.id||(t.id=LiteGraph.uuidv4()):null==t.id||-1==t.id?t.id=++this.last_node_id:this.last_node_id<t.id&&(this.last_node_id=t.id),t.graph=this,this._version++,this._nodes.push(t),this._nodes_by_id[t.id]=t,t.onAdded&&t.onAdded(this),this.config.align_to_grid&&t.alignToGrid(),e||this.updateExecutionOrder(),this.onNodeAdded&&this.onNodeAdded(t),this.setDirtyCanvas(!0),this.change(),t}},LGraph.prototype.remove=function(t){if(t.constructor===LiteGraph.LGraphGroup){var e=this._groups.indexOf(t);return-1!=e&&this._groups.splice(e,1),t.graph=null,this._version++,this.setDirtyCanvas(!0,!0),void this.change()}if(null!=this._nodes_by_id[t.id]&&!t.ignore_remove){if(this.beforeChange(),t.inputs)for(var n=0;n<t.inputs.length;n++){null!=(r=t.inputs[n]).link&&t.disconnectInput(n)}if(t.outputs)for(n=0;n<t.outputs.length;n++){var r;null!=(r=t.outputs[n]).links&&r.links.length&&t.disconnectOutput(n)}if(t.onRemoved&&t.onRemoved(),t.graph=null,this._version++,this.list_of_graphcanvas)for(n=0;n<this.list_of_graphcanvas.length;++n){var i=this.list_of_graphcanvas[n];i.selected_nodes[t.id]&&delete i.selected_nodes[t.id],i.node_dragged==t&&(i.node_dragged=null)}var o=this._nodes.indexOf(t);-1!=o&&this._nodes.splice(o,1),delete this._nodes_by_id[t.id],this.onNodeRemoved&&this.onNodeRemoved(t),this.sendActionToCanvas("checkPanels"),this.setDirtyCanvas(!0,!0),this.afterChange(),this.change(),this.updateExecutionOrder()}},LGraph.prototype.getNodeById=function(t){return null==t?null:this._nodes_by_id[t]},LGraph.prototype.findNodesByClass=function(t,e){(e=e||[]).length=0;for(var n=0,r=this._nodes.length;n<r;++n)this._nodes[n].constructor===t&&e.push(this._nodes[n]);return e},LGraph.prototype.findNodesByType=function(t,e){t=t.toLowerCase();(e=e||[]).length=0;for(var n=0,r=this._nodes.length;n<r;++n)this._nodes[n].type.toLowerCase()==t&&e.push(this._nodes[n]);return e},LGraph.prototype.findNodeByTitle=function(t){for(var e=0,n=this._nodes.length;e<n;++e)if(this._nodes[e].title==t)return this._nodes[e];return null},LGraph.prototype.findNodesByTitle=function(t){for(var e=[],n=0,r=this._nodes.length;n<r;++n)this._nodes[n].title==t&&e.push(this._nodes[n]);return e},LGraph.prototype.getNodeOnPos=function(t,e,n,r){for(var i=(n=n||this._nodes).length-1;i>=0;i--){var o=n[i];if(o.isPointInside(t,e,r))return o}return null},LGraph.prototype.getGroupOnPos=function(t,e){for(var n=this._groups.length-1;n>=0;n--){var r=this._groups[n];if(r.isPointInside(t,e,2,!0))return r}return null},LGraph.prototype.checkNodeTypes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t],n=LiteGraph.registered_node_types[e.type];if(e.constructor!=n){console.log("node being replaced by newer version: "+e.type);var r=LiteGraph.createNode(e.type);!0,this._nodes[t]=r,r.configure(e.serialize()),r.graph=this,this._nodes_by_id[r.id]=r,e.inputs&&(r.inputs=e.inputs.concat()),e.outputs&&(r.outputs=e.outputs.concat())}}this.updateExecutionOrder()},LGraph.prototype.onAction=function(t,e,n){this._input_nodes=this.findNodesByClass(LiteGraph.GraphInput,this._input_nodes);for(var r=0;r<this._input_nodes.length;++r){var i=this._input_nodes[r];if(i.properties.name==t){i.actionDo(t,e,n);break}}},LGraph.prototype.trigger=function(t,e){this.onTrigger&&this.onTrigger(t,e)},LGraph.prototype.addInput=function(t,e,n){this.inputs[t]||(this.beforeChange(),this.inputs[t]={name:t,type:e,value:n},this._version++,this.afterChange(),this.onInputAdded&&this.onInputAdded(t,e),this.onInputsOutputsChange&&this.onInputsOutputsChange())},LGraph.prototype.setInputData=function(t,e){var n=this.inputs[t];n&&(n.value=e)},LGraph.prototype.getInputData=function(t){var e=this.inputs[t];return e?e.value:null},LGraph.prototype.renameInput=function(t,e){if(e!=t){if(!this.inputs[t])return!1;if(this.inputs[e])return console.error("there is already one input with that name"),!1;this.inputs[e]=this.inputs[t],delete this.inputs[t],this._version++,this.onInputRenamed&&this.onInputRenamed(t,e),this.onInputsOutputsChange&&this.onInputsOutputsChange()}},LGraph.prototype.changeInputType=function(t,e){if(!this.inputs[t])return!1;this.inputs[t].type&&String(this.inputs[t].type).toLowerCase()==String(e).toLowerCase()||(this.inputs[t].type=e,this._version++,this.onInputTypeChanged&&this.onInputTypeChanged(t,e))},LGraph.prototype.removeInput=function(t){return!!this.inputs[t]&&(delete this.inputs[t],this._version++,this.onInputRemoved&&this.onInputRemoved(t),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0)},LGraph.prototype.addOutput=function(t,e,n){this.outputs[t]={name:t,type:e,value:n},this._version++,this.onOutputAdded&&this.onOutputAdded(t,e),this.onInputsOutputsChange&&this.onInputsOutputsChange()},LGraph.prototype.setOutputData=function(t,e){var n=this.outputs[t];n&&(n.value=e)},LGraph.prototype.getOutputData=function(t){var e=this.outputs[t];return e?e.value:null},LGraph.prototype.renameOutput=function(t,e){return!!this.outputs[t]&&(this.outputs[e]?(console.error("there is already one output with that name"),!1):(this.outputs[e]=this.outputs[t],delete this.outputs[t],this._version++,this.onOutputRenamed&&this.onOutputRenamed(t,e),void(this.onInputsOutputsChange&&this.onInputsOutputsChange())))},LGraph.prototype.changeOutputType=function(t,e){if(!this.outputs[t])return!1;this.outputs[t].type&&String(this.outputs[t].type).toLowerCase()==String(e).toLowerCase()||(this.outputs[t].type=e,this._version++,this.onOutputTypeChanged&&this.onOutputTypeChanged(t,e))},LGraph.prototype.removeOutput=function(t){return!!this.outputs[t]&&(delete this.outputs[t],this._version++,this.onOutputRemoved&&this.onOutputRemoved(t),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0)},LGraph.prototype.triggerInput=function(t,e){for(var n=this.findNodesByTitle(t),r=0;r<n.length;++r)n[r].onTrigger(e)},LGraph.prototype.setCallback=function(t,e){for(var n=this.findNodesByTitle(t),r=0;r<n.length;++r)n[r].setTrigger(e)},LGraph.prototype.beforeChange=function(t){this.onBeforeChange&&this.onBeforeChange(this,t),this.sendActionToCanvas("onBeforeChange",this)},LGraph.prototype.afterChange=function(t){this.onAfterChange&&this.onAfterChange(this,t),this.sendActionToCanvas("onAfterChange",this)},LGraph.prototype.connectionChange=function(t,e){this.updateExecutionOrder(),this.onConnectionChange&&this.onConnectionChange(t),this._version++,this.sendActionToCanvas("onConnectionChange")},LGraph.prototype.isLive=function(){if(!this.list_of_graphcanvas)return!1;for(var t=0;t<this.list_of_graphcanvas.length;++t){if(this.list_of_graphcanvas[t].live_mode)return!0}return!1},LGraph.prototype.clearTriggeredSlots=function(){for(var t in this.links){var e=this.links[t];e&&(e._last_time&&(e._last_time=0))}},LGraph.prototype.change=function(){LiteGraph.debug&&console.log("Graph changed"),this.sendActionToCanvas("setDirty",[!0,!0]),this.on_change&&this.on_change(this)},LGraph.prototype.setDirtyCanvas=function(t,e){this.sendActionToCanvas("setDirty",[t,e])},LGraph.prototype.removeLink=function(t){var e=this.links[t];if(e){var n=this.getNodeById(e.target_id);n&&n.disconnectInput(e.target_slot)}},LGraph.prototype.serialize=function(){for(var t=[],e=0,n=this._nodes.length;e<n;++e)t.push(this._nodes[e].serialize());var r=[];for(var e in this.links){var i=this.links[e];if(!i.serialize){console.warn("weird LLink bug, link info is not a LLink but a regular object");var o=new LLink;for(var a in i)o[a]=i[a];this.links[e]=o,i=o}r.push(i.serialize())}var s=[];for(e=0;e<this._groups.length;++e)s.push(this._groups[e].serialize());var l={last_node_id:this.last_node_id,last_link_id:this.last_link_id,nodes:t,links:r,groups:s,config:this.config,extra:this.extra,version:LiteGraph.VERSION};return this.onSerialize&&this.onSerialize(l),l},LGraph.prototype.configure=function(t,e){if(t){e||this.clear();var n=t.nodes;if(t.links&&t.links.constructor===Array){for(var r=[],i=0;i<t.links.length;++i){var o=t.links[i];if(o){var a=new LLink;a.configure(o),r[a.id]=a}else console.warn("serialized graph link data contains errors, skipping.")}t.links=r}for(var i in t)"nodes"!=i&&"groups"!=i&&(this[i]=t[i]);var s=!1;if(this._nodes=[],n){i=0;for(var l=n.length;i<l;++i){var u=n[i];(c=LiteGraph.createNode(u.type,u.title))||(LiteGraph.debug&&console.log("Node not found or has errors: "+u.type),(c=new LGraphNode).last_serialization=u,c.has_errors=!0,s=!0),c.id=u.id,this.add(c,!0)}for(i=0,l=n.length;i<l;++i){var c;u=n[i];(c=this.getNodeById(u.id))&&c.configure(u)}}if(this._groups.length=0,t.groups)for(i=0;i<t.groups.length;++i){var p=new LiteGraph.LGraphGroup;p.configure(t.groups[i]),this.add(p)}return this.updateExecutionOrder(),this.extra=t.extra||{},this.onConfigure&&this.onConfigure(t),this._version++,this.setDirtyCanvas(!0,!0),s}},LGraph.prototype.load=function(t,e){var n=this;if(t.constructor===File||t.constructor===Blob){var r=new FileReader;return r.addEventListener("load",(function(t){var r=JSON.parse(t.target.result);n.configure(r),e&&e()})),void r.readAsText(t)}var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(null),i.onload=function(t){if(200===i.status){var r=JSON.parse(i.response);n.configure(r),e&&e()}else console.error("Error loading graph:",i.status,i.response)},i.onerror=function(t){console.error("Error loading graph:",t)}},LGraph.prototype.onNodeTrace=function(t,e,n){},LLink.prototype.configure=function(t){t.constructor===Array?(this.id=t[0],this.origin_id=t[1],this.origin_slot=t[2],this.target_id=t[3],this.target_slot=t[4],this.type=t[5]):(this.id=t.id,this.type=t.type,this.origin_id=t.origin_id,this.origin_slot=t.origin_slot,this.target_id=t.target_id,this.target_slot=t.target_slot)},LLink.prototype.serialize=function(){return[this.id,this.origin_id,this.origin_slot,this.target_id,this.target_slot,this.type]},LiteGraph.LLink=LLink,global.LGraphNode=LiteGraph.LGraphNode=LGraphNode,LGraphNode.prototype._ctor=function(t){this.title=t||"Unnamed",this.size=[LiteGraph.NODE_WIDTH,60],this.graph=null,this._pos=new Float32Array(10,10),Object.defineProperty(this,"pos",{set:function(t){!t||t.length<2||(this._pos[0]=t[0],this._pos[1]=t[1])},get:function(){return this._pos},enumerable:!0}),LiteGraph.use_uuids?this.id=LiteGraph.uuidv4():this.id=-1,this.type=null,this.inputs=[],this.outputs=[],this.connections=[],this.properties={},this.properties_info=[],this.flags={}},LGraphNode.prototype.configure=function(t){for(var e in this.graph&&this.graph._version++,t)if("properties"!=e)null!=t[e]&&("object"==typeof t[e]?this[e]&&this[e].configure?this[e].configure(t[e]):this[e]=LiteGraph.cloneObject(t[e],this[e]):this[e]=t[e]);else for(var n in t.properties)this.properties[n]=t.properties[n],this.onPropertyChanged&&this.onPropertyChanged(n,t.properties[n]);if(t.title||(this.title=this.constructor.title),this.inputs)for(var r=0;r<this.inputs.length;++r){var i=this.inputs[r],o=this.graph?this.graph.links[i.link]:null;this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.INPUT,r,!0,o,i),this.onInputAdded&&this.onInputAdded(i)}if(this.outputs)for(r=0;r<this.outputs.length;++r){var a=this.outputs[r];if(a.links){for(e=0;e<a.links.length;++e){o=this.graph?this.graph.links[a.links[e]]:null;this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,r,!0,o,a)}this.onOutputAdded&&this.onOutputAdded(a)}}if(this.widgets){for(r=0;r<this.widgets.length;++r){var s=this.widgets[r];s&&(s.options&&s.options.property&&void 0!=this.properties[s.options.property]&&(s.value=JSON.parse(JSON.stringify(this.properties[s.options.property]))))}if(t.widgets_values)for(r=0;r<t.widgets_values.length;++r)this.widgets[r]&&(this.widgets[r].value=t.widgets_values[r])}this.onConfigure&&this.onConfigure(t)},LGraphNode.prototype.serialize=function(){var t={id:this.id,type:this.type,pos:this.pos,size:this.size,flags:LiteGraph.cloneObject(this.flags),order:this.order,mode:this.mode};if(this.constructor===LGraphNode&&this.last_serialization)return this.last_serialization;if(this.inputs&&(t.inputs=this.inputs),this.outputs){for(var e=0;e<this.outputs.length;e++)delete this.outputs[e]._data;t.outputs=this.outputs}if(this.title&&this.title!=this.constructor.title&&(t.title=this.title),this.properties&&(t.properties=LiteGraph.cloneObject(this.properties)),this.widgets&&this.serialize_widgets){t.widgets_values=[];for(e=0;e<this.widgets.length;++e)this.widgets[e]?t.widgets_values[e]=this.widgets[e].value:t.widgets_values[e]=null}return t.type||(t.type=this.constructor.type),this.color&&(t.color=this.color),this.bgcolor&&(t.bgcolor=this.bgcolor),this.boxcolor&&(t.boxcolor=this.boxcolor),this.shape&&(t.shape=this.shape),this.onSerialize&&this.onSerialize(t)&&console.warn("node onSerialize shouldnt return anything, data should be stored in the object pass in the first parameter"),t},LGraphNode.prototype.clone=function(){var t=LiteGraph.createNode(this.type);if(!t)return null;var e=LiteGraph.cloneObject(this.serialize());if(e.inputs)for(var n=0;n<e.inputs.length;++n)e.inputs[n].link=null;if(e.outputs)for(n=0;n<e.outputs.length;++n)e.outputs[n].links&&(e.outputs[n].links.length=0);return delete e.id,LiteGraph.use_uuids&&(e.id=LiteGraph.uuidv4()),t.configure(e),t},LGraphNode.prototype.toString=function(){return JSON.stringify(this.serialize())},LGraphNode.prototype.getTitle=function(){return this.title||this.constructor.title},LGraphNode.prototype.setProperty=function(t,e){if(this.properties||(this.properties={}),e!==this.properties[t]){var n=this.properties[t];if(this.properties[t]=e,this.onPropertyChanged&&!1===this.onPropertyChanged(t,e,n)&&(this.properties[t]=n),this.widgets)for(var r=0;r<this.widgets.length;++r){var i=this.widgets[r];if(i&&i.options.property==t){i.value=e;break}}}},LGraphNode.prototype.setOutputData=function(t,e){if(this.outputs&&!(-1==t||t>=this.outputs.length)){var n=this.outputs[t];if(n&&(n._data=e,this.outputs[t].links))for(var r=0;r<this.outputs[t].links.length;r++){var i=this.outputs[t].links[r],o=this.graph.links[i];o&&(o.data=e)}}},LGraphNode.prototype.setOutputDataType=function(t,e){if(this.outputs&&!(-1==t||t>=this.outputs.length)){var n=this.outputs[t];if(n&&(n.type=e,this.outputs[t].links))for(var r=0;r<this.outputs[t].links.length;r++){var i=this.outputs[t].links[r];this.graph.links[i].type=e}}},LGraphNode.prototype.getInputData=function(t,e){if(this.inputs&&!(t>=this.inputs.length||null==this.inputs[t].link)){var n=this.inputs[t].link,r=this.graph.links[n];if(!r)return null;if(!e)return r.data;var i=this.graph.getNodeById(r.origin_id);return i?(i.updateOutputData?i.updateOutputData(r.origin_slot):i.onExecute&&i.onExecute(),r.data):r.data}},LGraphNode.prototype.getInputDataType=function(t){if(!this.inputs)return null;if(t>=this.inputs.length||null==this.inputs[t].link)return null;var e=this.inputs[t].link,n=this.graph.links[e];if(!n)return null;var r=this.graph.getNodeById(n.origin_id);if(!r)return n.type;var i=r.outputs[n.origin_slot];return i?i.type:null},LGraphNode.prototype.getInputDataByName=function(t,e){var n=this.findInputSlot(t);return-1==n?null:this.getInputData(n,e)},LGraphNode.prototype.isInputConnected=function(t){return!!this.inputs&&(t<this.inputs.length&&null!=this.inputs[t].link)},LGraphNode.prototype.getInputInfo=function(t){return this.inputs&&t<this.inputs.length?this.inputs[t]:null},LGraphNode.prototype.getInputLink=function(t){if(!this.inputs)return null;if(t<this.inputs.length){var e=this.inputs[t];return this.graph.links[e.link]}return null},LGraphNode.prototype.getInputNode=function(t){if(!this.inputs)return null;if(t>=this.inputs.length)return null;var e=this.inputs[t];if(!e||null===e.link)return null;var n=this.graph.links[e.link];return n?this.graph.getNodeById(n.origin_id):null},LGraphNode.prototype.getInputOrProperty=function(t){if(!this.inputs||!this.inputs.length)return this.properties?this.properties[t]:null;for(var e=0,n=this.inputs.length;e<n;++e){var r=this.inputs[e];if(t==r.name&&null!=r.link){var i=this.graph.links[r.link];if(i)return i.data}}return this.properties[t]},LGraphNode.prototype.getOutputData=function(t){return this.outputs?t>=this.outputs.length?null:this.outputs[t]._data:null},LGraphNode.prototype.getOutputInfo=function(t){return this.outputs&&t<this.outputs.length?this.outputs[t]:null},LGraphNode.prototype.isOutputConnected=function(t){return!!this.outputs&&(t<this.outputs.length&&this.outputs[t].links&&this.outputs[t].links.length)},LGraphNode.prototype.isAnyOutputConnected=function(){if(!this.outputs)return!1;for(var t=0;t<this.outputs.length;++t)if(this.outputs[t].links&&this.outputs[t].links.length)return!0;return!1},LGraphNode.prototype.getOutputNodes=function(t){if(!this.outputs||0==this.outputs.length)return null;if(t>=this.outputs.length)return null;var e=this.outputs[t];if(!e.links||0==e.links.length)return null;for(var n=[],r=0;r<e.links.length;r++){var i=e.links[r],o=this.graph.links[i];if(o){var a=this.graph.getNodeById(o.target_id);a&&n.push(a)}}return n},LGraphNode.prototype.addOnTriggerInput=function(){var t=this.findInputSlot("onTrigger");if(-1==t){this.addInput("onTrigger",LiteGraph.EVENT,{optional:!0,nameLocked:!0});return this.findInputSlot("onTrigger")}return t},LGraphNode.prototype.addOnExecutedOutput=function(){var t=this.findOutputSlot("onExecuted");if(-1==t){this.addOutput("onExecuted",LiteGraph.ACTION,{optional:!0,nameLocked:!0});return this.findOutputSlot("onExecuted")}return t},LGraphNode.prototype.onAfterExecuteNode=function(t,e){var n=this.findOutputSlot("onExecuted");-1!=n&&this.triggerSlot(n,t,null,e)},LGraphNode.prototype.changeMode=function(t){switch(t){case LiteGraph.ON_EVENT:break;case LiteGraph.ON_TRIGGER:this.addOnTriggerInput(),this.addOnExecutedOutput();break;case LiteGraph.NEVER:case LiteGraph.ALWAYS:case LiteGraph.ON_REQUEST:break;default:return!1}return this.mode=t,!0},LGraphNode.prototype.executePendingActions=function(){if(this._waiting_actions&&this._waiting_actions.length){for(var t=0;t<this._waiting_actions.length;++t){var e=this._waiting_actions[t];this.onAction(e[0],e[1],e[2],e[3],e[4])}this._waiting_actions.length=0}},LGraphNode.prototype.doExecute=function(t,e){e=e||{},this.onExecute&&(e.action_call||(e.action_call=this.id+"_exec_"+Math.floor(9999*Math.random())),this.graph.nodes_executing[this.id]=!0,this.onExecute(t,e),this.graph.nodes_executing[this.id]=!1,this.exec_version=this.graph.iteration,e&&e.action_call&&(this.action_call=e.action_call,this.graph.nodes_executedAction[this.id]=e.action_call)),this.execute_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(t,e)},LGraphNode.prototype.actionDo=function(t,e,n,r){n=n||{},this.onAction&&(n.action_call||(n.action_call=this.id+"_"+(t||"action")+"_"+Math.floor(9999*Math.random())),this.graph.nodes_actioning[this.id]=t||"actioning",this.onAction(t,e,n,r),this.graph.nodes_actioning[this.id]=!1,n&&n.action_call&&(this.action_call=n.action_call,this.graph.nodes_executedAction[this.id]=n.action_call)),this.action_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(e,n)},LGraphNode.prototype.trigger=function(t,e,n){if(this.outputs&&this.outputs.length){this.graph&&(this.graph._last_trigger_time=LiteGraph.getTime());for(var r=0;r<this.outputs.length;++r){var i=this.outputs[r];!i||i.type!==LiteGraph.EVENT||t&&i.name!=t||this.triggerSlot(r,e,null,n)}}},LGraphNode.prototype.triggerSlot=function(t,e,n,r){if(r=r||{},this.outputs)if(null!=t){t.constructor!==Number&&console.warn("slot must be a number, use node.trigger('name') if you want to use a string");var i=this.outputs[t];if(i){var o=i.links;if(o&&o.length){this.graph&&(this.graph._last_trigger_time=LiteGraph.getTime());for(var a=0;a<o.length;++a){var s=o[a];if(null==n||n==s){var l=this.graph.links[o[a]];if(l){l._last_time=LiteGraph.getTime();var u=this.graph.getNodeById(l.target_id);if(u){var c=u.inputs[l.target_slot];if(u.mode===LiteGraph.ON_TRIGGER)r.action_call||(r.action_call=this.id+"_trigg_"+Math.floor(9999*Math.random())),u.onExecute&&u.doExecute(e,r);else if(u.onAction){r.action_call||(r.action_call=this.id+"_act_"+Math.floor(9999*Math.random()));c=u.inputs[l.target_slot];LiteGraph.use_deferred_actions&&u.onExecute?(u._waiting_actions||(u._waiting_actions=[]),u._waiting_actions.push([c.name,e,r,l.target_slot])):u.actionDo(c.name,e,r,l.target_slot)}}}}}}}}else console.error("slot must be a number")},LGraphNode.prototype.clearTriggeredSlot=function(t,e){if(this.outputs){var n=this.outputs[t];if(n){var r=n.links;if(r&&r.length)for(var i=0;i<r.length;++i){var o=r[i];if(null==e||e==o){var a=this.graph.links[r[i]];a&&(a._last_time=0)}}}}},LGraphNode.prototype.setSize=function(t){this.size=t,this.onResize&&this.onResize(this.size)},LGraphNode.prototype.addProperty=function(t,e,n,r){var i={name:t,type:n,default_value:e};if(r)for(var o in r)i[o]=r[o];return this.properties_info||(this.properties_info=[]),this.properties_info.push(i),this.properties||(this.properties={}),this.properties[t]=e,i},LGraphNode.prototype.addOutput=function(t,e,n){var r={name:t,type:e,links:null};if(n)for(var i in n)r[i]=n[i];return this.outputs||(this.outputs=[]),this.outputs.push(r),this.onOutputAdded&&this.onOutputAdded(r),LiteGraph.auto_load_slot_types&&LiteGraph.registerNodeAndSlotType(this,e,!0),this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0),r},LGraphNode.prototype.addOutputs=function(t){for(var e=0;e<t.length;++e){var n=t[e],r={name:n[0],type:n[1],link:null};if(t[2])for(var i in n[2])r[i]=n[2][i];this.outputs||(this.outputs=[]),this.outputs.push(r),this.onOutputAdded&&this.onOutputAdded(r),LiteGraph.auto_load_slot_types&&LiteGraph.registerNodeAndSlotType(this,n[1],!0)}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.removeOutput=function(t){this.disconnectOutput(t),this.outputs.splice(t,1);for(var e=t;e<this.outputs.length;++e)if(this.outputs[e]&&this.outputs[e].links)for(var n=this.outputs[e].links,r=0;r<n.length;++r){var i=this.graph.links[n[r]];i&&(i.origin_slot-=1)}this.setSize(this.computeSize()),this.onOutputRemoved&&this.onOutputRemoved(t),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.addInput=function(t,e,n){var r={name:t,type:e=e||0,link:null};if(n)for(var i in n)r[i]=n[i];return this.inputs||(this.inputs=[]),this.inputs.push(r),this.setSize(this.computeSize()),this.onInputAdded&&this.onInputAdded(r),LiteGraph.registerNodeAndSlotType(this,e),this.setDirtyCanvas(!0,!0),r},LGraphNode.prototype.addInputs=function(t){for(var e=0;e<t.length;++e){var n=t[e],r={name:n[0],type:n[1],link:null};if(t[2])for(var i in n[2])r[i]=n[2][i];this.inputs||(this.inputs=[]),this.inputs.push(r),this.onInputAdded&&this.onInputAdded(r),LiteGraph.registerNodeAndSlotType(this,n[1])}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.removeInput=function(t){this.disconnectInput(t);for(var e=this.inputs.splice(t,1),n=t;n<this.inputs.length;++n)if(this.inputs[n]){var r=this.graph.links[this.inputs[n].link];r&&(r.target_slot-=1)}this.setSize(this.computeSize()),this.onInputRemoved&&this.onInputRemoved(t,e[0]),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.addConnection=function(t,e,n,r){var i={name:t,type:e,pos:n,direction:r,links:null};return this.connections.push(i),i},LGraphNode.prototype.computeSize=function(t){if(this.constructor.size)return this.constructor.size.concat();var e=Math.max(this.inputs?this.inputs.length:1,this.outputs?this.outputs.length:1),n=t||new Float32Array([0,0]);e=Math.max(e,1);var r=LiteGraph.NODE_TEXT_SIZE,i=h(this.title),o=0,a=0;if(this.inputs)for(var s=0,l=this.inputs.length;s<l;++s){var u=this.inputs[s];o<(c=h(u.label||u.name||""))&&(o=c)}if(this.outputs)for(s=0,l=this.outputs.length;s<l;++s){var c,p=this.outputs[s];a<(c=h(p.label||p.name||""))&&(a=c)}n[0]=Math.max(o+a+10,i),n[0]=Math.max(n[0],LiteGraph.NODE_WIDTH),this.widgets&&this.widgets.length&&(n[0]=Math.max(n[0],1.5*LiteGraph.NODE_WIDTH)),n[1]=(this.constructor.slot_start_y||0)+e*LiteGraph.NODE_SLOT_HEIGHT;var d=0;if(this.widgets&&this.widgets.length){for(s=0,l=this.widgets.length;s<l;++s)this.widgets[s].computeSize?d+=this.widgets[s].computeSize(n[0])[1]+4:d+=LiteGraph.NODE_WIDGET_HEIGHT+4;d+=8}function h(t){return t?r*t.length*.6:0}return this.widgets_up?n[1]=Math.max(n[1],d):null!=this.widgets_start_y?n[1]=Math.max(n[1],d+this.widgets_start_y):n[1]+=d,this.constructor.min_height&&n[1]<this.constructor.min_height&&(n[1]=this.constructor.min_height),n[1]+=6,n},LGraphNode.prototype.getPropertyInfo=function(t){var e=null;if(this.properties_info)for(var n=0;n<this.properties_info.length;++n)if(this.properties_info[n].name==t){e=this.properties_info[n];break}return this.constructor["@"+t]&&(e=this.constructor["@"+t]),this.constructor.widgets_info&&this.constructor.widgets_info[t]&&(e=this.constructor.widgets_info[t]),!e&&this.onGetPropertyInfo&&(e=this.onGetPropertyInfo(t)),e||(e={}),e.type||(e.type=typeof this.properties[t]),"combo"==e.widget&&(e.type="enum"),e},LGraphNode.prototype.addWidget=function(t,e,n,r,i){this.widgets||(this.widgets=[]),!i&&r&&r.constructor===Object&&(i=r,r=null),i&&i.constructor===String&&(i={property:i}),r&&r.constructor===String&&(i||(i={}),i.property=r,r=null),r&&r.constructor!==Function&&(console.warn("addWidget: callback must be a function"),r=null);var o={type:t.toLowerCase(),name:e,value:n,callback:r,options:i||{}};if(void 0!==o.options.y&&(o.y=o.options.y),r||o.options.callback||o.options.property||console.warn("LiteGraph addWidget(...) without a callback or property assigned"),"combo"==t&&!o.options.values)throw"LiteGraph addWidget('combo',...) requires to pass values in options: { values:['red','blue'] }";return this.widgets.push(o),this.setSize(this.computeSize()),o},LGraphNode.prototype.addCustomWidget=function(t){return this.widgets||(this.widgets=[]),this.widgets.push(t),t},LGraphNode.prototype.getBounding=function(t,e){t=t||new Float32Array(4);const n=this.pos,r=this.flags.collapsed,i=this.size;let o=0,a=1,s=0,l=0;return e&&(o=4,a=6+o,s=4,l=5+s),t[0]=n[0]-o,t[1]=n[1]-LiteGraph.NODE_TITLE_HEIGHT-s,t[2]=r?(this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH)+a:i[0]+a,t[3]=r?LiteGraph.NODE_TITLE_HEIGHT+l:i[1]+LiteGraph.NODE_TITLE_HEIGHT+l,this.onBounding&&this.onBounding(t),t},LGraphNode.prototype.isPointInside=function(t,e,n,r){n=n||0;var i=this.graph&&this.graph.isLive()?0:LiteGraph.NODE_TITLE_HEIGHT;if(r&&(i=0),this.flags&&this.flags.collapsed){if(isInsideRectangle(t,e,this.pos[0]-n,this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT-n,(this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH)+2*n,LiteGraph.NODE_TITLE_HEIGHT+2*n))return!0}else if(this.pos[0]-4-n<t&&this.pos[0]+this.size[0]+4+n>t&&this.pos[1]-i-n<e&&this.pos[1]+this.size[1]+n>e)return!0;return!1},LGraphNode.prototype.getSlotInPosition=function(t,e){var n=new Float32Array(2);if(this.inputs)for(var r=0,i=this.inputs.length;r<i;++r){var o=this.inputs[r];if(this.getConnectionPos(!0,r,n),isInsideRectangle(t,e,n[0]-10,n[1]-5,20,10))return{input:o,slot:r,link_pos:n}}if(this.outputs)for(r=0,i=this.outputs.length;r<i;++r){var a=this.outputs[r];if(this.getConnectionPos(!1,r,n),isInsideRectangle(t,e,n[0]-10,n[1]-5,20,10))return{output:a,slot:r,link_pos:n}}return null},LGraphNode.prototype.findInputSlot=function(t,e){if(!this.inputs)return-1;for(var n=0,r=this.inputs.length;n<r;++n)if(t==this.inputs[n].name)return e?this.inputs[n]:n;return-1},LGraphNode.prototype.findOutputSlot=function(t,e){if(e=e||!1,!this.outputs)return-1;for(var n=0,r=this.outputs.length;n<r;++n)if(t==this.outputs[n].name)return e?this.outputs[n]:n;return-1},LGraphNode.prototype.findInputSlotFree=function(t){t=t||{};var e=Object.assign({returnObj:!1,typesNotAccepted:[]},t);if(!this.inputs)return-1;for(var n=0,r=this.inputs.length;n<r;++n)if((!this.inputs[n].link||null==this.inputs[n].link)&&!(e.typesNotAccepted&&e.typesNotAccepted.includes&&e.typesNotAccepted.includes(this.inputs[n].type)))return e.returnObj?this.inputs[n]:n;return-1},LGraphNode.prototype.findOutputSlotFree=function(t){t=t||{};var e=Object.assign({returnObj:!1,typesNotAccepted:[]},t);if(!this.outputs)return-1;for(var n=0,r=this.outputs.length;n<r;++n)if((!this.outputs[n].links||null==this.outputs[n].links)&&!(e.typesNotAccepted&&e.typesNotAccepted.includes&&e.typesNotAccepted.includes(this.outputs[n].type)))return e.returnObj?this.outputs[n]:n;return-1},LGraphNode.prototype.findInputSlotByType=function(t,e,n,r){return this.findSlotByType(!0,t,e,n,r)},LGraphNode.prototype.findOutputSlotByType=function(t,e,n,r){return this.findSlotByType(!1,t,e,n,r)},LGraphNode.prototype.findSlotByType=function(t,e,n,r,i){n=n||!1,r=r||!1,i=i||!1;var o=(t=t||!1)?this.inputs:this.outputs;if(!o)return-1;""!=e&&"*"!=e||(e=0);for(var a=0,s=o.length;a<s;++a){var l=(e+"").toLowerCase().split(",");p=((p="0"==o[a].type||"*"==o[a].type?"0":o[a].type)+"").toLowerCase().split(",");for(var u=0;u<l.length;u++)for(var c=0;c<p.length;c++)if("_event_"==l[u]&&(l[u]=LiteGraph.EVENT),"_event_"==p[u]&&(p[u]=LiteGraph.EVENT),"*"==l[u]&&(l[u]=0),"*"==p[u]&&(p[u]=0),l[u]==p[c]){if(r&&o[a].links&&null!==o[a].links)continue;return n?o[a]:a}}if(r&&!i)for(a=0,s=o.length;a<s;++a){var p;l=(e+"").toLowerCase().split(",");p=((p="0"==o[a].type||"*"==o[a].type?"0":o[a].type)+"").toLowerCase().split(",");for(u=0;u<l.length;u++)for(c=0;c<p.length;c++)if("*"==l[u]&&(l[u]=0),"*"==p[u]&&(p[u]=0),l[u]==p[c])return n?o[a]:a}return-1},LGraphNode.prototype.connectByType=function(t,e,n,r){r=r||{};var i,o=Object.assign({createEventInCase:!0,firstFreeIfOutputGeneralInCase:!0,generalTypeInCase:!0},r);return e&&e.constructor===Number&&(e=this.graph.getNodeById(e)),(i=e.findInputSlotByType(n,!1,!0))>=0&&null!==i?this.connect(t,e,i):o.createEventInCase&&n==LiteGraph.EVENT?this.connect(t,e,-1):o.generalTypeInCase&&(i=e.findInputSlotByType(0,!1,!0,!0))>=0||o.firstFreeIfOutputGeneralInCase&&(0==n||"*"==n||""==n)&&(i=e.findInputSlotFree({typesNotAccepted:[LiteGraph.EVENT]}))>=0?this.connect(t,e,i):(console.debug("no way to connect type: ",n," to targetNODE ",e),null)},LGraphNode.prototype.connectByTypeOutput=function(t,e,n,r){r=r||{};var i=Object.assign({createEventInCase:!0,firstFreeIfInputGeneralInCase:!0,generalTypeInCase:!0},r);if(e&&e.constructor===Number&&(e=this.graph.getNodeById(e)),(o=e.findOutputSlotByType(n,!1,!0))>=0&&null!==o)return e.connect(o,this,t);if(i.generalTypeInCase&&(o=e.findOutputSlotByType(0,!1,!0,!0))>=0)return e.connect(o,this,t);if(i.createEventInCase&&n==LiteGraph.EVENT&&LiteGraph.do_add_triggers_slots){var o=e.addOnExecutedOutput();return e.connect(o,this,t)}return i.firstFreeIfInputGeneralInCase&&(0==n||"*"==n||""==n)&&(o=e.findOutputSlotFree({typesNotAccepted:[LiteGraph.EVENT]}))>=0?e.connect(o,this,t):(console.debug("no way to connect byOUT type: ",n," to sourceNODE ",e),null)},LGraphNode.prototype.connect=function(t,e,n){if(n=n||0,!this.graph)return console.log("Connect: Error, node doesn't belong to any graph. Nodes must be added first to a graph before connecting them."),null;if(t.constructor===String){if(-1==(t=this.findOutputSlot(t)))return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+t),null}else if(!this.outputs||t>=this.outputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),null;if(e&&e.constructor===Number&&(e=this.graph.getNodeById(e)),!e)throw"target node is null";if(e==this)return null;if(n.constructor===String){if(-1==(n=e.findInputSlot(n)))return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+n),null}else if(n===LiteGraph.EVENT){if(!LiteGraph.do_add_triggers_slots)return null;e.changeMode(LiteGraph.ON_TRIGGER),n=e.findInputSlot("onTrigger")}else if(!e.inputs||n>=e.inputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),null;var r=!1,i=e.inputs[n],o=null,a=this.outputs[t];if(!this.outputs[t])return null;if(e.onBeforeConnectInput&&(n=e.onBeforeConnectInput(n)),!1===n||null===n||!LiteGraph.isValidConnection(a.type,i.type))return this.setDirtyCanvas(!1,!0),r&&this.graph.connectionChange(this,o),null;if(e.onConnectInput&&!1===e.onConnectInput(n,a.type,a,this,t))return null;if(this.onConnectOutput&&!1===this.onConnectOutput(t,i.type,i,e,n))return null;if(e.inputs[n]&&null!=e.inputs[n].link&&(this.graph.beforeChange(),e.disconnectInput(n,{doProcessChange:!1}),r=!0),null!==a.links&&a.links.length&&a.type===LiteGraph.EVENT)LiteGraph.allow_multi_output_for_events||(this.graph.beforeChange(),this.disconnectOutput(t,!1,{doProcessChange:!1}),r=!0);return o=new LLink(LiteGraph.use_uuids?LiteGraph.uuidv4():++this.graph.last_link_id,i.type||a.type,this.id,t,e.id,n),this.graph.links[o.id]=o,null==a.links&&(a.links=[]),a.links.push(o.id),e.inputs[n].link=o.id,this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,t,!0,o,a),e.onConnectionsChange&&e.onConnectionsChange(LiteGraph.INPUT,n,!0,o,i),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.INPUT,e,n,this,t),this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,t,e,n)),this.setDirtyCanvas(!1,!0),this.graph.afterChange(),this.graph.connectionChange(this,o),o},LGraphNode.prototype.disconnectOutput=function(t,e){if(t.constructor===String){if(-1==(t=this.findOutputSlot(t)))return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+t),!1}else if(!this.outputs||t>=this.outputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),!1;var n=this.outputs[t];if(!n||!n.links||0==n.links.length)return!1;if(e){if(e.constructor===Number&&(e=this.graph.getNodeById(e)),!e)throw"Target Node not found";for(var r=0,i=n.links.length;r<i;r++){var o=n.links[r];if((a=this.graph.links[o]).target_id==e.id){n.links.splice(r,1),(s=e.inputs[a.target_slot]).link=null,delete this.graph.links[o],this.graph&&this.graph._version++,e.onConnectionsChange&&e.onConnectionsChange(LiteGraph.INPUT,a.target_slot,!1,a,s),this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,t,!1,a,n),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,t),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,t),this.graph.onNodeConnectionChange(LiteGraph.INPUT,e,a.target_slot));break}}}else{for(r=0,i=n.links.length;r<i;r++){var a;o=n.links[r];if(a=this.graph.links[o]){e=this.graph.getNodeById(a.target_id);var s=null;this.graph&&this.graph._version++,e&&((s=e.inputs[a.target_slot]).link=null,e.onConnectionsChange&&e.onConnectionsChange(LiteGraph.INPUT,a.target_slot,!1,a,s),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(LiteGraph.INPUT,e,a.target_slot)),delete this.graph.links[o],this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,t,!1,a,n),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,t),this.graph.onNodeConnectionChange(LiteGraph.INPUT,e,a.target_slot))}}n.links=null}return this.setDirtyCanvas(!1,!0),this.graph.connectionChange(this),!0},LGraphNode.prototype.disconnectInput=function(t){if(t.constructor===String){if(-1==(t=this.findInputSlot(t)))return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+t),!1}else if(!this.inputs||t>=this.inputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),!1;var e=this.inputs[t];if(!e)return!1;var n=this.inputs[t].link;if(null!=n){this.inputs[t].link=null;var r=this.graph.links[n];if(r){var i=this.graph.getNodeById(r.origin_id);if(!i)return!1;var o=i.outputs[r.origin_slot];if(!o||!o.links||0==o.links.length)return!1;for(var a=0,s=o.links.length;a<s;a++)if(o.links[a]==n){o.links.splice(a,1);break}delete this.graph.links[n],this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.INPUT,t,!1,r,e),i.onConnectionsChange&&i.onConnectionsChange(LiteGraph.OUTPUT,a,!1,r,o),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,i,a),this.graph.onNodeConnectionChange(LiteGraph.INPUT,this,t))}}return this.setDirtyCanvas(!1,!0),this.graph&&this.graph.connectionChange(this),!0},LGraphNode.prototype.getConnectionPos=function(t,e,n){n=n||new Float32Array(2);var r=0;t&&this.inputs&&(r=this.inputs.length),!t&&this.outputs&&(r=this.outputs.length);var i=.5*LiteGraph.NODE_SLOT_HEIGHT;if(this.flags.collapsed){var o=this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH;return this.horizontal?(n[0]=this.pos[0]+.5*o,n[1]=t?this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT:this.pos[1]):(n[0]=t?this.pos[0]:this.pos[0]+o,n[1]=this.pos[1]-.5*LiteGraph.NODE_TITLE_HEIGHT),n}return t&&-1==e?(n[0]=this.pos[0]+.5*LiteGraph.NODE_TITLE_HEIGHT,n[1]=this.pos[1]+.5*LiteGraph.NODE_TITLE_HEIGHT,n):t&&r>e&&this.inputs[e].pos?(n[0]=this.pos[0]+this.inputs[e].pos[0],n[1]=this.pos[1]+this.inputs[e].pos[1],n):!t&&r>e&&this.outputs[e].pos?(n[0]=this.pos[0]+this.outputs[e].pos[0],n[1]=this.pos[1]+this.outputs[e].pos[1],n):this.horizontal?(n[0]=this.pos[0]+(e+.5)*(this.size[0]/r),n[1]=t?this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT:this.pos[1]+this.size[1],n):(n[0]=t?this.pos[0]+i:this.pos[0]+this.size[0]+1-i,n[1]=this.pos[1]+(e+.7)*LiteGraph.NODE_SLOT_HEIGHT+(this.constructor.slot_start_y||0),n)},LGraphNode.prototype.alignToGrid=function(){this.pos[0]=LiteGraph.CANVAS_GRID_SIZE*Math.round(this.pos[0]/LiteGraph.CANVAS_GRID_SIZE),this.pos[1]=LiteGraph.CANVAS_GRID_SIZE*Math.round(this.pos[1]/LiteGraph.CANVAS_GRID_SIZE)},LGraphNode.prototype.trace=function(t){this.console||(this.console=[]),this.console.push(t),this.console.length>LGraphNode.MAX_CONSOLE&&this.console.shift(),this.graph.onNodeTrace&&this.graph.onNodeTrace(this,t)},LGraphNode.prototype.setDirtyCanvas=function(t,e){this.graph&&this.graph.sendActionToCanvas("setDirty",[t,e])},LGraphNode.prototype.loadImage=function(t){var e=new Image;e.src=LiteGraph.node_images_path+t,e.ready=!1;var n=this;return e.onload=function(){this.ready=!0,n.setDirtyCanvas(!0)},e},LGraphNode.prototype.captureInput=function(t){if(this.graph&&this.graph.list_of_graphcanvas)for(var e=this.graph.list_of_graphcanvas,n=0;n<e.length;++n){var r=e[n];(t||r.node_capturing_input==this)&&(r.node_capturing_input=t?this:null)}},LGraphNode.prototype.collapse=function(t){this.graph._version++,(!1!==this.constructor.collapsable||t)&&(this.flags.collapsed?this.flags.collapsed=!1:this.flags.collapsed=!0,this.setDirtyCanvas(!0,!0))},LGraphNode.prototype.pin=function(t){this.graph._version++,this.flags.pinned=void 0===t?!this.flags.pinned:t},LGraphNode.prototype.localToScreen=function(t,e,n){return[(t+this.pos[0])*n.scale+n.offset[0],(e+this.pos[1])*n.scale+n.offset[1]]},global.LGraphGroup=LiteGraph.LGraphGroup=LGraphGroup,LGraphGroup.prototype._ctor=function(t){this.title=t||"Group",this.font_size=24,this.color=LGraphCanvas.node_colors.pale_blue?LGraphCanvas.node_colors.pale_blue.groupcolor:"#AAA",this._bounding=new Float32Array([10,10,140,80]),this._pos=this._bounding.subarray(0,2),this._size=this._bounding.subarray(2,4),this._nodes=[],this.graph=null,Object.defineProperty(this,"pos",{set:function(t){!t||t.length<2||(this._pos[0]=t[0],this._pos[1]=t[1])},get:function(){return this._pos},enumerable:!0}),Object.defineProperty(this,"size",{set:function(t){!t||t.length<2||(this._size[0]=Math.max(140,t[0]),this._size[1]=Math.max(80,t[1]))},get:function(){return this._size},enumerable:!0})},LGraphGroup.prototype.configure=function(t){this.title=t.title,this._bounding.set(t.bounding),this.color=t.color,this.font_size=t.font_size},LGraphGroup.prototype.serialize=function(){var t=this._bounding;return{title:this.title,bounding:[Math.round(t[0]),Math.round(t[1]),Math.round(t[2]),Math.round(t[3])],color:this.color,font_size:this.font_size}},LGraphGroup.prototype.move=function(t,e,n){if(this._pos[0]+=t,this._pos[1]+=e,!n)for(var r=0;r<this._nodes.length;++r){var i=this._nodes[r];i.pos[0]+=t,i.pos[1]+=e}},LGraphGroup.prototype.recomputeInsideNodes=function(){this._nodes.length=0;for(var t=this.graph._nodes,e=new Float32Array(4),n=0;n<t.length;++n){var r=t[n];r.getBounding(e),overlapBounding(this._bounding,e)&&this._nodes.push(r)}},LGraphGroup.prototype.isPointInside=LGraphNode.prototype.isPointInside,LGraphGroup.prototype.setDirtyCanvas=LGraphNode.prototype.setDirtyCanvas,LiteGraph.DragAndScale=DragAndScale,DragAndScale.prototype.bindEvents=function(t){this.last_mouse=new Float32Array(2),this._binded_mouse_callback=this.onMouse.bind(this),LiteGraph.pointerListenerAdd(t,"down",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(t,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(t,"up",this._binded_mouse_callback),t.addEventListener("mousewheel",this._binded_mouse_callback,!1),t.addEventListener("wheel",this._binded_mouse_callback,!1)},DragAndScale.prototype.computeVisibleArea=function(t){if(this.element){var e=this.element.width,n=this.element.height,r=-this.offset[0],i=-this.offset[1];t&&(r+=t[0]/this.scale,i+=t[1]/this.scale,e=t[2],n=t[3]);var o=r+e/this.scale,a=i+n/this.scale;this.visible_area[0]=r,this.visible_area[1]=i,this.visible_area[2]=o-r,this.visible_area[3]=a-i}else this.visible_area[0]=this.visible_area[1]=this.visible_area[2]=this.visible_area[3]=0},DragAndScale.prototype.onMouse=function(t){if(this.enabled){var e=this.element,n=e.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top;t.canvasx=r,t.canvasy=i,t.dragging=this.dragging;var o=!this.viewport||this.viewport&&r>=this.viewport[0]&&r<this.viewport[0]+this.viewport[2]&&i>=this.viewport[1]&&i<this.viewport[1]+this.viewport[3],a=!1;if(this.onmouse&&(a=this.onmouse(t)),t.type==LiteGraph.pointerevents_method+"down"&&o)this.dragging=!0,LiteGraph.pointerListenerRemove(e,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(document,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(document,"up",this._binded_mouse_callback);else if(t.type==LiteGraph.pointerevents_method+"move"){if(!a){var s=r-this.last_mouse[0],l=i-this.last_mouse[1];this.dragging&&this.mouseDrag(s,l)}}else t.type==LiteGraph.pointerevents_method+"up"?(this.dragging=!1,LiteGraph.pointerListenerRemove(document,"move",this._binded_mouse_callback),LiteGraph.pointerListenerRemove(document,"up",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(e,"move",this._binded_mouse_callback)):!o||"mousewheel"!=t.type&&"wheel"!=t.type&&"DOMMouseScroll"!=t.type||(t.eventType="mousewheel","wheel"==t.type?t.wheel=-t.deltaY:t.wheel=null!=t.wheelDeltaY?t.wheelDeltaY:-60*t.detail,t.delta=t.wheelDelta?t.wheelDelta/40:t.deltaY?-t.deltaY/3:0,this.changeDeltaScale(1+.05*t.delta));return this.last_mouse[0]=r,this.last_mouse[1]=i,o?(t.preventDefault(),t.stopPropagation(),!1):void 0}},DragAndScale.prototype.toCanvasContext=function(t){t.scale(this.scale,this.scale),t.translate(this.offset[0],this.offset[1])},DragAndScale.prototype.convertOffsetToCanvas=function(t){return[(t[0]+this.offset[0])*this.scale,(t[1]+this.offset[1])*this.scale]},DragAndScale.prototype.convertCanvasToOffset=function(t,e){return(e=e||[0,0])[0]=t[0]/this.scale-this.offset[0],e[1]=t[1]/this.scale-this.offset[1],e},DragAndScale.prototype.mouseDrag=function(t,e){this.offset[0]+=t/this.scale,this.offset[1]+=e/this.scale,this.onredraw&&this.onredraw(this)},DragAndScale.prototype.changeScale=function(t,e){if(t<this.min_scale?t=this.min_scale:t>this.max_scale&&(t=this.max_scale),t!=this.scale&&this.element){var n=this.element.getBoundingClientRect();if(n){e=e||[.5*n.width,.5*n.height];var r=this.convertCanvasToOffset(e);this.scale=t,Math.abs(this.scale-1)<.01&&(this.scale=1);var i=this.convertCanvasToOffset(e),o=[i[0]-r[0],i[1]-r[1]];this.offset[0]+=o[0],this.offset[1]+=o[1],this.onredraw&&this.onredraw(this)}}},DragAndScale.prototype.changeDeltaScale=function(t,e){this.changeScale(this.scale*t,e)},DragAndScale.prototype.reset=function(){this.scale=1,this.offset[0]=0,this.offset[1]=0},global.LGraphCanvas=LiteGraph.LGraphCanvas=LGraphCanvas,LGraphCanvas.DEFAULT_BACKGROUND_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQBJREFUeNrs1rEKwjAUhlETUkj3vP9rdmr1Ysammk2w5wdxuLgcMHyptfawuZX4pJSWZTnfnu/lnIe/jNNxHHGNn//HNbbv+4dr6V+11uF527arU7+u63qfa/bnmh8sWLBgwYJlqRf8MEptXPBXJXa37BSl3ixYsGDBMliwFLyCV/DeLIMFCxYsWLBMwSt4Be/NggXLYMGCBUvBK3iNruC9WbBgwYJlsGApeAWv4L1ZBgsWLFiwYJmCV/AK3psFC5bBggULloJX8BpdwXuzYMGCBctgwVLwCl7Be7MMFixYsGDBsu8FH1FaSmExVfAxBa/gvVmwYMGCZbBg/W4vAQYA5tRF9QYlv/QAAAAASUVORK5CYII=",LGraphCanvas.link_type_colors={"-1":LiteGraph.EVENT_LINK_COLOR,number:"#AAA",node:"#DCA"},LGraphCanvas.gradients={},LGraphCanvas.prototype.clear=function(){this.frame=0,this.last_draw_time=0,this.render_time=0,this.fps=0,this.dragging_rectangle=null,this.selected_nodes={},this.selected_group=null,this.visible_nodes=[],this.node_dragged=null,this.node_over=null,this.node_capturing_input=null,this.connecting_node=null,this.highlighted_links={},this.dragging_canvas=!1,this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.dirty_area=null,this.node_in_panel=null,this.node_widget=null,this.last_mouse=[0,0],this.last_mouseclick=0,this.pointer_is_down=!1,this.pointer_is_double=!1,this.visible_area.set([0,0,0,0]),this.onClear&&this.onClear()},LGraphCanvas.prototype.setGraph=function(t,e){this.graph!=t&&(e||this.clear(),t||!this.graph?(t.attachCanvas(this),this._graph_stack&&(this._graph_stack=null),this.setDirty(!0,!0)):this.graph.detachCanvas(this))},LGraphCanvas.prototype.getTopGraph=function(){return this._graph_stack.length?this._graph_stack[0]:this.graph},LGraphCanvas.prototype.openSubgraph=function(t){if(!t)throw"graph cannot be null";if(this.graph==t)throw"graph cannot be the same";this.clear(),this.graph&&(this._graph_stack||(this._graph_stack=[]),this._graph_stack.push(this.graph)),t.attachCanvas(this),this.checkPanels(),this.setDirty(!0,!0)},LGraphCanvas.prototype.closeSubgraph=function(){if(this._graph_stack&&0!=this._graph_stack.length){var t=this.graph._subgraph_node,e=this._graph_stack.pop();this.selected_nodes={},this.highlighted_links={},e.attachCanvas(this),this.setDirty(!0,!0),t&&(this.centerOnNode(t),this.selectNodes([t])),this.ds.offset=[0,0],this.ds.scale=1}},LGraphCanvas.prototype.getCurrentGraph=function(){return this.graph},LGraphCanvas.prototype.setCanvas=function(t,e){if(t&&t.constructor===String&&!(t=document.getElementById(t)))throw"Error creating LiteGraph canvas: Canvas not found";if(t!==this.canvas&&(!t&&this.canvas&&(e||this.unbindEvents()),this.canvas=t,this.ds.element=t,t)){if(t.className+=" lgraphcanvas",t.data=this,t.tabindex="1",this.bgcanvas=null,this.bgcanvas||(this.bgcanvas=document.createElement("canvas"),this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height),null==t.getContext){if("canvas"!=t.localName)throw"Element supplied for LGraphCanvas must be a <canvas> element, you passed a "+t.localName;throw"This browser doesn't support Canvas"}null==(this.ctx=t.getContext("2d"))&&(t.webgl_enabled||console.warn("This canvas seems to be WebGL, enabling WebGL renderer"),this.enableWebGL()),e||this.bindEvents()}},LGraphCanvas.prototype._doNothing=function(t){return t.preventDefault(),!1},LGraphCanvas.prototype._doReturnTrue=function(t){return t.preventDefault(),!0},LGraphCanvas.prototype.bindEvents=function(){if(this._events_binded)console.warn("LGraphCanvas: events already binded");else{var t=this.canvas,e=this.getCanvasWindow().document;this._mousedown_callback=this.processMouseDown.bind(this),this._mousewheel_callback=this.processMouseWheel.bind(this),this._mousemove_callback=this.processMouseMove.bind(this),this._mouseup_callback=this.processMouseUp.bind(this),LiteGraph.pointerListenerAdd(t,"down",this._mousedown_callback,!0),t.addEventListener("mousewheel",this._mousewheel_callback,!1),LiteGraph.pointerListenerAdd(t,"up",this._mouseup_callback,!0),LiteGraph.pointerListenerAdd(t,"move",this._mousemove_callback),t.addEventListener("contextmenu",this._doNothing),t.addEventListener("DOMMouseScroll",this._mousewheel_callback,!1),this._key_callback=this.processKey.bind(this),t.setAttribute("tabindex",1),t.addEventListener("keydown",this._key_callback,!0),e.addEventListener("keyup",this._key_callback,!0),this._ondrop_callback=this.processDrop.bind(this),t.addEventListener("dragover",this._doNothing,!1),t.addEventListener("dragend",this._doNothing,!1),t.addEventListener("drop",this._ondrop_callback,!1),t.addEventListener("dragenter",this._doReturnTrue,!1),this._events_binded=!0}},LGraphCanvas.prototype.unbindEvents=function(){if(this._events_binded){var t=this.getCanvasWindow().document;LiteGraph.pointerListenerRemove(this.canvas,"move",this._mousedown_callback),LiteGraph.pointerListenerRemove(this.canvas,"up",this._mousedown_callback),LiteGraph.pointerListenerRemove(this.canvas,"down",this._mousedown_callback),this.canvas.removeEventListener("mousewheel",this._mousewheel_callback),this.canvas.removeEventListener("DOMMouseScroll",this._mousewheel_callback),this.canvas.removeEventListener("keydown",this._key_callback),t.removeEventListener("keyup",this._key_callback),this.canvas.removeEventListener("contextmenu",this._doNothing),this.canvas.removeEventListener("drop",this._ondrop_callback),this.canvas.removeEventListener("dragenter",this._doReturnTrue),this._mousedown_callback=null,this._mousewheel_callback=null,this._key_callback=null,this._ondrop_callback=null,this._events_binded=!1}else console.warn("LGraphCanvas: no events binded")},LGraphCanvas.getFileExtension=function(t){var e=t.indexOf("?");-1!=e&&(t=t.substr(0,e));var n=t.lastIndexOf(".");return-1==n?"":t.substr(n+1).toLowerCase()},LGraphCanvas.prototype.enableWebGL=function(){if("undefined"===typeof GL)throw"litegl.js must be included to use a WebGL canvas";if("undefined"===typeof enableWebGLCanvas)throw"webglCanvas.js must be included to use this feature";this.gl=this.ctx=enableWebGLCanvas(this.canvas),this.ctx.webgl=!0,this.bgcanvas=this.canvas,this.bgctx=this.gl,this.canvas.webgl_enabled=!0},LGraphCanvas.prototype.setDirty=function(t,e){t&&(this.dirty_canvas=!0),e&&(this.dirty_bgcanvas=!0)},LGraphCanvas.prototype.getCanvasWindow=function(){if(!this.canvas)return window;var t=this.canvas.ownerDocument;return t.defaultView||t.parentWindow},LGraphCanvas.prototype.startRendering=function(){this.is_rendering||(this.is_rendering=!0,function t(){this.pause_rendering||this.draw();var e=this.getCanvasWindow();this.is_rendering&&e.requestAnimationFrame(t.bind(this))}.call(this))},LGraphCanvas.prototype.stopRendering=function(){this.is_rendering=!1},LGraphCanvas.prototype.blockClick=function(){this.block_click=!0,this.last_mouseclick=0},LGraphCanvas.prototype.processMouseDown=function(t){if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){this.adjustMouseEvent(t);var e=this.getCanvasWindow();e.document;LGraphCanvas.active_canvas=this;var n=this,r=t.clientX,i=t.clientY;this.ds.viewport=this.viewport;var o=!this.viewport||this.viewport&&r>=this.viewport[0]&&r<this.viewport[0]+this.viewport[2]&&i>=this.viewport[1]&&i<this.viewport[1]+this.viewport[3];if(this.options.skip_events||(LiteGraph.pointerListenerRemove(this.canvas,"move",this._mousemove_callback),LiteGraph.pointerListenerAdd(e.document,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerAdd(e.document,"up",this._mouseup_callback,!0)),o){var a=this.graph.getNodeOnPos(t.canvasX,t.canvasY,this.visible_nodes,5),s=!1,l=LiteGraph.getTime(),u=void 0===t.isPrimary||!t.isPrimary,c=l-this.last_mouseclick<300&&u;if(this.mouse[0]=t.clientX,this.mouse[1]=t.clientY,this.graph_mouse[0]=t.canvasX,this.graph_mouse[1]=t.canvasY,this.last_click_position=[this.mouse[0],this.mouse[1]],this.pointer_is_down&&u?this.pointer_is_double=!0:this.pointer_is_double=!1,this.pointer_is_down=!0,this.canvas.focus(),LiteGraph.closeAllContextMenus(e),!this.onMouse||1!=this.onMouse(t)){if(1!=t.which||this.pointer_is_double)if(2==t.which)if(LiteGraph.middle_click_slot_add_default_node){if(a&&this.allow_interaction&&!s&&!this.read_only&&!this.connecting_node&&!a.flags.collapsed&&!this.live_mode){var p=!1,d=!1,h=!1;if(a.outputs)for(_=0,x=a.outputs.length;_<x;++_){w=a.outputs[_],E=a.getConnectionPos(!1,_);if(isInsideRectangle(t.canvasX,t.canvasY,E[0]-15,E[1]-10,30,20)){p=w,d=_,h=!0;break}}if(a.inputs)for(_=0,x=a.inputs.length;_<x;++_){T=a.inputs[_],E=a.getConnectionPos(!0,_);if(isInsideRectangle(t.canvasX,t.canvasY,E[0]-15,E[1]-10,30,20)){p=T,d=_,h=!1;break}}if(p&&!1!==d){var f=.5-(d+1)/(h?a.outputs.length:a.inputs.length),g=a.getBounding(),v=[h?g[0]+g[2]:g[0],t.canvasY-80];this.createDefaultNodeForSlot({nodeFrom:h?a:null,slotFrom:h?d:null,nodeTo:h?null:a,slotTo:h?null:d,position:v,nodeType:"AUTO",posAdd:[h?30:-30,130*-f],posSizeFix:[h?0:-1,0]})}}}else!s&&this.allow_dragcanvas&&(this.dragging_canvas=!0);else(3==t.which||this.pointer_is_double)&&(!this.allow_interaction||s||this.read_only||(a&&(Object.keys(this.selected_nodes).length&&(this.selected_nodes[a.id]||t.shiftKey||t.ctrlKey||t.metaKey)?this.selected_nodes[a.id]||this.selectNodes([a],!0):this.selectNodes([a])),this.processContextMenu(a,t)));else{t.ctrlKey&&(this.dragging_rectangle=new Float32Array(4),this.dragging_rectangle[0]=t.canvasX,this.dragging_rectangle[1]=t.canvasY,this.dragging_rectangle[2]=1,this.dragging_rectangle[3]=1,s=!0),LiteGraph.alt_drag_do_clone_nodes&&t.altKey&&a&&this.allow_interaction&&!s&&!this.read_only&&(cloned=a.clone())&&(cloned.pos[0]+=5,cloned.pos[1]+=5,this.graph.add(cloned,!1,{doCalcSize:!1}),a=cloned,s=!0,C||(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=a),this.selected_nodes[a.id]||this.processNodeSelected(a,t)));var m=!1;if(!a||!this.allow_interaction&&!a.flags.allow_interaction||s||this.read_only){if(!s){if(!this.read_only)for(var _=0;_<this.visible_links.length;++_){var y=this.visible_links[_],b=y._pos;if(!(!b||t.canvasX<b[0]-4||t.canvasX>b[0]+4||t.canvasY<b[1]-4||t.canvasY>b[1]+4)){this.showLinkMenu(y,t),this.over_link_center=null;break}}if(this.selected_group=this.graph.getGroupOnPos(t.canvasX,t.canvasY),this.selected_group_resizing=!1,this.selected_group&&!this.read_only)t.ctrlKey&&(this.dragging_rectangle=null),distance([t.canvasX,t.canvasY],[this.selected_group.pos[0]+this.selected_group.size[0],this.selected_group.pos[1]+this.selected_group.size[1]])*this.ds.scale<10?this.selected_group_resizing=!0:this.selected_group.recomputeInsideNodes();c&&!this.read_only&&this.allow_searchbox&&(this.showSearchBox(t),t.preventDefault(),t.stopPropagation()),m=!0}}else{if(this.live_mode||a.flags.pinned||this.bringToFront(a),this.allow_interaction&&!this.connecting_node&&!a.flags.collapsed&&!this.live_mode)if(!s&&!1!==a.resizable&&isInsideRectangle(t.canvasX,t.canvasY,a.pos[0]+a.size[0]-5,a.pos[1]+a.size[1]-5,10,10))this.graph.beforeChange(),this.resizing_node=a,this.canvas.style.cursor="se-resize",s=!0;else{if(a.outputs)for(var _=0,x=a.outputs.length;_<x;++_){var w=a.outputs[_],E=a.getConnectionPos(!1,_);if(isInsideRectangle(t.canvasX,t.canvasY,E[0]-15,E[1]-10,30,20)){this.connecting_node=a,this.connecting_output=w,this.connecting_output.slot_index=_,this.connecting_pos=a.getConnectionPos(!1,_),this.connecting_slot=_,LiteGraph.shift_click_do_break_link_from&&t.shiftKey&&a.disconnectOutput(_),c?a.onOutputDblClick&&a.onOutputDblClick(_,t):a.onOutputClick&&a.onOutputClick(_,t),s=!0;break}}if(a.inputs)for(var _=0,x=a.inputs.length;_<x;++_){var T=a.inputs[_],E=a.getConnectionPos(!0,_);if(isInsideRectangle(t.canvasX,t.canvasY,E[0]-15,E[1]-10,30,20)){if(c?a.onInputDblClick&&a.onInputDblClick(_,t):a.onInputClick&&a.onInputClick(_,t),null!==T.link){var S=this.graph.links[T.link];LiteGraph.click_do_break_link_to&&(a.disconnectInput(_),this.dirty_bgcanvas=!0,s=!0),(this.allow_reconnect_links||t.shiftKey)&&(LiteGraph.click_do_break_link_to||a.disconnectInput(_),this.connecting_node=this.graph._nodes_by_id[S.origin_id],this.connecting_slot=S.origin_slot,this.connecting_output=this.connecting_node.outputs[this.connecting_slot],this.connecting_pos=this.connecting_node.getConnectionPos(!1,this.connecting_slot),this.dirty_bgcanvas=!0,s=!0)}s||(this.connecting_node=a,this.connecting_input=T,this.connecting_input.slot_index=_,this.connecting_pos=a.getConnectionPos(!0,_),this.connecting_slot=_,this.dirty_bgcanvas=!0,s=!0)}}}if(!s){var C=!1,O=[t.canvasX-a.pos[0],t.canvasY-a.pos[1]],L=this.processNodeWidgets(a,this.graph_mouse,t);if(L&&(C=!0,this.node_widget=[a,L]),this.allow_interaction&&c&&this.selected_nodes[a.id]&&(a.onDblClick&&a.onDblClick(t,O,this),this.processNodeDblClicked(a),C=!0),a.onMouseDown&&a.onMouseDown(t,O,this))C=!0;else{if(a.subgraph&&!a.skip_subgraph_button&&!a.flags.collapsed&&O[0]>a.size[0]-LiteGraph.NODE_TITLE_HEIGHT&&O[1]<0){n=this;setTimeout((function(){n.openSubgraph(a.subgraph)}),10)}this.live_mode&&(m=!0,C=!0)}C?a.is_selected||this.processNodeSelected(a,t):(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=a),this.processNodeSelected(a,t)),this.dirty_canvas=!0}}!s&&m&&this.allow_dragcanvas&&(this.dragging_canvas=!0)}return this.last_mouse[0]=t.clientX,this.last_mouse[1]=t.clientY,this.last_mouseclick=LiteGraph.getTime(),this.last_mouse_dragging=!0,this.graph.change(),(!e.document.activeElement||"input"!=e.document.activeElement.nodeName.toLowerCase()&&"textarea"!=e.document.activeElement.nodeName.toLowerCase())&&t.preventDefault(),t.stopPropagation(),this.onMouseDown&&this.onMouseDown(t),!1}}}},LGraphCanvas.prototype.processMouseMove=function(t){if(this.autoresize&&this.resize(),this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){LGraphCanvas.active_canvas=this,this.adjustMouseEvent(t);var e=[t.clientX,t.clientY];this.mouse[0]=e[0],this.mouse[1]=e[1];var n=[e[0]-this.last_mouse[0],e[1]-this.last_mouse[1]];if(this.last_mouse=e,this.graph_mouse[0]=t.canvasX,this.graph_mouse[1]=t.canvasY,this.block_click)return t.preventDefault(),!1;t.dragging=this.last_mouse_dragging,this.node_widget&&(this.processNodeWidgets(this.node_widget[0],this.graph_mouse,t,this.node_widget[1]),this.dirty_canvas=!0);var r=this.graph.getNodeOnPos(t.canvasX,t.canvasY,this.visible_nodes);if(this.dragging_rectangle)this.dragging_rectangle[2]=t.canvasX-this.dragging_rectangle[0],this.dragging_rectangle[3]=t.canvasY-this.dragging_rectangle[1],this.dirty_canvas=!0;else if(this.selected_group&&!this.read_only){if(this.selected_group_resizing)this.selected_group.size=[t.canvasX-this.selected_group.pos[0],t.canvasY-this.selected_group.pos[1]];else{var i=n[0]/this.ds.scale,o=n[1]/this.ds.scale;this.selected_group.move(i,o,t.ctrlKey),this.selected_group._nodes.length&&(this.dirty_canvas=!0)}this.dirty_bgcanvas=!0}else if(this.dragging_canvas)this.ds.offset[0]+=n[0]/this.ds.scale,this.ds.offset[1]+=n[1]/this.ds.scale,this.dirty_canvas=!0,this.dirty_bgcanvas=!0;else if((this.allow_interaction||r&&r.flags.allow_interaction)&&!this.read_only){this.connecting_node&&(this.dirty_canvas=!0);for(var a=0,s=this.graph._nodes.length;a<s;++a)this.graph._nodes[a].mouseOver&&r!=this.graph._nodes[a]&&(this.graph._nodes[a].mouseOver=!1,this.node_over&&this.node_over.onMouseLeave&&this.node_over.onMouseLeave(t),this.node_over=null,this.dirty_canvas=!0);if(r){if(r.redraw_on_mouse&&(this.dirty_canvas=!0),r.mouseOver||(r.mouseOver=!0,this.node_over=r,this.dirty_canvas=!0,r.onMouseEnter&&r.onMouseEnter(t)),r.onMouseMove&&r.onMouseMove(t,[t.canvasX-r.pos[0],t.canvasY-r.pos[1]],this),this.connecting_node)if(this.connecting_output){var l=this._highlight_input||[0,0];if(this.isOverNodeBox(r,t.canvasX,t.canvasY));else if(-1!=(c=this.isOverNodeInput(r,t.canvasX,t.canvasY,l))&&r.inputs[c]){var u=r.inputs[c].type;LiteGraph.isValidConnection(this.connecting_output.type,u)&&(this._highlight_input=l,this._highlight_input_slot=r.inputs[c])}else this._highlight_input=null,this._highlight_input_slot=null}else if(this.connecting_input){var c;l=this._highlight_output||[0,0];if(this.isOverNodeBox(r,t.canvasX,t.canvasY));else if(-1!=(c=this.isOverNodeOutput(r,t.canvasX,t.canvasY,l))&&r.outputs[c]){u=r.outputs[c].type;LiteGraph.isValidConnection(this.connecting_input.type,u)&&(this._highlight_output=l)}else this._highlight_output=null}this.canvas&&(isInsideRectangle(t.canvasX,t.canvasY,r.pos[0]+r.size[0]-5,r.pos[1]+r.size[1]-5,5,5)?this.canvas.style.cursor="se-resize":this.canvas.style.cursor="crosshair")}else{var p=null;for(a=0;a<this.visible_links.length;++a){var d=this.visible_links[a],h=d._pos;if(!(!h||t.canvasX<h[0]-4||t.canvasX>h[0]+4||t.canvasY<h[1]-4||t.canvasY>h[1]+4)){p=d;break}}p!=this.over_link_center&&(this.over_link_center=p,this.dirty_canvas=!0),this.canvas&&(this.canvas.style.cursor="")}if(this.node_capturing_input&&this.node_capturing_input!=r&&this.node_capturing_input.onMouseMove&&this.node_capturing_input.onMouseMove(t,[t.canvasX-this.node_capturing_input.pos[0],t.canvasY-this.node_capturing_input.pos[1]],this),this.node_dragged&&!this.live_mode){for(var a in this.selected_nodes){var f=this.selected_nodes[a];f.pos[0]+=n[0]/this.ds.scale,f.pos[1]+=n[1]/this.ds.scale,f.is_selected||this.processNodeSelected(f,t)}this.dirty_canvas=!0,this.dirty_bgcanvas=!0}if(this.resizing_node&&!this.live_mode){var g=[t.canvasX-this.resizing_node.pos[0],t.canvasY-this.resizing_node.pos[1]],v=this.resizing_node.computeSize();g[0]=Math.max(v[0],g[0]),g[1]=Math.max(v[1],g[1]),this.resizing_node.setSize(g),this.canvas.style.cursor="se-resize",this.dirty_canvas=!0,this.dirty_bgcanvas=!0}}return t.preventDefault(),!1}},LGraphCanvas.prototype.processMouseUp=function(t){var e=void 0===t.isPrimary||t.isPrimary;if(!e)return!1;if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){var n=this.getCanvasWindow().document;LGraphCanvas.active_canvas=this,this.options.skip_events||(LiteGraph.pointerListenerRemove(n,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerAdd(this.canvas,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerRemove(n,"up",this._mouseup_callback,!0)),this.adjustMouseEvent(t);var r=LiteGraph.getTime();if(t.click_time=r-this.last_mouseclick,this.last_mouse_dragging=!1,this.last_click_position=null,this.block_click&&(this.block_click=!1),1==t.which){if(this.node_widget&&this.processNodeWidgets(this.node_widget[0],this.graph_mouse,t),this.node_widget=null,this.selected_group){var i=this.selected_group.pos[0]-Math.round(this.selected_group.pos[0]),o=this.selected_group.pos[1]-Math.round(this.selected_group.pos[1]);this.selected_group.move(i,o,t.ctrlKey),this.selected_group.pos[0]=Math.round(this.selected_group.pos[0]),this.selected_group.pos[1]=Math.round(this.selected_group.pos[1]),this.selected_group._nodes.length&&(this.dirty_canvas=!0),this.selected_group=null}this.selected_group_resizing=!1;var a=this.graph.getNodeOnPos(t.canvasX,t.canvasY,this.visible_nodes);if(this.dragging_rectangle){if(this.graph){var s=this.graph._nodes,l=new Float32Array(4),u=Math.abs(this.dragging_rectangle[2]),c=Math.abs(this.dragging_rectangle[3]),p=this.dragging_rectangle[2]<0?this.dragging_rectangle[0]-u:this.dragging_rectangle[0],d=this.dragging_rectangle[3]<0?this.dragging_rectangle[1]-c:this.dragging_rectangle[1];if(this.dragging_rectangle[0]=p,this.dragging_rectangle[1]=d,this.dragging_rectangle[2]=u,this.dragging_rectangle[3]=c,!a||u>10&&c>10){for(var h=[],f=0;f<s.length;++f){var g=s[f];g.getBounding(l),overlapBounding(this.dragging_rectangle,l)&&h.push(g)}h.length&&this.selectNodes(h,t.shiftKey)}else this.selectNodes([a],t.shiftKey||t.ctrlKey)}this.dragging_rectangle=null}else if(this.connecting_node){this.dirty_canvas=!0,this.dirty_bgcanvas=!0;var v=(this.connecting_output||this.connecting_input).type;if(a){if(this.connecting_output)-1!=(m=this.isOverNodeInput(a,t.canvasX,t.canvasY))?this.connecting_node.connect(this.connecting_slot,a,m):this.connecting_node.connectByType(this.connecting_slot,a,v);else if(this.connecting_input){var m;-1!=(m=this.isOverNodeOutput(a,t.canvasX,t.canvasY))?a.connect(m,this.connecting_node,this.connecting_slot):this.connecting_node.connectByTypeOutput(this.connecting_slot,a,v)}}else LiteGraph.release_link_on_empty_shows_menu&&(t.shiftKey&&this.allow_searchbox?this.connecting_output?this.showSearchBox(t,{node_from:this.connecting_node,slot_from:this.connecting_output,type_filter_in:this.connecting_output.type}):this.connecting_input&&this.showSearchBox(t,{node_to:this.connecting_node,slot_from:this.connecting_input,type_filter_out:this.connecting_input.type}):this.connecting_output?this.showConnectionMenu({nodeFrom:this.connecting_node,slotFrom:this.connecting_output,e:t}):this.connecting_input&&this.showConnectionMenu({nodeTo:this.connecting_node,slotTo:this.connecting_input,e:t}));this.connecting_output=null,this.connecting_input=null,this.connecting_pos=null,this.connecting_node=null,this.connecting_slot=-1}else if(this.resizing_node)this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.graph.afterChange(this.resizing_node),this.resizing_node=null;else if(this.node_dragged){(a=this.node_dragged)&&t.click_time<300&&isInsideRectangle(t.canvasX,t.canvasY,a.pos[0],a.pos[1]-LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT)&&a.collapse(),this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.node_dragged.pos[0]=Math.round(this.node_dragged.pos[0]),this.node_dragged.pos[1]=Math.round(this.node_dragged.pos[1]),(this.graph.config.align_to_grid||this.align_to_grid)&&this.node_dragged.alignToGrid(),this.onNodeMoved&&this.onNodeMoved(this.node_dragged),this.graph.afterChange(this.node_dragged),this.node_dragged=null}else{!(a=this.graph.getNodeOnPos(t.canvasX,t.canvasY,this.visible_nodes))&&t.click_time<300&&this.deselectAllNodes(),this.dirty_canvas=!0,this.dragging_canvas=!1,this.node_over&&this.node_over.onMouseUp&&this.node_over.onMouseUp(t,[t.canvasX-this.node_over.pos[0],t.canvasY-this.node_over.pos[1]],this),this.node_capturing_input&&this.node_capturing_input.onMouseUp&&this.node_capturing_input.onMouseUp(t,[t.canvasX-this.node_capturing_input.pos[0],t.canvasY-this.node_capturing_input.pos[1]])}}else(2==t.which||3==t.which)&&(this.dirty_canvas=!0,this.dragging_canvas=!1);return e&&(this.pointer_is_down=!1,this.pointer_is_double=!1),this.graph.change(),t.stopPropagation(),t.preventDefault(),!1}},LGraphCanvas.prototype.processMouseWheel=function(t){if(this.graph&&this.allow_dragcanvas){var e=null!=t.wheelDeltaY?t.wheelDeltaY:-60*t.detail;this.adjustMouseEvent(t);var n=t.clientX,r=t.clientY;if(!this.viewport||this.viewport&&n>=this.viewport[0]&&n<this.viewport[0]+this.viewport[2]&&r>=this.viewport[1]&&r<this.viewport[1]+this.viewport[3]){var i=this.ds.scale;return e>0?i*=1.1:e<0&&(i*=1/1.1),this.ds.changeScale(i,[t.clientX,t.clientY]),this.graph.change(),t.preventDefault(),!1}}},LGraphCanvas.prototype.isOverNodeBox=function(t,e,n){var r=LiteGraph.NODE_TITLE_HEIGHT;return!!isInsideRectangle(e,n,t.pos[0]+2,t.pos[1]+2-r,r-4,r-4)},LGraphCanvas.prototype.isOverNodeInput=function(t,e,n,r){if(t.inputs)for(var i=0,o=t.inputs.length;i<o;++i){t.inputs[i];var a=t.getConnectionPos(!0,i);if(t.horizontal?isInsideRectangle(e,n,a[0]-5,a[1]-10,10,20):isInsideRectangle(e,n,a[0]-10,a[1]-5,40,10))return r&&(r[0]=a[0],r[1]=a[1]),i}return-1},LGraphCanvas.prototype.isOverNodeOutput=function(t,e,n,r){if(t.outputs)for(var i=0,o=t.outputs.length;i<o;++i){t.outputs[i];var a=t.getConnectionPos(!1,i);if(t.horizontal?isInsideRectangle(e,n,a[0]-5,a[1]-10,10,20):isInsideRectangle(e,n,a[0]-10,a[1]-5,40,10))return r&&(r[0]=a[0],r[1]=a[1]),i}return-1},LGraphCanvas.prototype.processKey=function(t){if(this.graph){var e=!1;if("input"!=t.target.localName){if("keydown"==t.type){if(32==t.keyCode&&(this.dragging_canvas=!0,e=!0),27==t.keyCode&&(this.node_panel&&this.node_panel.close(),this.options_panel&&this.options_panel.close(),e=!0),65==t.keyCode&&t.ctrlKey&&(this.selectNodes(),e=!0),67!==t.keyCode||!t.metaKey&&!t.ctrlKey||t.shiftKey||this.selected_nodes&&(this.copyToClipboard(),e=!0),86===t.keyCode&&(t.metaKey||t.ctrlKey)&&this.pasteFromClipboard(t.shiftKey),46!=t.keyCode&&8!=t.keyCode||"input"!=t.target.localName&&"textarea"!=t.target.localName&&(this.deleteSelectedNodes(),e=!0),this.selected_nodes)for(var n in this.selected_nodes)this.selected_nodes[n].onKeyDown&&this.selected_nodes[n].onKeyDown(t)}else if("keyup"==t.type&&(32==t.keyCode&&(this.dragging_canvas=!1),this.selected_nodes))for(var n in this.selected_nodes)this.selected_nodes[n].onKeyUp&&this.selected_nodes[n].onKeyUp(t);return this.graph.change(),e?(t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}}},LGraphCanvas.prototype.copyToClipboard=function(){var t={nodes:[],links:[]},e=0,n=[];for(var r in this.selected_nodes){!1!==(i=this.selected_nodes[r]).clonable&&(i._relative_id=e,n.push(i),e+=1)}for(r=0;r<n.length;++r){var i;if(!1!==(i=n[r]).clonable){var o=i.clone();if(o){if(t.nodes.push(o.serialize()),i.inputs&&i.inputs.length)for(var a=0;a<i.inputs.length;++a){var s=i.inputs[a];if(s&&null!=s.link){var l=this.graph.links[s.link];if(l){var u=this.graph.getNodeById(l.origin_id);u&&t.links.push([u._relative_id,l.origin_slot,i._relative_id,l.target_slot,u.id])}}}}else console.warn("node type not found: "+i.type)}}localStorage.setItem("litegrapheditor_clipboard",JSON.stringify(t))},LGraphCanvas.prototype.pasteFromClipboard=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(LiteGraph.ctrl_shift_v_paste_connect_unselected_outputs||!t){var e=localStorage.getItem("litegrapheditor_clipboard");if(e){this.graph.beforeChange();for(var n=JSON.parse(e),r=!1,i=!1,o=0;o<n.nodes.length;++o)r?(r[0]>n.nodes[o].pos[0]&&(r[0]=n.nodes[o].pos[0],i[0]=o),r[1]>n.nodes[o].pos[1]&&(r[1]=n.nodes[o].pos[1],i[1]=o)):(r=[n.nodes[o].pos[0],n.nodes[o].pos[1]],i=[o,o]);var a=[];for(o=0;o<n.nodes.length;++o){var s=n.nodes[o],l=LiteGraph.createNode(s.type);l&&(l.configure(s),l.pos[0]+=this.graph_mouse[0]-r[0],l.pos[1]+=this.graph_mouse[1]-r[1],this.graph.add(l,{doProcessChange:!1}),a.push(l))}for(o=0;o<n.links.length;++o){var u,c=n.links[o],p=c[0];if(null!=p)u=a[p];else if(LiteGraph.ctrl_shift_v_paste_connect_unselected_outputs&&t){var d=c[4];d&&(u=this.graph.getNodeById(d))}var h=a[c[2]];u&&h?u.connect(c[1],h,c[3]):console.warn("Warning, nodes missing on pasting")}this.selectNodes(a),this.graph.afterChange()}}},LGraphCanvas.prototype.processDrop=function(t){t.preventDefault(),this.adjustMouseEvent(t);var e=t.clientX,n=t.clientY;if(!this.viewport||this.viewport&&e>=this.viewport[0]&&e<this.viewport[0]+this.viewport[2]&&n>=this.viewport[1]&&n<this.viewport[1]+this.viewport[3]){var r=[t.canvasX,t.canvasY],i=this.graph?this.graph.getNodeOnPos(r[0],r[1]):null;if(!i){var o=null;return this.onDropItem&&(o=this.onDropItem(event)),void(o||this.checkDropItem(t))}if(i.onDropFile||i.onDropData){var a=t.dataTransfer.files;if(a&&a.length)for(var s=0;s<a.length;s++){var l=t.dataTransfer.files[0],u=l.name;LGraphCanvas.getFileExtension(u);if(i.onDropFile&&i.onDropFile(l),i.onDropData){var c=new FileReader;c.onload=function(t){var e=t.target.result;i.onDropData(e,u,l)};var p=l.type.split("/")[0];"text"==p||""==p?c.readAsText(l):"image"==p?c.readAsDataURL(l):c.readAsArrayBuffer(l)}}}return!(!i.onDropItem||!i.onDropItem(event))||!!this.onDropItem&&this.onDropItem(event)}},LGraphCanvas.prototype.checkDropItem=function(t){if(t.dataTransfer.files.length){var e=t.dataTransfer.files[0],n=LGraphCanvas.getFileExtension(e.name).toLowerCase(),r=LiteGraph.node_types_by_file_extension[n];if(r){this.graph.beforeChange();var i=LiteGraph.createNode(r.type);i.pos=[t.canvasX,t.canvasY],this.graph.add(i),i.onDropFile&&i.onDropFile(e),this.graph.afterChange()}}},LGraphCanvas.prototype.processNodeDblClicked=function(t){this.onShowNodePanel?this.onShowNodePanel(t):this.showShowNodePanel(t),this.onNodeDblClicked&&this.onNodeDblClicked(t),this.setDirty(!0)},LGraphCanvas.prototype.processNodeSelected=function(t,e){this.selectNode(t,e&&(e.shiftKey||e.ctrlKey||this.multi_select)),this.onNodeSelected&&this.onNodeSelected(t)},LGraphCanvas.prototype.selectNode=function(t,e){null==t?this.deselectAllNodes():this.selectNodes([t],e)},LGraphCanvas.prototype.selectNodes=function(t,e){for(var n in e||this.deselectAllNodes(),"string"==typeof(t=t||this.graph._nodes)&&(t=[t]),t){var r=t[n];if(r.is_selected)this.deselectNode(r);else{if(!r.is_selected&&r.onSelected&&r.onSelected(),r.is_selected=!0,this.selected_nodes[r.id]=r,r.inputs)for(var i=0;i<r.inputs.length;++i)this.highlighted_links[r.inputs[i].link]=!0;if(r.outputs)for(i=0;i<r.outputs.length;++i){var o=r.outputs[i];if(o.links)for(var a=0;a<o.links.length;++a)this.highlighted_links[o.links[a]]=!0}}}this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)},LGraphCanvas.prototype.deselectNode=function(t){if(t.is_selected){if(t.onDeselected&&t.onDeselected(),t.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(t),t.inputs)for(var e=0;e<t.inputs.length;++e)delete this.highlighted_links[t.inputs[e].link];if(t.outputs)for(e=0;e<t.outputs.length;++e){var n=t.outputs[e];if(n.links)for(var r=0;r<n.links.length;++r)delete this.highlighted_links[n.links[r]]}}},LGraphCanvas.prototype.deselectAllNodes=function(){if(this.graph){for(var t=this.graph._nodes,e=0,n=t.length;e<n;++e){var r=t[e];r.is_selected&&(r.onDeselected&&r.onDeselected(),r.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(r))}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)}},LGraphCanvas.prototype.deleteSelectedNodes=function(){for(var t in this.graph.beforeChange(),this.selected_nodes){var e=this.selected_nodes[t];if(!e.block_delete){if(e.inputs&&e.inputs.length&&e.outputs&&e.outputs.length&&LiteGraph.isValidConnection(e.inputs[0].type,e.outputs[0].type)&&e.inputs[0].link&&e.outputs[0].links&&e.outputs[0].links.length){var n=e.graph.links[e.inputs[0].link],r=e.graph.links[e.outputs[0].links[0]],i=e.getInputNode(0),o=e.getOutputNodes(0)[0];i&&o&&i.connect(n.origin_slot,o,r.target_slot)}this.graph.remove(e),this.onNodeDeselected&&this.onNodeDeselected(e)}}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.setDirty(!0),this.graph.afterChange()},LGraphCanvas.prototype.centerOnNode=function(t){this.ds.offset[0]=-t.pos[0]-.5*t.size[0]+.5*this.canvas.width/this.ds.scale,this.ds.offset[1]=-t.pos[1]-.5*t.size[1]+.5*this.canvas.height/this.ds.scale,this.setDirty(!0,!0)},LGraphCanvas.prototype.adjustMouseEvent=function(t){var e=0,n=0;if(this.canvas){var r=this.canvas.getBoundingClientRect();e=t.clientX-r.left,n=t.clientY-r.top}else e=t.clientX,n=t.clientY;this.last_mouse_position[0]=e,this.last_mouse_position[1]=n,t.canvasX=e/this.ds.scale-this.ds.offset[0],t.canvasY=n/this.ds.scale-this.ds.offset[1]},LGraphCanvas.prototype.setZoom=function(t,e){this.ds.changeScale(t,e),this.dirty_canvas=!0,this.dirty_bgcanvas=!0},LGraphCanvas.prototype.convertOffsetToCanvas=function(t,e){return this.ds.convertOffsetToCanvas(t,e)},LGraphCanvas.prototype.convertCanvasToOffset=function(t,e){return this.ds.convertCanvasToOffset(t,e)},LGraphCanvas.prototype.convertEventToCanvasOffset=function(t){var e=this.canvas.getBoundingClientRect();return this.convertCanvasToOffset([t.clientX-e.left,t.clientY-e.top])},LGraphCanvas.prototype.bringToFront=function(t){var e=this.graph._nodes.indexOf(t);-1!=e&&(this.graph._nodes.splice(e,1),this.graph._nodes.push(t))},LGraphCanvas.prototype.sendToBack=function(t){var e=this.graph._nodes.indexOf(t);-1!=e&&(this.graph._nodes.splice(e,1),this.graph._nodes.unshift(t))};var temp=new Float32Array(4);LGraphCanvas.prototype.computeVisibleNodes=function(t,e){var n=e||[];n.length=0;for(var r=0,i=(t=t||this.graph._nodes).length;r<i;++r){var o=t[r];(!this.live_mode||o.onDrawBackground||o.onDrawForeground)&&(overlapBounding(this.visible_area,o.getBounding(temp,!0))&&n.push(o))}return n},LGraphCanvas.prototype.draw=function(t,e){if(this.canvas&&0!=this.canvas.width&&0!=this.canvas.height){var n=LiteGraph.getTime();this.render_time=.001*(n-this.last_draw_time),this.last_draw_time=n,this.graph&&this.ds.computeVisibleArea(this.viewport),(this.dirty_bgcanvas||e||this.always_render_background||this.graph&&this.graph._last_trigger_time&&n-this.graph._last_trigger_time<1e3)&&this.drawBackCanvas(),(this.dirty_canvas||t)&&this.drawFrontCanvas(),this.fps=this.render_time?1/this.render_time:0,this.frame+=1}},LGraphCanvas.prototype.drawFrontCanvas=function(){this.dirty_canvas=!1,this.ctx||(this.ctx=this.bgcanvas.getContext("2d"));var t=this.ctx;if(t){var e=this.canvas;t.start2D&&!this.viewport&&(t.start2D(),t.restore(),t.setTransform(1,0,0,1,0,0));var n=this.viewport||this.dirty_area;if(n&&(t.save(),t.beginPath(),t.rect(n[0],n[1],n[2],n[3]),t.clip()),this.clear_background&&(n?t.clearRect(n[0],n[1],n[2],n[3]):t.clearRect(0,0,e.width,e.height)),this.bgcanvas==this.canvas?this.drawBackCanvas():t.drawImage(this.bgcanvas,0,0),this.onRender&&this.onRender(e,t),this.show_info&&this.renderInfo(t,n?n[0]:0,n?n[1]:0),this.graph){t.save(),this.ds.toCanvasContext(t);for(var r=this.computeVisibleNodes(null,this.visible_nodes),i=0;i<r.length;++i){var o=r[i];t.save(),t.translate(o.pos[0],o.pos[1]),this.drawNode(o,t),1,t.restore()}if(this.render_execution_order&&this.drawExecutionOrder(t),this.graph.config.links_ontop&&(this.live_mode||this.drawConnections(t)),null!=this.connecting_pos){t.lineWidth=this.connections_width;var a=null,s=this.connecting_output||this.connecting_input,l=s.type,u=s.dir;null==u&&(u=this.connecting_output?this.connecting_node.horizontal?LiteGraph.DOWN:LiteGraph.RIGHT:this.connecting_node.horizontal?LiteGraph.UP:LiteGraph.LEFT);var c=s.shape;if(l===LiteGraph.EVENT)a=LiteGraph.EVENT_LINK_COLOR;else a=LiteGraph.CONNECTING_LINK_COLOR;if(this.renderLink(t,this.connecting_pos,[this.graph_mouse[0],this.graph_mouse[1]],null,!1,null,a,u,LiteGraph.CENTER),t.beginPath(),l===LiteGraph.EVENT||c===LiteGraph.BOX_SHAPE?(t.rect(this.connecting_pos[0]-6+.5,this.connecting_pos[1]-5+.5,14,10),t.fill(),t.beginPath(),t.rect(this.graph_mouse[0]-6+.5,this.graph_mouse[1]-5+.5,14,10)):c===LiteGraph.ARROW_SHAPE?(t.moveTo(this.connecting_pos[0]+8,this.connecting_pos[1]+.5),t.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]+6+.5),t.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]-6+.5),t.closePath()):(t.arc(this.connecting_pos[0],this.connecting_pos[1],4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(this.graph_mouse[0],this.graph_mouse[1],4,0,2*Math.PI)),t.fill(),t.fillStyle="#ffcc00",this._highlight_input){t.beginPath();var p=this._highlight_input_slot.shape;p===LiteGraph.ARROW_SHAPE?(t.moveTo(this._highlight_input[0]+8,this._highlight_input[1]+.5),t.lineTo(this._highlight_input[0]-4,this._highlight_input[1]+6+.5),t.lineTo(this._highlight_input[0]-4,this._highlight_input[1]-6+.5),t.closePath()):t.arc(this._highlight_input[0],this._highlight_input[1],6,0,2*Math.PI),t.fill()}this._highlight_output&&(t.beginPath(),p===LiteGraph.ARROW_SHAPE?(t.moveTo(this._highlight_output[0]+8,this._highlight_output[1]+.5),t.lineTo(this._highlight_output[0]-4,this._highlight_output[1]+6+.5),t.lineTo(this._highlight_output[0]-4,this._highlight_output[1]-6+.5),t.closePath()):t.arc(this._highlight_output[0],this._highlight_output[1],6,0,2*Math.PI),t.fill())}this.dragging_rectangle&&(t.strokeStyle="#FFF",t.strokeRect(this.dragging_rectangle[0],this.dragging_rectangle[1],this.dragging_rectangle[2],this.dragging_rectangle[3])),this.over_link_center&&this.render_link_tooltip?this.drawLinkTooltip(t,this.over_link_center):this.onDrawLinkTooltip&&this.onDrawLinkTooltip(t,null),this.onDrawForeground&&this.onDrawForeground(t,this.visible_rect),t.restore()}this._graph_stack&&this._graph_stack.length&&this.drawSubgraphPanel(t),this.onDrawOverlay&&this.onDrawOverlay(t),n&&t.restore(),t.finish2D&&t.finish2D()}},LGraphCanvas.prototype.drawSubgraphPanel=function(t){var e=this.graph,n=e._subgraph_node;n?(this.drawSubgraphPanelLeft(e,n,t),this.drawSubgraphPanelRight(e,n,t)):console.warn("subgraph without subnode")},LGraphCanvas.prototype.drawSubgraphPanelLeft=function(t,e,n){var r=e.inputs?e.inputs.length:0,i=200,o=Math.floor(1.6*LiteGraph.NODE_SLOT_HEIGHT);if(n.fillStyle="#111",n.globalAlpha=.8,n.beginPath(),n.roundRect(10,10,i,(r+1)*o+50,[8]),n.fill(),n.globalAlpha=1,n.fillStyle="#888",n.font="14px Arial",n.textAlign="left",n.fillText("Graph Inputs",20,34),this.drawButton(180,20,20,20,"X","#151515"))this.closeSubgraph();else{var a=50;if(n.font="14px Arial",e.inputs)for(var s=0;s<e.inputs.length;++s){var l=e.inputs[s];if(!l.not_subgraph_input){if(this.drawButton(20,a+2,180,o-2)){var u=e.constructor.input_node_type||"graph/input";this.graph.beforeChange();var c=LiteGraph.createNode(u);c?(t.add(c),this.block_click=!1,this.last_click_position=null,this.selectNodes([c]),this.node_dragged=c,this.dragging_canvas=!1,c.setProperty("name",l.name),c.setProperty("type",l.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",u)}n.fillStyle="#9C9",n.beginPath(),n.arc(184,a+.5*o,5,0,2*Math.PI),n.fill(),n.fillStyle="#AAA",n.fillText(l.name,30,a+.75*o),n.fillStyle="#777",n.fillText(l.type,130,a+.75*o),a+=o}}this.drawButton(20,a+2,180,o-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialog(e)}},LGraphCanvas.prototype.drawSubgraphPanelRight=function(t,e,n){var r=e.outputs?e.outputs.length:0,i=this.bgcanvas.width,o=200,a=Math.floor(1.6*LiteGraph.NODE_SLOT_HEIGHT);n.fillStyle="#111",n.globalAlpha=.8,n.beginPath(),n.roundRect(i-o-10,10,o,(r+1)*a+50,[8]),n.fill(),n.globalAlpha=1,n.fillStyle="#888",n.font="14px Arial",n.textAlign="left";var s="Graph Outputs",l=n.measureText(s).width;if(n.fillText(s,i-l-20,34),this.drawButton(i-o,20,20,20,"X","#151515"))this.closeSubgraph();else{var u=50;if(n.font="14px Arial",e.outputs)for(var c=0;c<e.outputs.length;++c){var p=e.outputs[c];if(!p.not_subgraph_input){if(this.drawButton(i-o,u+2,180,a-2)){var d=e.constructor.output_node_type||"graph/output";this.graph.beforeChange();var h=LiteGraph.createNode(d);h?(t.add(h),this.block_click=!1,this.last_click_position=null,this.selectNodes([h]),this.node_dragged=h,this.dragging_canvas=!1,h.setProperty("name",p.name),h.setProperty("type",p.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",d)}n.fillStyle="#9C9",n.beginPath(),n.arc(i-o+16,u+.5*a,5,0,2*Math.PI),n.fill(),n.fillStyle="#AAA",n.fillText(p.name,i-o+30,u+.75*a),n.fillStyle="#777",n.fillText(p.type,i-o+130,u+.75*a),u+=a}}this.drawButton(i-o,u+2,180,a-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialogRight(e)}},LGraphCanvas.prototype.drawButton=function(t,e,n,r,i,o,a,s){var l=this.ctx;o=o||LiteGraph.NODE_DEFAULT_COLOR,a=a||"#555",s=s||LiteGraph.NODE_TEXT_COLOR;var u=this.ds.convertOffsetToCanvas(this.graph_mouse),c=LiteGraph.isInsideRectangle(u[0],u[1],t,e,n,r);if(u=this.last_click_position?[this.last_click_position[0],this.last_click_position[1]]:null){var p=this.canvas.getBoundingClientRect();u[0]-=p.left,u[1]-=p.top}var d=u&&LiteGraph.isInsideRectangle(u[0],u[1],t,e,n,r);l.fillStyle=c?a:o,d&&(l.fillStyle="#AAA"),l.beginPath(),l.roundRect(t,e,n,r,[4]),l.fill(),null!=i&&i.constructor==String&&(l.fillStyle=s,l.textAlign="center",l.font=(.65*r|0)+"px Arial",l.fillText(i,t+.5*n,e+.75*r),l.textAlign="left");var h=d&&!this.block_click;return d&&this.blockClick(),h},LGraphCanvas.prototype.isAreaClicked=function(t,e,n,r,i){var o=this.mouse,a=(LiteGraph.isInsideRectangle(o[0],o[1],t,e,n,r),(o=this.last_click_position)&&LiteGraph.isInsideRectangle(o[0],o[1],t,e,n,r)),s=a&&!this.block_click;return a&&i&&this.blockClick(),s},LGraphCanvas.prototype.renderInfo=function(t,e,n){e=e||10,n=n||this.canvas.height-80,t.save(),t.translate(e,n),t.font="10px Arial",t.fillStyle="#888",t.textAlign="left",this.graph?(t.fillText("T: "+this.graph.globaltime.toFixed(2)+"s",5,13),t.fillText("I: "+this.graph.iteration,5,26),t.fillText("N: "+this.graph._nodes.length+" ["+this.visible_nodes.length+"]",5,39),t.fillText("V: "+this.graph._version,5,52),t.fillText("FPS:"+this.fps.toFixed(2),5,65)):t.fillText("No graph selected",5,13),t.restore()},LGraphCanvas.prototype.drawBackCanvas=function(){var t=this.bgcanvas;t.width==this.canvas.width&&t.height==this.canvas.height||(t.width=this.canvas.width,t.height=this.canvas.height),this.bgctx||(this.bgctx=this.bgcanvas.getContext("2d"));var e=this.bgctx;e.start&&e.start();var n=this.viewport||[0,0,e.canvas.width,e.canvas.height];if(this.clear_background&&e.clearRect(n[0],n[1],n[2],n[3]),this._graph_stack&&this._graph_stack.length){e.save();this._graph_stack[this._graph_stack.length-1];var r=this.graph._subgraph_node;e.strokeStyle=r.bgcolor,e.lineWidth=10,e.strokeRect(1,1,t.width-2,t.height-2),e.lineWidth=1,e.font="40px Arial",e.textAlign="center",e.fillStyle=r.bgcolor||"#AAA";for(var i="",o=1;o<this._graph_stack.length;++o)i+=this._graph_stack[o]._subgraph_node.getTitle()+" >> ";e.fillText(i+r.getTitle(),.5*t.width,40),e.restore()}var a=!1;if(this.onRenderBackground&&(a=this.onRenderBackground(t,e)),this.viewport||(e.restore(),e.setTransform(1,0,0,1,0,0)),this.visible_links.length=0,this.graph){if(e.save(),this.ds.toCanvasContext(e),this.ds.scale<1.5&&!a&&this.clear_background_color&&(e.fillStyle=this.clear_background_color,e.fillRect(this.visible_area[0],this.visible_area[1],this.visible_area[2],this.visible_area[3])),this.background_image&&this.ds.scale>.5&&!a){if(this.zoom_modify_alpha?e.globalAlpha=(1-.5/this.ds.scale)*this.editor_alpha:e.globalAlpha=this.editor_alpha,e.imageSmoothingEnabled=e.imageSmoothingEnabled=!1,!this._bg_img||this._bg_img.name!=this.background_image){this._bg_img=new Image,this._bg_img.name=this.background_image,this._bg_img.src=this.background_image;var s=this;this._bg_img.onload=function(){s.draw(!0,!0)}}var l=null;null==this._pattern&&this._bg_img.width>0?(l=e.createPattern(this._bg_img,"repeat"),this._pattern_img=this._bg_img,this._pattern=l):l=this._pattern,l&&(e.fillStyle=l,e.fillRect(this.visible_area[0],this.visible_area[1],this.visible_area[2],this.visible_area[3]),e.fillStyle="transparent"),e.globalAlpha=1,e.imageSmoothingEnabled=e.imageSmoothingEnabled=!0}this.graph._groups.length&&!this.live_mode&&this.drawGroups(t,e),this.onDrawBackground&&this.onDrawBackground(e,this.visible_area),this.onBackgroundRender&&(console.error("WARNING! onBackgroundRender deprecated, now is named onDrawBackground "),this.onBackgroundRender=null),this.render_canvas_border&&(e.strokeStyle="#235",e.strokeRect(0,0,t.width,t.height)),this.render_connections_shadows?(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=6):e.shadowColor="rgba(0,0,0,0)",this.live_mode||this.drawConnections(e),e.shadowColor="rgba(0,0,0,0)",e.restore()}e.finish&&e.finish(),this.dirty_bgcanvas=!1,this.dirty_canvas=!0};var temp_vec2=new Float32Array(2);LGraphCanvas.prototype.drawNode=function(t,e){this.current_node=t;var n=t.color||t.constructor.color||LiteGraph.NODE_DEFAULT_COLOR,r=t.bgcolor||t.constructor.bgcolor||LiteGraph.NODE_DEFAULT_BGCOLOR;t.mouseOver;var i=this.ds.scale<.6;if(this.live_mode)t.flags.collapsed||(e.shadowColor="transparent",t.onDrawForeground&&t.onDrawForeground(e,this,this.canvas));else{var o=this.editor_alpha;if(e.globalAlpha=o,this.render_shadows&&!i?(e.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR,e.shadowOffsetX=2*this.ds.scale,e.shadowOffsetY=2*this.ds.scale,e.shadowBlur=3*this.ds.scale):e.shadowColor="transparent",!t.flags.collapsed||!t.onDrawCollapsed||1!=t.onDrawCollapsed(e,this)){var a=t._shape||LiteGraph.BOX_SHAPE,s=temp_vec2;temp_vec2.set(t.size);var l=t.horizontal;if(t.flags.collapsed){e.font=this.inner_text_font;var u=t.getTitle?t.getTitle():t.title;null!=u&&(t._collapsed_width=Math.min(t.size[0],e.measureText(u).width+2*LiteGraph.NODE_TITLE_HEIGHT),s[0]=t._collapsed_width,s[1]=0)}t.clip_area&&(e.save(),e.beginPath(),a==LiteGraph.BOX_SHAPE?e.rect(0,0,s[0],s[1]):a==LiteGraph.ROUND_SHAPE?e.roundRect(0,0,s[0],s[1],[10]):a==LiteGraph.CIRCLE_SHAPE&&e.arc(.5*s[0],.5*s[1],.5*s[0],0,2*Math.PI),e.clip()),t.has_errors&&(r="red"),this.drawNodeShape(t,e,s,n,r,t.is_selected,t.mouseOver),e.shadowColor="transparent",t.onDrawForeground&&t.onDrawForeground(e,this,this.canvas),e.textAlign=l?"center":"left",e.font=this.inner_text_font;var c=!i,p=this.connecting_output,d=this.connecting_input;e.lineWidth=1;var h=0,f=new Float32Array(2);if(t.flags.collapsed){if(this.render_collapsed_slots){var g=null,v=null;if(t.inputs)for(y=0;y<t.inputs.length;y++){if(null!=(E=t.inputs[y]).link){g=E;break}}if(t.outputs)for(y=0;y<t.outputs.length;y++){(E=t.outputs[y]).links&&E.links.length&&(v=E)}if(g){var m=0,_=-.5*LiteGraph.NODE_TITLE_HEIGHT;l&&(m=.5*t._collapsed_width,_=-LiteGraph.NODE_TITLE_HEIGHT),e.fillStyle="#686",e.beginPath(),E.type===LiteGraph.EVENT||E.shape===LiteGraph.BOX_SHAPE?e.rect(m-7+.5,_-4,14,8):E.shape===LiteGraph.ARROW_SHAPE?(e.moveTo(m+8,_),e.lineTo(m+-4,_-4),e.lineTo(m+-4,_+4),e.closePath()):e.arc(m,_,4,0,2*Math.PI),e.fill()}if(v){m=t._collapsed_width,_=-.5*LiteGraph.NODE_TITLE_HEIGHT;l&&(m=.5*t._collapsed_width,_=0),e.fillStyle="#686",e.strokeStyle="black",e.beginPath(),E.type===LiteGraph.EVENT||E.shape===LiteGraph.BOX_SHAPE?e.rect(m-7+.5,_-4,14,8):E.shape===LiteGraph.ARROW_SHAPE?(e.moveTo(m+6,_),e.lineTo(m-6,_-4),e.lineTo(m-6,_+4),e.closePath()):e.arc(m,_,4,0,2*Math.PI),e.fill()}}}else{if(t.inputs)for(var y=0;y<t.inputs.length;y++){var b=(E=t.inputs[y]).type,x=E.shape;e.globalAlpha=o,this.connecting_output&&!LiteGraph.isValidConnection(E.type,p.type)&&(e.globalAlpha=.4*o),e.fillStyle=null!=E.link?E.color_on||this.default_connection_color_byType[b]||this.default_connection_color.input_on:E.color_off||this.default_connection_color_byTypeOff[b]||this.default_connection_color_byType[b]||this.default_connection_color.input_off,(T=t.getConnectionPos(!0,y,f))[0]-=t.pos[0],T[1]-=t.pos[1],h<T[1]+.5*LiteGraph.NODE_SLOT_HEIGHT&&(h=T[1]+.5*LiteGraph.NODE_SLOT_HEIGHT),e.beginPath(),"array"==b&&(x=LiteGraph.GRID_SHAPE);var w=!0;if(E.type===LiteGraph.EVENT||E.shape===LiteGraph.BOX_SHAPE?l?e.rect(T[0]-5+.5,T[1]-8+.5,10,14):e.rect(T[0]-6+.5,T[1]-5+.5,14,10):x===LiteGraph.ARROW_SHAPE?(e.moveTo(T[0]+8,T[1]+.5),e.lineTo(T[0]-4,T[1]+6+.5),e.lineTo(T[0]-4,T[1]-6+.5),e.closePath()):x===LiteGraph.GRID_SHAPE?(e.rect(T[0]-4,T[1]-4,2,2),e.rect(T[0]-1,T[1]-4,2,2),e.rect(T[0]+2,T[1]-4,2,2),e.rect(T[0]-4,T[1]-1,2,2),e.rect(T[0]-1,T[1]-1,2,2),e.rect(T[0]+2,T[1]-1,2,2),e.rect(T[0]-4,T[1]+2,2,2),e.rect(T[0]-1,T[1]+2,2,2),e.rect(T[0]+2,T[1]+2,2,2),w=!1):i?e.rect(T[0]-4,T[1]-4,8,8):e.arc(T[0],T[1],4,0,2*Math.PI),e.fill(),c)(S=null!=E.label?E.label:E.name)&&(e.fillStyle=LiteGraph.NODE_TEXT_COLOR,l||E.dir==LiteGraph.UP?e.fillText(S,T[0],T[1]-10):e.fillText(S,T[0]+10,T[1]+5))}if(e.textAlign=l?"center":"right",e.strokeStyle="black",t.outputs)for(var y=0;y<t.outputs.length;y++){var E,T;b=(E=t.outputs[y]).type,x=E.shape;this.connecting_input&&!LiteGraph.isValidConnection(b,d.type)&&(e.globalAlpha=.4*o),(T=t.getConnectionPos(!1,y,f))[0]-=t.pos[0],T[1]-=t.pos[1],h<T[1]+.5*LiteGraph.NODE_SLOT_HEIGHT&&(h=T[1]+.5*LiteGraph.NODE_SLOT_HEIGHT),e.fillStyle=E.links&&E.links.length?E.color_on||this.default_connection_color_byType[b]||this.default_connection_color.output_on:E.color_off||this.default_connection_color_byTypeOff[b]||this.default_connection_color_byType[b]||this.default_connection_color.output_off,e.beginPath(),"array"==b&&(x=LiteGraph.GRID_SHAPE);var S;w=!0;if(b===LiteGraph.EVENT||x===LiteGraph.BOX_SHAPE?l?e.rect(T[0]-5+.5,T[1]-8+.5,10,14):e.rect(T[0]-6+.5,T[1]-5+.5,14,10):x===LiteGraph.ARROW_SHAPE?(e.moveTo(T[0]+8,T[1]+.5),e.lineTo(T[0]-4,T[1]+6+.5),e.lineTo(T[0]-4,T[1]-6+.5),e.closePath()):x===LiteGraph.GRID_SHAPE?(e.rect(T[0]-4,T[1]-4,2,2),e.rect(T[0]-1,T[1]-4,2,2),e.rect(T[0]+2,T[1]-4,2,2),e.rect(T[0]-4,T[1]-1,2,2),e.rect(T[0]-1,T[1]-1,2,2),e.rect(T[0]+2,T[1]-1,2,2),e.rect(T[0]-4,T[1]+2,2,2),e.rect(T[0]-1,T[1]+2,2,2),e.rect(T[0]+2,T[1]+2,2,2),w=!1):i?e.rect(T[0]-4,T[1]-4,8,8):e.arc(T[0],T[1],4,0,2*Math.PI),e.fill(),!i&&w&&e.stroke(),c)(S=null!=E.label?E.label:E.name)&&(e.fillStyle=LiteGraph.NODE_TEXT_COLOR,l||E.dir==LiteGraph.DOWN?e.fillText(S,T[0],T[1]-8):e.fillText(S,T[0]-10,T[1]+5))}if(e.textAlign="left",e.globalAlpha=1,t.widgets){var C=h;(l||t.widgets_up)&&(C=2),null!=t.widgets_start_y&&(C=t.widgets_start_y),this.drawNodeWidgets(t,C,e,this.node_widget&&this.node_widget[0]==t?this.node_widget[1]:null)}}t.clip_area&&e.restore(),e.globalAlpha=1}}},LGraphCanvas.prototype.drawLinkTooltip=function(t,e){var n=e._pos;if(t.fillStyle="black",t.beginPath(),t.arc(n[0],n[1],3,0,2*Math.PI),t.fill(),null!=e.data&&(!this.onDrawLinkTooltip||1!=this.onDrawLinkTooltip(t,e,this))){var r=e.data,i=null;if(null!=(i=r.constructor===Number?r.toFixed(2):r.constructor===String?'"'+r+'"':r.constructor===Boolean?String(r):r.toToolTip?r.toToolTip():"["+r.constructor.name+"]")){i=i.substr(0,30),t.font="14px Courier New";var o=t.measureText(i).width+20;t.shadowColor="black",t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=3,t.fillStyle="#454",t.beginPath(),t.roundRect(n[0]-.5*o,n[1]-15-24,o,24,[3]),t.moveTo(n[0]-10,n[1]-15),t.lineTo(n[0]+10,n[1]-15),t.lineTo(n[0],n[1]-5),t.fill(),t.shadowColor="transparent",t.textAlign="center",t.fillStyle="#CEC",t.fillText(i,n[0],n[1]-15-24*.3)}}};var tmp_area=new Float32Array(4);LGraphCanvas.prototype.drawNodeShape=function(t,e,n,r,i,o,a){e.strokeStyle=r,e.fillStyle=i;var s=LiteGraph.NODE_TITLE_HEIGHT,l=this.ds.scale<.5,u=t._shape||t.constructor.shape||LiteGraph.ROUND_SHAPE,c=t.constructor.title_mode,p=!0;c==LiteGraph.TRANSPARENT_TITLE||c==LiteGraph.NO_TITLE?p=!1:c==LiteGraph.AUTOHIDE_TITLE&&a&&(p=!0);var d=tmp_area;d[0]=0,d[1]=p?-s:0,d[2]=n[0]+1,d[3]=p?n[1]+s:n[1];var h=e.globalAlpha;if(e.beginPath(),u==LiteGraph.BOX_SHAPE||l?e.fillRect(d[0],d[1],d[2],d[3]):u==LiteGraph.ROUND_SHAPE||u==LiteGraph.CARD_SHAPE?e.roundRect(d[0],d[1],d[2],d[3],u==LiteGraph.CARD_SHAPE?[this.round_radius,this.round_radius,0,0]:[this.round_radius]):u==LiteGraph.CIRCLE_SHAPE&&e.arc(.5*n[0],.5*n[1],.5*n[0],0,2*Math.PI),e.fill(),!t.flags.collapsed&&p&&(e.shadowColor="transparent",e.fillStyle="rgba(0,0,0,0.2)",e.fillRect(0,-1,d[2],2)),e.shadowColor="transparent",t.onDrawBackground&&t.onDrawBackground(e,this,this.canvas,this.graph_mouse),p||c==LiteGraph.TRANSPARENT_TITLE){if(t.onDrawTitleBar)t.onDrawTitleBar(e,s,n,this.ds.scale,r);else if(c!=LiteGraph.TRANSPARENT_TITLE&&(t.constructor.title_color||this.render_title_colored)){var f=t.constructor.title_color||r;if(t.flags.collapsed&&(e.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR),this.use_gradients){var g=LGraphCanvas.gradients[f];g||((g=LGraphCanvas.gradients[f]=e.createLinearGradient(0,0,400,0)).addColorStop(0,f),g.addColorStop(1,"#000")),e.fillStyle=g}else e.fillStyle=f;e.beginPath(),u==LiteGraph.BOX_SHAPE||l?e.rect(0,-s,n[0]+1,s):u!=LiteGraph.ROUND_SHAPE&&u!=LiteGraph.CARD_SHAPE||e.roundRect(0,-s,n[0]+1,s,t.flags.collapsed?[this.round_radius]:[this.round_radius,this.round_radius,0,0]),e.fill(),e.shadowColor="transparent"}var v=!1;LiteGraph.node_box_coloured_by_mode&&LiteGraph.NODE_MODES_COLORS[t.mode]&&(v=LiteGraph.NODE_MODES_COLORS[t.mode]),LiteGraph.node_box_coloured_when_on&&(v=t.action_triggered?"#FFF":t.execute_triggered?"#AAA":v);var m=10;if(t.onDrawTitleBox?t.onDrawTitleBox(e,s,n,this.ds.scale):u==LiteGraph.ROUND_SHAPE||u==LiteGraph.CIRCLE_SHAPE||u==LiteGraph.CARD_SHAPE?(l&&(e.fillStyle="black",e.beginPath(),e.arc(.5*s,-.5*s,6,0,2*Math.PI),e.fill()),e.fillStyle=t.boxcolor||v||LiteGraph.NODE_DEFAULT_BOXCOLOR,l?e.fillRect(.5*s-5,-.5*s-5,m,m):(e.beginPath(),e.arc(.5*s,-.5*s,5,0,2*Math.PI),e.fill())):(l&&(e.fillStyle="black",e.fillRect(.5*(s-m)-1,-.5*(s+m)-1,12,12)),e.fillStyle=t.boxcolor||v||LiteGraph.NODE_DEFAULT_BOXCOLOR,e.fillRect(.5*(s-m),-.5*(s+m),m,m)),e.globalAlpha=h,t.onDrawTitleText&&t.onDrawTitleText(e,s,n,this.ds.scale,this.title_text_font,o),!l){e.font=this.title_text_font;var _=String(t.getTitle());if(_)if(e.fillStyle=o?LiteGraph.NODE_SELECTED_TITLE_COLOR:t.constructor.title_text_color||this.node_title_color,t.flags.collapsed){e.textAlign="left";e.measureText(_);e.fillText(_.substr(0,20),s,LiteGraph.NODE_TITLE_TEXT_Y-s),e.textAlign="left"}else e.textAlign="left",e.fillText(_,s,LiteGraph.NODE_TITLE_TEXT_Y-s)}if(!t.flags.collapsed&&t.subgraph&&!t.skip_subgraph_button){var y=LiteGraph.NODE_TITLE_HEIGHT,b=t.size[0]-y,x=LiteGraph.isInsideRectangle(this.graph_mouse[0]-t.pos[0],this.graph_mouse[1]-t.pos[1],b+2,2-y,y-4,y-4);e.fillStyle=x?"#888":"#555",u==LiteGraph.BOX_SHAPE||l?e.fillRect(b+2,2-y,y-4,y-4):(e.beginPath(),e.roundRect(b+2,2-y,y-4,y-4,[4]),e.fill()),e.fillStyle="#333",e.beginPath(),e.moveTo(b+.2*y,.6*-y),e.lineTo(b+.8*y,.6*-y),e.lineTo(b+.5*y,.3*-y),e.fill()}t.onDrawTitle&&t.onDrawTitle(e)}o&&(t.onBounding&&t.onBounding(d),c==LiteGraph.TRANSPARENT_TITLE&&(d[1]-=s,d[3]+=s),e.lineWidth=1,e.globalAlpha=.8,e.beginPath(),u==LiteGraph.BOX_SHAPE?e.rect(-6+d[0],-6+d[1],12+d[2],12+d[3]):u==LiteGraph.ROUND_SHAPE||u==LiteGraph.CARD_SHAPE&&t.flags.collapsed?e.roundRect(-6+d[0],-6+d[1],12+d[2],12+d[3],[2*this.round_radius]):u==LiteGraph.CARD_SHAPE?e.roundRect(-6+d[0],-6+d[1],12+d[2],12+d[3],[2*this.round_radius,2,2*this.round_radius,2]):u==LiteGraph.CIRCLE_SHAPE&&e.arc(.5*n[0],.5*n[1],.5*n[0]+6,0,2*Math.PI),e.strokeStyle=LiteGraph.NODE_BOX_OUTLINE_COLOR,e.stroke(),e.strokeStyle=r,e.globalAlpha=1),t.execute_triggered>0&&t.execute_triggered--,t.action_triggered>0&&t.action_triggered--};var margin_area=new Float32Array(4),link_bounding=new Float32Array(4),tempA=new Float32Array(2),tempB=new Float32Array(2);function compareObjects(t,e){for(var n in t)if(t[n]!=e[n])return!1;return!0}function distance(t,e){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function colorToString(t){return"rgba("+Math.round(255*t[0]).toFixed()+","+Math.round(255*t[1]).toFixed()+","+Math.round(255*t[2]).toFixed()+","+(4==t.length?t[3].toFixed(2):"1.0")+")"}function isInsideRectangle(t,e,n,r,i,o){return n<t&&n+i>t&&r<e&&r+o>e}function growBounding(t,e,n){e<t[0]?t[0]=e:e>t[2]&&(t[2]=e),n<t[1]?t[1]=n:n>t[3]&&(t[3]=n)}function isInsideBounding(t,e){return!(t[0]<e[0][0]||t[1]<e[0][1]||t[0]>e[1][0]||t[1]>e[1][1])}function overlapBounding(t,e){var n=t[0]+t[2],r=t[1]+t[3],i=e[0]+e[2],o=e[1]+e[3];return!(t[0]>i||t[1]>o||n<e[0]||r<e[1])}function hex2num(t){"#"==t.charAt(0)&&(t=t.slice(1)),t=t.toUpperCase();for(var e,n,r="0123456789ABCDEF",i=new Array(3),o=0,a=0;a<6;a+=2)e=r.indexOf(t.charAt(a)),n=r.indexOf(t.charAt(a+1)),i[o]=16*e+n,o++;return i}function num2hex(t){for(var e,n,r="0123456789ABCDEF",i="#",o=0;o<3;o++)e=t[o]/16,n=t[o]%16,i+=r.charAt(e)+r.charAt(n);return i}function ContextMenu(t,e){e=e||{},this.options=e;var n=this;e.parentMenu&&(e.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),e.parentMenu=null):(this.parentMenu=e.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this));var r=null;e.event&&(r=e.event.constructor.name),"MouseEvent"!==r&&"CustomEvent"!==r&&"PointerEvent"!==r&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it. ("+r+")"),e.event=null);var i=document.createElement("div");function o(t){var n=parseInt(i.style.top);return i.style.top=(n+t.deltaY*e.scroll_speed).toFixed()+"px",t.preventDefault(),!0}if(i.className="litegraph litecontextmenu litemenubar-panel",e.className&&(i.className+=" "+e.className),i.style.minWidth=100,i.style.minHeight=100,i.style.pointerEvents="none",setTimeout((function(){i.style.pointerEvents="auto"}),100),LiteGraph.pointerListenerAdd(i,"up",(function(t){return t.preventDefault(),!0}),!0),i.addEventListener("contextmenu",(function(t){return 2!=t.button||t.preventDefault(),!1}),!0),LiteGraph.pointerListenerAdd(i,"down",(function(t){if(2==t.button)return n.close(),t.preventDefault(),!0}),!0),e.scroll_speed||(e.scroll_speed=.1),i.addEventListener("wheel",o,!0),i.addEventListener("mousewheel",o,!0),this.root=i,e.title){var a=document.createElement("div");a.className="litemenu-title",a.innerHTML=e.title,i.appendChild(a)}for(var s=0;s<t.length;s++){var l=t.constructor==Array?t[s]:s;null!=l&&l.constructor!==String&&(l=void 0===l.content?String(l):l.content);var u=t[s];this.addItem(l,u,e)}LiteGraph.pointerListenerAdd(i,"enter",(function(t){i.closing_timer&&clearTimeout(i.closing_timer)}));var c=document;e.event&&(c=e.event.target.ownerDocument),c||(c=document),c.fullscreenElement?c.fullscreenElement.appendChild(i):c.body.appendChild(i);var p=e.left||0,d=e.top||0;if(e.event){if(p=e.event.clientX-10,d=e.event.clientY-10,e.title&&(d-=20),e.parentMenu){var h=e.parentMenu.root.getBoundingClientRect();p=h.left+h.width}var f=document.body.getBoundingClientRect(),g=i.getBoundingClientRect();0==f.height&&console.error("document.body height is 0. That is dangerous, set html,body { height: 100%; }"),f.width&&p>f.width-g.width-10&&(p=f.width-g.width-10),f.height&&d>f.height-g.height-10&&(d=f.height-g.height-10)}i.style.left=p+"px",i.style.top=d+"px",e.scale&&(i.style.transform="scale("+e.scale+")")}function CurveEditor(t){this.points=t,this.selected=-1,this.nearest=-1,this.size=null,this.must_update=!0,this.margin=5}function clamp(t,e,n){return e>t?e:n<t?n:t}LGraphCanvas.prototype.drawConnections=function(t){var e=LiteGraph.getTime(),n=this.visible_area;margin_area[0]=n[0]-20,margin_area[1]=n[1]-20,margin_area[2]=n[2]+40,margin_area[3]=n[3]+40,t.lineWidth=this.connections_width,t.fillStyle="#AAA",t.strokeStyle="#AAA",t.globalAlpha=this.editor_alpha;for(var r=this.graph._nodes,i=0,o=r.length;i<o;++i){var a=r[i];if(a.inputs&&a.inputs.length)for(var s=0;s<a.inputs.length;++s){var l=a.inputs[s];if(l&&null!=l.link){var u=l.link,c=this.graph.links[u];if(c){var p=this.graph.getNodeById(c.origin_id);if(null!=p){var d=c.origin_slot,h=null;h=-1==d?[p.pos[0]+10,p.pos[1]+10]:p.getConnectionPos(!1,d,tempA);var f=a.getConnectionPos(!0,s,tempB);if(link_bounding[0]=h[0],link_bounding[1]=h[1],link_bounding[2]=f[0]-h[0],link_bounding[3]=f[1]-h[1],link_bounding[2]<0&&(link_bounding[0]+=link_bounding[2],link_bounding[2]=Math.abs(link_bounding[2])),link_bounding[3]<0&&(link_bounding[1]+=link_bounding[3],link_bounding[3]=Math.abs(link_bounding[3])),overlapBounding(link_bounding,margin_area)){var g=p.outputs[d],v=a.inputs[s];if(g&&v){var m=g.dir||(p.horizontal?LiteGraph.DOWN:LiteGraph.RIGHT),_=v.dir||(a.horizontal?LiteGraph.UP:LiteGraph.LEFT);if(this.renderLink(t,h,f,c,!1,0,null,m,_),c&&c._last_time&&e-c._last_time<1e3){var y=2-.002*(e-c._last_time),b=t.globalAlpha;t.globalAlpha=b*y,this.renderLink(t,h,f,c,!0,y,"white",m,_),t.globalAlpha=b}}}}}}}}t.globalAlpha=1},LGraphCanvas.prototype.renderLink=function(t,e,n,r,i,o,a,s,l,u){r&&this.visible_links.push(r),!a&&r&&(a=r.color||LGraphCanvas.link_type_colors[r.type]),a||(a=this.default_link_color),null!=r&&this.highlighted_links[r.id]&&(a="#FFF"),s=s||LiteGraph.RIGHT,l=l||LiteGraph.LEFT;var c=distance(e,n);this.render_connections_border&&this.ds.scale>.6&&(t.lineWidth=this.connections_width+4),t.lineJoin="round",(u=u||1)>1&&(t.lineWidth=.5),t.beginPath();for(var p=0;p<u;p+=1){var d=5*(p-.5*(u-1));if(this.links_render_mode==LiteGraph.SPLINE_LINK){t.moveTo(e[0],e[1]+d);var h=0,f=0,g=0,v=0;switch(s){case LiteGraph.LEFT:h=-.25*c;break;case LiteGraph.RIGHT:h=.25*c;break;case LiteGraph.UP:f=-.25*c;break;case LiteGraph.DOWN:f=.25*c}switch(l){case LiteGraph.LEFT:g=-.25*c;break;case LiteGraph.RIGHT:g=.25*c;break;case LiteGraph.UP:v=-.25*c;break;case LiteGraph.DOWN:v=.25*c}t.bezierCurveTo(e[0]+h,e[1]+f+d,n[0]+g,n[1]+v+d,n[0],n[1]+d)}else if(this.links_render_mode==LiteGraph.LINEAR_LINK){t.moveTo(e[0],e[1]+d);h=0,f=0,g=0,v=0;switch(s){case LiteGraph.LEFT:h=-1;break;case LiteGraph.RIGHT:h=1;break;case LiteGraph.UP:f=-1;break;case LiteGraph.DOWN:f=1}switch(l){case LiteGraph.LEFT:g=-1;break;case LiteGraph.RIGHT:g=1;break;case LiteGraph.UP:v=-1;break;case LiteGraph.DOWN:v=1}t.lineTo(e[0]+15*h,e[1]+15*f+d),t.lineTo(n[0]+15*g,n[1]+15*v+d),t.lineTo(n[0],n[1]+d)}else{if(this.links_render_mode!=LiteGraph.STRAIGHT_LINK)return;t.moveTo(e[0],e[1]);var m=e[0],_=e[1],y=n[0],b=n[1];s==LiteGraph.RIGHT?m+=10:_+=10,l==LiteGraph.LEFT?y-=10:b-=10,t.lineTo(m,_),t.lineTo(.5*(m+y),_),t.lineTo(.5*(m+y),b),t.lineTo(y,b),t.lineTo(n[0],n[1])}}this.render_connections_border&&this.ds.scale>.6&&!i&&(t.strokeStyle="rgba(0,0,0,0.5)",t.stroke()),t.lineWidth=this.connections_width,t.fillStyle=t.strokeStyle=a,t.stroke();var x=this.computeConnectionPoint(e,n,.5,s,l);if(r&&r._pos&&(r._pos[0]=x[0],r._pos[1]=x[1]),this.ds.scale>=.6&&this.highquality_render&&l!=LiteGraph.CENTER){if(this.render_connection_arrows){var w=this.computeConnectionPoint(e,n,.25,s,l),E=this.computeConnectionPoint(e,n,.26,s,l),T=this.computeConnectionPoint(e,n,.75,s,l),S=this.computeConnectionPoint(e,n,.76,s,l),C=0,O=0;this.render_curved_connections?(C=-Math.atan2(E[0]-w[0],E[1]-w[1]),O=-Math.atan2(S[0]-T[0],S[1]-T[1])):O=C=n[1]>e[1]?0:Math.PI,t.save(),t.translate(w[0],w[1]),t.rotate(C),t.beginPath(),t.moveTo(-5,-3),t.lineTo(0,7),t.lineTo(5,-3),t.fill(),t.restore(),t.save(),t.translate(T[0],T[1]),t.rotate(O),t.beginPath(),t.moveTo(-5,-3),t.lineTo(0,7),t.lineTo(5,-3),t.fill(),t.restore()}t.beginPath(),t.arc(x[0],x[1],5,0,2*Math.PI),t.fill()}if(o){t.fillStyle=a;for(p=0;p<5;++p){var L=(.001*LiteGraph.getTime()+.2*p)%1;x=this.computeConnectionPoint(e,n,L,s,l);t.beginPath(),t.arc(x[0],x[1],5,0,2*Math.PI),t.fill()}}},LGraphCanvas.prototype.computeConnectionPoint=function(t,e,n,r,i){r=r||LiteGraph.RIGHT,i=i||LiteGraph.LEFT;var o=distance(t,e),a=t,s=[t[0],t[1]],l=[e[0],e[1]],u=e;switch(r){case LiteGraph.LEFT:s[0]+=-.25*o;break;case LiteGraph.RIGHT:s[0]+=.25*o;break;case LiteGraph.UP:s[1]+=-.25*o;break;case LiteGraph.DOWN:s[1]+=.25*o}switch(i){case LiteGraph.LEFT:l[0]+=-.25*o;break;case LiteGraph.RIGHT:l[0]+=.25*o;break;case LiteGraph.UP:l[1]+=-.25*o;break;case LiteGraph.DOWN:l[1]+=.25*o}var c=(1-n)*(1-n)*(1-n),p=(1-n)*(1-n)*3*n,d=3*(1-n)*(n*n),h=n*n*n;return[c*a[0]+p*s[0]+d*l[0]+h*u[0],c*a[1]+p*s[1]+d*l[1]+h*u[1]]},LGraphCanvas.prototype.drawExecutionOrder=function(t){t.shadowColor="transparent",t.globalAlpha=.25,t.textAlign="center",t.strokeStyle="white",t.globalAlpha=.75;for(var e=this.visible_nodes,n=0;n<e.length;++n){var r=e[n];t.fillStyle="black",t.fillRect(r.pos[0]-LiteGraph.NODE_TITLE_HEIGHT,r.pos[1]-LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT),0==r.order&&t.strokeRect(r.pos[0]-LiteGraph.NODE_TITLE_HEIGHT+.5,r.pos[1]-LiteGraph.NODE_TITLE_HEIGHT+.5,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT),t.fillStyle="#FFF",t.fillText(r.order,r.pos[0]+-.5*LiteGraph.NODE_TITLE_HEIGHT,r.pos[1]-6)}t.globalAlpha=1},LGraphCanvas.prototype.drawNodeWidgets=function(t,e,n,r){if(!t.widgets||!t.widgets.length)return 0;var i=t.size[0],o=t.widgets;e+=2;var a=LiteGraph.NODE_WIDGET_HEIGHT,s=this.ds.scale>.5;n.save(),n.globalAlpha=this.editor_alpha;for(var l=LiteGraph.WIDGET_OUTLINE_COLOR,u=LiteGraph.WIDGET_BGCOLOR,c=LiteGraph.WIDGET_TEXT_COLOR,p=LiteGraph.WIDGET_SECONDARY_TEXT_COLOR,d=15,h=0;h<o.length;++h){var f=o[h],g=e;f.y&&(g=f.y),f.last_y=g,n.strokeStyle=l,n.fillStyle="#222",n.textAlign="left",f.disabled&&(n.globalAlpha*=.5);var v=f.width||i;switch(f.type){case"button":f.clicked&&(n.fillStyle="#AAA",f.clicked=!1,this.dirty_canvas=!0),n.fillRect(d,g,v-30,a),s&&!f.disabled&&n.strokeRect(d,g,v-30,a),s&&(n.textAlign="center",n.fillStyle=c,n.fillText(f.label||f.name,.5*v,g+.7*a));break;case"toggle":if(n.textAlign="left",n.strokeStyle=l,n.fillStyle=u,n.beginPath(),s?n.roundRect(d,g,v-30,a,[.5*a]):n.rect(d,g,v-30,a),n.fill(),s&&!f.disabled&&n.stroke(),n.fillStyle=f.value?"#89A":"#333",n.beginPath(),n.arc(v-30,g+.5*a,.36*a,0,2*Math.PI),n.fill(),s){n.fillStyle=p;const t=f.label||f.name;null!=t&&n.fillText(t,30,g+.7*a),n.fillStyle=f.value?c:p,n.textAlign="right",n.fillText(f.value?f.options.on||"true":f.options.off||"false",v-40,g+.7*a)}break;case"slider":n.fillStyle=u,n.fillRect(d,g,v-30,a);var m=f.options.max-f.options.min,_=(f.value-f.options.min)/m;if(_<0&&(_=0),_>1&&(_=1),n.fillStyle=f.options.hasOwnProperty("slider_color")?f.options.slider_color:r==f?"#89A":"#678",n.fillRect(d,g,_*(v-30),a),s&&!f.disabled&&n.strokeRect(d,g,v-30,a),f.marker){var y=(f.marker-f.options.min)/m;y<0&&(y=0),y>1&&(y=1),n.fillStyle=f.options.hasOwnProperty("marker_color")?f.options.marker_color:"#AA9",n.fillRect(d+y*(v-30),g,2,a)}s&&(n.textAlign="center",n.fillStyle=c,n.fillText(f.label||f.name+"  "+Number(f.value).toFixed(null!=f.options.precision?f.options.precision:3),.5*v,g+.7*a));break;case"number":case"combo":if(n.textAlign="left",n.strokeStyle=l,n.fillStyle=u,n.beginPath(),s?n.roundRect(d,g,v-30,a,[.5*a]):n.rect(d,g,v-30,a),n.fill(),s)if(f.disabled||n.stroke(),n.fillStyle=c,f.disabled||(n.beginPath(),n.moveTo(31,g+5),n.lineTo(21,g+.5*a),n.lineTo(31,g+a-5),n.fill(),n.beginPath(),n.moveTo(v-d-16,g+5),n.lineTo(v-d-6,g+.5*a),n.lineTo(v-d-16,g+a-5),n.fill()),n.fillStyle=p,n.fillText(f.label||f.name,35,g+.7*a),n.fillStyle=c,n.textAlign="right","number"==f.type)n.fillText(Number(f.value).toFixed(void 0!==f.options.precision?f.options.precision:3),v-30-20,g+.7*a);else{var b=f.value;if(f.options.values){var x=f.options.values;x.constructor===Function&&(x=x()),x&&x.constructor!==Array&&(b=x[f.value])}n.fillText(b,v-30-20,g+.7*a)}break;case"string":case"text":if(n.textAlign="left",n.strokeStyle=l,n.fillStyle=u,n.beginPath(),s?n.roundRect(d,g,v-30,a,[.5*a]):n.rect(d,g,v-30,a),n.fill(),s){f.disabled||n.stroke(),n.save(),n.beginPath(),n.rect(d,g,v-30,a),n.clip(),n.fillStyle=p;const t=f.label||f.name;null!=t&&n.fillText(t,30,g+.7*a),n.fillStyle=c,n.textAlign="right",n.fillText(String(f.value).substr(0,30),v-30,g+.7*a),n.restore()}break;default:f.draw&&f.draw(n,t,v,g,a)}e+=(f.computeSize?f.computeSize(v)[1]:a)+4,n.globalAlpha=this.editor_alpha}n.restore(),n.textAlign="left"},LGraphCanvas.prototype.processNodeWidgets=function(node,pos,event,active_widget){if(!node.widgets||!node.widgets.length||!this.allow_interaction&&!node.flags.allow_interaction)return null;for(var x=pos[0]-node.pos[0],y=pos[1]-node.pos[1],width=node.size[0],deltaX=event.deltaX||event.deltax||0,that=this,ref_window=this.getCanvasWindow(),i=0;i<node.widgets.length;++i){var w=node.widgets[i];if(w&&!w.disabled){var widget_height=w.computeSize?w.computeSize(width)[1]:LiteGraph.NODE_WIDGET_HEIGHT,widget_width=w.width||width;if(w==active_widget||!(x<6||x>widget_width-12||y<w.last_y||y>w.last_y+widget_height||void 0===w.last_y)){var old_value=w.value;switch(w.type){case"button":event.type===LiteGraph.pointerevents_method+"down"&&(w.callback&&setTimeout((function(){w.callback(w,that,node,pos,event)}),20),w.clicked=!0,this.dirty_canvas=!0);break;case"slider":var old_value=w.value,nvalue=clamp((x-15)/(widget_width-30),0,1);if(w.options.read_only)break;w.value=w.options.min+(w.options.max-w.options.min)*nvalue,old_value!=w.value&&setTimeout((function(){inner_value_change(w,w.value)}),20),this.dirty_canvas=!0;break;case"number":case"combo":var old_value=w.value;if(event.type==LiteGraph.pointerevents_method+"move"&&"number"==w.type)deltaX&&(w.value+=.1*deltaX*(w.options.step||1)),null!=w.options.min&&w.value<w.options.min&&(w.value=w.options.min),null!=w.options.max&&w.value>w.options.max&&(w.value=w.options.max);else if(event.type==LiteGraph.pointerevents_method+"down"){var values=w.options.values;values&&values.constructor===Function&&(values=w.options.values(w,node));var values_list=null;"number"!=w.type&&(values_list=values.constructor===Array?values:Object.keys(values));var delta=x<40?-1:x>widget_width-40?1:0;if("number"==w.type)w.value+=.1*delta*(w.options.step||1),null!=w.options.min&&w.value<w.options.min&&(w.value=w.options.min),null!=w.options.max&&w.value>w.options.max&&(w.value=w.options.max);else if(delta){var index=-1;this.last_mouseclick=0,index=values.constructor===Object?values_list.indexOf(String(w.value))+delta:values_list.indexOf(w.value)+delta,index>=values_list.length&&(index=values_list.length-1),index<0&&(index=0),values.constructor===Array?w.value=values[index]:w.value=index}else{var text_values=values!=values_list?Object.values(values):values,menu=new LiteGraph.ContextMenu(text_values,{scale:Math.max(1,this.ds.scale),event:event,className:"dark",callback:inner_clicked.bind(w)},ref_window);function inner_clicked(t,e,n){return values!=values_list&&(t=text_values.indexOf(t)),this.value=t,inner_value_change(this,t),that.dirty_canvas=!0,!1}}}else if(event.type==LiteGraph.pointerevents_method+"up"&&"number"==w.type){var delta=x<40?-1:x>widget_width-40?1:0;event.click_time<200&&0==delta&&this.prompt("Value",w.value,function(v){if(/^[0-9+\-*/()\s]+|\d+\.\d+$/.test(v))try{v=eval(v)}catch(e){}this.value=Number(v),inner_value_change(this,this.value)}.bind(w),event)}old_value!=w.value&&setTimeout(function(){inner_value_change(this,this.value)}.bind(w),20),this.dirty_canvas=!0;break;case"toggle":event.type==LiteGraph.pointerevents_method+"down"&&(w.value=!w.value,setTimeout((function(){inner_value_change(w,w.value)}),20));break;case"string":case"text":event.type==LiteGraph.pointerevents_method+"down"&&this.prompt("Value",w.value,function(t){inner_value_change(this,t)}.bind(w),event,!!w.options&&w.options.multiline);break;default:w.mouse&&(this.dirty_canvas=w.mouse(event,[x,y],node))}return old_value!=w.value&&(node.onWidgetChanged&&node.onWidgetChanged(w.name,w.value,old_value,w),node.graph._version++),w}}}function inner_value_change(t,e){"number"==t.type&&(e=Number(e)),t.value=e,t.options&&t.options.property&&void 0!==node.properties[t.options.property]&&node.setProperty(t.options.property,e),t.callback&&t.callback(t.value,that,node,pos,event)}return null},LGraphCanvas.prototype.drawGroups=function(t,e){if(this.graph){var n=this.graph._groups;e.save(),e.globalAlpha=.5*this.editor_alpha;for(var r=0;r<n.length;++r){var i=n[r];if(overlapBounding(this.visible_area,i._bounding)){e.fillStyle=i.color||"#335",e.strokeStyle=i.color||"#335";var o=i._pos,a=i._size;e.globalAlpha=.25*this.editor_alpha,e.beginPath(),e.rect(o[0]+.5,o[1]+.5,a[0],a[1]),e.fill(),e.globalAlpha=this.editor_alpha,e.stroke(),e.beginPath(),e.moveTo(o[0]+a[0],o[1]+a[1]),e.lineTo(o[0]+a[0]-10,o[1]+a[1]),e.lineTo(o[0]+a[0],o[1]+a[1]-10),e.fill();var s=i.font_size||LiteGraph.DEFAULT_GROUP_FONT_SIZE;e.font=s+"px Arial",e.textAlign="left",e.fillText(i.title,o[0]+4,o[1]+s)}}e.restore()}},LGraphCanvas.prototype.adjustNodesSize=function(){for(var t=this.graph._nodes,e=0;e<t.length;++e)t[e].size=t[e].computeSize();this.setDirty(!0,!0)},LGraphCanvas.prototype.resize=function(t,e){if(!t&&!e){var n=this.canvas.parentNode;t=n.offsetWidth,e=n.offsetHeight}this.canvas.width==t&&this.canvas.height==e||(this.canvas.width=t,this.canvas.height=e,this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height,this.setDirty(!0,!0))},LGraphCanvas.prototype.switchLiveMode=function(t){if(!t)return this.live_mode=!this.live_mode,this.dirty_canvas=!0,void(this.dirty_bgcanvas=!0);var e=this,n=this.live_mode?1.1:.9;this.live_mode&&(this.live_mode=!1,this.editor_alpha=.1);var r=setInterval((function(){e.editor_alpha*=n,e.dirty_canvas=!0,e.dirty_bgcanvas=!0,n<1&&e.editor_alpha<.01&&(clearInterval(r),n<1&&(e.live_mode=!0)),n>1&&e.editor_alpha>.99&&(clearInterval(r),e.editor_alpha=1)}),1)},LGraphCanvas.prototype.onNodeSelectionChange=function(t){},LGraphCanvas.onGroupAdd=function(t,e,n){var r=LGraphCanvas.active_canvas,i=(r.getCanvasWindow(),new LiteGraph.LGraphGroup);i.pos=r.convertEventToCanvasOffset(n),r.graph.add(i)},LGraphCanvas.getBoundaryNodes=function(t){let e=null,n=null,r=null,i=null;for(const o in t){const a=t[o],[s,l]=a.pos,[u,c]=a.size;(null===e||l<e.pos[1])&&(e=a),(null===n||s+u>n.pos[0]+n.size[0])&&(n=a),(null===r||l+c>r.pos[1]+r.size[1])&&(r=a),(null===i||s<i.pos[0])&&(i=a)}return{top:e,right:n,bottom:r,left:i}},LGraphCanvas.prototype.boundaryNodesForSelection=function(){return LGraphCanvas.getBoundaryNodes(Object.values(this.selected_nodes))},LGraphCanvas.alignNodes=function(t,e,n){if(!t)return;const r=LGraphCanvas.active_canvas;let i=[];i=void 0===n?LGraphCanvas.getBoundaryNodes(t):{top:n,right:n,bottom:n,left:n};for(const[o,a]of Object.entries(r.selected_nodes))switch(e){case"right":a.pos[0]=i.right.pos[0]+i.right.size[0]-a.size[0];break;case"left":a.pos[0]=i.left.pos[0];break;case"top":a.pos[1]=i.top.pos[1];break;case"bottom":a.pos[1]=i.bottom.pos[1]+i.bottom.size[1]-a.size[1]}r.dirty_canvas=!0,r.dirty_bgcanvas=!0},LGraphCanvas.onNodeAlign=function(t,e,n,r,i){new LiteGraph.ContextMenu(["Top","Bottom","Left","Right"],{event:n,callback:function(t){LGraphCanvas.alignNodes(LGraphCanvas.active_canvas.selected_nodes,t.toLowerCase(),i)},parentMenu:r})},LGraphCanvas.onGroupAlign=function(t,e,n,r){new LiteGraph.ContextMenu(["Top","Bottom","Left","Right"],{event:n,callback:function(t){LGraphCanvas.alignNodes(LGraphCanvas.active_canvas.selected_nodes,t.toLowerCase())},parentMenu:r})},LGraphCanvas.onMenuAdd=function(t,e,n,r,i){var o=LGraphCanvas.active_canvas,a=o.getCanvasWindow(),s=o.graph;if(s)return function t(e,r){var l=LiteGraph.getNodeTypesCategories(o.filter||s.filter).filter((function(t){return t.startsWith(e)})),u=[];l.map((function(n){if(n){var r=new RegExp("^("+e+")"),i=n.replace(r,"").split("/")[0],o=""===e?i+"/":e+i+"/",a=i;-1!=a.indexOf("::")&&(a=a.split("::")[1]),-1===u.findIndex((function(t){return t.value===o}))&&u.push({value:o,content:a,has_submenu:!0,callback:function(e,n,r,i){t(e.value,i)}})}})),LiteGraph.getNodeTypesInCategory(e.slice(0,-1),o.filter||s.filter).map((function(t){if(!t.skip_list){var e={value:t.type,content:t.title,has_submenu:!1,callback:function(t,e,n,r){var a=r.getFirstEvent();o.graph.beforeChange();var s=LiteGraph.createNode(t.value);s&&(s.pos=o.convertEventToCanvasOffset(a),o.graph.add(s)),i&&i(s),o.graph.afterChange()}};u.push(e)}})),new LiteGraph.ContextMenu(u,{event:n,parentMenu:r},a)}("",r),!1},LGraphCanvas.onMenuCollapseAll=function(){},LGraphCanvas.onMenuNodeEdit=function(){},LGraphCanvas.showMenuNodeOptionalInputs=function(t,e,n,r,i){if(i){var o=this,a=LGraphCanvas.active_canvas.getCanvasWindow();e=i.optional_inputs;i.onGetInputs&&(e=i.onGetInputs());var s=[];if(e)for(var l=0;l<e.length;l++){var u=e[l];if(u){var c=u[0];u[2]||(u[2]={}),u[2].label&&(c=u[2].label),u[2].removable=!0;var p={content:c,value:u};u[1]==LiteGraph.ACTION&&(p.className="event"),s.push(p)}else s.push(null)}if(i.onMenuNodeInputs){var d=i.onMenuNodeInputs(s);d&&(s=d)}if(s.length){new LiteGraph.ContextMenu(s,{event:n,callback:function(t,e,n){if(!i)return;t.callback&&t.callback.call(o,i,t,e,n);t.value&&(i.graph.beforeChange(),i.addInput(t.value[0],t.value[1],t.value[2]),i.onNodeInputAdd&&i.onNodeInputAdd(t.value),i.setDirtyCanvas(!0,!0),i.graph.afterChange())},parentMenu:r,node:i},a);return!1}console.log("no input entries")}},LGraphCanvas.showMenuNodeOptionalOutputs=function(t,e,n,r,i){if(i){var o=this,a=LGraphCanvas.active_canvas.getCanvasWindow();e=i.optional_outputs;i.onGetOutputs&&(e=i.onGetOutputs());var s=[];if(e)for(var l=0;l<e.length;l++){var u=e[l];if(u){if(!i.flags||!i.flags.skip_repeated_outputs||-1==i.findOutputSlot(u[0])){var c=u[0];u[2]||(u[2]={}),u[2].label&&(c=u[2].label),u[2].removable=!0;var p={content:c,value:u};u[1]==LiteGraph.EVENT&&(p.className="event"),s.push(p)}}else s.push(null)}if(this.onMenuNodeOutputs&&(s=this.onMenuNodeOutputs(s)),LiteGraph.do_add_triggers_slots&&-1==i.findOutputSlot("onExecuted")&&s.push({content:"On Executed",value:["onExecuted",LiteGraph.EVENT,{nameLocked:!0}],className:"event"}),i.onMenuNodeOutputs){var d=i.onMenuNodeOutputs(s);d&&(s=d)}if(s.length){new LiteGraph.ContextMenu(s,{event:n,callback:function t(e,n,a){if(!i)return;e.callback&&e.callback.call(o,i,e,n,a);if(!e.value)return;var s=e.value[1];if(s&&(s.constructor===Object||s.constructor===Array)){var l=[];for(var u in s)l.push({content:u,value:s[u]});return new LiteGraph.ContextMenu(l,{event:n,callback:t,parentMenu:r,node:i}),!1}i.graph.beforeChange(),i.addOutput(e.value[0],e.value[1],e.value[2]),i.onNodeOutputAdd&&i.onNodeOutputAdd(e.value),i.setDirtyCanvas(!0,!0),i.graph.afterChange()},parentMenu:r,node:i},a);return!1}}},LGraphCanvas.onShowMenuNodeProperties=function(t,e,n,r,i){if(i&&i.properties){var o=LGraphCanvas.active_canvas,a=o.getCanvasWindow(),s=[];for(var l in i.properties){"object"==typeof(t=void 0!==i.properties[l]?i.properties[l]:" ")&&(t=JSON.stringify(t));var u=i.getPropertyInfo(l);"enum"!=u.type&&"combo"!=u.type||(t=LGraphCanvas.getPropertyPrintableValue(t,u.values)),t=LGraphCanvas.decodeHTML(t),s.push({content:"<span class='property_name'>"+(u.label?u.label:l)+"</span><span class='property_value'>"+t+"</span>",value:l})}if(s.length){new LiteGraph.ContextMenu(s,{event:n,callback:function(t,e,n,r){if(!i)return;var a=this.getBoundingClientRect();o.showEditPropertyValue(i,t.value,{position:[a.left,a.top]})},parentMenu:r,allow_html:!0,node:i},a);return!1}}},LGraphCanvas.decodeHTML=function(t){var e=document.createElement("div");return e.innerText=t,e.innerHTML},LGraphCanvas.onMenuResizeNode=function(t,e,n,r,i){if(i){var o=function(t){t.size=t.computeSize(),t.onResize&&t.onResize(t.size)},a=LGraphCanvas.active_canvas;if(!a.selected_nodes||Object.keys(a.selected_nodes).length<=1)o(i);else for(var s in a.selected_nodes)o(a.selected_nodes[s]);i.setDirtyCanvas(!0,!0)}},LGraphCanvas.prototype.showLinkMenu=function(t,e){var n=this,r=n.graph.getNodeById(t.origin_id),i=n.graph.getNodeById(t.target_id),o=!1;r&&r.outputs&&r.outputs[t.origin_slot]&&(o=r.outputs[t.origin_slot].type);var a=!1;i&&i.outputs&&i.outputs[t.target_slot]&&(a=i.inputs[t.target_slot].type);var s=new LiteGraph.ContextMenu(["Add Node",null,"Delete",null],{event:e,title:null!=t.data?t.data.constructor.name:null,callback:function(e,l,u){switch(e){case"Add Node":LGraphCanvas.onMenuAdd(null,null,u,s,(function(e){e.inputs&&e.inputs.length&&e.outputs&&e.outputs.length&&r.connectByType(t.origin_slot,e,o)&&(e.connectByType(t.target_slot,i,a),e.pos[0]-=.5*e.size[0])}));break;case"Delete":n.graph.removeLink(t.id)}}});return!1},LGraphCanvas.prototype.createDefaultNodeForSlot=function(t){t=t||{};var e=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,position:[],nodeType:null,posAdd:[0,0],posSizeFix:[0,0]},t),n=e.nodeFrom&&null!==e.slotFrom,r=!n&&e.nodeTo&&null!==e.slotTo;if(!n&&!r)return console.warn("No data passed to createDefaultNodeForSlot "+e.nodeFrom+" "+e.slotFrom+" "+e.nodeTo+" "+e.slotTo),!1;if(!e.nodeType)return console.warn("No type to createDefaultNodeForSlot"),!1;var i=n?e.nodeFrom:e.nodeTo,o=n?e.slotFrom:e.slotTo,a=!1;switch(typeof o){case"string":a=n?i.findOutputSlot(o,!1):i.findInputSlot(o,!1),o=n?i.outputs[o]:i.inputs[o];break;case"object":a=n?i.findOutputSlot(o.name):i.findInputSlot(o.name);break;case"number":a=o,o=n?i.outputs[o]:i.inputs[o];break;default:return console.warn("Cant get slot information "+o),!1}!1!==o&&!1!==a||console.warn("createDefaultNodeForSlot bad slotX "+o+" "+a);var s=o.type==LiteGraph.EVENT?"_event_":o.type,l=n?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(l&&l[s]){if(o.link,nodeNewType=!1,"object"==typeof l[s]||"array"==typeof l[s]){for(var u in l[s])if(e.nodeType==l[s][u]||"AUTO"==e.nodeType){nodeNewType=l[s][u];break}}else e.nodeType!=l[s]&&"AUTO"!=e.nodeType||(nodeNewType=l[s]);if(nodeNewType){var c=!1;"object"==typeof nodeNewType&&nodeNewType.node&&(c=nodeNewType,nodeNewType=nodeNewType.node);var p=LiteGraph.createNode(nodeNewType);if(p){if(c){if(c.properties)for(var d in c.properties)p.addProperty(d,c.properties[d]);if(c.inputs)for(var d in p.inputs=[],c.inputs)p.addOutput(c.inputs[d][0],c.inputs[d][1]);if(c.outputs)for(var d in p.outputs=[],c.outputs)p.addOutput(c.outputs[d][0],c.outputs[d][1]);c.title&&(p.title=c.title),c.json&&p.configure(c.json)}return this.graph.add(p),p.pos=[e.position[0]+e.posAdd[0]+(e.posSizeFix[0]?e.posSizeFix[0]*p.size[0]:0),e.position[1]+e.posAdd[1]+(e.posSizeFix[1]?e.posSizeFix[1]*p.size[1]:0)],n?e.nodeFrom.connectByType(a,p,s):e.nodeTo.connectByTypeOutput(a,p,s),!0}console.log("failed creating "+nodeNewType)}}return!1},LGraphCanvas.prototype.showConnectionMenu=function(t){t=t||{};var e=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,e:null},t),n=this,r=e.nodeFrom&&e.slotFrom,i=!r&&e.nodeTo&&e.slotTo;if(!r&&!i)return console.warn("No data passed to showConnectionMenu"),!1;var o=r?e.nodeFrom:e.nodeTo,a=r?e.slotFrom:e.slotTo,s=!1;switch(typeof a){case"string":s=r?o.findOutputSlot(a,!1):o.findInputSlot(a,!1),a=r?o.outputs[a]:o.inputs[a];break;case"object":s=r?o.findOutputSlot(a.name):o.findInputSlot(a.name);break;case"number":s=a,a=r?o.outputs[a]:o.inputs[a];break;default:return console.warn("Cant get slot information "+a),!1}var l=["Add Node",null];n.allow_searchbox&&(l.push("Search"),l.push(null));var u=a.type==LiteGraph.EVENT?"_event_":a.type,c=r?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(c&&c[u])if("object"==typeof c[u]||"array"==typeof c[u])for(var p in c[u])l.push(c[u][p]);else l.push(c[u]);var d=new LiteGraph.ContextMenu(l,{event:e.e,title:(a&&""!=a.name?a.name+(u?" | ":""):"")+(a&&u?u:""),callback:function(t,i,o){switch(t){case"Add Node":LGraphCanvas.onMenuAdd(null,null,o,d,(function(t){r?e.nodeFrom.connectByType(s,t,u):e.nodeTo.connectByTypeOutput(s,t,u)}));break;case"Search":r?n.showSearchBox(o,{node_from:e.nodeFrom,slot_from:a,type_filter_in:u}):n.showSearchBox(o,{node_to:e.nodeTo,slot_from:a,type_filter_out:u});break;default:n.createDefaultNodeForSlot(Object.assign(e,{position:[e.e.canvasX,e.e.canvasY],nodeType:t}))}}});return!1},LGraphCanvas.onShowPropertyEditor=function(t,e,n,r,i){var o=t.property||"title",a=i[o],s=document.createElement("div");s.is_modified=!1,s.className="graphdialog",s.innerHTML="<span class='name'></span><input autofocus type='text' class='value'/><button>OK</button>",s.close=function(){s.parentNode&&s.parentNode.removeChild(s)},s.querySelector(".name").innerText=o;var l=s.querySelector(".value");l&&(l.value=a,l.addEventListener("blur",(function(t){this.focus()})),l.addEventListener("keydown",(function(t){if(s.is_modified=!0,27==t.keyCode)s.close();else if(13==t.keyCode)f();else if(13!=t.keyCode&&"textarea"!=t.target.localName)return;t.preventDefault(),t.stopPropagation()})));var u=LGraphCanvas.active_canvas.canvas,c=u.getBoundingClientRect(),p=-20,d=-20;c&&(p-=c.left,d-=c.top),event?(s.style.left=event.clientX+p+"px",s.style.top=event.clientY+d+"px"):(s.style.left=.5*u.width+p+"px",s.style.top=.5*u.height+d+"px"),s.querySelector("button").addEventListener("click",f),u.parentNode.appendChild(s),l&&l.focus();var h=null;function f(){l&&function(e){"Number"==t.type?e=Number(e):"Boolean"==t.type&&(e=Boolean(e));i[o]=e,s.parentNode&&s.parentNode.removeChild(s);i.setDirtyCanvas(!0,!0)}(l.value)}s.addEventListener("mouseleave",(function(t){LiteGraph.dialog_close_on_mouse_leave&&!s.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(h=setTimeout(s.close,LiteGraph.dialog_close_on_mouse_leave_delay))})),s.addEventListener("mouseenter",(function(t){LiteGraph.dialog_close_on_mouse_leave&&h&&clearTimeout(h)}))},LGraphCanvas.prototype.prompt=function(t,e,n,r,i){var o=this;t=t||"";var a=document.createElement("div");a.is_modified=!1,a.className="graphdialog rounded",a.innerHTML=i?"<span class='name'></span> <textarea autofocus class='value'></textarea><button class='rounded'>OK</button>":"<span class='name'></span> <input autofocus type='text' class='value'/><button class='rounded'>OK</button>",a.close=function(){o.prompt_box=null,a.parentNode&&a.parentNode.removeChild(a)};var s=LGraphCanvas.active_canvas.canvas;s.parentNode.appendChild(a),this.ds.scale>1&&(a.style.transform="scale("+this.ds.scale+")");var l=null,u=!1;LiteGraph.pointerListenerAdd(a,"leave",(function(t){u||LiteGraph.dialog_close_on_mouse_leave&&!a.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(l=setTimeout(a.close,LiteGraph.dialog_close_on_mouse_leave_delay))})),LiteGraph.pointerListenerAdd(a,"enter",(function(t){LiteGraph.dialog_close_on_mouse_leave&&l&&clearTimeout(l)}));var c=a.querySelectorAll("select");c&&c.forEach((function(t){t.addEventListener("click",(function(t){u++})),t.addEventListener("blur",(function(t){u=0})),t.addEventListener("change",(function(t){u=-1}))})),o.prompt_box&&o.prompt_box.close(),o.prompt_box=a;a.querySelector(".name").innerText=t;var p=a.querySelector(".value");p.value=e;var d=p;d.addEventListener("keydown",(function(t){if(a.is_modified=!0,27==t.keyCode)a.close();else{if(13!=t.keyCode||"textarea"==t.target.localName)return;n&&n(this.value),a.close()}t.preventDefault(),t.stopPropagation()})),a.querySelector("button").addEventListener("click",(function(t){n&&n(d.value),o.setDirty(!0),a.close()}));var h=s.getBoundingClientRect(),f=-20,g=-20;return h&&(f-=h.left,g-=h.top),r?(a.style.left=r.clientX+f+"px",a.style.top=r.clientY+g+"px"):(a.style.left=.5*s.width+f+"px",a.style.top=.5*s.height+g+"px"),setTimeout((function(){d.focus()}),10),a},LGraphCanvas.search_limit=-1,LGraphCanvas.prototype.showSearchBox=function(t,e){var n={slot_from:null,node_from:null,node_to:null,do_type_filter:LiteGraph.search_filter_enabled,type_filter_in:!1,type_filter_out:!1,show_general_if_none_on_typefilter:!0,show_general_after_typefiltered:!0,hide_on_mouse_leave:LiteGraph.search_hide_on_mouse_leave,show_all_if_empty:!0,show_all_on_open:LiteGraph.search_show_all_on_open};e=Object.assign(n,e||{});var r=this,i=LGraphCanvas.active_canvas,o=i.canvas,a=o.ownerDocument||document,s=document.createElement("div");if(s.className="litegraph litesearchbox graphdialog rounded",s.innerHTML="<span class='name'>Search</span> <input autofocus type='text' class='value rounded'/>",e.do_type_filter&&(s.innerHTML+="<select class='slot_in_type_filter'><option value=''></option></select>",s.innerHTML+="<select class='slot_out_type_filter'><option value=''></option></select>"),s.innerHTML+="<div class='helper'></div>",a.fullscreenElement?a.fullscreenElement.appendChild(s):(a.body.appendChild(s),a.body.style.overflow="hidden"),e.do_type_filter)var l=s.querySelector(".slot_in_type_filter"),u=s.querySelector(".slot_out_type_filter");if(s.close=function(){r.search_box=null,this.blur(),o.focus(),a.body.style.overflow="",setTimeout((function(){r.canvas.focus()}),20),s.parentNode&&s.parentNode.removeChild(s)},this.ds.scale>1&&(s.style.transform="scale("+this.ds.scale+")"),e.hide_on_mouse_leave){var c=!1,p=null;LiteGraph.pointerListenerAdd(s,"enter",(function(t){p&&(clearTimeout(p),p=null)})),LiteGraph.pointerListenerAdd(s,"leave",(function(t){c||(p=setTimeout((function(){s.close()}),500))})),e.do_type_filter&&(l.addEventListener("click",(function(t){c++})),l.addEventListener("blur",(function(t){c=0})),l.addEventListener("change",(function(t){c=-1})),u.addEventListener("click",(function(t){c++})),u.addEventListener("blur",(function(t){c=0})),u.addEventListener("change",(function(t){c=-1})))}r.search_box&&r.search_box.close(),r.search_box=s;var d=s.querySelector(".helper"),h=null,f=null,g=null,v=s.querySelector("input");if(v&&(v.addEventListener("blur",(function(t){r.search_box&&this.focus()})),v.addEventListener("keydown",(function(t){if(38==t.keyCode)S(!1);else if(40==t.keyCode)S(!0);else if(27==t.keyCode)s.close();else{if(13!=t.keyCode)return f&&clearInterval(f),void(f=setTimeout(C,250));C(),g?T(g.innerHTML):h?T(h):s.close()}return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!0}))),e.do_type_filter){if(l){var m=(y=LiteGraph.slot_types_in).length;e.type_filter_in!=LiteGraph.EVENT&&e.type_filter_in!=LiteGraph.ACTION||(e.type_filter_in="_event_");for(var _=0;_<m;_++){(b=document.createElement("option")).value=y[_],b.innerHTML=y[_],l.appendChild(b),!1!==e.type_filter_in&&(e.type_filter_in+"").toLowerCase()==(y[_]+"").toLowerCase()&&(b.selected=!0)}l.addEventListener("change",(function(){C()}))}if(u){var y;m=(y=LiteGraph.slot_types_out).length;e.type_filter_out!=LiteGraph.EVENT&&e.type_filter_out!=LiteGraph.ACTION||(e.type_filter_out="_event_");for(_=0;_<m;_++){var b;(b=document.createElement("option")).value=y[_],b.innerHTML=y[_],u.appendChild(b),!1!==e.type_filter_out&&(e.type_filter_out+"").toLowerCase()==(y[_]+"").toLowerCase()&&(b.selected=!0)}u.addEventListener("change",(function(){C()}))}}var x=o.getBoundingClientRect(),w=(t?t.clientX:x.left+.5*x.width)-80,E=(t?t.clientY:x.top+.5*x.height)-20;function T(n){if(n)if(r.onSearchBoxSelection)r.onSearchBoxSelection(n,t,i);else{var o=LiteGraph.searchbox_extras[n.toLowerCase()];o&&(n=o.type),i.graph.beforeChange();var a=LiteGraph.createNode(n);if(a&&(a.pos=i.convertEventToCanvasOffset(t),i.graph.add(a,!1)),o&&o.data){if(o.data.properties)for(var l in o.data.properties)a.addProperty(l,o.data.properties[l]);if(o.data.inputs)for(var l in a.inputs=[],o.data.inputs)a.addOutput(o.data.inputs[l][0],o.data.inputs[l][1]);if(o.data.outputs)for(var l in a.outputs=[],o.data.outputs)a.addOutput(o.data.outputs[l][0],o.data.outputs[l][1]);o.data.title&&(a.title=o.data.title),o.data.json&&a.configure(o.data.json)}if(e.node_from){var u=!1;switch(typeof e.slot_from){case"string":u=e.node_from.findOutputSlot(e.slot_from);break;case"object":-1==(u=e.slot_from.name?e.node_from.findOutputSlot(e.slot_from.name):-1)&&"undefined"!==typeof e.slot_from.slot_index&&(u=e.slot_from.slot_index);break;case"number":u=e.slot_from;break;default:u=0}"undefined"!==typeof e.node_from.outputs[u]&&!1!==u&&u>-1&&e.node_from.connectByType(u,a,e.node_from.outputs[u].type)}if(e.node_to){u=!1;switch(typeof e.slot_from){case"string":u=e.node_to.findInputSlot(e.slot_from);break;case"object":-1==(u=e.slot_from.name?e.node_to.findInputSlot(e.slot_from.name):-1)&&"undefined"!==typeof e.slot_from.slot_index&&(u=e.slot_from.slot_index);break;case"number":u=e.slot_from;break;default:u=0}"undefined"!==typeof e.node_to.inputs[u]&&!1!==u&&u>-1&&e.node_to.connectByTypeOutput(u,a,e.node_to.inputs[u].type)}i.graph.afterChange()}s.close()}function S(t){var e=g;g&&g.classList.remove("selected"),g?(g=t?g.nextSibling:g.previousSibling)||(g=e):g=t?d.childNodes[0]:d.childNodes[d.childNodes.length],g&&(g.classList.add("selected"),g.scrollIntoView({block:"end",behavior:"smooth"}))}function C(){f=null;var t=v.value;if(h=null,d.innerHTML="",t||e.show_all_if_empty)if(r.onSearchBox){var n=r.onSearchBox(d,t,i);if(n)for(var o=0;o<n.length;++o)_(n[o])}else{var a=0;t=t.toLowerCase();var s=i.filter||i.graph.filter;if(e.do_type_filter&&r.search_box)var l=r.search_box.querySelector(".slot_in_type_filter"),u=r.search_box.querySelector(".slot_out_type_filter");else l=!1,u=!1;for(var o in LiteGraph.searchbox_extras){var c=LiteGraph.searchbox_extras[o];if(e.show_all_if_empty&&!t||-1!==c.desc.toLowerCase().indexOf(t)){var p=LiteGraph.registered_node_types[c.type];if((!p||p.filter==s)&&m(c.type)&&(_(c.desc,"searchbox_extra"),-1!==LGraphCanvas.search_limit&&a++>LGraphCanvas.search_limit))break}}var g=null;if(Array.prototype.filter)g=Object.keys(LiteGraph.registered_node_types).filter(m);else for(var o in g=[],LiteGraph.registered_node_types)m(o)&&g.push(o);for(o=0;o<g.length&&(_(g[o]),!(-1!==LGraphCanvas.search_limit&&a++>LGraphCanvas.search_limit));o++);if(e.show_general_after_typefiltered&&(l.value||u.value)){for(var o in filtered_extra=[],LiteGraph.registered_node_types)m(o,{inTypeOverride:!(!l||!l.value)&&"*",outTypeOverride:!(!u||!u.value)&&"*"})&&filtered_extra.push(o);for(o=0;o<filtered_extra.length&&(_(filtered_extra[o],"generic_type"),!(-1!==LGraphCanvas.search_limit&&a++>LGraphCanvas.search_limit));o++);}if((l.value||u.value)&&0==d.childNodes.length&&e.show_general_if_none_on_typefilter){for(var o in filtered_extra=[],LiteGraph.registered_node_types)m(o,{skipFilter:!0})&&filtered_extra.push(o);for(o=0;o<filtered_extra.length&&(_(filtered_extra[o],"not_in_filter"),!(-1!==LGraphCanvas.search_limit&&a++>LGraphCanvas.search_limit));o++);}function m(n,r){r=r||{};var i=Object.assign({skipFilter:!1,inTypeOverride:!1,outTypeOverride:!1},r),o=LiteGraph.registered_node_types[n];if(s&&o.filter!=s)return!1;if((!e.show_all_if_empty||t)&&-1===n.toLowerCase().indexOf(t))return!1;if(e.do_type_filter&&!i.skipFilter){var a=n,c=l.value;if(!1!==i.inTypeOverride&&(c=i.inTypeOverride),l&&c)if(LiteGraph.registered_slot_in_types[c]&&LiteGraph.registered_slot_in_types[c].nodes)if(!1===LiteGraph.registered_slot_in_types[c].nodes.includes(a))return!1;c=u.value;if(!1!==i.outTypeOverride&&(c=i.outTypeOverride),u&&c)if(LiteGraph.registered_slot_out_types[c]&&LiteGraph.registered_slot_out_types[c].nodes)if(!1===LiteGraph.registered_slot_out_types[c].nodes.includes(a))return!1}return!0}}function _(t,e){var n=document.createElement("div");h||(h=t),n.innerText=t,n.dataset.type=escape(t),n.className="litegraph lite-search-item",e&&(n.className+=" "+e),n.addEventListener("click",(function(t){T(unescape(this.dataset.type))})),d.appendChild(n)}}return s.style.left=w+"px",s.style.top=E+"px",t.layerY>x.height-200&&(d.style.maxHeight=x.height-t.layerY-20+"px"),v.focus(),e.show_all_on_open&&C(),s},LGraphCanvas.prototype.showEditPropertyValue=function(t,e,n){if(t&&void 0!==t.properties[e]){n=n||{};var r=t.getPropertyInfo(e),i=r.type,o="";if("string"==i||"number"==i||"array"==i||"object"==i)o="<input autofocus type='text' class='value'/>";else if("enum"!=i&&"combo"!=i||!r.values){if("boolean"!=i&&"toggle"!=i)return void console.warn("unknown type: "+i);o="<input autofocus type='checkbox' class='value' "+(t.properties[e]?"checked":"")+"/>"}else{for(var a in o="<select autofocus type='text' class='value'>",r.values){var s=a;r.values.constructor===Array&&(s=r.values[a]),o+="<option value='"+s+"' "+(s==t.properties[e]?"selected":"")+">"+r.values[a]+"</option>"}o+="</select>"}var l=this.createDialog("<span class='name'>"+(r.label?r.label:e)+"</span>"+o+"<button>OK</button>",n),u=!1;if("enum"!=i&&"combo"!=i||!r.values){if("boolean"==i||"toggle"==i)(u=l.querySelector("input"))&&u.addEventListener("click",(function(t){l.modified(),p(!!u.checked)}));else if(u=l.querySelector("input")){u.addEventListener("blur",(function(t){this.focus()}));s=void 0!==t.properties[e]?t.properties[e]:"";"string"!==i&&(s=JSON.stringify(s)),u.value=s,u.addEventListener("keydown",(function(t){if(27==t.keyCode)l.close();else if(13==t.keyCode)c();else if(13!=t.keyCode)return void l.modified();t.preventDefault(),t.stopPropagation()}))}}else(u=l.querySelector("select")).addEventListener("change",(function(t){l.modified(),p(t.target.value)}));return u&&u.focus(),l.querySelector("button").addEventListener("click",c),l}function c(){p(u.value)}function p(o){r&&r.values&&r.values.constructor===Object&&void 0!=r.values[o]&&(o=r.values[o]),"number"==typeof t.properties[e]&&(o=Number(o)),"array"!=i&&"object"!=i||(o=JSON.parse(o)),t.properties[e]=o,t.graph&&t.graph._version++,t.onPropertyChanged&&t.onPropertyChanged(e,o),n.onclose&&n.onclose(),l.close(),t.setDirtyCanvas(!0,!0)}},LGraphCanvas.prototype.createDialog=function(t,e){e=Object.assign({checkForInput:!1,closeOnLeave:!0,closeOnLeave_checkModified:!0},e||{});var n=document.createElement("div");n.className="graphdialog",n.innerHTML=t,n.is_modified=!1;var r=this.canvas.getBoundingClientRect(),i=-20,o=-20;if(r&&(i-=r.left,o-=r.top),e.position?(i+=e.position[0],o+=e.position[1]):e.event?(i+=e.event.clientX,o+=e.event.clientY):(i+=.5*this.canvas.width,o+=.5*this.canvas.height),n.style.left=i+"px",n.style.top=o+"px",this.canvas.parentNode.appendChild(n),e.checkForInput){var a=[];(a=n.querySelectorAll("input"))&&a.forEach((function(t){t.addEventListener("keydown",(function(t){if(n.modified(),27==t.keyCode)n.close();else if(13!=t.keyCode)return;t.preventDefault(),t.stopPropagation()})),t.focus()}))}n.modified=function(){n.is_modified=!0},n.close=function(){n.parentNode&&n.parentNode.removeChild(n)};var s=null,l=!1;n.addEventListener("mouseleave",(function(t){l||(e.closeOnLeave||LiteGraph.dialog_close_on_mouse_leave)&&!n.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(s=setTimeout(n.close,LiteGraph.dialog_close_on_mouse_leave_delay))})),n.addEventListener("mouseenter",(function(t){(e.closeOnLeave||LiteGraph.dialog_close_on_mouse_leave)&&s&&clearTimeout(s)}));var u=n.querySelectorAll("select");return u&&u.forEach((function(t){t.addEventListener("click",(function(t){l++})),t.addEventListener("blur",(function(t){l=0})),t.addEventListener("change",(function(t){l=-1}))})),n},LGraphCanvas.prototype.createPanel=function(t,e){var n=(e=e||{}).window||window,r=document.createElement("div");if(r.className="litegraph dialog",r.innerHTML="<div class='dialog-header'><span class='dialog-title'></span></div><div class='dialog-content'></div><div style='display:none;' class='dialog-alt-content'></div><div class='dialog-footer'></div>",r.header=r.querySelector(".dialog-header"),e.width&&(r.style.width=e.width+(e.width.constructor===Number?"px":"")),e.height&&(r.style.height=e.height+(e.height.constructor===Number?"px":"")),e.closable){var i=document.createElement("span");i.innerHTML="&#10005;",i.classList.add("close"),i.addEventListener("click",(function(){r.close()})),r.header.appendChild(i)}return r.title_element=r.querySelector(".dialog-title"),r.title_element.innerText=t,r.content=r.querySelector(".dialog-content"),r.alt_content=r.querySelector(".dialog-alt-content"),r.footer=r.querySelector(".dialog-footer"),r.close=function(){r.onClose&&"function"==typeof r.onClose&&r.onClose(),r.parentNode&&r.parentNode.removeChild(r),this.parentNode&&this.parentNode.removeChild(this)},r.toggleAltContent=function(t){if("undefined"!=typeof t)var e=t?"block":"none",n=t?"none":"block";else e="block"!=r.alt_content.style.display?"block":"none",n="block"!=r.alt_content.style.display?"none":"block";r.alt_content.style.display=e,r.content.style.display=n},r.toggleFooterVisibility=function(t){if("undefined"!=typeof t)var e=t?"block":"none";else e="block"!=r.footer.style.display?"block":"none";r.footer.style.display=e},r.clear=function(){this.content.innerHTML=""},r.addHTML=function(t,e,n){var i=document.createElement("div");return e&&(i.className=e),i.innerHTML=t,n?r.footer.appendChild(i):r.content.appendChild(i),i},r.addButton=function(t,e,n){var i=document.createElement("button");return i.innerText=t,i.options=n,i.classList.add("btn"),i.addEventListener("click",e),r.footer.appendChild(i),i},r.addSeparator=function(){var t=document.createElement("div");t.className="separator",r.content.appendChild(t)},r.addWidget=function(t,e,i,o,a){o=o||{};var s=String(i);"number"==(t=t.toLowerCase())&&(s=i.toFixed(3));var l=document.createElement("div");l.className="property",l.innerHTML="<span class='property_name'></span><span class='property_value'></span>",l.querySelector(".property_name").innerText=o.label||e;var u=l.querySelector(".property_value");if(u.innerText=s,l.dataset.property=e,l.dataset.type=o.type||t,l.options=o,l.value=i,"code"==t)l.addEventListener("click",(function(t){r.inner_showCodePad(this.dataset.property)}));else if("boolean"==t)l.classList.add("boolean"),i&&l.classList.add("bool-on"),l.addEventListener("click",(function(){var t=this.dataset.property;this.value=!this.value,this.classList.toggle("bool-on"),this.querySelector(".property_value").innerText=this.value?"true":"false",c(t,this.value)}));else if("string"==t||"number"==t)u.setAttribute("contenteditable",!0),u.addEventListener("keydown",(function(e){"Enter"!=e.code||"string"==t&&e.shiftKey||(e.preventDefault(),this.blur())})),u.addEventListener("blur",(function(){var t=this.innerText,e=this.parentNode.dataset.property;"number"==this.parentNode.dataset.type&&(t=Number(t)),c(e,t)}));else if("enum"==t||"combo"==t){s=LGraphCanvas.getPropertyPrintableValue(i,o.values);u.innerText=s,u.addEventListener("click",(function(t){var e=o.values||[],r=this.parentNode.dataset.property,i=this;new LiteGraph.ContextMenu(e,{event:t,className:"dark",callback:function(t,e,n){return i.innerText=t,c(r,t),!1}},n)}))}function c(t,e){o.callback&&o.callback(t,e,o),a&&a(t,e,o)}return r.content.appendChild(l),l},r.onOpen&&"function"==typeof r.onOpen&&r.onOpen(),r},LGraphCanvas.getPropertyPrintableValue=function(t,e){if(!e)return String(t);if(e.constructor===Array)return String(t);if(e.constructor===Object){var n="";for(var r in e)if(e[r]==t){n=r;break}return String(t)+" ("+n+")"}},LGraphCanvas.prototype.closePanels=function(){var t;(t=document.querySelector("#node-panel"))&&t.close(),(t=document.querySelector("#option-panel"))&&t.close()},LGraphCanvas.prototype.showShowGraphOptionsPanel=function(t,e,n,r){if(this.constructor&&"HTMLDivElement"==this.constructor.name){if(!e||!e.event||!e.event.target||!e.event.target.lgraphcanvas)return void console.warn("Canvas not found");var i=e.event.target.lgraphcanvas}else i=this;i.closePanels();var o=i.getCanvasWindow();panel=i.createPanel("Options",{closable:!0,window:o,onOpen:function(){i.OPTIONPANEL_IS_OPEN=!0},onClose:function(){i.OPTIONPANEL_IS_OPEN=!1,i.options_panel=null}}),i.options_panel=panel,panel.id="option-panel",panel.classList.add("settings"),function(){panel.content.innerHTML="";var t=function(t,e,n){n&&n.key&&(t=n.key),n.values&&(e=Object.values(n.values).indexOf(e)),i[t]=e},e=LiteGraph.availableCanvasOptions;for(var n in e.sort(),e){var r=e[n];panel.addWidget("boolean",r,i[r],{key:r,on:"True",off:"False"},t)}i.links_render_mode,panel.addWidget("combo","Render mode",LiteGraph.LINK_RENDER_MODES[i.links_render_mode],{key:"links_render_mode",values:LiteGraph.LINK_RENDER_MODES},t),panel.addSeparator(),panel.footer.innerHTML=""}(),i.canvas.parentNode.appendChild(panel)},LGraphCanvas.prototype.showShowNodePanel=function(t){this.SELECTED_NODE=t,this.closePanels();var e=this.getCanvasWindow(),n=this,r=this.createPanel(t.title||"",{closable:!0,window:e,onOpen:function(){n.NODEPANEL_IS_OPEN=!0},onClose:function(){n.NODEPANEL_IS_OPEN=!1,n.node_panel=null}});function i(){r.content.innerHTML="",r.addHTML("<span class='node_type'>"+t.type+"</span><span class='node_desc'>"+(t.constructor.desc||"")+"</span><span class='separator'></span>"),r.addHTML("<h3>Properties</h3>");var e=function(e,r){switch(n.graph.beforeChange(t),e){case"Title":t.title=r;break;case"Mode":var i=Object.values(LiteGraph.NODE_MODES).indexOf(r);i>=0&&LiteGraph.NODE_MODES[i]?t.changeMode(i):console.warn("unexpected mode: "+r);break;case"Color":LGraphCanvas.node_colors[r]?(t.color=LGraphCanvas.node_colors[r].color,t.bgcolor=LGraphCanvas.node_colors[r].bgcolor):console.warn("unexpected color: "+r);break;default:t.setProperty(e,r)}n.graph.afterChange(),n.dirty_canvas=!0};r.addWidget("string","Title",t.title,{},e),r.addWidget("combo","Mode",LiteGraph.NODE_MODES[t.mode],{values:LiteGraph.NODE_MODES},e);var i="";for(var o in void 0!==t.color&&(i=Object.keys(LGraphCanvas.node_colors).filter((function(e){return LGraphCanvas.node_colors[e].color==t.color}))),r.addWidget("combo","Color",i,{values:Object.keys(LGraphCanvas.node_colors)},e),t.properties){var a=t.properties[o],s=t.getPropertyInfo(o);s.type;t.onAddPropertyToPanel&&t.onAddPropertyToPanel(o,r)||r.addWidget(s.widget||s.type,o,a,s,e)}r.addSeparator(),t.onShowCustomPanelInfo&&t.onShowCustomPanelInfo(r),r.footer.innerHTML="",r.addButton("Delete",(function(){t.block_delete||(t.graph.remove(t),r.close())})).classList.add("delete")}n.node_panel=r,r.id="node-panel",r.node=t,r.classList.add("settings"),r.inner_showCodePad=function(e){r.classList.remove("settings"),r.classList.add("centered"),r.alt_content.innerHTML="<textarea class='code'></textarea>";var n=r.alt_content.querySelector("textarea"),o=function(){r.toggleAltContent(!1),r.toggleFooterVisibility(!0),n.parentNode.removeChild(n),r.classList.add("settings"),r.classList.remove("centered"),i()};n.value=t.properties[e],n.addEventListener("keydown",(function(r){"Enter"==r.code&&r.ctrlKey&&(t.setProperty(e,n.value),o())})),r.toggleAltContent(!0),r.toggleFooterVisibility(!1),n.style.height="calc(100% - 40px)";var a=r.addButton("Assign",(function(){t.setProperty(e,n.value),o()}));r.alt_content.appendChild(a);var s=r.addButton("Close",o);s.style.float="right",r.alt_content.appendChild(s)},i(),this.canvas.parentNode.appendChild(r)},LGraphCanvas.prototype.showSubgraphPropertiesDialog=function(t){console.log("showing subgraph properties dialog");var e=this.canvas.parentNode.querySelector(".subgraph_dialog");e&&e.close();var n=this.createPanel("Subgraph Inputs",{closable:!0,width:500});function r(){if(n.clear(),t.inputs)for(var e=0;e<t.inputs.length;++e){var i=t.inputs[e];if(!i.not_subgraph_input){var o=n.addHTML("<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>","subgraph_property");o.dataset.name=i.name,o.dataset.slot=e,o.querySelector(".name").innerText=i.name,o.querySelector(".type").innerText=i.type,o.querySelector("button").addEventListener("click",(function(e){t.removeInput(Number(this.parentNode.dataset.slot)),r()}))}}}n.node=t,n.classList.add("subgraph_dialog");return n.addHTML(" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>","subgraph_property extra",!0).querySelector("button").addEventListener("click",(function(e){var n=this.parentNode,i=n.querySelector(".name").value,o=n.querySelector(".type").value;i&&-1==t.findInputSlot(i)&&(t.addInput(i,o),n.querySelector(".name").value="",n.querySelector(".type").value="",r())})),r(),this.canvas.parentNode.appendChild(n),n},LGraphCanvas.prototype.showSubgraphPropertiesDialogRight=function(t){var e=this.canvas.parentNode.querySelector(".subgraph_dialog");e&&e.close();var n=this.createPanel("Subgraph Outputs",{closable:!0,width:500});function r(){if(n.clear(),t.outputs)for(var e=0;e<t.outputs.length;++e){var i=t.outputs[e];if(!i.not_subgraph_output){var o=n.addHTML("<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>","subgraph_property");o.dataset.name=i.name,o.dataset.slot=e,o.querySelector(".name").innerText=i.name,o.querySelector(".type").innerText=i.type,o.querySelector("button").addEventListener("click",(function(e){t.removeOutput(Number(this.parentNode.dataset.slot)),r()}))}}}n.node=t,n.classList.add("subgraph_dialog");var i=n.addHTML(" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>","subgraph_property extra",!0);function o(){var e=this.parentNode,n=e.querySelector(".name").value,i=e.querySelector(".type").value;n&&-1==t.findOutputSlot(n)&&(t.addOutput(n,i),e.querySelector(".name").value="",e.querySelector(".type").value="",r())}return i.querySelector(".name").addEventListener("keydown",(function(t){13==t.keyCode&&o.apply(this)})),i.querySelector("button").addEventListener("click",(function(t){o.apply(this)})),r(),this.canvas.parentNode.appendChild(n),n},LGraphCanvas.prototype.checkPanels=function(){if(this.canvas)for(var t=this.canvas.parentNode.querySelectorAll(".litegraph.dialog"),e=0;e<t.length;++e){var n=t[e];n.node&&(n.node.graph&&n.graph==this.graph||n.close())}},LGraphCanvas.onMenuNodeCollapse=function(t,e,n,r,i){i.graph.beforeChange();var o=function(t){t.collapse()},a=LGraphCanvas.active_canvas;if(!a.selected_nodes||Object.keys(a.selected_nodes).length<=1)o(i);else for(var s in a.selected_nodes)o(a.selected_nodes[s]);i.graph.afterChange()},LGraphCanvas.onMenuNodePin=function(t,e,n,r,i){i.pin()},LGraphCanvas.onMenuNodeMode=function(t,e,n,r,i){return new LiteGraph.ContextMenu(LiteGraph.NODE_MODES,{event:n,callback:function(t){if(!i)return;var e=Object.values(LiteGraph.NODE_MODES).indexOf(t),n=function(n){e>=0&&LiteGraph.NODE_MODES[e]?n.changeMode(e):(console.warn("unexpected mode: "+t),n.changeMode(LiteGraph.ALWAYS))},r=LGraphCanvas.active_canvas;if(!r.selected_nodes||Object.keys(r.selected_nodes).length<=1)n(i);else for(var o in r.selected_nodes)n(r.selected_nodes[o])},parentMenu:r,node:i}),!1},LGraphCanvas.onMenuNodeColors=function(t,e,n,r,i){if(!i)throw"no node for color";var o=[];for(var a in o.push({value:null,content:"<span style='display: block; padding-left: 4px;'>No color</span>"}),LGraphCanvas.node_colors){var s=LGraphCanvas.node_colors[a];t={value:a,content:"<span style='display: block; color: #999; padding-left: 4px; border-left: 8px solid "+s.color+"; background-color:"+s.bgcolor+"'>"+a+"</span>"};o.push(t)}return new LiteGraph.ContextMenu(o,{event:n,callback:function(t){if(!i)return;var e=t.value?LGraphCanvas.node_colors[t.value]:null,n=function(t){e?t.constructor===LiteGraph.LGraphGroup?t.color=e.groupcolor:(t.color=e.color,t.bgcolor=e.bgcolor):(delete t.color,delete t.bgcolor)},r=LGraphCanvas.active_canvas;if(!r.selected_nodes||Object.keys(r.selected_nodes).length<=1)n(i);else for(var o in r.selected_nodes)n(r.selected_nodes[o]);i.setDirtyCanvas(!0,!0)},parentMenu:r,node:i}),!1},LGraphCanvas.onMenuNodeShapes=function(t,e,n,r,i){if(!i)throw"no node passed";return new LiteGraph.ContextMenu(LiteGraph.VALID_SHAPES,{event:n,callback:function(t){if(!i)return;i.graph.beforeChange();var e=function(e){e.shape=t},n=LGraphCanvas.active_canvas;if(!n.selected_nodes||Object.keys(n.selected_nodes).length<=1)e(i);else for(var r in n.selected_nodes)e(n.selected_nodes[r]);i.graph.afterChange(),i.setDirtyCanvas(!0)},parentMenu:r,node:i}),!1},LGraphCanvas.onMenuNodeRemove=function(t,e,n,r,i){if(!i)throw"no node passed";var o=i.graph;o.beforeChange();var a=function(t){!1!==t.removable&&o.remove(t)},s=LGraphCanvas.active_canvas;if(!s.selected_nodes||Object.keys(s.selected_nodes).length<=1)a(i);else for(var l in s.selected_nodes)a(s.selected_nodes[l]);o.afterChange(),i.setDirtyCanvas(!0,!0)},LGraphCanvas.onMenuNodeToSubgraph=function(t,e,n,r,i){var o=i.graph,a=LGraphCanvas.active_canvas;if(a){var s=Object.values(a.selected_nodes||{});s.length||(s=[i]);var l=LiteGraph.createNode("graph/subgraph");l.pos=i.pos.concat(),o.add(l),l.buildFromNodes(s),a.deselectAllNodes(),i.setDirtyCanvas(!0,!0)}},LGraphCanvas.onMenuNodeClone=function(t,e,n,r,i){i.graph.beforeChange();var o={},a=function(t){if(!1!==t.clonable){var e=t.clone();e&&(e.pos=[t.pos[0]+5,t.pos[1]+5],t.graph.add(e),o[e.id]=e)}},s=LGraphCanvas.active_canvas;if(!s.selected_nodes||Object.keys(s.selected_nodes).length<=1)a(i);else for(var l in s.selected_nodes)a(s.selected_nodes[l]);Object.keys(o).length&&s.selectNodes(o),i.graph.afterChange(),i.setDirtyCanvas(!0,!0)},LGraphCanvas.node_colors={red:{color:"#322",bgcolor:"#533",groupcolor:"#A88"},brown:{color:"#332922",bgcolor:"#593930",groupcolor:"#b06634"},green:{color:"#232",bgcolor:"#353",groupcolor:"#8A8"},blue:{color:"#223",bgcolor:"#335",groupcolor:"#88A"},pale_blue:{color:"#2a363b",bgcolor:"#3f5159",groupcolor:"#3f789e"},cyan:{color:"#233",bgcolor:"#355",groupcolor:"#8AA"},purple:{color:"#323",bgcolor:"#535",groupcolor:"#a1309b"},yellow:{color:"#432",bgcolor:"#653",groupcolor:"#b58b2a"},black:{color:"#222",bgcolor:"#000",groupcolor:"#444"}},LGraphCanvas.prototype.getCanvasMenuOptions=function(){var t=null;if(this.getMenuOptions?t=this.getMenuOptions():(t=[{content:"Add Node",has_submenu:!0,callback:LGraphCanvas.onMenuAdd},{content:"Add Group",callback:LGraphCanvas.onGroupAdd}],Object.keys(this.selected_nodes).length>1&&t.push({content:"Align",has_submenu:!0,callback:LGraphCanvas.onGroupAlign}),this._graph_stack&&this._graph_stack.length>0&&t.push(null,{content:"Close subgraph",callback:this.closeSubgraph.bind(this)})),this.getExtraMenuOptions){var e=this.getExtraMenuOptions(this,t);e&&(t=t.concat(e))}return t},LGraphCanvas.prototype.getNodeMenuOptions=function(t){var e=null;if(t.getMenuOptions?e=t.getMenuOptions(this):(e=[{content:"Inputs",has_submenu:!0,disabled:!0,callback:LGraphCanvas.showMenuNodeOptionalInputs},{content:"Outputs",has_submenu:!0,disabled:!0,callback:LGraphCanvas.showMenuNodeOptionalOutputs},null,{content:"Properties",has_submenu:!0,callback:LGraphCanvas.onShowMenuNodeProperties},null,{content:"Title",callback:LGraphCanvas.onShowPropertyEditor},{content:"Mode",has_submenu:!0,callback:LGraphCanvas.onMenuNodeMode}],!1!==t.resizable&&e.push({content:"Resize",callback:LGraphCanvas.onMenuResizeNode}),e.push({content:"Collapse",callback:LGraphCanvas.onMenuNodeCollapse},{content:"Pin",callback:LGraphCanvas.onMenuNodePin},{content:"Colors",has_submenu:!0,callback:LGraphCanvas.onMenuNodeColors},{content:"Shapes",has_submenu:!0,callback:LGraphCanvas.onMenuNodeShapes},null)),t.onGetInputs){var n=t.onGetInputs();n&&n.length&&(e[0].disabled=!1)}if(t.onGetOutputs){var r=t.onGetOutputs();r&&r.length&&(e[1].disabled=!1)}if(t.getExtraMenuOptions){var i=t.getExtraMenuOptions(this,e);i&&(i.push(null),e=i.concat(e))}return!1!==t.clonable&&e.push({content:"Clone",callback:LGraphCanvas.onMenuNodeClone}),Object.keys(this.selected_nodes).length>1&&e.push({content:"Align Selected To",has_submenu:!0,callback:LGraphCanvas.onNodeAlign}),e.push(null,{content:"Remove",disabled:!(!1!==t.removable&&!t.block_delete),callback:LGraphCanvas.onMenuNodeRemove}),t.graph&&t.graph.onGetNodeMenuOptions&&t.graph.onGetNodeMenuOptions(e,t),e},LGraphCanvas.prototype.getGroupMenuOptions=function(t){return[{content:"Title",callback:LGraphCanvas.onShowPropertyEditor},{content:"Color",has_submenu:!0,callback:LGraphCanvas.onMenuNodeColors},{content:"Font size",property:"font_size",type:"Number",callback:LGraphCanvas.onShowPropertyEditor},null,{content:"Remove",callback:LGraphCanvas.onMenuNodeRemove}]},LGraphCanvas.prototype.processContextMenu=function(t,e){var n=this,r=LGraphCanvas.active_canvas.getCanvasWindow(),i=null,o={event:e,callback:function(e,r,i){if(!e)return;if("Remove Slot"==e.content){var o=e.slot;return t.graph.beforeChange(),o.input?t.removeInput(o.slot):o.output&&t.removeOutput(o.slot),void t.graph.afterChange()}if("Disconnect Links"==e.content){o=e.slot;return t.graph.beforeChange(),o.output?t.disconnectOutput(o.slot):o.input&&t.disconnectInput(o.slot),void t.graph.afterChange()}if("Rename Slot"==e.content){var a=(o=e.slot).input?t.getInputInfo(o.slot):t.getOutputInfo(o.slot),s=n.createDialog("<span class='name'>Name</span><input autofocus type='text'/><button>OK</button>",r),l=s.querySelector("input");l&&a&&(l.value=a.label||"");var u=function(){t.graph.beforeChange(),l.value&&(a&&(a.label=l.value),n.setDirty(!0)),s.close(),t.graph.afterChange()};s.querySelector("button").addEventListener("click",u),l.addEventListener("keydown",(function(t){if(s.is_modified=!0,27==t.keyCode)s.close();else if(13==t.keyCode)u();else if(13!=t.keyCode&&"textarea"!=t.target.localName)return;t.preventDefault(),t.stopPropagation()})),l.focus()}},extra:t};t&&(o.title=t.type);var a=null;if(t&&(a=t.getSlotInPosition(e.canvasX,e.canvasY),LGraphCanvas.active_node=t),a){if(i=[],t.getSlotMenuOptions)i=t.getSlotMenuOptions(a);else{a&&a.output&&a.output.links&&a.output.links.length&&i.push({content:"Disconnect Links",slot:a});var s=a.input||a.output;s.removable&&i.push(s.locked?"Cannot remove":{content:"Remove Slot",slot:a}),s.nameLocked||i.push({content:"Rename Slot",slot:a})}o.title=(a.input?a.input.type:a.output.type)||"*",a.input&&a.input.type==LiteGraph.ACTION&&(o.title="Action"),a.output&&a.output.type==LiteGraph.EVENT&&(o.title="Event")}else if(t)i=this.getNodeMenuOptions(t);else{i=this.getCanvasMenuOptions();var l=this.graph.getGroupOnPos(e.canvasX,e.canvasY);l&&i.push(null,{content:"Edit Group",has_submenu:!0,submenu:{title:"Group",extra:l,options:this.getGroupMenuOptions(l)}})}if(i)new LiteGraph.ContextMenu(i,o,r)},LiteGraph.compareObjects=compareObjects,LiteGraph.distance=distance,LiteGraph.colorToString=colorToString,LiteGraph.isInsideRectangle=isInsideRectangle,LiteGraph.growBounding=growBounding,LiteGraph.isInsideBounding=isInsideBounding,LiteGraph.overlapBounding=overlapBounding,LiteGraph.hex2num=hex2num,LiteGraph.num2hex=num2hex,ContextMenu.prototype.addItem=function(t,e,n){var r=this;n=n||{};var i=document.createElement("div");i.className="litemenu-entry submenu";var o=!1;function a(t){var e=this.value,i=!0;(r.current_submenu&&r.current_submenu.close(t),n.callback)&&(!0===n.callback.call(this,e,n,t,r,n.node)&&(i=!1));if(e){if(e.callback&&!n.ignore_item_callbacks&&!0!==e.disabled)!0===e.callback.call(this,e,n,t,r,n.extra)&&(i=!1);if(e.submenu){if(!e.submenu.options)throw"ContextMenu submenu needs options";new r.constructor(e.submenu.options,{callback:e.submenu.callback,event:t,parentMenu:r,ignore_item_callbacks:e.submenu.ignore_item_callbacks,title:e.submenu.title,extra:e.submenu.extra,autoopen:n.autoopen});i=!1}}i&&!r.lock&&r.close()}return null===e?i.classList.add("separator"):(i.innerHTML=e&&e.title?e.title:t,i.value=e,e&&(e.disabled&&(o=!0,i.classList.add("disabled")),(e.submenu||e.has_submenu)&&i.classList.add("has_submenu")),"function"==typeof e?(i.dataset.value=t,i.onclick_callback=e):i.dataset.value=e,e.className&&(i.className+=" "+e.className)),this.root.appendChild(i),o||i.addEventListener("click",a),!o&&n.autoopen&&LiteGraph.pointerListenerAdd(i,"enter",(function(t){var e=this.value;if(!e||!e.has_submenu)return;a.call(this,t)})),i},ContextMenu.prototype.close=function(t,e){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!e&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,void 0===t?this.parentMenu.close():t&&!ContextMenu.isCursorOverElement(t,this.parentMenu.root)&&ContextMenu.trigger(this.parentMenu.root,LiteGraph.pointerevents_method+"leave",t)),this.current_submenu&&this.current_submenu.close(t,!0),this.root.closing_timer&&clearTimeout(this.root.closing_timer)},ContextMenu.trigger=function(t,e,n,r){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,n),i.srcElement=r,t.dispatchEvent?t.dispatchEvent(i):t.__events&&t.__events.dispatchEvent(i),i},ContextMenu.prototype.getTopMenu=function(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this},ContextMenu.prototype.getFirstEvent=function(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event},ContextMenu.isCursorOverElement=function(t,e){var n=t.clientX,r=t.clientY,i=e.getBoundingClientRect();return!!i&&(r>i.top&&r<i.top+i.height&&n>i.left&&n<i.left+i.width)},LiteGraph.ContextMenu=ContextMenu,LiteGraph.closeAllContextMenus=function(t){var e=(t=t||window).document.querySelectorAll(".litecontextmenu");if(e.length){for(var n=[],r=0;r<e.length;r++)n.push(e[r]);for(r=0;r<n.length;r++)n[r].close?n[r].close():n[r].parentNode&&n[r].parentNode.removeChild(n[r])}},LiteGraph.extendClass=function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);if(e.prototype)for(var n in e.prototype)e.prototype.hasOwnProperty(n)&&(t.prototype.hasOwnProperty(n)||(e.prototype.__lookupGetter__(n)?t.prototype.__defineGetter__(n,e.prototype.__lookupGetter__(n)):t.prototype[n]=e.prototype[n],e.prototype.__lookupSetter__(n)&&t.prototype.__defineSetter__(n,e.prototype.__lookupSetter__(n))))},CurveEditor.sampleCurve=function(t,e){if(e){for(var n=0;n<e.length-1;++n){var r=e[n],i=e[n+1];if(!(i[0]<t)){var o=i[0]-r[0];if(Math.abs(o)<1e-5)return r[1];var a=(t-r[0])/o;return r[1]*(1-a)+i[1]*a}}return 0}},CurveEditor.prototype.draw=function(t,e,n,r,i,o){var a=this.points;if(a){this.size=e;var s=e[0]-2*this.margin,l=e[1]-2*this.margin;i=i||"#666",t.save(),t.translate(this.margin,this.margin),r&&(t.fillStyle="#111",t.fillRect(0,0,s,l),t.fillStyle="#222",t.fillRect(.5*s,0,1,l),t.strokeStyle="#333",t.strokeRect(0,0,s,l)),t.strokeStyle=i,o&&(t.globalAlpha=.5),t.beginPath();for(var u=0;u<a.length;++u){var c=a[u];t.lineTo(c[0]*s,(1-c[1])*l)}if(t.stroke(),t.globalAlpha=1,!o)for(u=0;u<a.length;++u){c=a[u];t.fillStyle=this.selected==u?"#FFF":this.nearest==u?"#DDD":"#AAA",t.beginPath(),t.arc(c[0]*s,(1-c[1])*l,2,0,2*Math.PI),t.fill()}t.restore()}},CurveEditor.prototype.onMouseDown=function(t,e){var n=this.points;if(n&&!(t[1]<0)){var r=this.size[0]-2*this.margin,i=this.size[1]-2*this.margin,o=t[0]-this.margin,a=t[1]-this.margin,s=[o,a],l=30/e.ds.scale;if(this.selected=this.getCloserPoint(s,l),-1==this.selected){var u=[o/r,1-a/i];n.push(u),n.sort((function(t,e){return t[0]-e[0]})),this.selected=n.indexOf(u),this.must_update=!0}return-1!=this.selected||void 0}},CurveEditor.prototype.onMouseMove=function(t,e){var n=this.points;if(n){var r=this.selected;if(!(r<0)){var i=(t[0]-this.margin)/(this.size[0]-2*this.margin),o=(t[1]-this.margin)/(this.size[1]-2*this.margin),a=[t[0]-this.margin,t[1]-this.margin],s=30/e.ds.scale;this._nearest=this.getCloserPoint(a,s);var l=n[r];if(l){var u=0==r||r==n.length-1;if(!u&&(t[0]<-10||t[0]>this.size[0]+10||t[1]<-10||t[1]>this.size[1]+10))return n.splice(r,1),void(this.selected=-1);l[0]=u?0==r?0:1:clamp(i,0,1),l[1]=1-clamp(o,0,1),n.sort((function(t,e){return t[0]-e[0]})),this.selected=n.indexOf(l),this.must_update=!0}}}},CurveEditor.prototype.onMouseUp=function(t,e){return this.selected=-1,!1},CurveEditor.prototype.getCloserPoint=function(t,e){var n=this.points;if(!n)return-1;e=e||30;for(var r=this.size[0]-2*this.margin,i=this.size[1]-2*this.margin,o=n.length,a=[0,0],s=1e6,l=-1,u=0;u<o;++u){var c=n[u];a[0]=c[0]*r,a[1]=(1-c[1])*i,a[0]<t[0]&&u;var p=vec2.distance(t,a);p>s||p>e||(l=u,s=p)}return l},LiteGraph.CurveEditor=CurveEditor,LiteGraph.getParameterNames=function(t){return(t+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},LiteGraph.pointerListenerAdd=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t&&t.addEventListener&&e&&"function"===typeof n){var i=LiteGraph.pointerevents_method,o=e;if("pointer"==i&&!window.PointerEvent)switch(console.warn("sMethod=='pointer' && !window.PointerEvent"),console.log("Converting pointer["+o+"] : down move up cancel enter TO touchstart touchmove touchend, etc .."),o){case"down":i="touch",o="start";break;case"move":case"cancel":i="touch";break;case"up":i="touch",o="end";break;case"enter":console.log("debug: Should I send a move event?");break;default:console.warn("PointerEvent not available in this browser ? The event "+o+" would not be called")}switch(o){case"down":case"up":case"move":case"over":case"out":case"enter":t.addEventListener(i+o,n,r);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if("mouse"!=i)return t.addEventListener(i+o,n,r);default:return t.addEventListener(o,n,r)}}},LiteGraph.pointerListenerRemove=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t&&t.removeEventListener&&e&&"function"===typeof n)switch(e){case"down":case"up":case"move":case"over":case"out":case"enter":"pointer"!=LiteGraph.pointerevents_method&&"mouse"!=LiteGraph.pointerevents_method||t.removeEventListener(LiteGraph.pointerevents_method+e,n,r);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if("pointer"==LiteGraph.pointerevents_method)return t.removeEventListener(LiteGraph.pointerevents_method+e,n,r);default:return t.removeEventListener(e,n,r)}},global.clamp=clamp,"undefined"==typeof window||window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})})(this),exports.LiteGraph=this.LiteGraph,exports.LGraph=this.LGraph,exports.LLink=this.LLink,exports.LGraphNode=this.LGraphNode,exports.LGraphGroup=this.LGraphGroup,exports.DragAndScale=this.DragAndScale,exports.LGraphCanvas=this.LGraphCanvas,exports.ContextMenu=this.ContextMenu,function(t){var e=t.LiteGraph;function n(){this.addOutput("in ms","number"),this.addOutput("in sec","number")}function r(){this.size=[140,80],this.properties={enabled:!0},this.enabled=!0,this.subgraph=new e.LGraph,this.subgraph._subgraph_node=this,this.subgraph._is_subgraph=!0,this.subgraph.onTrigger=this.onSubgraphTrigger.bind(this),this.subgraph.onInputAdded=this.onSubgraphNewInput.bind(this),this.subgraph.onInputRenamed=this.onSubgraphRenamedInput.bind(this),this.subgraph.onInputTypeChanged=this.onSubgraphTypeChangeInput.bind(this),this.subgraph.onInputRemoved=this.onSubgraphRemovedInput.bind(this),this.subgraph.onOutputAdded=this.onSubgraphNewOutput.bind(this),this.subgraph.onOutputRenamed=this.onSubgraphRenamedOutput.bind(this),this.subgraph.onOutputTypeChanged=this.onSubgraphTypeChangeOutput.bind(this),this.subgraph.onOutputRemoved=this.onSubgraphRemovedOutput.bind(this)}function i(){this.addOutput("","number"),this.name_in_graph="",this.properties={name:"",type:"number",value:0};var t=this;this.name_widget=this.addWidget("text","Name",this.properties.name,(function(e){e&&t.setProperty("name",e)})),this.type_widget=this.addWidget("text","Type",this.properties.type,(function(e){t.setProperty("type",e)})),this.value_widget=this.addWidget("number","Value",this.properties.value,(function(e){t.setProperty("value",e)})),this.widgets_up=!0,this.size=[180,90]}function o(){this.addInput("",""),this.name_in_graph="",this.properties={name:"",type:""};this.name_widget=this.addWidget("text","Name",this.properties.name,"name"),this.type_widget=this.addWidget("text","Type",this.properties.type,"type"),this.widgets_up=!0,this.size=[180,60]}function a(){this.addOutput("value","number"),this.addProperty("value",1),this.widget=this.addWidget("number","value",1,"value"),this.widgets_up=!0,this.size=[180,30]}function s(){this.addOutput("bool","boolean"),this.addProperty("value",!0),this.widget=this.addWidget("toggle","value",!0,"value"),this.serialize_widgets=!0,this.widgets_up=!0,this.size=[140,30]}function l(){this.addOutput("string","string"),this.addProperty("value",""),this.widget=this.addWidget("text","value","","value"),this.widgets_up=!0,this.size=[180,30]}function u(){this.addOutput("obj","object"),this.size=[120,30],this._object={}}function c(){this.addInput("url","string"),this.addOutput("file","string"),this.addProperty("url",""),this.addProperty("type","text"),this.widget=this.addWidget("text","url","","url"),this._data=null}function p(){this.addInput("parse",e.ACTION),this.addInput("json","string"),this.addOutput("done",e.EVENT),this.addOutput("object","object"),this.widget=this.addWidget("button","parse","",this.parse.bind(this)),this._str=null,this._obj=null}function d(){this.addOutput("data","object"),this.addProperty("value",""),this.widget=this.addWidget("text","json","","value"),this.widgets_up=!0,this.size=[140,30],this._value=null}function h(){this._value=[],this.addInput("json",""),this.addOutput("arrayOut","array"),this.addOutput("length","number"),this.addProperty("value","[]"),this.widget=this.addWidget("text","array",this.properties.value,"value"),this.widgets_up=!0,this.size=[140,50]}function f(){this.addInput("arr","array"),this.addInput("value",""),this.addOutput("arr","array"),this.properties={index:0},this.widget=this.addWidget("number","i",this.properties.index,"index",{precision:0,step:10,min:0})}function g(){this.addInput("array","array,table,string"),this.addInput("index","number"),this.addOutput("value",""),this.addProperty("index",0)}function v(){this.addInput("table","table"),this.addInput("row","number"),this.addInput("col","number"),this.addOutput("value",""),this.addProperty("row",0),this.addProperty("column",0)}function m(){this.addInput("obj","object"),this.addOutput("property",0),this.addProperty("value",0),this.widget=this.addWidget("text","prop.","",this.setValue.bind(this)),this.widgets_up=!0,this.size=[140,30],this._value=null}function _(){this.addInput("obj",""),this.addOutput("keys","array"),this.size=[140,30]}function y(){this.addInput("obj",""),this.addInput("value",""),this.addOutput("obj",""),this.properties={property:""},this.name_widget=this.addWidget("text","prop.",this.properties.property,"property")}function b(){this.addInput("A","object"),this.addInput("B","object"),this.addOutput("out","object"),this._result={};var t=this;this.addWidget("button","clear","",(function(){t._result={}})),this.size=this.computeSize()}function x(){this.size=[60,30],this.addInput("in"),this.addOutput("out"),this.properties={varname:"myname",container:x.LITEGRAPH},this.value=null}function w(){this.size=[60,30],this.addInput("data",0),this.addInput("download",e.ACTION),this.properties={filename:"data.json"},this.value=null;var t=this;this.addWidget("button","Download","",(function(e){t.value&&t.downloadAsFile()}))}function E(){this.size=[60,30],this.addInput("value",0,{label:""}),this.value=0}function T(){this.addInput("in",0),this.addOutput("out",0),this.size=[40,30]}function S(){this.mode=e.ON_EVENT,this.size=[80,30],this.addProperty("msg",""),this.addInput("log",e.EVENT),this.addInput("msg",0)}function C(){this.mode=e.ON_EVENT,this.addProperty("msg",""),this.addInput("",e.EVENT);this.widget=this.addWidget("text","Text","","msg"),this.widgets_up=!0,this.size=[200,30]}function O(){this.size=[60,30],this.addProperty("onExecute","return A;"),this.addInput("A",0),this.addInput("B",0),this.addOutput("out",0),this._func=null,this.data={}}function L(){this.addInput("A",0),this.addInput("B",0),this.addOutput("true","boolean"),this.addOutput("false","boolean"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP","==","enum",{values:L.values}),this.addWidget("combo","Op.",this.properties.OP,{property:"OP",values:L.values}),this.size=[80,60]}n.title="Time",n.desc="Time",n.prototype.onExecute=function(){this.setOutputData(0,1e3*this.graph.globaltime),this.setOutputData(1,this.graph.globaltime)},e.registerNodeType("basic/time",n),r.title="Subgraph",r.desc="Graph inside a node",r.title_color="#334",r.prototype.onGetInputs=function(){return[["enabled","boolean"]]},r.prototype.onDblClick=function(t,e,n){var r=this;setTimeout((function(){n.openSubgraph(r.subgraph)}),10)},r.prototype.onAction=function(t,e){this.subgraph.onAction(t,e)},r.prototype.onExecute=function(){if(this.enabled=this.getInputOrProperty("enabled"),this.enabled){if(this.inputs)for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.getInputData(t);this.subgraph.setInputData(e.name,n)}if(this.subgraph.runStep(),this.outputs)for(t=0;t<this.outputs.length;t++){var r=this.outputs[t];n=this.subgraph.getOutputData(r.name);this.setOutputData(t,n)}}},r.prototype.sendEventToAllNodes=function(t,e,n){this.enabled&&this.subgraph.sendEventToAllNodes(t,e,n)},r.prototype.onDrawBackground=function(t,n,r,i){if(this.flags.collapsed)return;var o=this.size[1]-e.NODE_TITLE_HEIGHT+.5,a=e.isInsideRectangle(i[0],i[1],this.pos[0],this.pos[1]+o,this.size[0],e.NODE_TITLE_HEIGHT);let s=e.isInsideRectangle(i[0],i[1],this.pos[0],this.pos[1]+o,this.size[0]/2,e.NODE_TITLE_HEIGHT);t.fillStyle=a?"#555":"#222",t.beginPath(),this._shape==e.BOX_SHAPE?s?t.rect(0,o,this.size[0]/2+1,e.NODE_TITLE_HEIGHT):t.rect(this.size[0]/2,o,this.size[0]/2+1,e.NODE_TITLE_HEIGHT):s?t.roundRect(0,o,this.size[0]/2+1,e.NODE_TITLE_HEIGHT,[0,0,8,8]):t.roundRect(this.size[0]/2,o,this.size[0]/2+1,e.NODE_TITLE_HEIGHT,[0,0,8,8]),a?t.fill():t.fillRect(0,o,this.size[0]+1,e.NODE_TITLE_HEIGHT),t.textAlign="center",t.font="24px Arial",t.fillStyle=a?"#DDD":"#999",t.fillText("+",.25*this.size[0],o+24),t.fillText("+",.75*this.size[0],o+24)},r.prototype.onMouseDown=function(t,n,r){var i=this.size[1]-e.NODE_TITLE_HEIGHT+.5;console.log(0),n[1]>i&&(n[0]<this.size[0]/2?(console.log(1),r.showSubgraphPropertiesDialog(this)):(console.log(2),r.showSubgraphPropertiesDialogRight(this)))},r.prototype.computeSize=function(){var t=this.inputs?this.inputs.length:0,n=this.outputs?this.outputs.length:0;return[200,Math.max(t,n)*e.NODE_SLOT_HEIGHT+e.NODE_TITLE_HEIGHT]},r.prototype.onSubgraphTrigger=function(t,e){var n=this.findOutputSlot(t);-1!=n&&this.triggerSlot(n)},r.prototype.onSubgraphNewInput=function(t,e){-1==this.findInputSlot(t)&&this.addInput(t,e)},r.prototype.onSubgraphRenamedInput=function(t,e){var n=this.findInputSlot(t);-1!=n&&(this.getInputInfo(n).name=e)},r.prototype.onSubgraphTypeChangeInput=function(t,e){var n=this.findInputSlot(t);-1!=n&&(this.getInputInfo(n).type=e)},r.prototype.onSubgraphRemovedInput=function(t){var e=this.findInputSlot(t);-1!=e&&this.removeInput(e)},r.prototype.onSubgraphNewOutput=function(t,e){-1==this.findOutputSlot(t)&&this.addOutput(t,e)},r.prototype.onSubgraphRenamedOutput=function(t,e){var n=this.findOutputSlot(t);-1!=n&&(this.getOutputInfo(n).name=e)},r.prototype.onSubgraphTypeChangeOutput=function(t,e){var n=this.findOutputSlot(t);-1!=n&&(this.getOutputInfo(n).type=e)},r.prototype.onSubgraphRemovedOutput=function(t){var e=this.findOutputSlot(t);-1!=e&&this.removeOutput(e)},r.prototype.getExtraMenuOptions=function(t){var e=this;return[{content:"Open",callback:function(){t.openSubgraph(e.subgraph)}}]},r.prototype.onResize=function(t){t[1]+=20},r.prototype.serialize=function(){var t=e.LGraphNode.prototype.serialize.call(this);return t.subgraph=this.subgraph.serialize(),t},r.prototype.reassignSubgraphUUIDs=function(t){const n={nodeIDs:{},linkIDs:{}};for(const r of t.nodes){const t=r.id,i=e.uuidv4();if(r.id=i,n.nodeIDs[t]||n.nodeIDs[i])throw new Error("New/old node UUID wasn't unique in changed map! ".concat(t," ").concat(i));n.nodeIDs[t]=i,n.nodeIDs[i]=t}for(const r of t.links){const t=r[0],i=e.uuidv4();if(r[0]=i,n.linkIDs[t]||n.linkIDs[i])throw new Error("New/old link UUID wasn't unique in changed map! ".concat(t," ").concat(i));n.linkIDs[t]=i,n.linkIDs[i]=t;const o=r[1],a=r[3];if(!n.nodeIDs[o])throw new Error("Old node UUID not found in mapping! ".concat(o));if(r[1]=n.nodeIDs[o],!n.nodeIDs[a])throw new Error("Old node UUID not found in mapping! ".concat(a));r[3]=n.nodeIDs[a]}for(const e of t.nodes){if(e.inputs)for(const t of e.inputs)t.link&&(t.link=n.linkIDs[t.link]);if(e.outputs)for(const t of e.outputs)t.links&&(t.links=t.links.map((t=>n.linkIDs[t])))}for(const e of t.nodes)if("graph/subgraph"===e.type){const t=reassignGraphUUIDs(e.subgraph);n.nodeIDs.assign(t.nodeIDs),n.linkIDs.assign(t.linkIDs)}},r.prototype.clone=function(){var t=e.createNode(this.type),n=this.serialize();if(e.use_uuids){const t=e.cloneObject(n.subgraph);this.reassignSubgraphUUIDs(t),n.subgraph=t}return delete n.id,delete n.inputs,delete n.outputs,t.configure(n),t},r.prototype.buildFromNodes=function(t){for(var e={},n=0,r=0;r<t.length;++r){e[(i=t[r]).id]=i,n=Math.min(i.pos[0],n),Math.max(i.pos[0],n)}for(r=0;r<t.length;++r){var i;if((i=t[r]).inputs)for(var o=0;o<i.inputs.length;++o){var a=i.inputs[o];if(a&&a.link)(u=i.graph.links[a.link])&&(e[u.origin_id]||this.subgraph.addInput(a.name,u.type))}if(i.outputs)for(o=0;o<i.outputs.length;++o){var s=i.outputs[o];if(s&&s.links&&s.links.length)for(var l=0;l<s.links.length;++l){var u;if((u=i.graph.links[s.links[l]])&&!e[u.target_id]){!0;break}}}}},e.Subgraph=r,e.registerNodeType("graph/subgraph",r),i.title="Input",i.desc="Input of the graph",i.prototype.onConfigure=function(){this.updateType()},i.prototype.updateType=function(){var t=this.properties.type;this.type_widget.value=t,this.outputs[0].type!=t&&(e.isValidConnection(this.outputs[0].type,t)||this.disconnectOutput(0),this.outputs[0].type=t),"number"==t?(this.value_widget.type="number",this.value_widget.value=0):"boolean"==t?(this.value_widget.type="toggle",this.value_widget.value=!0):"string"==t?(this.value_widget.type="text",this.value_widget.value=""):(this.value_widget.type=null,this.value_widget.value=null),this.properties.value=this.value_widget.value,this.graph&&this.name_in_graph&&this.graph.changeInputType(this.name_in_graph,t)},i.prototype.onPropertyChanged=function(t,e){if("name"==t){if(""==e||e==this.name_in_graph||"enabled"==e)return!1;this.graph&&(this.name_in_graph?this.graph.renameInput(this.name_in_graph,e):this.graph.addInput(e,this.properties.type)),this.name_widget.value=e,this.name_in_graph=e}else"type"==t&&this.updateType()},i.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},i.prototype.onAction=function(t,n){this.properties.type==e.EVENT&&this.triggerSlot(0,n)},i.prototype.onExecute=function(){var t=this.properties.name,e=this.graph.inputs[t];e?this.setOutputData(0,void 0!==e.value?e.value:this.properties.value):this.setOutputData(0,this.properties.value)},i.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeInput(this.name_in_graph)},e.GraphInput=i,e.registerNodeType("graph/input",i),o.title="Output",o.desc="Output of the graph",o.prototype.onPropertyChanged=function(t,e){if("name"==t){if(""==e||e==this.name_in_graph||"enabled"==e)return!1;this.graph&&(this.name_in_graph?this.graph.renameOutput(this.name_in_graph,e):this.graph.addOutput(e,this.properties.type)),this.name_widget.value=e,this.name_in_graph=e}else"type"==t&&this.updateType()},o.prototype.updateType=function(){var t=this.properties.type;this.type_widget&&(this.type_widget.value=t),this.inputs[0].type!=t&&("action"!=t&&"event"!=t||(t=e.EVENT),e.isValidConnection(this.inputs[0].type,t)||this.disconnectInput(0),this.inputs[0].type=t),this.graph&&this.name_in_graph&&this.graph.changeOutputType(this.name_in_graph,t)},o.prototype.onExecute=function(){this._value=this.getInputData(0),this.graph.setOutputData(this.properties.name,this._value)},o.prototype.onAction=function(t,n){this.properties.type==e.ACTION&&this.graph.trigger(this.properties.name,n)},o.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeOutput(this.name_in_graph)},o.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},e.GraphOutput=o,e.registerNodeType("graph/output",o),a.title="Const Number",a.desc="Constant number",a.prototype.onExecute=function(){this.setOutputData(0,parseFloat(this.properties.value))},a.prototype.getTitle=function(){return this.flags.collapsed?this.properties.value:this.title},a.prototype.setValue=function(t){this.setProperty("value",t)},a.prototype.onDrawBackground=function(t){this.outputs[0].label=this.properties.value.toFixed(3)},e.registerNodeType("basic/const",a),s.title="Const Boolean",s.desc="Constant boolean",s.prototype.getTitle=a.prototype.getTitle,s.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},s.prototype.setValue=a.prototype.setValue,s.prototype.onGetInputs=function(){return[["toggle",e.ACTION]]},s.prototype.onAction=function(t){this.setValue(!this.properties.value)},e.registerNodeType("basic/boolean",s),l.title="Const String",l.desc="Constant string",l.prototype.getTitle=a.prototype.getTitle,l.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},l.prototype.setValue=a.prototype.setValue,l.prototype.onDropFile=function(t){var e=this,n=new FileReader;n.onload=function(t){e.setProperty("value",t.target.result)},n.readAsText(t)},e.registerNodeType("basic/string",l),u.title="Const Object",u.desc="Constant Object",u.prototype.onExecute=function(){this.setOutputData(0,this._object)},e.registerNodeType("basic/object",u),c.title="Const File",c.desc="Fetches a file from an url",c["@type"]={type:"enum",values:["text","arraybuffer","blob","json"]},c.prototype.onPropertyChanged=function(t,e){"url"==t&&(null==e||""==e?this._data=null:this.fetchFile(e))},c.prototype.onExecute=function(){var t=this.getInputData(0)||this.properties.url;!t||t==this._url&&this._type==this.properties.type||this.fetchFile(t),this.setOutputData(0,this._data)},c.prototype.setValue=a.prototype.setValue,c.prototype.fetchFile=function(t){var n=this;if(!t||t.constructor!==String)return n._data=null,void(n.boxcolor=null);this._url=t,this._type=this.properties.type,"http"==t.substr(0,4)&&e.proxy&&(t=e.proxy+t.substr(t.indexOf(":")+3)),fetch(t).then((function(t){if(!t.ok)throw new Error("File not found");return"arraybuffer"==n.properties.type?t.arrayBuffer():"text"==n.properties.type?t.text():"json"==n.properties.type?t.json():"blob"==n.properties.type?t.blob():void 0})).then((function(t){n._data=t,n.boxcolor="#AEA"})).catch((function(e){n._data=null,n.boxcolor="red",console.error("error fetching file:",t)}))},c.prototype.onDropFile=function(t){var e=this;this._url=t.name,this._type=this.properties.type,this.properties.url=t.name;var n=new FileReader;if(n.onload=function(t){e.boxcolor="#AEA";var n=t.target.result;"json"==e.properties.type&&(n=JSON.parse(n)),e._data=n},"arraybuffer"==e.properties.type)n.readAsArrayBuffer(t);else if("text"==e.properties.type||"json"==e.properties.type)n.readAsText(t);else if("blob"==e.properties.type)return n.readAsBinaryString(t)},e.registerNodeType("basic/file",c),p.title="JSON Parse",p.desc="Parses JSON String into object",p.prototype.parse=function(){if(this._str)try{this._str=this.getInputData(1),this._obj=JSON.parse(this._str),this.boxcolor="#AEA",this.triggerSlot(0)}catch(t){this.boxcolor="red"}},p.prototype.onExecute=function(){this._str=this.getInputData(1),this.setOutputData(1,this._obj)},p.prototype.onAction=function(t){"parse"==t&&this.parse()},e.registerNodeType("basic/jsonparse",p),d.title="Const Data",d.desc="Constant Data",d.prototype.onPropertyChanged=function(t,e){if(this.widget.value=e,null!=e&&""!=e)try{this._value=JSON.parse(e),this.boxcolor="#AEA"}catch(n){this.boxcolor="red"}},d.prototype.onExecute=function(){this.setOutputData(0,this._value)},d.prototype.setValue=a.prototype.setValue,e.registerNodeType("basic/data",d),h.title="Const Array",h.desc="Constant Array",h.prototype.onPropertyChanged=function(t,e){if(this.widget.value=e,null!=e&&""!=e)try{"["!=e[0]?this._value=JSON.parse("["+e+"]"):this._value=JSON.parse(e),this.boxcolor="#AEA"}catch(n){this.boxcolor="red"}},h.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&t.length){this._value||(this._value=new Array),this._value.length=t.length;for(var e=0;e<t.length;++e)this._value[e]=t[e]}this.setOutputData(0,this._value),this.setOutputData(1,this._value&&this._value.length||0)},h.prototype.setValue=a.prototype.setValue,e.registerNodeType("basic/array",h),f.title="Set Array",f.desc="Sets index of array",f.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=this.getInputData(1);void 0!==e&&(this.properties.index&&(t[Math.floor(this.properties.index)]=e),this.setOutputData(0,t))}},e.registerNodeType("basic/set_array",f),g.title="Array[i]",g.desc="Returns an element from an array",g.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1);null==e&&(e=this.properties.index),null!=t&&null!=e&&this.setOutputData(0,t[Math.floor(Number(e))])},e.registerNodeType("basic/array[]",g),v.title="Table[row][col]",v.desc="Returns an element from a table",v.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1),n=this.getInputData(2);(null==e&&(e=this.properties.row),null==n&&(n=this.properties.column),null!=t&&null!=e&&null!=n)&&((e=t[Math.floor(Number(e))])?this.setOutputData(0,e[Math.floor(Number(n))]):this.setOutputData(0,null))},e.registerNodeType("basic/table[][]",v),m.title="Object property",m.desc="Outputs the property of an object",m.prototype.setValue=function(t){this.properties.value=t,this.widget.value=t},m.prototype.getTitle=function(){return this.flags.collapsed?"in."+this.properties.value:this.title},m.prototype.onPropertyChanged=function(t,e){this.widget.value=e},m.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,t[this.properties.value])},e.registerNodeType("basic/object_property",m),_.title="Object keys",_.desc="Outputs an array with the keys of an object",_.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,Object.keys(t))},e.registerNodeType("basic/object_keys",_),y.title="Set Object",y.desc="Adds propertiesrty to object",y.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=this.getInputData(1);void 0!==e&&(this.properties.property&&(t[this.properties.property]=e),this.setOutputData(0,t))}},e.registerNodeType("basic/set_object",y),b.title="Merge Objects",b.desc="Creates an object copying properties from others",b.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1),n=this._result;if(t)for(var r in t)n[r]=t[r];if(e)for(var r in e)n[r]=e[r];this.setOutputData(0,n)},e.registerNodeType("basic/merge_objects",b),x.title="Variable",x.desc="store/read variable value",x.LITEGRAPH=0,x.GRAPH=1,x.GLOBALSCOPE=2,x["@container"]={type:"enum",values:{litegraph:x.LITEGRAPH,graph:x.GRAPH,global:x.GLOBALSCOPE}},x.prototype.onExecute=function(){var t=this.getContainer();if(this.isInputConnected(0))return this.value=this.getInputData(0),t[this.properties.varname]=this.value,void this.setOutputData(0,this.value);this.setOutputData(0,t[this.properties.varname])},x.prototype.getContainer=function(){switch(this.properties.container){case x.GRAPH:return this.graph?this.graph.vars:{};case x.GLOBALSCOPE:return t;case x.LITEGRAPH:default:return e.Globals}},x.prototype.getTitle=function(){return this.properties.varname},e.registerNodeType("basic/variable",x),e.wrapFunctionAsNode("basic/length",(function(t){return t&&null!=t.length?Number(t.length):0}),[""],"number"),e.wrapFunctionAsNode("basic/not",(function(t){return!t}),[""],"boolean"),w.title="Download",w.desc="Download some data",w.prototype.downloadAsFile=function(){if(null!=this.value){var t=null;t=this.value.constructor===String?this.value:JSON.stringify(this.value);var e=new Blob([t]),n=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",this.properties.filename),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){URL.revokeObjectURL(n)}),6e4)}},w.prototype.onAction=function(t,e){var n=this;setTimeout((function(){n.downloadAsFile()}),100)},w.prototype.onExecute=function(){this.inputs[0]&&(this.value=this.getInputData(0))},w.prototype.getTitle=function(){return this.flags.collapsed?this.properties.filename:this.title},e.registerNodeType("basic/download",w),E.title="Watch",E.desc="Show value of input",E.prototype.onExecute=function(){this.inputs[0]&&(this.value=this.getInputData(0))},E.prototype.getTitle=function(){return this.flags.collapsed?this.inputs[0].label:this.title},E.toString=function(t){if(null==t)return"null";if(t.constructor===Number)return t.toFixed(3);if(t.constructor===Array){for(var e="[",n=0;n<t.length;++n)e+=E.toString(t[n])+(n+1!=t.length?",":"");return e+="]"}return String(t)},E.prototype.onDrawBackground=function(t){this.inputs[0].label=E.toString(this.value)},e.registerNodeType("basic/watch",E),T.title="Cast",T.desc="Allows to connect different types",T.prototype.onExecute=function(){this.setOutputData(0,this.getInputData(0))},e.registerNodeType("basic/cast",T),S.title="Console",S.desc="Show value inside the console",S.prototype.onAction=function(t,e){var n=this.getInputData(1);n||(n=this.properties.msg),n||(n="Event: "+e),"log"==t?console.log(n):"warn"==t?console.warn(n):"error"==t&&console.error(n)},S.prototype.onExecute=function(){var t=this.getInputData(1);t||(t=this.properties.msg),null!=t&&"undefined"!=typeof t&&(this.properties.msg=t,console.log(t))},S.prototype.onGetInputs=function(){return[["log",e.ACTION],["warn",e.ACTION],["error",e.ACTION]]},e.registerNodeType("basic/console",S),C.title="Alert",C.desc="Show an alert window",C.color="#510",C.prototype.onConfigure=function(t){this.widget.value=t.properties.msg},C.prototype.onAction=function(t,e){var n=this.properties.msg;setTimeout((function(){alert(n)}),10)},e.registerNodeType("basic/alert",C),O.prototype.onConfigure=function(t){t.properties.onExecute&&e.allow_scripts?this.compileCode(t.properties.onExecute):console.warn("Script not compiled, LiteGraph.allow_scripts is false")},O.title="Script",O.desc="executes a code (max 256 characters)",O.widgets_info={onExecute:{type:"code"}},O.prototype.onPropertyChanged=function(t,n){"onExecute"==t&&e.allow_scripts?this.compileCode(n):console.warn("Script not compiled, LiteGraph.allow_scripts is false")},O.prototype.compileCode=function(t){if(this._func=null,t.length>256)console.warn("Script too long, max 256 chars");else{for(var e=t.toLowerCase(),n=["script","body","document","eval","nodescript","function"],r=0;r<n.length;++r)if(-1!=e.indexOf(n[r]))return void console.warn("invalid script");try{this._func=new Function("A","B","C","DATA","node",t)}catch(i){console.error("Error parsing script"),console.error(i)}}},O.prototype.onExecute=function(){if(this._func)try{var t=this.getInputData(0),e=this.getInputData(1),n=this.getInputData(2);this.setOutputData(0,this._func(t,e,n,this.data,this))}catch(r){console.error("Error in script"),console.error(r)}},O.prototype.onGetOutputs=function(){return[["C",""]]},e.registerNodeType("basic/script",O),L.values=["==","!="],L["@OP"]={type:"enum",title:"operation",values:L.values},L.title="Compare *",L.desc="evaluates condition between A and B",L.prototype.getTitle=function(){return"*A "+this.properties.OP+" *B"},L.prototype.onExecute=function(){var t=this.getInputData(0);void 0===t?t=this.properties.A:this.properties.A=t;var e=this.getInputData(1);void 0===e?e=this.properties.B:this.properties.B=e;var n=!1;if(typeof t==typeof e)switch(this.properties.OP){case"==":case"!=":switch(n=!0,typeof t){case"object":var r=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(e);if(r.length!=i.length){n=!1;break}for(var o=0;o<r.length;o++){var a=r[o];if(t[a]!==e[a]){n=!1;break}}break;default:n=t==e}"!="==this.properties.OP&&(n=!n)}this.setOutputData(0,n),this.setOutputData(1,!n)},e.registerNodeType("basic/CompareValues",L)}(this),function(t){var e=t.LiteGraph;function n(){this.size=[60,30],this.addInput("event",e.ACTION)}function r(){this.size=[60,30],this.addInput("if",""),this.addOutput("true",e.EVENT),this.addOutput("change",e.EVENT),this.addOutput("false",e.EVENT),this.properties={only_on_change:!0},this.prev=0}function i(){var t=this;this.addInput("",e.ACTION),this.addInput("",e.ACTION),this.addInput("",e.ACTION),this.addOutput("",e.EVENT),this.addOutput("",e.EVENT),this.addOutput("",e.EVENT),this.addWidget("button","+",null,(function(){t.addInput("",e.ACTION),t.addOutput("",e.EVENT)})),this.size=[90,70],this.flags={horizontal:!0,render_box:!1}}function o(){var t=this;this.addInput("",e.ACTION),this.addInput("",e.ACTION),this.addOutput("",e.EVENT),this.addWidget("button","+",null,(function(){t.addInput("",e.ACTION),t.size[0]=90})),this.size=[90,70],this.ready=[]}function a(){var t=this;this.properties={index:0},this.addInput("index","number"),this.addInput("step",e.ACTION),this.addInput("reset",e.ACTION),this.addOutput("index","number"),this.addOutput("",e.EVENT),this.addOutput("",e.EVENT),this.addOutput("",e.EVENT,{removable:!0}),this.addWidget("button","+",null,(function(){t.addOutput("",e.EVENT,{removable:!0})})),this.size=[120,120],this.flags={render_box:!1}}function s(){this.size=[60,30],this.addInput("event",e.ACTION),this.addOutput("event",e.EVENT),this.properties={equal_to:"",has_property:"",property_equal_to:""}}function l(){this.addInput("in",e.ACTION),this.addInput("cond","boolean"),this.addOutput("true",e.EVENT),this.addOutput("false",e.EVENT),this.size=[120,60],this._value=!1}function u(){this.addInput("inc",e.ACTION),this.addInput("dec",e.ACTION),this.addInput("reset",e.ACTION),this.addOutput("change",e.EVENT),this.addOutput("num","number"),this.addProperty("doCountExecution",!1,"boolean",{name:"Count Executions"}),this.addWidget("toggle","Count Exec.",this.properties.doCountExecution,"doCountExecution"),this.num=0}function c(){this.size=[60,30],this.addProperty("time_in_ms",1e3),this.addInput("event",e.ACTION),this.addOutput("on_time",e.EVENT),this._pending=[]}function p(){this.addProperty("interval",1e3),this.addProperty("event","tick"),this.addOutput("on_tick",e.EVENT),this.time=0,this.last_interval=1e3,this.triggered=!1}function d(){this.addInput("go",e.ACTION),this.addInput("green",e.ACTION),this.addInput("red",e.ACTION),this.addOutput("continue",e.EVENT),this.addOutput("blocked",e.EVENT),this.addOutput("is_green","boolean"),this._ready=!1,this.properties={};var t=this;this.addWidget("button","reset","",(function(){t._ready=!1}))}function h(){this.addInput("in",e.ACTION),this.addInput("reset",e.ACTION),this.addOutput("out",e.EVENT),this._once=!1,this.properties={};var t=this;this.addWidget("button","reset","",(function(){t._once=!1}))}function f(){this.addInput("data",0),this.addInput("assign",e.ACTION),this.addOutput("data",0),this._last_value=null,this.properties={data:null,serialize:!0};var t=this;this.addWidget("button","store","",(function(){t.properties.data=t._last_value}))}n.title="Log Event",n.desc="Log event in console",n.prototype.onAction=function(t,e,n){console.log(t,e)},e.registerNodeType("events/log",n),r.title="TriggerEvent",r.desc="Triggers event if input evaluates to true",r.prototype.onExecute=function(t,e){var n=this.getInputData(0),r=n!=this.prev;0===this.prev&&(r=!1);var i=r&&this.properties.only_on_change||!r&&!this.properties.only_on_change;n&&i&&this.triggerSlot(0,t,null,e),!n&&i&&this.triggerSlot(2,t,null,e),r&&this.triggerSlot(1,t,null,e),this.prev=n},e.registerNodeType("events/trigger",r),i.title="Sequence",i.desc="Triggers a sequence of events when an event arrives",i.prototype.getTitle=function(){return""},i.prototype.onAction=function(t,e,n){if(this.outputs){n=n||{};for(var r=0;r<this.outputs.length;++r){this.outputs[r];n.action_call?n.action_call=n.action_call+"_seq_"+r:n.action_call=this.id+"_"+(t||"action")+"_seq_"+r+"_"+Math.floor(9999*Math.random()),this.triggerSlot(r,e,null,n)}}},e.registerNodeType("events/sequence",i),o.title="WaitAll",o.desc="Wait until all input events arrive then triggers output",o.prototype.getTitle=function(){return""},o.prototype.onDrawBackground=function(t){if(!this.flags.collapsed)for(var n=0;n<this.inputs.length;++n){var r=n*e.NODE_SLOT_HEIGHT+10;t.fillStyle=this.ready[n]?"#AFB":"#000",t.fillRect(20,r,10,10)}},o.prototype.onAction=function(t,e,n,r){if(null!=r){this.ready.length=this.outputs.length,this.ready[r]=!0;for(var i=0;i<this.ready.length;++i)if(!this.ready[i])return;this.reset(),this.triggerSlot(0)}},o.prototype.reset=function(){this.ready.length=0},e.registerNodeType("events/waitAll",o),a.title="Stepper",a.desc="Trigger events sequentially when an tick arrives",a.prototype.onDrawBackground=function(t){if(!this.flags.collapsed){var n=this.properties.index||0;t.fillStyle="#AFB";var r=this.size[0],i=(n+1)*e.NODE_SLOT_HEIGHT+4;t.beginPath(),t.moveTo(r-30,i),t.lineTo(r-30,i+e.NODE_SLOT_HEIGHT),t.lineTo(r-15,i+.5*e.NODE_SLOT_HEIGHT),t.fill()}},a.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(t=Math.floor(t),(t=clamp(t,0,this.outputs?this.outputs.length-2:0))!=this.properties.index&&(this.properties.index=t,this.triggerSlot(t+1))),this.setOutputData(0,this.properties.index)},a.prototype.onAction=function(t,e){if("reset"==t)this.properties.index=0;else if("step"==t){this.triggerSlot(this.properties.index+1,e);var n=this.outputs?this.outputs.length-1:0;this.properties.index=(this.properties.index+1)%n}},e.registerNodeType("events/stepper",a),s.title="Filter Event",s.desc="Blocks events that do not match the filter",s.prototype.onAction=function(t,e,n){if(null!=e&&(!this.properties.equal_to||this.properties.equal_to==e)){if(this.properties.has_property){var r=e[this.properties.has_property];if(null==r)return;if(this.properties.property_equal_to&&this.properties.property_equal_to!=r)return}this.triggerSlot(0,e,null,n)}},e.registerNodeType("events/filter",s),l.title="Branch",l.desc="If condition is true, outputs triggers true, otherwise false",l.prototype.onExecute=function(){this._value=this.getInputData(1)},l.prototype.onAction=function(t,e,n){this._value=this.getInputData(1),this.triggerSlot(this._value?0:1,e,null,n)},e.registerNodeType("events/branch",l),u.title="Counter",u.desc="Counts events",u.prototype.getTitle=function(){return this.flags.collapsed?String(this.num):this.title},u.prototype.onAction=function(t,e,n){var r=this.num;"inc"==t?this.num+=1:"dec"==t?this.num-=1:"reset"==t&&(this.num=0),this.num!=r&&this.trigger("change",this.num)},u.prototype.onDrawBackground=function(t){this.flags.collapsed||(t.fillStyle="#AAA",t.font="20px Arial",t.textAlign="center",t.fillText(this.num,.5*this.size[0],.5*this.size[1]))},u.prototype.onExecute=function(){this.properties.doCountExecution&&(this.num+=1),this.setOutputData(1,this.num)},e.registerNodeType("events/counter",u),c.title="Delay",c.desc="Delays one event",c.prototype.onAction=function(t,e,n){var r=this.properties.time_in_ms;r<=0?this.trigger(null,e,n):this._pending.push([r,e])},c.prototype.onExecute=function(t,e){var n=1e3*this.graph.elapsed_time;this.isInputConnected(1)&&(this.properties.time_in_ms=this.getInputData(1));for(var r=0;r<this._pending.length;++r){var i=this._pending[r];i[0]-=n,i[0]>0||(this._pending.splice(r,1),--r,this.trigger(null,i[1],e))}},c.prototype.onGetInputs=function(){return[["event",e.ACTION],["time_in_ms","number"]]},e.registerNodeType("events/delay",c),p.title="Timer",p.desc="Sends an event every N milliseconds",p.prototype.onStart=function(){this.time=0},p.prototype.getTitle=function(){return"Timer: "+this.last_interval.toString()+"ms"},p.on_color="#AAA",p.off_color="#222",p.prototype.onDrawBackground=function(){this.boxcolor=this.triggered?p.on_color:p.off_color,this.triggered=!1},p.prototype.onExecute=function(){var t=1e3*this.graph.elapsed_time,e=0==this.time;this.time+=t,this.last_interval=Math.max(1,0|this.getInputOrProperty("interval")),e||!(this.time<this.last_interval||isNaN(this.last_interval))?(this.triggered=!0,this.time=this.time%this.last_interval,this.trigger("on_tick",this.properties.event),this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!0)):this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!1)},p.prototype.onGetInputs=function(){return[["interval","number"]]},p.prototype.onGetOutputs=function(){return[["tick","boolean"]]},e.registerNodeType("events/timer",p),d.title="Semaphore Event",d.desc="Until both events are not triggered, it doesnt continue.",d.prototype.onExecute=function(){this.setOutputData(1,this._ready),this.boxcolor=this._ready?"#9F9":"#FA5"},d.prototype.onAction=function(t,e){"go"==t?this.triggerSlot(this._ready?0:1):"green"==t?this._ready=!0:"red"==t&&(this._ready=!1)},e.registerNodeType("events/semaphore",d),h.title="Once",h.desc="Only passes an event once, then gets locked",h.prototype.onAction=function(t,e){"in"!=t||this._once?"reset"==t&&(this._once=!1):(this._once=!0,this.triggerSlot(0,e))},e.registerNodeType("events/once",h),f.title="Data Store",f.desc="Stores data and only changes when event is received",f.prototype.onExecute=function(){this._last_value=this.getInputData(0),this.setOutputData(0,this.properties.data)},f.prototype.onAction=function(t,e,n){this.properties.data=this._last_value},f.prototype.onSerialize=function(t){null!=t.data&&(0==this.properties.serialize||t.data.constructor!==String&&t.data.constructor!==Number&&t.data.constructor!==Boolean&&t.data.constructor!==Array&&t.data.constructor!==Object)&&(t.data=null)},e.registerNodeType("basic/data_store",f)}(this),function(t){var e=t.LiteGraph;function n(){this.addOutput("",e.EVENT),this.addOutput("","boolean"),this.addProperty("text","click me"),this.addProperty("font_size",30),this.addProperty("message",""),this.size=[164,84],this.clicked=!1}function r(){this.addInput("","boolean"),this.addInput("e",e.ACTION),this.addOutput("v","boolean"),this.addOutput("e",e.EVENT),this.properties={font:"",value:!1},this.size=[160,44]}function i(){this.addOutput("","number"),this.size=[80,60],this.properties={min:-1e3,max:1e3,value:1,step:1},this.old_y=-1,this._remainder=0,this._precision=0,this.mouse_captured=!1}function o(){this.addOutput("","string"),this.addOutput("change",e.EVENT),this.size=[80,60],this.properties={value:"A",values:"A;B;C"},this.old_y=-1,this.mouse_captured=!1,this._values=this.properties.values.split(";");var t=this;this.widgets_up=!0,this.widget=this.addWidget("combo","",this.properties.value,(function(e){t.properties.value=e,t.triggerSlot(1,e)}),{property:"value",values:this._values})}function a(){this.addOutput("","number"),this.size=[64,84],this.properties={min:0,max:1,value:.5,color:"#7AF",precision:2},this.value=-1}function s(){this.addOutput("","number"),this.properties={value:.5,min:0,max:1,text:"V"};var t=this;this.size=[140,40],this.slider=this.addWidget("slider","V",this.properties.value,(function(e){t.properties.value=e}),this.properties),this.widgets_up=!0}function l(){this.size=[160,26],this.addOutput("","number"),this.properties={color:"#7AF",min:0,max:1,value:.5},this.value=-1}function u(){this.size=[160,26],this.addInput("","number"),this.properties={min:0,max:1,value:0,color:"#AAF"}}function c(){this.addInputs("",0),this.properties={value:"...",font:"Arial",fontsize:18,color:"#AAA",align:"left",glowSize:0,decimals:1}}function p(){this.size=[200,100],this.properties={borderColor:"#ffffff",bgcolorTop:"#f0f0f0",bgcolorBottom:"#e0e0e0",shadowSize:2,borderRadius:3}}n.title="Button",n.desc="Triggers an event",n.font="Arial",n.prototype.onDrawForeground=function(t){if(!this.flags.collapsed){var e=10;if(t.fillStyle="black",t.fillRect(11,11,this.size[0]-20,this.size[1]-20),t.fillStyle="#AAF",t.fillRect(9,9,this.size[0]-20,this.size[1]-20),t.fillStyle=this.clicked?"white":this.mouseOver?"#668":"#334",t.fillRect(e,e,this.size[0]-20,this.size[1]-20),this.properties.text||0===this.properties.text){var r=this.properties.font_size||30;t.textAlign="center",t.fillStyle=this.clicked?"black":"white",t.font=r+"px "+n.font,t.fillText(this.properties.text,.5*this.size[0],.5*this.size[1]+.3*r),t.textAlign="left"}}},n.prototype.onMouseDown=function(t,e){if(e[0]>1&&e[1]>1&&e[0]<this.size[0]-2&&e[1]<this.size[1]-2)return this.clicked=!0,this.setOutputData(1,this.clicked),this.triggerSlot(0,this.properties.message),!0},n.prototype.onExecute=function(){this.setOutputData(1,this.clicked)},n.prototype.onMouseUp=function(t){this.clicked=!1},e.registerNodeType("widget/button",n),r.title="Toggle",r.desc="Toggles between true or false",r.prototype.onDrawForeground=function(t){if(!this.flags.collapsed){var e=.5*this.size[1],n=.25,r=.8*this.size[1];t.font=this.properties.font||(.8*e).toFixed(0)+"px Arial";var i=t.measureText(this.title).width,o=.5*(this.size[0]-(i+e));t.fillStyle="#AAA",t.fillRect(o,r-e,e,e),t.fillStyle=this.properties.value?"#AEF":"#000",t.fillRect(o+e*n,r-e+e*n,.5*e,.5*e),t.textAlign="left",t.fillStyle="#AAA",t.fillText(this.title,1.2*e+o,.85*r),t.textAlign="left"}},r.prototype.onAction=function(t){this.properties.value=!this.properties.value,this.trigger("e",this.properties.value)},r.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(this.properties.value=t),this.setOutputData(0,this.properties.value)},r.prototype.onMouseDown=function(t,e){if(e[0]>1&&e[1]>1&&e[0]<this.size[0]-2&&e[1]<this.size[1]-2)return this.properties.value=!this.properties.value,this.graph._version++,this.trigger("e",this.properties.value),!0},e.registerNodeType("widget/toggle",r),i.title="Number",i.desc="Widget to select number value",i.pixels_threshold=10,i.markers_color="#666",i.prototype.onDrawForeground=function(t){var e=.5*this.size[0],n=this.size[1];n>30?(t.fillStyle=i.markers_color,t.beginPath(),t.moveTo(e,.1*n),t.lineTo(e+.1*n,.2*n),t.lineTo(e+-.1*n,.2*n),t.fill(),t.beginPath(),t.moveTo(e,.9*n),t.lineTo(e+.1*n,.8*n),t.lineTo(e+-.1*n,.8*n),t.fill(),t.font=(.7*n).toFixed(1)+"px Arial"):t.font=(.8*n).toFixed(1)+"px Arial",t.textAlign="center",t.font=(.7*n).toFixed(1)+"px Arial",t.fillStyle="#EEE",t.fillText(this.properties.value.toFixed(this._precision),e,.75*n)},i.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},i.prototype.onPropertyChanged=function(t,e){var n=(this.properties.step+"").split(".");this._precision=n.length>1?n[1].length:0},i.prototype.onMouseDown=function(t,e){if(!(e[1]<0))return this.old_y=t.canvasY,this.captureInput(!0),this.mouse_captured=!0,!0},i.prototype.onMouseMove=function(t){if(this.mouse_captured){var e=this.old_y-t.canvasY;t.shiftKey&&(e*=10),(t.metaKey||t.altKey)&&(e*=.1),this.old_y=t.canvasY;var n=this._remainder+e/i.pixels_threshold;this._remainder=n%1,n|=0;var r=clamp(this.properties.value+n*this.properties.step,this.properties.min,this.properties.max);this.properties.value=r,this.graph._version++,this.setDirtyCanvas(!0)}},i.prototype.onMouseUp=function(t,e){if(t.click_time<200){var n=e[1]>.5*this.size[1]?-1:1;this.properties.value=clamp(this.properties.value+n*this.properties.step,this.properties.min,this.properties.max),this.graph._version++,this.setDirtyCanvas(!0)}this.mouse_captured&&(this.mouse_captured=!1,this.captureInput(!1))},e.registerNodeType("widget/number",i),o.title="Combo",o.desc="Widget to select from a list",o.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},o.prototype.onPropertyChanged=function(t,e){"values"==t?(this._values=e.split(";"),this.widget.options.values=this._values):"value"==t&&(this.widget.value=e)},e.registerNodeType("widget/combo",o),a.title="Knob",a.desc="Circular controller",a.size=[80,100],a.prototype.onDrawForeground=function(t){if(!this.flags.collapsed){-1==this.value&&(this.value=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min));var e=.5*this.size[0],n=.5*this.size[1],r=.5*Math.min(this.size[0],this.size[1])-5;Math.floor(.05*r);t.globalAlpha=1,t.save(),t.translate(e,n),t.rotate(.75*Math.PI),t.fillStyle="rgba(0,0,0,0.5)",t.beginPath(),t.moveTo(0,0),t.arc(0,0,r,0,1.5*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle=this.properties.color,t.lineWidth=2,t.beginPath(),t.moveTo(0,0),t.arc(0,0,r-4,0,1.5*Math.PI*Math.max(.01,this.value)),t.closePath(),t.fill(),t.lineWidth=1,t.globalAlpha=1,t.restore(),t.fillStyle="black",t.beginPath(),t.arc(e,n,.75*r,0,2*Math.PI,!0),t.fill(),t.fillStyle=this.mouseOver?"white":this.properties.color,t.beginPath();var i=this.value*Math.PI*1.5+.75*Math.PI;t.arc(e+Math.cos(i)*r*.65,n+Math.sin(i)*r*.65,.05*r,0,2*Math.PI,!0),t.fill(),t.fillStyle=this.mouseOver?"white":"#AAA",t.font=Math.floor(.5*r)+"px Arial",t.textAlign="center",t.fillText(this.properties.value.toFixed(this.properties.precision),e,n+.15*r)}},a.prototype.onExecute=function(){this.setOutputData(0,this.properties.value),this.boxcolor=e.colorToString([this.value,this.value,this.value])},a.prototype.onMouseDown=function(t){return this.center=[.5*this.size[0],.5*this.size[1]+20],this.radius=.5*this.size[0],!(t.canvasY-this.pos[1]<20||e.distance([t.canvasX,t.canvasY],[this.pos[0]+this.center[0],this.pos[1]+this.center[1]])>this.radius)&&(this.oldmouse=[t.canvasX-this.pos[0],t.canvasY-this.pos[1]],this.captureInput(!0),!0)},a.prototype.onMouseMove=function(t){if(this.oldmouse){var e=[t.canvasX-this.pos[0],t.canvasY-this.pos[1]],n=this.value;(n-=.01*(e[1]-this.oldmouse[1]))>1?n=1:n<0&&(n=0),this.value=n,this.properties.value=this.properties.min+(this.properties.max-this.properties.min)*this.value,this.oldmouse=e,this.setDirtyCanvas(!0)}},a.prototype.onMouseUp=function(t){this.oldmouse&&(this.oldmouse=null,this.captureInput(!1))},a.prototype.onPropertyChanged=function(t,e){if("min"==t||"max"==t||"value"==t)return this.properties[t]=parseFloat(e),!0},e.registerNodeType("widget/knob",a),s.title="Inner Slider",s.prototype.onPropertyChanged=function(t,e){"value"==t&&(this.slider.value=e)},s.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},e.registerNodeType("widget/internal_slider",s),l.title="H.Slider",l.desc="Linear slider controller",l.prototype.onDrawForeground=function(t){-1==this.value&&(this.value=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min)),t.globalAlpha=1,t.lineWidth=1,t.fillStyle="#000",t.fillRect(2,2,this.size[0]-4,this.size[1]-4),t.fillStyle=this.properties.color,t.beginPath(),t.rect(4,4,(this.size[0]-8)*this.value,this.size[1]-8),t.fill()},l.prototype.onExecute=function(){this.properties.value=this.properties.min+(this.properties.max-this.properties.min)*this.value,this.setOutputData(0,this.properties.value),this.boxcolor=e.colorToString([this.value,this.value,this.value])},l.prototype.onMouseDown=function(t){return!(t.canvasY-this.pos[1]<0)&&(this.oldmouse=[t.canvasX-this.pos[0],t.canvasY-this.pos[1]],this.captureInput(!0),!0)},l.prototype.onMouseMove=function(t){if(this.oldmouse){var e=[t.canvasX-this.pos[0],t.canvasY-this.pos[1]],n=this.value;(n+=(e[0]-this.oldmouse[0])/this.size[0])>1?n=1:n<0&&(n=0),this.value=n,this.oldmouse=e,this.setDirtyCanvas(!0)}},l.prototype.onMouseUp=function(t){this.oldmouse=null,this.captureInput(!1)},l.prototype.onMouseLeave=function(t){},e.registerNodeType("widget/hslider",l),u.title="Progress",u.desc="Shows data in linear progress",u.prototype.onExecute=function(){var t=this.getInputData(0);void 0!=t&&(this.properties.value=t)},u.prototype.onDrawForeground=function(t){t.lineWidth=1,t.fillStyle=this.properties.color;var e=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min);e=Math.min(1,e),e=Math.max(0,e),t.fillRect(2,2,(this.size[0]-4)*e,this.size[1]-4)},e.registerNodeType("widget/progress",u),c.title="Text",c.desc="Shows the input value",c.widgets=[{name:"resize",text:"Resize box",type:"button"},{name:"led_text",text:"LED",type:"minibutton"},{name:"normal_text",text:"Normal",type:"minibutton"}],c.prototype.onDrawForeground=function(t){t.fillStyle=this.properties.color;var e=this.properties.value;this.properties.glowSize?(t.shadowColor=this.properties.color,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=this.properties.glowSize):t.shadowColor="transparent";var n=this.properties.fontsize;if(t.textAlign=this.properties.align,t.font=n.toString()+"px "+this.properties.font,this.str="number"==typeof e?e.toFixed(this.properties.decimals):e,"string"==typeof this.str)for(var r=this.str.replace(/[\r\n]/g,"\\n").split("\\n"),i=0;i<r.length;i++)t.fillText(r[i],"left"==this.properties.align?15:this.size[0]-15,-.15*n+n*(parseInt(i)+1));t.shadowColor="transparent",this.last_ctx=t,t.textAlign="left"},c.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(this.properties.value=t)},c.prototype.resize=function(){if(this.last_ctx){var t=this.str.split("\\n");this.last_ctx.font=this.properties.fontsize+"px "+this.properties.font;for(var e=0,n=0;n<t.length;n++){var r=this.last_ctx.measureText(t[n]).width;e<r&&(e=r)}this.size[0]=e+20,this.size[1]=4+t.length*this.properties.fontsize,this.setDirtyCanvas(!0)}},c.prototype.onPropertyChanged=function(t,e){return this.properties[t]=e,this.str="number"==typeof e?e.toFixed(3):e,!0},e.registerNodeType("widget/text",c),p.title="Panel",p.desc="Non interactive panel",p.widgets=[{name:"update",text:"Update",type:"button"}],p.prototype.createGradient=function(t){""!=this.properties.bgcolorTop&&""!=this.properties.bgcolorBottom?(this.lineargradient=t.createLinearGradient(0,0,0,this.size[1]),this.lineargradient.addColorStop(0,this.properties.bgcolorTop),this.lineargradient.addColorStop(1,this.properties.bgcolorBottom)):this.lineargradient=0},p.prototype.onDrawForeground=function(t){this.flags.collapsed||(null==this.lineargradient&&this.createGradient(t),this.lineargradient&&(t.lineWidth=1,t.strokeStyle=this.properties.borderColor,t.fillStyle=this.lineargradient,this.properties.shadowSize?(t.shadowColor="#000",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=this.properties.shadowSize):t.shadowColor="transparent",t.roundRect(0,0,this.size[0]-1,this.size[1]-1,this.properties.shadowSize),t.fill(),t.shadowColor="transparent",t.stroke()))},e.registerNodeType("widget/panel",p)}(this),function(t){var e=t.LiteGraph;function n(){this.addOutput("left_x_axis","number"),this.addOutput("left_y_axis","number"),this.addOutput("button_pressed",e.EVENT),this.properties={gamepad_index:0,threshold:.1},this._left_axis=new Float32Array(2),this._right_axis=new Float32Array(2),this._triggers=new Float32Array(2),this._previous_buttons=new Uint8Array(17),this._current_buttons=new Uint8Array(17)}n.title="Gamepad",n.desc="gets the input of the gamepad",n.CENTER=0,n.LEFT=1,n.RIGHT=2,n.UP=4,n.DOWN=8,n.zero=new Float32Array(2),n.buttons=["a","b","x","y","lb","rb","lt","rt","back","start","ls","rs","home"],n.prototype.onExecute=function(){var t=this.getGamepad(),e=this.properties.threshold||0;if(t&&(this._left_axis[0]=Math.abs(t.xbox.axes.lx)>e?t.xbox.axes.lx:0,this._left_axis[1]=Math.abs(t.xbox.axes.ly)>e?t.xbox.axes.ly:0,this._right_axis[0]=Math.abs(t.xbox.axes.rx)>e?t.xbox.axes.rx:0,this._right_axis[1]=Math.abs(t.xbox.axes.ry)>e?t.xbox.axes.ry:0,this._triggers[0]=Math.abs(t.xbox.axes.ltrigger)>e?t.xbox.axes.ltrigger:0,this._triggers[1]=Math.abs(t.xbox.axes.rtrigger)>e?t.xbox.axes.rtrigger:0),this.outputs)for(var r=0;r<this.outputs.length;r++){var i=this.outputs[r];if(i.links&&i.links.length){var o=null;if(t)switch(i.name){case"left_axis":o=this._left_axis;break;case"right_axis":o=this._right_axis;break;case"left_x_axis":o=this._left_axis[0];break;case"left_y_axis":o=this._left_axis[1];break;case"right_x_axis":o=this._right_axis[0];break;case"right_y_axis":o=this._right_axis[1];break;case"trigger_left":o=this._triggers[0];break;case"trigger_right":o=this._triggers[1];break;case"a_button":o=t.xbox.buttons.a?1:0;break;case"b_button":o=t.xbox.buttons.b?1:0;break;case"x_button":o=t.xbox.buttons.x?1:0;break;case"y_button":o=t.xbox.buttons.y?1:0;break;case"lb_button":o=t.xbox.buttons.lb?1:0;break;case"rb_button":o=t.xbox.buttons.rb?1:0;break;case"ls_button":o=t.xbox.buttons.ls?1:0;break;case"rs_button":o=t.xbox.buttons.rs?1:0;break;case"hat_left":o=t.xbox.hatmap&n.LEFT;break;case"hat_right":o=t.xbox.hatmap&n.RIGHT;break;case"hat_up":o=t.xbox.hatmap&n.UP;break;case"hat_down":o=t.xbox.hatmap&n.DOWN;break;case"hat":o=t.xbox.hatmap;break;case"start_button":o=t.xbox.buttons.start?1:0;break;case"back_button":o=t.xbox.buttons.back?1:0;break;case"button_pressed":for(var a=0;a<this._current_buttons.length;++a)this._current_buttons[a]&&!this._previous_buttons[a]&&this.triggerSlot(r,n.buttons[a])}else switch(i.name){case"button_pressed":break;case"left_axis":case"right_axis":o=n.zero;break;default:o=0}this.setOutputData(r,o)}}},n.mapping={a:0,b:1,x:2,y:3,lb:4,rb:5,lt:6,rt:7,back:8,start:9,ls:10,rs:11},n.mapping_array=["a","b","x","y","lb","rb","lt","rt","back","start","ls","rs"],n.prototype.getGamepad=function(){var t=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads;if(!t)return null;var e=t.call(navigator),r=null;this._previous_buttons.set(this._current_buttons);for(var i=this.properties.gamepad_index;i<4;i++)if(e[i]){r=e[i];var o=this.xbox_mapping;o||(o=this.xbox_mapping={axes:[],buttons:{},hat:"",hatmap:n.CENTER}),o.axes.lx=r.axes[0],o.axes.ly=r.axes[1],o.axes.rx=r.axes[2],o.axes.ry=r.axes[3],o.axes.ltrigger=r.buttons[6].value,o.axes.rtrigger=r.buttons[7].value,o.hat="",o.hatmap=n.CENTER;for(var a=0;a<r.buttons.length;a++)if(this._current_buttons[a]=r.buttons[a].pressed,a<12)o.buttons[n.mapping_array[a]]=r.buttons[a].pressed,r.buttons[a].was_pressed&&this.trigger(n.mapping_array[a]+"_button_event");else switch(a){case 12:r.buttons[a].pressed&&(o.hat+="up",o.hatmap|=n.UP);break;case 13:r.buttons[a].pressed&&(o.hat+="down",o.hatmap|=n.DOWN);break;case 14:r.buttons[a].pressed&&(o.hat+="left",o.hatmap|=n.LEFT);break;case 15:r.buttons[a].pressed&&(o.hat+="right",o.hatmap|=n.RIGHT);break;case 16:o.buttons.home=r.buttons[a].pressed}return r.xbox=o,r}},n.prototype.onDrawBackground=function(t){if(!this.flags.collapsed){var e=this._left_axis,n=this._right_axis;t.strokeStyle="#88A",t.strokeRect(.5*(e[0]+1)*this.size[0]-4,.5*(e[1]+1)*this.size[1]-4,8,8),t.strokeStyle="#8A8",t.strokeRect(.5*(n[0]+1)*this.size[0]-4,.5*(n[1]+1)*this.size[1]-4,8,8);var r=this.size[1]/this._current_buttons.length;t.fillStyle="#AEB";for(var i=0;i<this._current_buttons.length;++i)this._current_buttons[i]&&t.fillRect(0,r*i,6,r)}},n.prototype.onGetOutputs=function(){return[["left_axis","vec2"],["right_axis","vec2"],["left_x_axis","number"],["left_y_axis","number"],["right_x_axis","number"],["right_y_axis","number"],["trigger_left","number"],["trigger_right","number"],["a_button","number"],["b_button","number"],["x_button","number"],["y_button","number"],["lb_button","number"],["rb_button","number"],["ls_button","number"],["rs_button","number"],["start_button","number"],["back_button","number"],["a_button_event",e.EVENT],["b_button_event",e.EVENT],["x_button_event",e.EVENT],["y_button_event",e.EVENT],["lb_button_event",e.EVENT],["rb_button_event",e.EVENT],["ls_button_event",e.EVENT],["rs_button_event",e.EVENT],["start_button_event",e.EVENT],["back_button_event",e.EVENT],["hat_left","number"],["hat_right","number"],["hat_up","number"],["hat_down","number"],["hat","number"],["button_pressed",e.EVENT]]},e.registerNodeType("input/gamepad",n)}(this),function(t){var e=t.LiteGraph;function n(){this.addInput("in",0),this.addOutput("out",0),this.size=[80,30]}function r(){this.addInput("in"),this.addOutput("out"),this.size=[80,30]}function i(){this.addInput("in"),this.addOutput("out")}function o(){this.addInput("in","number",{locked:!0}),this.addOutput("out","number",{locked:!0}),this.addOutput("clamped","number",{locked:!0}),this.addProperty("in",0),this.addProperty("in_min",0),this.addProperty("in_max",1),this.addProperty("out_min",0),this.addProperty("out_max",1),this.size=[120,50]}function a(){this.addOutput("value","number"),this.addProperty("min",0),this.addProperty("max",1),this.size=[80,30]}function s(){this.addInput("in","number"),this.addOutput("out","number"),this.addProperty("min",0),this.addProperty("max",1),this.addProperty("smooth",!0),this.addProperty("seed",0),this.addProperty("octaves",1),this.addProperty("persistence",.8),this.addProperty("speed",1),this.size=[90,30]}function l(){this.addOutput("out","number"),this.addProperty("min_time",1),this.addProperty("max_time",2),this.addProperty("duration",.2),this.size=[90,30],this._remaining_time=0,this._blink_time=0}function u(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.addProperty("min",0),this.addProperty("max",1)}function c(){this.properties={f:.5},this.addInput("A","number"),this.addInput("B","number"),this.addOutput("out","number")}function p(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}function d(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}function h(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}function f(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.properties={A:0,B:1}}function g(){this.addInput("in","number",{label:""}),this.addOutput("out","number",{label:""}),this.size=[80,30],this.addProperty("factor",1)}function v(){this.addInput("v","boolean"),this.addInput("A"),this.addInput("B"),this.addOutput("out")}function m(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.addProperty("samples",10),this._values=new Float32Array(10),this._current=0}function _(){this.addInput("in","number"),this.addOutput("out","number"),this.addProperty("factor",.1),this.size=[80,30],this._value=null}function y(){this.addInput("A","number,array,object"),this.addInput("B","number"),this.addOutput("=","number"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP","+","enum",{values:y.values}),this._func=y.funcs[this.properties.OP],this._result=[]}function b(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A==B","boolean"),this.addOutput("A!=B","boolean"),this.addProperty("A",0),this.addProperty("B",0)}function x(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("true","boolean"),this.addOutput("false","boolean"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP",">","enum",{values:x.values}),this.addWidget("combo","Cond.",this.properties.OP,{property:"OP",values:x.values}),this.size=[80,60]}function w(){this.addInput("in",0),this.addInput("cond","boolean"),this.addOutput("true",0),this.addOutput("false",0),this.size=[80,60]}function E(){this.addInput("inc","number"),this.addOutput("total","number"),this.addProperty("increment",1),this.addProperty("value",0)}function T(){this.addInput("v","number"),this.addOutput("sin","number"),this.addProperty("amplitude",1),this.addProperty("offset",0),this.bgImageUrl="nodes/imgs/icon-sin.png"}function S(){this.addInput("x","number"),this.addInput("y","number"),this.addOutput("","number"),this.properties={x:1,y:1,formula:"x+y"},this.code_widget=this.addWidget("text","F(x,y)",this.properties.formula,(function(t,e,n){n.properties.formula=t})),this.addWidget("toggle","allow",e.allow_scripts,(function(t){e.allow_scripts=t})),this._func=null}function C(){this.addInput("vec2","vec2"),this.addOutput("x","number"),this.addOutput("y","number")}function O(){this.addInputs([["x","number"],["y","number"]]),this.addOutput("vec2","vec2"),this.properties={x:0,y:0},this._data=new Float32Array(2)}function L(){this.addInput("vec3","vec3"),this.addOutput("x","number"),this.addOutput("y","number"),this.addOutput("z","number")}function k(){this.addInputs([["x","number"],["y","number"],["z","number"]]),this.addOutput("vec3","vec3"),this.properties={x:0,y:0,z:0},this._data=new Float32Array(3)}function I(){this.addInput("vec4","vec4"),this.addOutput("x","number"),this.addOutput("y","number"),this.addOutput("z","number"),this.addOutput("w","number")}function N(){this.addInputs([["x","number"],["y","number"],["z","number"],["w","number"]]),this.addOutput("vec4","vec4"),this.properties={x:0,y:0,z:0,w:0},this._data=new Float32Array(4)}n.title="Converter",n.desc="type A to type B",n.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t&&this.outputs)for(var e=0;e<this.outputs.length;e++){var n=this.outputs[e];if(n.links&&n.links.length){var r=null;switch(n.name){case"number":r=t.length?t[0]:parseFloat(t);break;case"vec2":case"vec3":case"vec4":r=null;var i=1;switch(n.name){case"vec2":i=2;break;case"vec3":i=3;break;case"vec4":i=4}r=new Float32Array(i);if(t.length)for(var o=0;o<t.length&&o<r.length;o++)r[o]=t[o];else r[0]=parseFloat(t)}this.setOutputData(e,r)}}},n.prototype.onGetOutputs=function(){return[["number","number"],["vec2","vec2"],["vec3","vec3"],["vec4","vec4"]]},e.registerNodeType("math/converter",n),r.title="Bypass",r.desc="removes the type",r.prototype.onExecute=function(){var t=this.getInputData(0);this.setOutputData(0,t)},e.registerNodeType("math/bypass",r),i.title="to Number",i.desc="Cast to number",i.prototype.onExecute=function(){var t=this.getInputData(0);this.setOutputData(0,Number(t))},e.registerNodeType("math/to_number",i),o.title="Range",o.desc="Convert a number from one range to another",o.prototype.getTitle=function(){return this.flags.collapsed?(this._last_v||0).toFixed(2):this.title},o.prototype.onExecute=function(){if(this.inputs)for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t];void 0!==(n=this.getInputData(t))&&(this.properties[e.name]=n)}var n;void 0!==(n=this.properties.in)&&null!==n&&n.constructor===Number||(n=0);var r=this.properties.in_min,i=this.properties.in_max,o=this.properties.out_min,a=this.properties.out_max;this._last_v=(n-r)/(i-r)*(a-o)+o,this.setOutputData(0,this._last_v),this.setOutputData(1,clamp(this._last_v,o,a))},o.prototype.onDrawBackground=function(t){this._last_v?this.outputs[0].label=this._last_v.toFixed(3):this.outputs[0].label="?"},o.prototype.onGetInputs=function(){return[["in_min","number"],["in_max","number"],["out_min","number"],["out_max","number"]]},e.registerNodeType("math/range",o),a.title="Rand",a.desc="Random number",a.prototype.onExecute=function(){if(this.inputs)for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.getInputData(t);void 0!==n&&(this.properties[e.name]=n)}var r=this.properties.min,i=this.properties.max;this._last_v=Math.random()*(i-r)+r,this.setOutputData(0,this._last_v)},a.prototype.onDrawBackground=function(t){this.outputs[0].label=(this._last_v||0).toFixed(3)},a.prototype.onGetInputs=function(){return[["min","number"],["max","number"]]},e.registerNodeType("math/rand",a),s.title="Noise",s.desc="Random number with temporal continuity",s.data=null,s.getValue=function(t,e){if(!s.data){s.data=new Float32Array(1024);for(var n=0;n<s.data.length;++n)s.data[n]=Math.random()}(t%=1024)<0&&(t+=1024);var r=Math.floor(t);t-=r;return e&&(t=t*t*t*(t*(6*t-15)+10)),s.data[r]*(1-t)+s.data[1023==r?0:r+1]*t},s.prototype.onExecute=function(){var t=this.getInputData(0)||0,e=this.properties.octaves||1,n=0,r=1;t+=this.properties.seed||0;for(var i=this.properties.speed||1,o=0,a=0;a<e&&(n+=s.getValue(t*(1+a)*i,this.properties.smooth)*r,o+=r,!((r*=this.properties.persistence)<.001));++a);n/=o;var l=this.properties.min,u=this.properties.max;this._last_v=n*(u-l)+l,this.setOutputData(0,this._last_v)},s.prototype.onDrawBackground=function(t){this.outputs[0].label=(this._last_v||0).toFixed(3)},e.registerNodeType("math/noise",s),l.title="Spikes",l.desc="spike every random time",l.prototype.onExecute=function(){var t=this.graph.elapsed_time;this._remaining_time-=t,this._blink_time-=t;var e=0;if(this._blink_time>0){var n=this._blink_time/this.properties.duration;e=1/(Math.pow(8*n-4,4)+1)}this._remaining_time<0?(this._remaining_time=Math.random()*(this.properties.max_time-this.properties.min_time)+this.properties.min_time,this._blink_time=this.properties.duration,this.boxcolor="#FFF"):this.boxcolor="#000",this.setOutputData(0,e)},e.registerNodeType("math/spikes",l),u.title="Clamp",u.desc="Clamp number between min and max",u.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(t=Math.max(this.properties.min,t),t=Math.min(this.properties.max,t),this.setOutputData(0,t))},u.prototype.getCode=function(t){var e="";return this.isInputConnected(0)&&(e+="clamp({{0}},"+this.properties.min+","+this.properties.max+")"),e},e.registerNodeType("math/clamp",u),c.title="Lerp",c.desc="Linear Interpolation",c.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=0);var e=this.getInputData(1);null==e&&(e=0);var n=this.properties.f,r=this.getInputData(2);void 0!==r&&(n=r),this.setOutputData(0,t*(1-n)+e*n)},c.prototype.onGetInputs=function(){return[["f","number"]]},e.registerNodeType("math/lerp",c),p.title="Abs",p.desc="Absolute",p.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,Math.abs(t))},e.registerNodeType("math/abs",p),d.title="Floor",d.desc="Floor number to remove fractional part",d.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,Math.floor(t))},e.registerNodeType("math/floor",d),h.title="Frac",h.desc="Returns fractional part",h.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,t%1)},e.registerNodeType("math/frac",h),f.title="Smoothstep",f.desc="Smoothstep",f.prototype.onExecute=function(){var t=this.getInputData(0);if(void 0!==t){var e=this.properties.A,n=this.properties.B;t=(t=clamp((t-e)/(n-e),0,1))*t*(3-2*t),this.setOutputData(0,t)}},e.registerNodeType("math/smoothstep",f),g.title="Scale",g.desc="v * factor",g.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&this.setOutputData(0,t*this.properties.factor)},e.registerNodeType("math/scale",g),v.title="Gate",v.desc="if v is true, then outputs A, otherwise B",v.prototype.onExecute=function(){var t=this.getInputData(0);this.setOutputData(0,this.getInputData(t?1:2))},e.registerNodeType("math/gate",v),m.title="Average",m.desc="Average Filter",m.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=0);var e=this._values.length;this._values[this._current%e]=t,this._current+=1,this._current>e&&(this._current=0);for(var n=0,r=0;r<e;++r)n+=this._values[r];this.setOutputData(0,n/e)},m.prototype.onPropertyChanged=function(t,e){e<1&&(e=1),this.properties.samples=Math.round(e);var n=this._values;this._values=new Float32Array(this.properties.samples),n.length<=this._values.length?this._values.set(n):this._values.set(n.subarray(0,this._values.length))},e.registerNodeType("math/average",m),_.title="TendTo",_.desc="moves the output value always closer to the input",_.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=0);var e=this.properties.factor;null==this._value?this._value=t:this._value=this._value*(1-e)+t*e,this.setOutputData(0,this._value)},e.registerNodeType("math/tendTo",_),y.values=["+","-","*","/","%","^","max","min"],y.funcs={"+":function(t,e){return t+e},"-":function(t,e){return t-e},x:function(t,e){return t*e},X:function(t,e){return t*e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"^":function(t,e){return Math.pow(t,e)},max:function(t,e){return Math.max(t,e)},min:function(t,e){return Math.min(t,e)}},y.title="Operation",y.desc="Easy math operators",y["@OP"]={type:"enum",title:"operation",values:y.values},y.size=[100,60],y.prototype.getTitle=function(){return"max"==this.properties.OP||"min"==this.properties.OP?this.properties.OP+"(A,B)":"A "+this.properties.OP+" B"},y.prototype.setValue=function(t){"string"==typeof t&&(t=parseFloat(t)),this.properties.value=t},y.prototype.onPropertyChanged=function(t,e){"OP"==t&&(this._func=y.funcs[this.properties.OP],this._func||(console.warn("Unknown operation: "+this.properties.OP),this._func=function(t){return t}))},y.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1);null!=t?t.constructor===Number&&(this.properties.A=t):t=this.properties.A,null!=e?this.properties.B=e:e=this.properties.B;var n,r=y.funcs[this.properties.OP];if(t.constructor===Number)n=0,n=r(t,e);else if(t.constructor===Array){(n=this._result).length=t.length;for(var i=0;i<t.length;++i)n[i]=r(t[i],e)}else for(var i in n={},t)n[i]=r(t[i],e);this.setOutputData(0,n)},y.prototype.onDrawBackground=function(t){this.flags.collapsed||(t.font="40px Arial",t.fillStyle="#666",t.textAlign="center",t.fillText(this.properties.OP,.5*this.size[0],.5*(this.size[1]+e.NODE_TITLE_HEIGHT)),t.textAlign="left")},e.registerNodeType("math/operation",y),e.registerSearchboxExtra("math/operation","MAX",{properties:{OP:"max"},title:"MAX()"}),e.registerSearchboxExtra("math/operation","MIN",{properties:{OP:"min"},title:"MIN()"}),b.title="Compare",b.desc="compares between two values",b.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1);void 0!==t?this.properties.A=t:t=this.properties.A,void 0!==e?this.properties.B=e:e=this.properties.B;for(var n=0,r=this.outputs.length;n<r;++n){var i=this.outputs[n];if(i.links&&i.links.length){var o;switch(i.name){case"A==B":o=t==e;break;case"A!=B":o=t!=e;break;case"A>B":o=t>e;break;case"A<B":o=t<e;break;case"A<=B":o=t<=e;break;case"A>=B":o=t>=e}this.setOutputData(n,o)}}},b.prototype.onGetOutputs=function(){return[["A==B","boolean"],["A!=B","boolean"],["A>B","boolean"],["A<B","boolean"],["A>=B","boolean"],["A<=B","boolean"]]},e.registerNodeType("math/compare",b),e.registerSearchboxExtra("math/compare","==",{outputs:[["A==B","boolean"]],title:"A==B"}),e.registerSearchboxExtra("math/compare","!=",{outputs:[["A!=B","boolean"]],title:"A!=B"}),e.registerSearchboxExtra("math/compare",">",{outputs:[["A>B","boolean"]],title:"A>B"}),e.registerSearchboxExtra("math/compare","<",{outputs:[["A<B","boolean"]],title:"A<B"}),e.registerSearchboxExtra("math/compare",">=",{outputs:[["A>=B","boolean"]],title:"A>=B"}),e.registerSearchboxExtra("math/compare","<=",{outputs:[["A<=B","boolean"]],title:"A<=B"}),x.values=[">","<","==","!=","<=",">=","||","&&"],x["@OP"]={type:"enum",title:"operation",values:x.values},x.title="Condition",x.desc="evaluates condition between A and B",x.prototype.getTitle=function(){return"A "+this.properties.OP+" B"},x.prototype.onExecute=function(){var t=this.getInputData(0);void 0===t?t=this.properties.A:this.properties.A=t;var e=this.getInputData(1);void 0===e?e=this.properties.B:this.properties.B=e;var n=!0;switch(this.properties.OP){case">":n=t>e;break;case"<":n=t<e;break;case"==":n=t==e;break;case"!=":n=t!=e;break;case"<=":n=t<=e;break;case">=":n=t>=e;break;case"||":n=t||e;break;case"&&":n=t&&e}this.setOutputData(0,n),this.setOutputData(1,!n)},e.registerNodeType("math/condition",x),w.title="Branch",w.desc="If condition is true, outputs IN in true, otherwise in false",w.prototype.onExecute=function(){var t=this.getInputData(0);this.getInputData(1)?(this.setOutputData(0,t),this.setOutputData(1,null)):(this.setOutputData(0,null),this.setOutputData(1,t))},e.registerNodeType("math/branch",w),E.title="Accumulate",E.desc="Increments a value every time",E.prototype.onExecute=function(){null===this.properties.value&&(this.properties.value=0);var t=this.getInputData(0);this.properties.value+=null!==t?t:this.properties.increment,this.setOutputData(0,this.properties.value)},e.registerNodeType("math/accumulate",E),T.title="Trigonometry",T.desc="Sin Cos Tan",T.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=0);var e=this.properties.amplitude,n=this.findInputSlot("amplitude");-1!=n&&(e=this.getInputData(n));var r=this.properties.offset;-1!=(n=this.findInputSlot("offset"))&&(r=this.getInputData(n));for(var i=0,o=this.outputs.length;i<o;++i){var a;switch(this.outputs[i].name){case"sin":a=Math.sin(t);break;case"cos":a=Math.cos(t);break;case"tan":a=Math.tan(t);break;case"asin":a=Math.asin(t);break;case"acos":a=Math.acos(t);break;case"atan":a=Math.atan(t)}this.setOutputData(i,e*a+r)}},T.prototype.onGetInputs=function(){return[["v","number"],["amplitude","number"],["offset","number"]]},T.prototype.onGetOutputs=function(){return[["sin","number"],["cos","number"],["tan","number"],["asin","number"],["acos","number"],["atan","number"]]},e.registerNodeType("math/trigonometry",T),e.registerSearchboxExtra("math/trigonometry","SIN()",{outputs:[["sin","number"]],title:"SIN()"}),e.registerSearchboxExtra("math/trigonometry","COS()",{outputs:[["cos","number"]],title:"COS()"}),e.registerSearchboxExtra("math/trigonometry","TAN()",{outputs:[["tan","number"]],title:"TAN()"}),S.title="Formula",S.desc="Compute formula",S.size=[160,100],m.prototype.onPropertyChanged=function(t,e){"formula"==t&&(this.code_widget.value=e)},S.prototype.onExecute=function(){if(e.allow_scripts){var t=this.getInputData(0),n=this.getInputData(1);null!=t?this.properties.x=t:t=this.properties.x,null!=n?this.properties.y=n:n=this.properties.y;var r;this.properties.formula;try{this._func&&this._func_code==this.properties.formula||(this._func=new Function("x","y","TIME","return "+this.properties.formula),this._func_code=this.properties.formula),r=this._func(t,n,this.graph.globaltime),this.boxcolor=null}catch(i){this.boxcolor="red"}this.setOutputData(0,r)}},S.prototype.getTitle=function(){return this._func_code||"Formula"},S.prototype.onDrawBackground=function(){var t=this.properties.formula;this.outputs&&this.outputs.length&&(this.outputs[0].label=t)},e.registerNodeType("math/formula",S),C.title="Vec2->XY",C.desc="vector 2 to components",C.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(this.setOutputData(0,t[0]),this.setOutputData(1,t[1]))},e.registerNodeType("math3d/vec2-to-xy",C),O.title="XY->Vec2",O.desc="components to vector2",O.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.x);var e=this.getInputData(1);null==e&&(e=this.properties.y);var n=this._data;n[0]=t,n[1]=e,this.setOutputData(0,n)},e.registerNodeType("math3d/xy-to-vec2",O),L.title="Vec3->XYZ",L.desc="vector 3 to components",L.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(this.setOutputData(0,t[0]),this.setOutputData(1,t[1]),this.setOutputData(2,t[2]))},e.registerNodeType("math3d/vec3-to-xyz",L),k.title="XYZ->Vec3",k.desc="components to vector3",k.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.x);var e=this.getInputData(1);null==e&&(e=this.properties.y);var n=this.getInputData(2);null==n&&(n=this.properties.z);var r=this._data;r[0]=t,r[1]=e,r[2]=n,this.setOutputData(0,r)},e.registerNodeType("math3d/xyz-to-vec3",k),I.title="Vec4->XYZW",I.desc="vector 4 to components",I.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&(this.setOutputData(0,t[0]),this.setOutputData(1,t[1]),this.setOutputData(2,t[2]),this.setOutputData(3,t[3]))},e.registerNodeType("math3d/vec4-to-xyzw",I),N.title="XYZW->Vec4",N.desc="components to vector4",N.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.x);var e=this.getInputData(1);null==e&&(e=this.properties.y);var n=this.getInputData(2);null==n&&(n=this.properties.z);var r=this.getInputData(3);null==r&&(r=this.properties.w);var i=this._data;i[0]=t,i[1]=e,i[2]=n,i[3]=r,this.setOutputData(0,i)},e.registerNodeType("math3d/xyzw-to-vec4",N)}(this),function(t){var e=t.LiteGraph;function n(){this.addInput("T","vec3"),this.addInput("R","vec3"),this.addInput("S","vec3"),this.addOutput("mat4","mat4"),this.properties={T:[0,0,0],R:[0,0,0],S:[1,1,1],R_in_degrees:!0},this._result=mat4.create(),this._must_update=!0}function r(){this.addInput("A","number,vec3"),this.addInput("B","number,vec3"),this.addOutput("=","number,vec3"),this.addProperty("OP","+","enum",{values:r.values}),this._result=vec3.create()}function i(){this.addInput("in","vec3"),this.addInput("f","number"),this.addOutput("out","vec3"),this.properties={f:1},this._data=new Float32Array(3)}function o(){this.addInput("in","vec3"),this.addOutput("out","number")}function a(){this.addInput("in","vec3"),this.addOutput("out","vec3"),this._data=new Float32Array(3)}function s(){this.addInput("A","vec3"),this.addInput("B","vec3"),this.addInput("f","vec3"),this.addOutput("out","vec3"),this.properties={f:.5},this._data=new Float32Array(3)}function l(){this.addInput("A","vec3"),this.addInput("B","vec3"),this.addOutput("out","number")}if(n.title="mat4",n.temp_quat=new Float32Array([0,0,0,1]),n.temp_mat4=new Float32Array(16),n.temp_vec3=new Float32Array(3),n.prototype.onPropertyChanged=function(t,e){this._must_update=!0},n.prototype.onExecute=function(){var t=this._result,e=n.temp_quat,r=n.temp_mat4,i=n.temp_vec3,o=this.getInputData(0),a=this.getInputData(1),s=this.getInputData(2);(this._must_update||o||a||s)&&(o=o||this.properties.T,a=a||this.properties.R,s=s||this.properties.S,mat4.identity(t),mat4.translate(t,t,o),this.properties.R_in_degrees?(i.set(a),vec3.scale(i,i,DEG2RAD),quat.fromEuler(e,i)):quat.fromEuler(e,a),mat4.fromQuat(r,e),mat4.multiply(t,t,r),mat4.scale(t,t,s)),this.setOutputData(0,t)},e.registerNodeType("math3d/mat4",n),r.values=["+","-","*","/","%","^","max","min","dot","cross"],e.registerSearchboxExtra("math3d/operation","CROSS()",{properties:{OP:"cross"},title:"CROSS()"}),e.registerSearchboxExtra("math3d/operation","DOT()",{properties:{OP:"dot"},title:"DOT()"}),r.title="Operation",r.desc="Easy math 3D operators",r["@OP"]={type:"enum",title:"operation",values:r.values},r.size=[100,60],r.prototype.getTitle=function(){return"max"==this.properties.OP||"min"==this.properties.OP?this.properties.OP+"(A,B)":"A "+this.properties.OP+" B"},r.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1);if(null!=t&&null!=e){t.constructor===Number&&(t=[t,t,t]),e.constructor===Number&&(e=[e,e,e]);var n=this._result;switch(this.properties.OP){case"+":n=vec3.add(n,t,e);break;case"-":n=vec3.sub(n,t,e);break;case"x":case"X":case"*":n=vec3.mul(n,t,e);break;case"/":n=vec3.div(n,t,e);break;case"%":n[0]=t[0]%e[0],n[1]=t[1]%e[1],n[2]=t[2]%e[2];break;case"^":n[0]=Math.pow(t[0],e[0]),n[1]=Math.pow(t[1],e[1]),n[2]=Math.pow(t[2],e[2]);break;case"max":n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]);break;case"min":n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]);case"dot":n=vec3.dot(t,e);break;case"cross":vec3.cross(n,t,e);break;default:console.warn("Unknown operation: "+this.properties.OP)}this.setOutputData(0,n)}},r.prototype.onDrawBackground=function(t){this.flags.collapsed||(t.font="40px Arial",t.fillStyle="#666",t.textAlign="center",t.fillText(this.properties.OP,.5*this.size[0],.5*(this.size[1]+e.NODE_TITLE_HEIGHT)),t.textAlign="left")},e.registerNodeType("math3d/operation",r),i.title="vec3_scale",i.desc="scales the components of a vec3",i.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=this.getInputData(1);null==e&&(e=this.properties.f);var n=this._data;n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,this.setOutputData(0,n)}},e.registerNodeType("math3d/vec3-scale",i),o.title="vec3_length",o.desc="returns the module of a vector",o.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.setOutputData(0,e)}},e.registerNodeType("math3d/vec3-length",o),a.title="vec3_normalize",a.desc="returns the vector normalized",a.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),n=this._data;n[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,this.setOutputData(0,n)}},e.registerNodeType("math3d/vec3-normalize",a),s.title="vec3_lerp",s.desc="returns the interpolated vector",s.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=this.getInputData(1);if(null!=e){var n=this.getInputOrProperty("f"),r=this._data;r[0]=t[0]*(1-n)+e[0]*n,r[1]=t[1]*(1-n)+e[1]*n,r[2]=t[2]*(1-n)+e[2]*n,this.setOutputData(0,r)}}},e.registerNodeType("math3d/vec3-lerp",s),l.title="vec3_dot",l.desc="returns the dot product",l.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=this.getInputData(1);if(null!=e){var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];this.setOutputData(0,n)}}},e.registerNodeType("math3d/vec3-dot",l),t.glMatrix){function u(){this.addOutput("quat","quat"),this.properties={x:0,y:0,z:0,w:1,normalize:!1},this._value=quat.create()}function c(){this.addInputs([["degrees","number"],["axis","vec3"]]),this.addOutput("quat","quat"),this.properties={angle:90,axis:vec3.fromValues(0,1,0)},this._value=quat.create()}function p(){this.addInput("euler","vec3"),this.addOutput("quat","quat"),this.properties={euler:[0,0,0],use_yaw_pitch_roll:!1},this._degs=vec3.create(),this._value=quat.create()}function d(){this.addInput(["quat","quat"]),this.addOutput("euler","vec3"),this._value=vec3.create()}function h(){this.addInputs([["vec3","vec3"],["quat","quat"]]),this.addOutput("result","vec3"),this.properties={vec:[0,0,1]}}function f(){this.addInputs([["A","quat"],["B","quat"]]),this.addOutput("A*B","quat"),this._value=quat.create()}function g(){this.addInputs([["A","quat"],["B","quat"],["factor","number"]]),this.addOutput("slerp","quat"),this.addProperty("factor",.5),this._value=quat.create()}function v(){this.addInput("vec3","vec3"),this.addOutput("remap","vec3"),this.addOutput("clamped","vec3"),this.properties={clamp:!0,range_min:[-1,-1,0],range_max:[1,1,0],target_min:[-1,-1,0],target_max:[1,1,0]},this._value=vec3.create(),this._clamped=vec3.create()}u.title="Quaternion",u.desc="quaternion",u.prototype.onExecute=function(){this._value[0]=this.getInputOrProperty("x"),this._value[1]=this.getInputOrProperty("y"),this._value[2]=this.getInputOrProperty("z"),this._value[3]=this.getInputOrProperty("w"),this.properties.normalize&&quat.normalize(this._value,this._value),this.setOutputData(0,this._value)},u.prototype.onGetInputs=function(){return[["x","number"],["y","number"],["z","number"],["w","number"]]},e.registerNodeType("math3d/quaternion",u),c.title="Rotation",c.desc="quaternion rotation",c.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.angle);var e=this.getInputData(1);null==e&&(e=this.properties.axis);var n=quat.setAxisAngle(this._value,e,.0174532925*t);this.setOutputData(0,n)},e.registerNodeType("math3d/rotation",c),p.title="Euler->Quat",p.desc="Converts euler angles (in degrees) to quaternion",p.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.euler),vec3.scale(this._degs,t,DEG2RAD),this.properties.use_yaw_pitch_roll&&(this._degs=[this._degs[2],this._degs[0],this._degs[1]]);var e=quat.fromEuler(this._value,this._degs);this.setOutputData(0,e)},e.registerNodeType("math3d/euler_to_quat",p),d.title="Euler->Quat",d.desc="Converts rotX,rotY,rotZ in degrees to quat",d.prototype.onExecute=function(){var t=this.getInputData(0);if(t){quat.toEuler(this._value,t);vec3.scale(this._value,this._value,DEG2RAD),this.setOutputData(0,this._value)}},e.registerNodeType("math3d/quat_to_euler",d),h.title="Rot. Vec3",h.desc="rotate a point",h.prototype.onExecute=function(){var t=this.getInputData(0);null==t&&(t=this.properties.vec);var e=this.getInputData(1);null==e?this.setOutputData(t):this.setOutputData(0,vec3.transformQuat(vec3.create(),t,e))},e.registerNodeType("math3d/rotate_vec3",h),f.title="Mult. Quat",f.desc="rotate quaternion",f.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=this.getInputData(1);if(null!=e){var n=quat.multiply(this._value,t,e);this.setOutputData(0,n)}}},e.registerNodeType("math3d/mult-quat",f),g.title="Quat Slerp",g.desc="quaternion spherical interpolation",g.prototype.onExecute=function(){var t=this.getInputData(0);if(null!=t){var e=this.getInputData(1);if(null!=e){var n=this.properties.factor;null!=this.getInputData(2)&&(n=this.getInputData(2));var r=quat.slerp(this._value,t,e,n);this.setOutputData(0,r)}}},e.registerNodeType("math3d/quat-slerp",g),v.title="Remap Range",v.desc="remap a 3D range",v.prototype.onExecute=function(){var t=this.getInputData(0);t&&this._value.set(t);for(var e=this.properties.range_min,n=this.properties.range_max,r=this.properties.target_min,i=this.properties.target_max,o=0;o<3;++o){var a=n[o]-e[o];if(this._clamped[o]=clamp(this._value[o],e[o],n[o]),0!=a){var s=(this._value[o]-e[o])/a;this.properties.clamp&&(s=clamp(s,0,1));var l=i[o]-r[o];this._value[o]=r[o]+s*l}else this._value[o]=.5*(r[o]+i[o])}this.setOutputData(0,this._value),this.setOutputData(1,this._clamped)},e.registerNodeType("math3d/remap_range",v)}else e.debug&&console.warn("No glmatrix found, some Math3D nodes may not work")}(this),function(t){var e=t.LiteGraph;function n(){this.addInput("","string"),this.addOutput("table","table"),this.addOutput("rows","number"),this.addProperty("value",""),this.addProperty("separator",","),this._table=null}e.wrapFunctionAsNode("string/toString",(function(t){if(t&&t.constructor===Object)try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}),[""],"string"),e.wrapFunctionAsNode("string/compare",(function(t,e){return t==e}),["string","string"],"boolean"),e.wrapFunctionAsNode("string/concatenate",(function(t,e){return void 0===t?e:void 0===e?t:t+e}),["string","string"],"string"),e.wrapFunctionAsNode("string/contains",(function(t,e){return void 0!==t&&void 0!==e&&-1!=t.indexOf(e)}),["string","string"],"boolean"),e.wrapFunctionAsNode("string/toUpperCase",(function(t){return null!=t&&t.constructor===String?t.toUpperCase():t}),["string"],"string"),e.wrapFunctionAsNode("string/split",(function(t,e){if(null==e&&(e=this.properties.separator),null==t)return[];if(t.constructor===String)return t.split(e||" ");if(t.constructor===Array){for(var n=[],r=0;r<t.length;++r)"string"==typeof t[r]&&(n[r]=t[r].split(e||" "));return n}return null}),["string,array","string"],"array",{separator:","}),e.wrapFunctionAsNode("string/toFixed",(function(t){return null!=t&&t.constructor===Number?t.toFixed(this.properties.precision):t}),["number"],"string",{precision:0}),n.title="toTable",n.desc="Splits a string to table",n.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=this.properties.separator||",";t==this._str&&e==this._last_separator||(this._last_separator=e,this._str=t,this._table=t.split("\n").map((function(t){return t.trim().split(e)}))),this.setOutputData(0,this._table),this.setOutputData(1,this._table?this._table.length:0)}},e.registerNodeType("string/toTable",n)}(this),function(t){var e=t.LiteGraph;function n(){this.addInput("sel","number"),this.addInput("A"),this.addInput("B"),this.addInput("C"),this.addInput("D"),this.addOutput("out"),this.selected=0}function r(){this.properties={sequence:"A,B,C"},this.addInput("index","number"),this.addInput("seq"),this.addOutput("out"),this.index=0,this.values=this.properties.sequence.split(",")}function i(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}function o(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}function a(){this.properties={},this.addInput("in","boolean"),this.addOutput("out","boolean")}function s(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}function l(){this.properties={},this.addInput("onTrigger",e.ACTION),this.addInput("condition","boolean"),this.addOutput("true",e.EVENT),this.addOutput("false",e.EVENT),this.mode=e.ON_TRIGGER}n.title="Selector",n.desc="selects an output",n.prototype.onDrawBackground=function(t){if(!this.flags.collapsed){t.fillStyle="#AFB";var n=(this.selected+1)*e.NODE_SLOT_HEIGHT+6;t.beginPath(),t.moveTo(50,n),t.lineTo(50,n+e.NODE_SLOT_HEIGHT),t.lineTo(34,n+.5*e.NODE_SLOT_HEIGHT),t.fill()}},n.prototype.onExecute=function(){var t=this.getInputData(0);null!=t&&t.constructor===Number||(t=0),this.selected=t=Math.round(t)%(this.inputs.length-1);var e=this.getInputData(t+1);void 0!==e&&this.setOutputData(0,e)},n.prototype.onGetInputs=function(){return[["E",0],["F",0],["G",0],["H",0]]},e.registerNodeType("logic/selector",n),r.title="Sequence",r.desc="select one element from a sequence from a string",r.prototype.onPropertyChanged=function(t,e){"sequence"==t&&(this.values=e.split(","))},r.prototype.onExecute=function(){var t=this.getInputData(1);t&&t!=this.current_sequence&&(this.values=t.split(","),this.current_sequence=t);var e=this.getInputData(0);null==e&&(e=0),this.index=e=Math.round(e)%this.values.length,this.setOutputData(0,this.values[e])},e.registerNodeType("logic/sequence",r),i.title="AND",i.desc="Return true if all inputs are true",i.prototype.onExecute=function(){var t=!0;for(var e in this.inputs)if(!this.getInputData(e)){t=!1;break}this.setOutputData(0,t)},i.prototype.onGetInputs=function(){return[["and","boolean"]]},e.registerNodeType("logic/AND",i),o.title="OR",o.desc="Return true if at least one input is true",o.prototype.onExecute=function(){var t=!1;for(var e in this.inputs)if(this.getInputData(e)){t=!0;break}this.setOutputData(0,t)},o.prototype.onGetInputs=function(){return[["or","boolean"]]},e.registerNodeType("logic/OR",o),a.title="NOT",a.desc="Return the logical negation",a.prototype.onExecute=function(){var t=!this.getInputData(0);this.setOutputData(0,t)},e.registerNodeType("logic/NOT",a),s.title="bool == bool",s.desc="Compare for logical equality",s.prototype.onExecute=function(){var t=null,e=!0;for(var n in this.inputs)if(null===t)t=this.getInputData(n);else if(t!=this.getInputData(n)){e=!1;break}this.setOutputData(0,e)},s.prototype.onGetInputs=function(){return[["bool","boolean"]]},e.registerNodeType("logic/CompareBool",s),l.title="Branch",l.desc="Branch execution on condition",l.prototype.onExecute=function(t,e){this.getInputData(1)?this.triggerSlot(0):this.triggerSlot(1)},e.registerNodeType("logic/IF",l)}(this),function(t){var e=t.LiteGraph;function n(){this.addInput("A","Number"),this.addInput("B","Number"),this.addInput("C","Number"),this.addInput("D","Number"),this.values=[[],[],[],[]],this.properties={scale:2}}function r(){this.addOutput("frame","image"),this.properties={url:""}}function i(){this.addInput("f","number"),this.addOutput("Color","color"),this.properties={colorA:"#444444",colorB:"#44AAFF",colorC:"#44FFAA",colorD:"#FFFFFF"}}function o(){this.addInput("","image,canvas"),this.size=[200,200]}function a(){this.addInputs([["img1","image"],["img2","image"],["fade","number"]]),this.addOutput("","image"),this.properties={fade:.5,width:512,height:512}}function s(){this.addInput("","image"),this.addOutput("","image"),this.properties={width:256,height:256,x:0,y:0,scale:1},this.size=[50,20]}function l(){this.addInput("clear",e.ACTION),this.addOutput("","canvas"),this.properties={width:512,height:512,autoclear:!0},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}function u(){this.addInput("canvas","canvas"),this.addInput("img","image,canvas"),this.addInput("x","number"),this.addInput("y","number"),this.properties={x:0,y:0,opacity:1}}function c(){this.addInput("canvas","canvas"),this.addInput("x","number"),this.addInput("y","number"),this.addInput("w","number"),this.addInput("h","number"),this.properties={x:0,y:0,w:10,h:10,color:"white",opacity:1}}function p(){this.addInput("t","number"),this.addOutputs([["frame","image"],["t","number"],["d","number"]]),this.properties={url:"",use_proxy:!0}}function d(){this.addOutput("Webcam","image"),this.properties={filterFacingMode:!1,facingMode:"user"},this.boxcolor="black",this.frame=0}n.title="Plot",n.desc="Plots data over time",n.colors=["#FFF","#F99","#9F9","#99F"],n.prototype.onExecute=function(t){if(!this.flags.collapsed)for(var e=this.size,n=0;n<4;++n){var r=this.getInputData(n);if(null!=r){var i=this.values[n];i.push(r),i.length>e[0]&&i.shift()}}},n.prototype.onDrawBackground=function(t){if(!this.flags.collapsed){var e=this.size,r=.5*e[1]/this.properties.scale,i=n.colors,o=.5*e[1];if(t.fillStyle="#000",t.fillRect(0,0,e[0],e[1]),t.strokeStyle="#555",t.beginPath(),t.moveTo(0,o),t.lineTo(e[0],o),t.stroke(),this.inputs)for(var a=0;a<4;++a){var s=this.values[a];if(this.inputs[a]&&this.inputs[a].link){t.strokeStyle=i[a],t.beginPath();var l=s[0]*r*-1+o;t.moveTo(0,clamp(l,0,e[1]));for(var u=1;u<s.length&&u<e[0];++u){l=s[u]*r*-1+o;t.lineTo(u,clamp(l,0,e[1]))}t.stroke()}}}},e.registerNodeType("graphics/plot",n),r.title="Image",r.desc="Image loader",r.widgets=[{name:"load",text:"Load",type:"button"}],r.supported_extensions=["jpg","jpeg","png","gif"],r.prototype.onAdded=function(){""!=this.properties.url&&null==this.img&&this.loadImage(this.properties.url)},r.prototype.onDrawBackground=function(t){this.flags.collapsed||this.img&&this.size[0]>5&&this.size[1]>5&&this.img.width&&t.drawImage(this.img,0,0,this.size[0],this.size[1])},r.prototype.onExecute=function(){this.img||(this.boxcolor="#000"),this.img&&this.img.width?this.setOutputData(0,this.img):this.setOutputData(0,null),this.img&&this.img.dirty&&(this.img.dirty=!1)},r.prototype.onPropertyChanged=function(t,e){return this.properties[t]=e,"url"==t&&""!=e&&this.loadImage(e),!0},r.prototype.loadImage=function(t,n){if(""!=t){this.img=document.createElement("img"),"http"==t.substr(0,4)&&e.proxy&&(t=e.proxy+t.substr(t.indexOf(":")+3)),this.img.src=t,this.boxcolor="#F95";var r=this;this.img.onload=function(){n&&n(this),console.log("Image loaded, size: "+r.img.width+"x"+r.img.height),this.dirty=!0,r.boxcolor="#9F9",r.setDirtyCanvas(!0)},this.img.onerror=function(){console.log("error loading the image:"+t)}}else this.img=null},r.prototype.onWidget=function(t,e){"load"==e.name&&this.loadImage(this.properties.url)},r.prototype.onDropFile=function(t){var e=this;this._url&&URL.revokeObjectURL(this._url),this._url=URL.createObjectURL(t),this.properties.url=this._url,this.loadImage(this._url,(function(t){e.size[1]=t.height/t.width*e.size[0]}))},e.registerNodeType("graphics/image",r),i.title="Palette",i.desc="Generates a color",i.prototype.onExecute=function(){var t=[];null!=this.properties.colorA&&t.push(hex2num(this.properties.colorA)),null!=this.properties.colorB&&t.push(hex2num(this.properties.colorB)),null!=this.properties.colorC&&t.push(hex2num(this.properties.colorC)),null!=this.properties.colorD&&t.push(hex2num(this.properties.colorD));var e=this.getInputData(0);if(null==e&&(e=.5),e>1?e=1:e<0&&(e=0),0!=t.length){var n=[0,0,0];if(0==e)n=t[0];else if(1==e)n=t[t.length-1];else{var r=(t.length-1)*e,i=t[Math.floor(r)],o=t[Math.floor(r)+1],a=r-Math.floor(r);n[0]=i[0]*(1-a)+o[0]*a,n[1]=i[1]*(1-a)+o[1]*a,n[2]=i[2]*(1-a)+o[2]*a}for(var s=0;s<n.length;s++)n[s]/=255;this.boxcolor=colorToString(n),this.setOutputData(0,n)}},e.registerNodeType("color/palette",i),o.title="Frame",o.desc="Frame viewerew",o.widgets=[{name:"resize",text:"Resize box",type:"button"},{name:"view",text:"View Image",type:"button"}],o.prototype.onDrawBackground=function(t){this.frame&&!this.flags.collapsed&&t.drawImage(this.frame,0,0,this.size[0],this.size[1])},o.prototype.onExecute=function(){this.frame=this.getInputData(0),this.setDirtyCanvas(!0)},o.prototype.onWidget=function(t,e){if("resize"==e.name&&this.frame){var n=this.frame.width,r=this.frame.height;n||null==this.frame.videoWidth||(n=this.frame.videoWidth,r=this.frame.videoHeight),n&&r&&(this.size=[n,r]),this.setDirtyCanvas(!0,!0)}else"view"==e.name&&this.show()},o.prototype.show=function(){showElement&&this.frame&&showElement(this.frame)},e.registerNodeType("graphics/frame",o),a.title="Image fade",a.desc="Fades between images",a.widgets=[{name:"resizeA",text:"Resize to A",type:"button"},{name:"resizeB",text:"Resize to B",type:"button"}],a.prototype.onAdded=function(){this.createCanvas();var t=this.canvas.getContext("2d");t.fillStyle="#000",t.fillRect(0,0,this.properties.width,this.properties.height)},a.prototype.createCanvas=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.properties.width,this.canvas.height=this.properties.height},a.prototype.onExecute=function(){var t=this.canvas.getContext("2d");this.canvas.width=this.canvas.width;var e=this.getInputData(0);null!=e&&t.drawImage(e,0,0,this.canvas.width,this.canvas.height);var n=this.getInputData(2);null==n?n=this.properties.fade:this.properties.fade=n,t.globalAlpha=n;var r=this.getInputData(1);null!=r&&t.drawImage(r,0,0,this.canvas.width,this.canvas.height),t.globalAlpha=1,this.setOutputData(0,this.canvas),this.setDirtyCanvas(!0)},e.registerNodeType("graphics/imagefade",a),s.title="Crop",s.desc="Crop Image",s.prototype.onAdded=function(){this.createCanvas()},s.prototype.createCanvas=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.properties.width,this.canvas.height=this.properties.height},s.prototype.onExecute=function(){var t=this.getInputData(0);t&&(t.width?(this.canvas.getContext("2d").drawImage(t,-this.properties.x,-this.properties.y,t.width*this.properties.scale,t.height*this.properties.scale),this.setOutputData(0,this.canvas)):this.setOutputData(0,null))},s.prototype.onDrawBackground=function(t){this.flags.collapsed||this.canvas&&t.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,this.size[0],this.size[1])},s.prototype.onPropertyChanged=function(t,e){return this.properties[t]=e,"scale"==t?(this.properties[t]=parseFloat(e),0==this.properties[t]&&(console.error("Error in scale"),this.properties[t]=1)):this.properties[t]=parseInt(e),this.createCanvas(),!0},e.registerNodeType("graphics/cropImage",s),l.title="Canvas",l.desc="Canvas to render stuff",l.prototype.onExecute=function(){var t=this.canvas,e=0|this.properties.width,n=0|this.properties.height;t.width!=e&&(t.width=e),t.height!=n&&(t.height=n),this.properties.autoclear&&this.ctx.clearRect(0,0,t.width,t.height),this.setOutputData(0,t)},l.prototype.onAction=function(t,e){"clear"==t&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},e.registerNodeType("graphics/canvas",l),u.title="DrawImage",u.desc="Draws image into a canvas",u.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=this.getInputOrProperty("img");if(e){var n=this.getInputOrProperty("x"),r=this.getInputOrProperty("y");t.getContext("2d").drawImage(e,n,r)}}},e.registerNodeType("graphics/drawImage",u),c.title="DrawRectangle",c.desc="Draws rectangle in canvas",c.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=this.getInputOrProperty("x"),n=this.getInputOrProperty("y"),r=this.getInputOrProperty("w"),i=this.getInputOrProperty("h");t.getContext("2d").fillRect(e,n,r,i)}},e.registerNodeType("graphics/drawRectangle",c),p.title="Video",p.desc="Video playback",p.widgets=[{name:"play",text:"PLAY",type:"minibutton"},{name:"stop",text:"STOP",type:"minibutton"},{name:"demo",text:"Demo video",type:"button"},{name:"mute",text:"Mute video",type:"button"}],p.prototype.onExecute=function(){if(this.properties.url&&(this.properties.url!=this._video_url&&this.loadVideo(this.properties.url),this._video&&0!=this._video.width)){var t=this.getInputData(0);t&&t>=0&&t<=1&&(this._video.currentTime=t*this._video.duration,this._video.pause()),this._video.dirty=!0,this.setOutputData(0,this._video),this.setOutputData(1,this._video.currentTime),this.setOutputData(2,this._video.duration),this.setDirtyCanvas(!0)}},p.prototype.onStart=function(){this.play()},p.prototype.onStop=function(){this.stop()},p.prototype.loadVideo=function(t){this._video_url=t;var n=t.substr(0,10).indexOf(":"),r="";-1!=n&&(r=t.substr(0,n));var i="";r&&(i=(i=t.substr(0,t.indexOf("/",r.length+3))).substr(r.length+3)),this.properties.use_proxy&&r&&e.proxy&&i!=location.host&&(t=e.proxy+t.substr(t.indexOf(":")+3)),this._video=document.createElement("video"),this._video.src=t,this._video.type="type=video/mp4",this._video.muted=!0,this._video.autoplay=!0;var o=this;this._video.addEventListener("loadedmetadata",(function(t){console.log("Duration: "+this.duration+" seconds"),console.log("Size: "+this.videoWidth+","+this.videoHeight),o.setDirtyCanvas(!0),this.width=this.videoWidth,this.height=this.videoHeight})),this._video.addEventListener("progress",(function(t){console.log("video loading...")})),this._video.addEventListener("error",(function(t){if(console.error("Error loading video: "+this.src),this.error)switch(this.error.code){case this.error.MEDIA_ERR_ABORTED:console.error("You stopped the video.");break;case this.error.MEDIA_ERR_NETWORK:console.error("Network error - please try again later.");break;case this.error.MEDIA_ERR_DECODE:console.error("Video is broken..");break;case this.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.error("Sorry, your browser can't play this video.")}})),this._video.addEventListener("ended",(function(t){console.log("Video Ended."),this.play()}))},p.prototype.onPropertyChanged=function(t,e){return this.properties[t]=e,"url"==t&&""!=e&&this.loadVideo(e),!0},p.prototype.play=function(){this._video&&this._video.videoWidth&&this._video.play()},p.prototype.playPause=function(){this._video&&(this._video.paused?this.play():this.pause())},p.prototype.stop=function(){this._video&&(this._video.pause(),this._video.currentTime=0)},p.prototype.pause=function(){this._video&&(console.log("Video paused"),this._video.pause())},p.prototype.onWidget=function(t,e){},e.registerNodeType("graphics/video",p),d.title="Webcam",d.desc="Webcam image",d.is_webcam_open=!1,d.prototype.openStream=function(){if(navigator.mediaDevices.getUserMedia){this._waiting_confirmation=!0;var t={audio:!1,video:!this.properties.filterFacingMode||{facingMode:this.properties.facingMode}};navigator.mediaDevices.getUserMedia(t).then(this.streamReady.bind(this)).catch((function(t){console.log("Webcam rejected",t),e._webcam_stream=!1,d.is_webcam_open=!1,e.boxcolor="red",e.trigger("stream_error")}));var e=this}else console.log("getUserMedia() is not supported in your browser, use chrome and enable WebRTC from about://flags")},d.prototype.closeStream=function(){if(this._webcam_stream){var t=this._webcam_stream.getTracks();if(t.length)for(var e=0;e<t.length;++e)t[e].stop();d.is_webcam_open=!1,this._webcam_stream=null,this._video=null,this.boxcolor="black",this.trigger("stream_closed")}},d.prototype.onPropertyChanged=function(t,e){"facingMode"==t&&(this.properties.facingMode=e,this.closeStream(),this.openStream())},d.prototype.onRemoved=function(){this.closeStream()},d.prototype.streamReady=function(t){this._webcam_stream=t,this.boxcolor="green";var e=this._video;e||((e=document.createElement("video")).autoplay=!0,e.srcObject=t,this._video=e,e.onloadedmetadata=function(t){console.log(t),d.is_webcam_open=!0}),this.trigger("stream_ready",e)},d.prototype.onExecute=function(){if(null!=this._webcam_stream||this._waiting_confirmation||this.openStream(),this._video&&this._video.videoWidth){this._video.frame=++this.frame,this._video.width=this._video.videoWidth,this._video.height=this._video.videoHeight,this.setOutputData(0,this._video);for(var t=1;t<this.outputs.length;++t)if(this.outputs[t])switch(this.outputs[t].name){case"width":this.setOutputData(t,this._video.videoWidth);break;case"height":this.setOutputData(t,this._video.videoHeight)}}},d.prototype.getExtraMenuOptions=function(t){var e=this;return[{content:e.properties.show?"Hide Frame":"Show Frame",callback:function(){e.properties.show=!e.properties.show}}]},d.prototype.onDrawBackground=function(t){this.flags.collapsed||this.size[1]<=20||!this.properties.show||this._video&&(t.save(),t.drawImage(this._video,0,0,this.size[0],this.size[1]),t.restore())},d.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["stream_ready",e.EVENT],["stream_closed",e.EVENT],["stream_error",e.EVENT]]},e.registerNodeType("graphics/webcam",d)}(this),function(t){var e=t.LiteGraph,n=t.LGraphCanvas;function r(){this.addOutput("tex","Texture"),this.addOutput("name","string"),this.properties={name:"",filter:!0},this.size=[r.image_preview_size,r.image_preview_size]}function i(){this.addInput("Texture","Texture"),this.properties={flipY:!1},this.size=[r.image_preview_size,r.image_preview_size]}function o(){this.addInput("Texture","Texture"),this.addOutput("tex","Texture"),this.addOutput("name","string"),this.properties={name:"",generate_mipmaps:!1}}function a(){this.addInput("Texture","Texture"),this.addInput("TextureB","Texture"),this.addInput("value","number"),this.addOutput("Texture","Texture"),this.help="<p>pixelcode must be vec3, uvcode must be vec2, is optional</p>\t\t<p><strong>uv:</strong> tex. coords</p><p><strong>color:</strong> texture <strong>colorB:</strong> textureB</p><p><strong>time:</strong> scene time <strong>value:</strong> input value</p><p>For multiline you must type: result = ...</p>",this.properties={value:1,pixelcode:"color + colorB * value",uvcode:"",precision:r.DEFAULT},this.has_error=!1}function s(){this.addOutput("out","Texture"),this.properties={code:"",u_value:1,u_color:[1,1,1,1],width:512,height:512,precision:r.DEFAULT},this.properties.code=s.pixel_shader,this._uniforms={u_value:1,u_color:vec4.create(),in_texture:0,texSize:vec4.create(),time:0}}function l(){this.addInput("in","Texture"),this.addInput("scale","vec2"),this.addInput("offset","vec2"),this.addOutput("out","Texture"),this.properties={offset:vec2.fromValues(0,0),scale:vec2.fromValues(1,1),precision:r.DEFAULT}}function u(){this.addInput("in","Texture"),this.addInput("warp","Texture"),this.addInput("factor","number"),this.addOutput("out","Texture"),this.properties={factor:.01,scale:[1,1],offset:[0,0],precision:r.DEFAULT},this._uniforms={u_texture:0,u_textureB:1,u_factor:1,u_scale:vec2.create(),u_offset:vec2.create()}}function c(){this.addInput("Texture","Texture"),this.properties={additive:!1,antialiasing:!1,filter:!0,disable_alpha:!1,gamma:1,viewport:[0,0,1,1]},this.size[0]=130}function p(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={size:0,generate_mipmaps:!1,precision:r.DEFAULT}}function d(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={iterations:1,generate_mipmaps:!1,precision:r.DEFAULT}}function h(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={size:[512,512],generate_mipmaps:!1,precision:r.DEFAULT}}function f(){this.addInput("Texture","Texture"),this.addOutput("tex","Texture"),this.addOutput("avg","vec4"),this.addOutput("lum","number"),this.properties={use_previous_frame:!0,high_quality:!1},this._uniforms={u_texture:0,u_mipmap_offset:0},this._luminance=new Float32Array(4)}function g(){this.addInput("Texture","Texture"),this.addOutput("min_t","Texture"),this.addOutput("max_t","Texture"),this.addOutput("min","vec4"),this.addOutput("max","vec4"),this.properties={mode:"max",use_previous_frame:!0},this._uniforms={u_texture:0},this._max=new Float32Array(4),this._min=new Float32Array(4),this._textures_chain=[]}function v(){this.addInput("in","Texture"),this.addInput("factor","Number"),this.addOutput("out","Texture"),this.properties={factor:.5},this._uniforms={u_texture:0,u_textureB:1,u_factor:this.properties.factor}}function m(){this.addInput("in","Texture"),this.addOutput("avg","Texture"),this.addOutput("array","Texture"),this.properties={samples:64,frames_interval:1},this._uniforms={u_texture:0,u_textureB:1,u_samples:this.properties.samples,u_isamples:1/this.properties.samples},this.frame=0}function _(){this.addInput("Image","image"),this.addOutput("","Texture"),this.properties={}}function y(){this.addInput("Texture","Texture"),this.addInput("LUT","Texture"),this.addInput("Intensity","number"),this.addOutput("","Texture"),this.properties={enabled:!0,intensity:1,precision:r.DEFAULT,texture:null},y._shader||(y._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,y.pixel_shader))}function b(){this.addInput("Texture","Texture"),this.addInput("Atlas","Texture"),this.addOutput("","Texture"),this.properties={enabled:!0,num_row_symbols:4,symbol_size:16,brightness:1,colorize:!1,filter:!1,invert:!1,precision:r.DEFAULT,generate_mipmaps:!1,texture:null},b._shader||(b._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,b.pixel_shader)),this._uniforms={u_texture:0,u_textureB:1,u_row_simbols:4,u_simbol_size:16,u_res:vec2.create()}}function x(){this.addInput("Texture","Texture"),this.addOutput("R","Texture"),this.addOutput("G","Texture"),this.addOutput("B","Texture"),this.addOutput("A","Texture"),x._shader||(x._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,x.pixel_shader))}function w(){this.addInput("R","Texture"),this.addInput("G","Texture"),this.addInput("B","Texture"),this.addInput("A","Texture"),this.addOutput("Texture","Texture"),this.properties={precision:r.DEFAULT,R:1,G:1,B:1,A:1},this._color=vec4.create(),this._uniforms={u_textureR:0,u_textureG:1,u_textureB:2,u_textureA:3,u_color:this._color}}function E(){this.addOutput("Texture","Texture"),this._tex_color=vec4.create(),this.properties={color:vec4.create(),precision:r.DEFAULT}}function T(){this.addInput("A","color"),this.addInput("B","color"),this.addOutput("Texture","Texture"),this.properties={angle:0,scale:1,A:[0,0,0],B:[1,1,1],texture_size:32},T._shader||(T._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,T.pixel_shader)),this._uniforms={u_angle:0,u_colorA:vec3.create(),u_colorB:vec3.create()}}function S(){this.addInput("A","Texture"),this.addInput("B","Texture"),this.addInput("Mixer","Texture"),this.addOutput("Texture","Texture"),this.properties={factor:.5,size_from_biggest:!0,invert:!1,precision:r.DEFAULT},this._uniforms={u_textureA:0,u_textureB:1,u_textureMix:2,u_mix:vec4.create()}}function C(){this.addInput("Tex.","Texture"),this.addOutput("Edges","Texture"),this.properties={invert:!0,threshold:!1,factor:1,precision:r.DEFAULT},C._shader||(C._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,C.pixel_shader))}function O(){this.addInput("Texture","Texture"),this.addInput("Distance","number"),this.addInput("Range","number"),this.addOutput("Texture","Texture"),this.properties={distance:100,range:50,only_depth:!1,high_precision:!1},this._uniforms={u_texture:0,u_distance:100,u_range:50,u_camera_planes:null}}function L(){this.addInput("Texture","Texture"),this.addOutput("Texture","Texture"),this.properties={precision:r.DEFAULT,invert:!1},this._uniforms={u_texture:0,u_camera_planes:null,u_ires:vec2.create()}}function k(){this.addInput("Texture","Texture"),this.addInput("Iterations","number"),this.addInput("Intensity","number"),this.addOutput("Blurred","Texture"),this.properties={intensity:1,iterations:1,preserve_aspect:!1,scale:[1,1],precision:r.DEFAULT}}function I(){this.intensity=.5,this.persistence=.6,this.iterations=8,this.threshold=.8,this.scale=1,this.dirt_texture=null,this.dirt_factor=.5,this._textures=[],this._uniforms={u_intensity:1,u_texture:0,u_glow_texture:1,u_threshold:0,u_texel_size:vec2.create()}}function N(){this.addInput("in","Texture"),this.addInput("dirt","Texture"),this.addOutput("out","Texture"),this.addOutput("glow","Texture"),this.properties={enabled:!0,intensity:1,persistence:.99,iterations:16,threshold:0,scale:1,dirt_factor:.5,precision:r.DEFAULT},this.fx=new I}function D(){this.addInput("Texture","Texture"),this.addOutput("Filtered","Texture"),this.properties={intensity:1,radius:5}}function A(){this.addInput("Texture","Texture"),this.addOutput("Filtered","Texture"),this.properties={sigma:1.4,k:1.6,p:21.7,epsilon:79,phi:.017}}function G(){this.addOutput("Webcam","Texture"),this.properties={texture_name:"",facingMode:"user"},this.boxcolor="black",this.version=0}function R(){this.addInput("in","Texture"),this.addInput("f","number"),this.addOutput("out","Texture"),this.properties={enabled:!0,factor:1,precision:r.LOW},this._uniforms={u_texture:0,u_factor:1}}function P(){this.addInput("in",""),this.properties={precision:r.LOW,width:0,height:0,channels:1},this.addOutput("out","Texture")}function M(){this.addInput("in","Texture"),this.addOutput("out","Texture"),this.properties={precision:r.LOW,split_channels:!1},this._values=new Uint8Array(1024),this._values.fill(255),this._curve_texture=null,this._uniforms={u_texture:0,u_curve:1,u_range:1},this._must_update=!0,this._points={RGB:[[0,0],[1,1]],R:[[0,0],[1,1]],G:[[0,0],[1,1]],B:[[0,0],[1,1]]},this.curve_editor=null,this.addWidget("toggle","Split Channels",!1,"split_channels"),this.addWidget("combo","Channel","RGB",{values:["RGB","R","G","B"]}),this.curve_offset=68,this.size=[240,160]}function z(){this.addInput("in","Texture"),this.addInput("exp","number"),this.addOutput("out","Texture"),this.properties={exposition:1,precision:r.LOW},this._uniforms={u_texture:0,u_exposition:1}}function F(){this.addInput("in","Texture"),this.addInput("avg","number,Texture"),this.addOutput("out","Texture"),this.properties={enabled:!0,scale:1,gamma:1,average_lum:1,lum_white:1,precision:r.LOW},this._uniforms={u_texture:0,u_lumwhite2:1,u_igamma:1,u_scale:1,u_average_lum:1}}function B(){this.addOutput("out","Texture"),this.properties={width:512,height:512,seed:0,persistence:.1,octaves:8,scale:1,offset:[0,0],amplitude:1,precision:r.DEFAULT},this._key=0,this._texture=null,this._uniforms={u_persistence:.1,u_seed:0,u_offset:vec2.create(),u_scale:1,u_viewport:vec2.create()}}function j(){this.addInput("v"),this.addOutput("out","Texture"),this.properties={code:j.default_code,width:512,height:512,clear:!0,precision:r.DEFAULT,use_html_canvas:!1},this._func=null,this._temp_texture=null,this.compileCode()}function H(){this.addInput("in","Texture"),this.addOutput("out","Texture"),this.properties={key_color:vec3.fromValues(0,1,0),threshold:.8,slope:.2,precision:r.DEFAULT}}function U(){this.addInput("in","texture"),this.addInput("yaw","number"),this.addOutput("out","texture"),this.properties={yaw:0}}t.LGraphTexture=null,"undefined"!=typeof GL&&(n.link_type_colors.Texture="#987",t.LGraphTexture=r,r.title="Texture",r.desc="Texture",r.widgets_info={name:{widget:"texture"},filter:{widget:"checkbox"}},r.loadTextureCallback=null,r.image_preview_size=256,r.UNDEFINED=0,r.PASS_THROUGH=1,r.COPY=2,r.LOW=3,r.HIGH=4,r.REUSE=5,r.DEFAULT=2,r.MODE_VALUES={undefined:r.UNDEFINED,"pass through":r.PASS_THROUGH,copy:r.COPY,low:r.LOW,high:r.HIGH,reuse:r.REUSE,default:r.DEFAULT},r.getTexturesContainer=function(){return gl.textures},r.loadTexture=function(t,n){n=n||{};var i=t;return"http://"==i.substr(0,7)&&e.proxy&&(i=e.proxy+i.substr(7)),r.getTexturesContainer()[t]=GL.Texture.fromURL(i,n)},r.getTexture=function(t){var e=this.getTexturesContainer();if(!e)throw"Cannot load texture, container of textures not found";var n=e[t];return!n&&t&&":"!=t[0]?this.loadTexture(t):n},r.getTargetTexture=function(t,e,n){if(!t)throw"LGraphTexture.getTargetTexture expects a reference texture";var i=null;switch(n){case r.LOW:i=gl.UNSIGNED_BYTE;break;case r.HIGH:i=gl.HIGH_PRECISION_FORMAT;break;case r.REUSE:return t;case r.COPY:default:i=t?t.type:gl.UNSIGNED_BYTE}return e&&e.width==t.width&&e.height==t.height&&e.type==i&&e.format==t.format||(e=new GL.Texture(t.width,t.height,{type:i,format:t.format,filter:gl.LINEAR})),e},r.getTextureType=function(t,e){var n=e?e.type:gl.UNSIGNED_BYTE;switch(t){case r.HIGH:n=gl.HIGH_PRECISION_FORMAT;break;case r.LOW:n=gl.UNSIGNED_BYTE}return n},r.getWhiteTexture=function(){return this._white_texture?this._white_texture:this._white_texture=GL.Texture.fromMemory(1,1,[255,255,255,255],{format:gl.RGBA,wrap:gl.REPEAT,filter:gl.NEAREST})},r.getNoiseTexture=function(){if(this._noise_texture)return this._noise_texture;for(var t=new Uint8Array(1048576),e=0;e<1048576;++e)t[e]=255*Math.random();var n=GL.Texture.fromMemory(512,512,t,{format:gl.RGBA,wrap:gl.REPEAT,filter:gl.NEAREST});return this._noise_texture=n,n},r.prototype.onDropFile=function(t,e,n){if(t){var r=null;if("string"==typeof t)r=GL.Texture.fromURL(t);else if(-1!=e.toLowerCase().indexOf(".dds"))r=GL.Texture.fromDDSInMemory(t);else{var i=new Blob([n]),o=URL.createObjectURL(i);r=GL.Texture.fromURL(o)}this._drop_texture=r,this.properties.name=e}else this._drop_texture=null,this.properties.name=""},r.prototype.getExtraMenuOptions=function(t){var e=this;if(this._drop_texture)return[{content:"Clear",callback:function(){e._drop_texture=null,e.properties.name=""}}]},r.prototype.onExecute=function(){var t=null;if(this.isOutputConnected(1)&&(t=this.getInputData(0)),!t&&this._drop_texture&&(t=this._drop_texture),!t&&this.properties.name&&(t=r.getTexture(this.properties.name)),!t)return this.setOutputData(0,null),void this.setOutputData(1,"");this._last_tex=t,!1===this.properties.filter?t.setParameter(gl.TEXTURE_MAG_FILTER,gl.NEAREST):t.setParameter(gl.TEXTURE_MAG_FILTER,gl.LINEAR),this.setOutputData(0,t),this.setOutputData(1,t.fullpath||t.filename);for(var e=2;e<this.outputs.length;e++){var n=this.outputs[e];if(n){var i=null;"width"==n.name?i=t.width:"height"==n.name?i=t.height:"aspect"==n.name&&(i=t.width/t.height),this.setOutputData(e,i)}}},r.prototype.onResourceRenamed=function(t,e){this.properties.name==t&&(this.properties.name=e)},r.prototype.onDrawBackground=function(t){if(!(this.flags.collapsed||this.size[1]<=20))if(this._drop_texture&&t.webgl)t.drawImage(this._drop_texture,0,0,this.size[0],this.size[1]);else{if(this._last_preview_tex!=this._last_tex)if(t.webgl)this._canvas=this._last_tex;else{var e=r.generateLowResTexturePreview(this._last_tex);if(!e)return;this._last_preview_tex=this._last_tex,this._canvas=cloneCanvas(e)}this._canvas&&(t.save(),t.webgl||(t.translate(0,this.size[1]),t.scale(1,-1)),t.drawImage(this._canvas,0,0,this.size[0],this.size[1]),t.restore())}},r.generateLowResTexturePreview=function(t){if(!t)return null;var e=r.image_preview_size,n=t;if(t.format==gl.DEPTH_COMPONENT)return null;(t.width>e||t.height>e)&&(n=this._preview_temp_tex,this._preview_temp_tex||(n=new GL.Texture(e,e,{minFilter:gl.NEAREST}),this._preview_temp_tex=n),t.copyTo(n),t=n);var i=this._preview_canvas;return i||(i=createCanvas(e,e),this._preview_canvas=i),n&&n.toCanvas(i),i},r.prototype.getResources=function(t){return this.properties.name&&(t[this.properties.name]=GL.Texture),t},r.prototype.onGetInputs=function(){return[["in","Texture"]]},r.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["aspect","number"]]},r.replaceCode=function(t,e){return t.replace(/\{\{[a-zA-Z0-9_]*\}\}/g,(function(t){return t=t.replace(/[\{\}]/g,""),e[t]||""}))},e.registerNodeType("texture/texture",r),i.title="Preview",i.desc="Show a texture in the graph canvas",i.allow_preview=!1,i.prototype.onDrawBackground=function(t){if(!this.flags.collapsed&&(t.webgl||i.allow_preview)){var e=this.getInputData(0);if(e){var n=null;n=!e.handle&&t.webgl?e:r.generateLowResTexturePreview(e),t.save(),this.properties.flipY&&(t.translate(0,this.size[1]),t.scale(1,-1)),t.drawImage(n,0,0,this.size[0],this.size[1]),t.restore()}}},e.registerNodeType("texture/preview",i),o.title="Save",o.desc="Save a texture in the repository",o.prototype.getPreviewTexture=function(){return this._texture},o.prototype.onExecute=function(){var t=this.getInputData(0);if(t){if(this.properties.generate_mipmaps&&(t.bind(0),t.setParameter(gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR),gl.generateMipmap(t.texture_type),t.unbind(0)),this.properties.name)if(r.storeTexture)r.storeTexture(this.properties.name,t);else r.getTexturesContainer()[this.properties.name]=t;this._texture=t,this.setOutputData(0,t),this.setOutputData(1,this.properties.name)}},e.registerNodeType("texture/save",o),a.widgets_info={uvcode:{widget:"code"},pixelcode:{widget:"code"},precision:{widget:"combo",values:r.MODE_VALUES}},a.title="Operation",a.desc="Texture shader operation",a.presets={},a.prototype.getExtraMenuOptions=function(t){var e=this;return[{content:e.properties.show?"Hide Texture":"Show Texture",callback:function(){e.properties.show=!e.properties.show}}]},a.prototype.onPropertyChanged=function(){this.has_error=!1},a.prototype.onDrawBackground=function(t){this.flags.collapsed||this.size[1]<=20||!this.properties.show||this._tex&&this._tex.gl==t&&(t.save(),t.drawImage(this._tex,0,0,this.size[0],this.size[1]),t.restore())},a.prototype.onExecute=function(){var t=this.getInputData(0);if(this.isOutputConnected(0))if(this.properties.precision!==r.PASS_THROUGH){var e=this.getInputData(1);if(this.properties.uvcode||this.properties.pixelcode){var n=512,i=512;t?(n=t.width,i=t.height):e&&(n=e.width,i=e.height),e||(e=GL.Texture.getWhiteTexture());var o=r.getTextureType(this.properties.precision,t);t||this._tex?this._tex=r.getTargetTexture(t||this._tex,this._tex,this.properties.precision):this._tex=new GL.Texture(n,i,{type:o,format:gl.RGBA,filter:gl.LINEAR});var s="";this.properties.uvcode&&(s="uv = "+this.properties.uvcode,-1!=this.properties.uvcode.indexOf(";")&&(s=this.properties.uvcode));var l="";this.properties.pixelcode&&(l="result = "+this.properties.pixelcode,-1!=this.properties.pixelcode.indexOf(";")&&(l=this.properties.pixelcode));var u=this._shader;if(!this.has_error&&(!u||this._shader_code!=s+"|"+l)){var c=r.replaceCode(a.pixel_shader,{UV_CODE:s,PIXEL_CODE:l});try{u=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,c),this.boxcolor="#00FF00"}catch(h){return GL.Shader.dumpErrorToConsole(h,Shader.SCREEN_VERTEX_SHADER,c),this.boxcolor="#FF0000",void(this.has_error=!0)}this._shader=u,this._shader_code=s+"|"+l}if(this._shader){var p=this.getInputData(2);null!=p?this.properties.value=p:p=parseFloat(this.properties.value);var d=this.graph.getTime();this._tex.drawTo((function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),t&&t.bind(0),e&&e.bind(1);var r=Mesh.getScreenQuad();u.uniforms({u_texture:0,u_textureB:1,value:p,texSize:[n,i,1/n,1/i],time:d}).draw(r)})),this.setOutputData(0,this._tex)}}}else this.setOutputData(0,t)},a.pixel_shader="precision highp float;\n\t\t\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tvarying vec2 v_coord;\n\t\tuniform vec4 texSize;\n\t\tuniform float time;\n\t\tuniform float value;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 uv = v_coord;\n\t\t\t{{UV_CODE}};\n\t\t\tvec4 color4 = texture2D(u_texture, uv);\n\t\t\tvec3 color = color4.rgb;\n\t\t\tvec4 color4B = texture2D(u_textureB, uv);\n\t\t\tvec3 colorB = color4B.rgb;\n\t\t\tvec3 result = color;\n\t\t\tfloat alpha = 1.0;\n\t\t\t{{PIXEL_CODE}};\n\t\t\tgl_FragColor = vec4(result, alpha);\n\t\t}\n\t\t",a.registerPreset=function(t,e){a.presets[t]=e},a.registerPreset("",""),a.registerPreset("bypass","color"),a.registerPreset("add","color + colorB * value"),a.registerPreset("substract","(color - colorB) * value"),a.registerPreset("mate","mix( color, colorB, color4B.a * value)"),a.registerPreset("invert","vec3(1.0) - color"),a.registerPreset("multiply","color * colorB * value"),a.registerPreset("divide","(color / colorB) / value"),a.registerPreset("difference","abs(color - colorB) * value"),a.registerPreset("max","max(color, colorB) * value"),a.registerPreset("min","min(color, colorB) * value"),a.registerPreset("displace","texture2D(u_texture, uv + (colorB.xy - vec2(0.5)) * value).xyz"),a.registerPreset("grayscale","vec3(color.x + color.y + color.z) * value / 3.0"),a.registerPreset("saturation","mix( vec3(color.x + color.y + color.z) / 3.0, color, value )"),a.registerPreset("normalmap","\n\t\tfloat z0 = texture2D(u_texture, uv + vec2(-texSize.z, -texSize.w) ).x;\n\t\tfloat z1 = texture2D(u_texture, uv + vec2(0.0, -texSize.w) ).x;\n\t\tfloat z2 = texture2D(u_texture, uv + vec2(texSize.z, -texSize.w) ).x;\n\t\tfloat z3 = texture2D(u_texture, uv + vec2(-texSize.z, 0.0) ).x;\n\t\tfloat z4 = color.x;\n\t\tfloat z5 = texture2D(u_texture, uv + vec2(texSize.z, 0.0) ).x;\n\t\tfloat z6 = texture2D(u_texture, uv + vec2(-texSize.z, texSize.w) ).x;\n\t\tfloat z7 = texture2D(u_texture, uv + vec2(0.0, texSize.w) ).x;\n\t\tfloat z8 = texture2D(u_texture, uv + vec2(texSize.z, texSize.w) ).x;\n\t\tvec3 normal = vec3( z2 + 2.0*z4 + z7 - z0 - 2.0*z3 - z5, z5 + 2.0*z6 + z7 -z0 - 2.0*z1 - z2, 1.0 );\n\t\tnormal.xy *= value;\n\t\tresult.xyz = normalize(normal) * 0.5 + vec3(0.5);\n\t"),a.registerPreset("threshold","vec3(color.x > colorB.x * value ? 1.0 : 0.0,color.y > colorB.y * value ? 1.0 : 0.0,color.z > colorB.z * value ? 1.0 : 0.0)"),a.prototype.onInspect=function(t){var e=this;t.addCombo("Presets","",{values:Object.keys(a.presets),callback:function(n){var r=a.presets[n];r&&(e.setProperty("pixelcode",r),e.title=n,t.refresh())}})},e.registerNodeType("texture/operation",a),s.title="Shader",s.desc="Texture shader",s.widgets_info={code:{type:"code",lang:"glsl"},precision:{widget:"combo",values:r.MODE_VALUES}},s.prototype.onPropertyChanged=function(t,e){if("code"==t){var n=this.getShader();if(n){var r=n.uniformInfo;if(this.inputs)for(var i={},o=0;o<this.inputs.length;++o){(a=this.getInputInfo(o))&&(!r[a.name]||i[a.name]?(this.removeInput(o),o--):i[a.name]=!0)}for(var o in r){var a;if(null!==(a=n.uniformInfo[o]).loc&&"time"!=o){var s="number";if(this._shader.samplers[o])s="texture";else switch(a.size){case 1:s="number";break;case 2:s="vec2";break;case 3:s="vec3";break;case 4:s="vec4";break;case 9:s="mat3";break;case 16:s="mat4";break;default:continue}var l=this.findInputSlot(o);if(-1!=l){var u=this.getInputInfo(l);if(u){if(u.type==s)continue;this.removeInput(l,s),this.addInput(o,s)}else this.addInput(o,s)}else this.addInput(o,s)}}}}},s.prototype.getShader=function(){return this._shader&&this._shader_code==this.properties.code?this._shader:(this._shader_code=this.properties.code,this._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,this.properties.code),this._shader?(this.boxcolor="green",this._shader):(this.boxcolor="red",null))},s.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getShader();if(t){var e=0,n=null;if(this.inputs)for(var i=0;i<this.inputs.length;++i){var o=this.getInputInfo(i),a=this.getInputData(i);null!=a&&(a.constructor===GL.Texture&&(a.bind(e),n||(n=a),a=e,e++),t.setUniform(o.name,a))}var s=this._uniforms,l=r.getTextureType(this.properties.precision,n),u=0|this.properties.width,c=0|this.properties.height;0==u&&(u=n?n.width:gl.canvas.width),0==c&&(c=n?n.height:gl.canvas.height),s.texSize[0]=u,s.texSize[1]=c,s.texSize[2]=1/u,s.texSize[3]=1/c,s.time=this.graph.getTime(),s.u_value=this.properties.u_value,s.u_color.set(this.properties.u_color),this._tex&&this._tex.type==l&&this._tex.width==u&&this._tex.height==c||(this._tex=new GL.Texture(u,c,{type:l,format:gl.RGBA,filter:gl.LINEAR})),this._tex.drawTo((function(){t.uniforms(s).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,this._tex)}}},s.pixel_shader="precision highp float;\n\nvarying vec2 v_coord;\nuniform float time; //time in seconds\nuniform vec4 texSize; //tex resolution\nuniform float u_value;\nuniform vec4 u_color;\n\nvoid main() {\n\tvec2 uv = v_coord;\n\tvec3 color = vec3(0.0);\n\t//your code here\n\tcolor.xy=uv;\n\n\tgl_FragColor = vec4(color, 1.0);\n}\n",e.registerNodeType("texture/shader",s),l.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},l.title="Scale/Offset",l.desc="Applies an scaling and offseting",l.prototype.onExecute=function(){var t=this.getInputData(0);if(this.isOutputConnected(0)&&t)if(this.properties.precision!==r.PASS_THROUGH){var e=t.width,n=t.height,i=this.precision===r.LOW?gl.UNSIGNED_BYTE:gl.HIGH_PRECISION_FORMAT;this.precision===r.DEFAULT&&(i=t.type),this._tex&&this._tex.width==e&&this._tex.height==n&&this._tex.type==i||(this._tex=new GL.Texture(e,n,{type:i,format:gl.RGBA,filter:gl.LINEAR}));var o=this._shader;o||(o=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,l.pixel_shader));var a=this.getInputData(1);a?(this.properties.scale[0]=a[0],this.properties.scale[1]=a[1]):a=this.properties.scale;var s=this.getInputData(2);s?(this.properties.offset[0]=s[0],this.properties.offset[1]=s[1]):s=this.properties.offset,this._tex.drawTo((function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),t.bind(0);var e=Mesh.getScreenQuad();o.uniforms({u_texture:0,u_scale:a,u_offset:s}).draw(e)})),this.setOutputData(0,this._tex)}else this.setOutputData(0,t)},l.pixel_shader="precision highp float;\n\t\t\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tvarying vec2 v_coord;\n\t\tuniform vec2 u_scale;\n\t\tuniform vec2 u_offset;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 uv = v_coord;\n\t\t\tuv = uv / u_scale - u_offset;\n\t\t\tgl_FragColor = texture2D(u_texture, uv);\n\t\t}\n\t\t",e.registerNodeType("texture/scaleOffset",l),u.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},u.title="Warp",u.desc="Texture warp operation",u.prototype.onExecute=function(){var t=this.getInputData(0);if(this.isOutputConnected(0))if(this.properties.precision!==r.PASS_THROUGH){var e=this.getInputData(1),n=512,i=512;gl.UNSIGNED_BYTE;t?(n=t.width,i=t.height,t.type):e&&(n=e.width,i=e.height,e.type),t||this._tex?this._tex=r.getTargetTexture(t||this._tex,this._tex,this.properties.precision):this._tex=new GL.Texture(n,i,{type:this.precision===r.LOW?gl.UNSIGNED_BYTE:gl.HIGH_PRECISION_FORMAT,format:gl.RGBA,filter:gl.LINEAR});var o=this._shader;o||(o=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,u.pixel_shader));var a=this.getInputData(2);null!=a?this.properties.factor=a:a=parseFloat(this.properties.factor);var s=this._uniforms;s.u_factor=a,s.u_scale.set(this.properties.scale),s.u_offset.set(this.properties.offset),this._tex.drawTo((function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),t&&t.bind(0),e&&e.bind(1);var n=Mesh.getScreenQuad();o.uniforms(s).draw(n)})),this.setOutputData(0,this._tex)}else this.setOutputData(0,t)},u.pixel_shader="precision highp float;\n\t\t\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tvarying vec2 v_coord;\n\t\tuniform float u_factor;\n\t\tuniform vec2 u_scale;\n\t\tuniform vec2 u_offset;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 uv = v_coord;\n\t\t\tuv += ( texture2D(u_textureB, uv).rg - vec2(0.5)) * u_factor * u_scale + u_offset;\n\t\t\tgl_FragColor = texture2D(u_texture, uv);\n\t\t}\n\t\t",e.registerNodeType("texture/warp",u),c.title="to Viewport",c.desc="Texture to viewport",c._prev_viewport=new Float32Array(4),c.prototype.onDrawBackground=function(t){if(!(this.flags.collapsed||this.size[1]<=40)){var e=this.getInputData(0);e&&t.drawImage(t==gl?e:gl.canvas,10,30,this.size[0]-20,this.size[1]-40)}},c.prototype.onExecute=function(){var t=this.getInputData(0);if(t){this.properties.disable_alpha?gl.disable(gl.BLEND):(gl.enable(gl.BLEND),this.properties.additive?gl.blendFunc(gl.SRC_ALPHA,gl.ONE):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)),gl.disable(gl.DEPTH_TEST);var e=this.properties.gamma||1;this.isInputConnected(1)&&(e=this.getInputData(1)),t.setParameter(gl.TEXTURE_MAG_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST);var n=c._prev_viewport;n.set(gl.viewport_data);var r=this.properties.viewport;gl.viewport(n[0]+n[2]*r[0],n[1]+n[3]*r[1],n[2]*r[2],n[3]*r[3]);gl.getViewport();if(this.properties.antialiasing){c._shader||(c._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,c.aa_pixel_shader));var i=Mesh.getScreenQuad();t.bind(0),c._shader.uniforms({u_texture:0,uViewportSize:[t.width,t.height],u_igamma:1/e,inverseVP:[1/t.width,1/t.height]}).draw(i)}else 1!=e?(c._gamma_shader||(c._gamma_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,c.gamma_pixel_shader)),t.toViewport(c._gamma_shader,{u_texture:0,u_igamma:1/e})):t.toViewport();gl.viewport(n[0],n[1],n[2],n[3])}},c.prototype.onGetInputs=function(){return[["gamma","number"]]},c.aa_pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec2 uViewportSize;\n\t\tuniform vec2 inverseVP;\n\t\tuniform float u_igamma;\n\t\t#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n\t\t#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n\t\t#define FXAA_SPAN_MAX     8.0\n\t\t\n\t\t/* from mitsuhiko/webgl-meincraft based on the code on geeks3d.com */\n\t\tvec4 applyFXAA(sampler2D tex, vec2 fragCoord)\n\t\t{\n\t\t\tvec4 color = vec4(0.0);\n\t\t\t/*vec2 inverseVP = vec2(1.0 / uViewportSize.x, 1.0 / uViewportSize.y);*/\n\t\t\tvec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * inverseVP).xyz;\n\t\t\tvec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * inverseVP).xyz;\n\t\t\tvec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * inverseVP).xyz;\n\t\t\tvec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * inverseVP).xyz;\n\t\t\tvec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;\n\t\t\tvec3 luma = vec3(0.299, 0.587, 0.114);\n\t\t\tfloat lumaNW = dot(rgbNW, luma);\n\t\t\tfloat lumaNE = dot(rgbNE, luma);\n\t\t\tfloat lumaSW = dot(rgbSW, luma);\n\t\t\tfloat lumaSE = dot(rgbSE, luma);\n\t\t\tfloat lumaM  = dot(rgbM,  luma);\n\t\t\tfloat lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n\t\t\tfloat lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\t\t\t\n\t\t\tvec2 dir;\n\t\t\tdir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n\t\t\tdir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\t\t\t\n\t\t\tfloat dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\t\t\t\n\t\t\tfloat rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n\t\t\tdir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * inverseVP;\n\t\t\t\n\t\t\tvec3 rgbA = 0.5 * (texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz + \n\t\t\t\ttexture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n\t\t\tvec3 rgbB = rgbA * 0.5 + 0.25 * (texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz + \n\t\t\t\ttexture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\t\t\t\n\t\t\t//return vec4(rgbA,1.0);\n\t\t\tfloat lumaB = dot(rgbB, luma);\n\t\t\tif ((lumaB < lumaMin) || (lumaB > lumaMax))\n\t\t\t\tcolor = vec4(rgbA, 1.0);\n\t\t\telse\n\t\t\t\tcolor = vec4(rgbB, 1.0);\n\t\t\tif(u_igamma != 1.0)\n\t\t\t\tcolor.xyz = pow( color.xyz, vec3(u_igamma) );\n\t\t\treturn color;\n\t\t}\n\t\t\n\t\tvoid main() {\n\t\t   gl_FragColor = applyFXAA( u_texture, v_coord * uViewportSize) ;\n\t\t}\n\t\t",c.gamma_pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_igamma;\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D( u_texture, v_coord);\n\t\t\tcolor.xyz = pow(color.xyz, vec3(u_igamma) );\n\t\t   gl_FragColor = color;\n\t\t}\n\t\t",e.registerNodeType("texture/toviewport",c),p.title="Copy",p.desc="Copy Texture",p.widgets_info={size:{widget:"combo",values:[0,32,64,128,256,512,1024,2048]},precision:{widget:"combo",values:r.MODE_VALUES}},p.prototype.onExecute=function(){var t=this.getInputData(0);if((t||this._temp_texture)&&this.isOutputConnected(0)){if(t){var e=t.width,n=t.height;0!=this.properties.size&&(e=this.properties.size,n=this.properties.size);var i=this._temp_texture,o=t.type;if(this.properties.precision===r.LOW?o=gl.UNSIGNED_BYTE:this.properties.precision===r.HIGH&&(o=gl.HIGH_PRECISION_FORMAT),!i||i.width!=e||i.height!=n||i.type!=o){var a=gl.LINEAR;this.properties.generate_mipmaps&&isPowerOfTwo(e)&&isPowerOfTwo(n)&&(a=gl.LINEAR_MIPMAP_LINEAR),this._temp_texture=new GL.Texture(e,n,{type:o,format:gl.RGBA,minFilter:a,magFilter:gl.LINEAR})}t.copyTo(this._temp_texture),this.properties.generate_mipmaps&&(this._temp_texture.bind(0),gl.generateMipmap(this._temp_texture.texture_type),this._temp_texture.unbind(0))}this.setOutputData(0,this._temp_texture)}},e.registerNodeType("texture/copy",p),d.title="Downsample",d.desc="Downsample Texture",d.widgets_info={iterations:{type:"number",step:1,precision:0,min:0},precision:{widget:"combo",values:r.MODE_VALUES}},d.prototype.onExecute=function(){var t=this.getInputData(0);if((t||this._temp_texture)&&this.isOutputConnected(0)&&t&&t.texture_type===GL.TEXTURE_2D)if(this.properties.iterations<1)this.setOutputData(0,t);else{var e=d._shader;e||(d._shader=e=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,d.pixel_shader));var n=0|t.width,i=0|t.height,o=t.type;this.properties.precision===r.LOW?o=gl.UNSIGNED_BYTE:this.properties.precision===r.HIGH&&(o=gl.HIGH_PRECISION_FORMAT);var a=this.properties.iterations||1,s=t,l=null,u=[],c={type:o,format:t.format},p=vec2.create(),h={u_offset:p};this._texture&&GL.Texture.releaseTemporary(this._texture);for(var f=0;f<a&&(p[0]=1/n,p[1]=1/i,n=n>>1||0,i=i>>1||0,l=GL.Texture.getTemporary(n,i,c),u.push(l),s.setParameter(GL.TEXTURE_MAG_FILTER,GL.NEAREST),s.copyTo(l,e,h),1!=n||1!=i);++f)s=l;this._texture=u.pop();for(f=0;f<u.length;++f)GL.Texture.releaseTemporary(u[f]);this.properties.generate_mipmaps&&(this._texture.bind(0),gl.generateMipmap(this._texture.texture_type),this._texture.unbind(0)),this.setOutputData(0,this._texture)}},d.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec2 u_offset;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D(u_texture, v_coord );\n\t\t\tcolor += texture2D(u_texture, v_coord + vec2( u_offset.x, 0.0 ) );\n\t\t\tcolor += texture2D(u_texture, v_coord + vec2( 0.0, u_offset.y ) );\n\t\t\tcolor += texture2D(u_texture, v_coord + vec2( u_offset.x, u_offset.y ) );\n\t\t   gl_FragColor = color * 0.25;\n\t\t}\n\t\t",e.registerNodeType("texture/downsample",d),h.title="Resize",h.desc="Resize Texture",h.widgets_info={iterations:{type:"number",step:1,precision:0,min:0},precision:{widget:"combo",values:r.MODE_VALUES}},h.prototype.onExecute=function(){var t=this.getInputData(0);if((t||this._temp_texture)&&this.isOutputConnected(0)&&t&&t.texture_type===GL.TEXTURE_2D){var e=0|this.properties.size[0],n=0|this.properties.size[1];0==e&&(e=t.width),0==n&&(n=t.height);var i=t.type;this.properties.precision===r.LOW?i=gl.UNSIGNED_BYTE:this.properties.precision===r.HIGH&&(i=gl.HIGH_PRECISION_FORMAT),this._texture&&this._texture.width==e&&this._texture.height==n&&this._texture.type==i||(this._texture=new GL.Texture(e,n,{type:i})),t.copyTo(this._texture),this.properties.generate_mipmaps&&(this._texture.bind(0),gl.generateMipmap(this._texture.texture_type),this._texture.unbind(0)),this.setOutputData(0,this._texture)}},e.registerNodeType("texture/resize",h),f.title="Average",f.desc="Compute a partial average (32 random samples) of a texture and stores it as a 1x1 pixel texture.\n If high_quality is true, then it generates the mipmaps first and reads from the lower one.",f.prototype.onExecute=function(){this.properties.use_previous_frame||this.updateAverage();var t=this._luminance;this.setOutputData(0,this._temp_texture),this.setOutputData(1,t),this.setOutputData(2,(t[0]+t[1]+t[2])/3)},f.prototype.onPreRenderExecute=function(){this.updateAverage()},f.prototype.updateAverage=function(){var t=this.getInputData(0);if(t&&(this.isOutputConnected(0)||this.isOutputConnected(1)||this.isOutputConnected(2))){if(!f._shader){f._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,f.pixel_shader);for(var e=new Float32Array(16),n=0;n<e.length;++n)e[n]=Math.random();f._shader.uniforms({u_samples_a:e.subarray(0,16),u_samples_b:e.subarray(16,32)})}var r=this._temp_texture,i=gl.UNSIGNED_BYTE;t.type!=i&&(i=gl.FLOAT),r&&r.type==i||(this._temp_texture=new GL.Texture(1,1,{type:i,format:gl.RGBA,filter:gl.NEAREST})),this._uniforms.u_mipmap_offset=0,this.properties.high_quality&&(this._temp_pot2_texture&&this._temp_pot2_texture.type==i||(this._temp_pot2_texture=new GL.Texture(512,512,{type:i,format:gl.RGBA,minFilter:gl.LINEAR_MIPMAP_LINEAR,magFilter:gl.LINEAR})),t.copyTo(this._temp_pot2_texture),(t=this._temp_pot2_texture).bind(0),gl.generateMipmap(GL.TEXTURE_2D),this._uniforms.u_mipmap_offset=9);var o=f._shader,a=this._uniforms;if(a.u_mipmap_offset=this.properties.mipmap_offset,gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),this._temp_texture.drawTo((function(){t.toViewport(o,a)})),this.isOutputConnected(1)||this.isOutputConnected(2)){var s=this._temp_texture.getPixels();if(s){var l=this._luminance;i=this._temp_texture.type;l.set(s),i==gl.UNSIGNED_BYTE?vec4.scale(l,l,1/255):i==GL.HALF_FLOAT||GL.HALF_FLOAT_OES}}}},f.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tuniform mat4 u_samples_a;\n\t\tuniform mat4 u_samples_b;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_mipmap_offset;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = vec4(0.0);\n\t\t\t//random average\n\t\t\tfor(int i = 0; i < 4; ++i)\n\t\t\t\tfor(int j = 0; j < 4; ++j)\n\t\t\t\t{\n\t\t\t\t\tcolor += texture2D(u_texture, vec2( u_samples_a[i][j], u_samples_b[i][j] ), u_mipmap_offset );\n\t\t\t\t\tcolor += texture2D(u_texture, vec2( 1.0 - u_samples_a[i][j], 1.0 - u_samples_b[i][j] ), u_mipmap_offset );\n\t\t\t\t}\n\t\t   gl_FragColor = color * 0.03125;\n\t\t}\n\t\t",e.registerNodeType("texture/average",f),g.widgets_info={mode:{widget:"combo",values:["min","max","avg"]}},g.title="MinMax",g.desc="Compute the scene min max",g.prototype.onExecute=function(){this.properties.use_previous_frame||this.update(),this.setOutputData(0,this._temp_texture),this.setOutputData(1,this._luminance)},g.prototype.onPreRenderExecute=function(){this.update()},g.prototype.update=function(){if((r=this.getInputData(0))&&(this.isOutputConnected(0)||this.isOutputConnected(1))){g._shader||(g._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,g.pixel_shader));this._temp_texture;var t=gl.UNSIGNED_BYTE;r.type!=t&&(t=gl.FLOAT);var e=512;if(!this._textures_chain.length||this._textures_chain[0].type!=t)for(;n&&(this._textures_chain[n]=new GL.Texture(e,e,{type:t,format:gl.RGBA,filter:gl.NEAREST}),n++,1!=(e>>=2)););r.copyTo(this._textures_chain[0]);this._textures_chain[0];for(var n=1;n<=this._textures_chain.length;++n){var r;r=this._textures_chain[n]}var i=g._shader,o=this._uniforms;o.u_mipmap_offset=this.properties.mipmap_offset,gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),this._temp_texture.drawTo((function(){r.toViewport(i,o)}))}},g.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tuniform mat4 u_samples_a;\n\t\tuniform mat4 u_samples_b;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_mipmap_offset;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = vec4(0.0);\n\t\t\t//random average\n\t\t\tfor(int i = 0; i < 4; ++i)\n\t\t\t\tfor(int j = 0; j < 4; ++j)\n\t\t\t\t{\n\t\t\t\t\tcolor += texture2D(u_texture, vec2( u_samples_a[i][j], u_samples_b[i][j] ), u_mipmap_offset );\n\t\t\t\t\tcolor += texture2D(u_texture, vec2( 1.0 - u_samples_a[i][j], 1.0 - u_samples_b[i][j] ), u_mipmap_offset );\n\t\t\t\t}\n\t\t   gl_FragColor = color * 0.03125;\n\t\t}\n\t\t",v.title="Smooth",v.desc="Smooth texture over time",v.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){v._shader||(v._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,v.pixel_shader));var e=this._temp_texture;if(!e||e.type!=t.type||e.width!=t.width||e.height!=t.height){var n={type:t.type,format:gl.RGBA,filter:gl.NEAREST};this._temp_texture=new GL.Texture(t.width,t.height,n),this._temp_texture2=new GL.Texture(t.width,t.height,n),t.copyTo(this._temp_texture2)}var r=this._temp_texture,i=this._temp_texture2,o=v._shader,a=this._uniforms;a.u_factor=1-this.getInputOrProperty("factor"),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),r.drawTo((function(){i.bind(1),t.toViewport(o,a)})),this.setOutputData(0,r),this._temp_texture=i,this._temp_texture2=r}},v.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tuniform float u_factor;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tgl_FragColor = mix( texture2D( u_texture, v_coord ), texture2D( u_textureB, v_coord ), u_factor );\n\t\t}\n\t\t",e.registerNodeType("texture/temporal_smooth",v),m.title="Lineal Avg Smooth",m.desc="Smooth texture linearly over time",m["@samples"]={type:"number",min:1,max:64,step:1,precision:1},m.prototype.getPreviewTexture=function(){return this._temp_texture2},m.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){m._shader||(m._shader_copy=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,m.pixel_shader_copy),m._shader_avg=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,m.pixel_shader_avg));var e=clamp(this.properties.samples,0,64),n=this.frame,r=this.properties.frames_interval;if(0==r||n%r==0){var i=this._temp_texture;if(!i||i.type!=t.type||i.width!=e){var o={type:t.type,format:gl.RGBA,filter:gl.NEAREST};this._temp_texture=new GL.Texture(e,1,o),this._temp_texture2=new GL.Texture(e,1,o),this._temp_texture_out=new GL.Texture(1,1,o)}var a=this._temp_texture,s=this._temp_texture2,l=m._shader_copy,u=m._shader_avg,c=this._uniforms;c.u_samples=e,c.u_isamples=1/e,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),a.drawTo((function(){s.bind(1),t.toViewport(l,c)})),this._temp_texture_out.drawTo((function(){a.toViewport(u,c)})),this.setOutputData(0,this._temp_texture_out),this._temp_texture=s,this._temp_texture2=a}else this.setOutputData(0,this._temp_texture_out);this.setOutputData(1,this._temp_texture2),this.frame++}},m.pixel_shader_copy="precision highp float;\n\t\tprecision highp float;\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tuniform float u_isamples;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tif( v_coord.x <= u_isamples )\n\t\t\t\tgl_FragColor = texture2D( u_texture, vec2(0.5) );\n\t\t\telse\n\t\t\t\tgl_FragColor = texture2D( u_textureB, v_coord - vec2(u_isamples,0.0) );\n\t\t}\n\t\t",m.pixel_shader_avg="precision highp float;\n\t\tprecision highp float;\n\t\tuniform sampler2D u_texture;\n\t\tuniform int u_samples;\n\t\tuniform float u_isamples;\n\t\tvarying vec2 v_coord;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = vec4(0.0);\n\t\t\tfor(int i = 0; i < 64; ++i)\n\t\t\t{\n\t\t\t\tcolor += texture2D( u_texture, vec2( float(i)*u_isamples,0.0) );\n\t\t\t\tif(i == (u_samples - 1))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tgl_FragColor = color * u_isamples;\n\t\t}\n\t\t",e.registerNodeType("texture/linear_avg_smooth",m),_.title="Image to Texture",_.desc="Uploads an image to the GPU",_.prototype.onExecute=function(){var t=this.getInputData(0);if(t){var e=t.videoWidth||t.width,n=t.videoHeight||t.height;if(t.gltexture)this.setOutputData(0,t.gltexture);else{var r=this._temp_texture;r&&r.width==e&&r.height==n||(this._temp_texture=new GL.Texture(e,n,{format:gl.RGBA,filter:gl.LINEAR}));try{this._temp_texture.uploadImage(t)}catch(i){return void console.error("image comes from an unsafe location, cannot be uploaded to webgl: "+i)}this.setOutputData(0,this._temp_texture)}}},e.registerNodeType("texture/imageToTexture",_),y.widgets_info={texture:{widget:"texture"},precision:{widget:"combo",values:r.MODE_VALUES}},y.title="LUT",y.desc="Apply LUT to Texture",y.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(this.properties.precision!==r.PASS_THROUGH&&!1!==this.properties.enabled){if(t){var e=this.getInputData(1);if(e||(e=r.getTexture(this.properties.texture)),e){e.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindTexture(gl.TEXTURE_2D,null);var n=this.properties.intensity;this.isInputConnected(2)&&(this.properties.intensity=n=this.getInputData(2)),this._tex=r.getTargetTexture(t,this._tex,this.properties.precision),this._tex.drawTo((function(){e.bind(1),t.toViewport(y._shader,{u_texture:0,u_textureB:1,u_amount:n})})),this.setOutputData(0,this._tex)}else this.setOutputData(0,t)}}else this.setOutputData(0,t)}},y.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tuniform float u_amount;\n\t\t\n\t\tvoid main() {\n\t\t\t lowp vec4 textureColor = clamp( texture2D(u_texture, v_coord), vec4(0.0), vec4(1.0) );\n\t\t\t mediump float blueColor = textureColor.b * 63.0;\n\t\t\t mediump vec2 quad1;\n\t\t\t quad1.y = floor(floor(blueColor) / 8.0);\n\t\t\t quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\t\t\t mediump vec2 quad2;\n\t\t\t quad2.y = floor(ceil(blueColor) / 8.0);\n\t\t\t quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\t\t\t highp vec2 texPos1;\n\t\t\t texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n\t\t\t texPos1.y = 1.0 - ((quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g));\n\t\t\t highp vec2 texPos2;\n\t\t\t texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n\t\t\t texPos2.y = 1.0 - ((quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g));\n\t\t\t lowp vec4 newColor1 = texture2D(u_textureB, texPos1);\n\t\t\t lowp vec4 newColor2 = texture2D(u_textureB, texPos2);\n\t\t\t lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n\t\t\t gl_FragColor = vec4( mix( textureColor.rgb, newColor.rgb, u_amount), textureColor.w);\n\t\t}\n\t\t",e.registerNodeType("texture/LUT",y),b.widgets_info={texture:{widget:"texture"},precision:{widget:"combo",values:r.MODE_VALUES}},b.title="Encode",b.desc="Apply a texture atlas to encode a texture",b.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(this.properties.precision!==r.PASS_THROUGH&&!1!==this.properties.enabled){if(t){var e=this.getInputData(1);if(e||(e=r.getTexture(this.properties.texture)),e){e.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindTexture(gl.TEXTURE_2D,null);var n=this._uniforms;n.u_row_simbols=Math.floor(this.properties.num_row_symbols),n.u_symbol_size=this.properties.symbol_size,n.u_brightness=this.properties.brightness,n.u_invert=this.properties.invert?1:0,n.u_colorize=this.properties.colorize?1:0,this._tex=r.getTargetTexture(t,this._tex,this.properties.precision),n.u_res[0]=this._tex.width,n.u_res[1]=this._tex.height,this._tex.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),this._tex.drawTo((function(){e.bind(1),t.toViewport(b._shader,n)})),this.properties.generate_mipmaps&&(this._tex.bind(0),gl.generateMipmap(this._tex.texture_type),this._tex.unbind(0)),this.setOutputData(0,this._tex)}else this.setOutputData(0,t)}}else this.setOutputData(0,t)}},b.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_textureB;\n\t\tuniform float u_row_simbols;\n\t\tuniform float u_symbol_size;\n\t\tuniform float u_brightness;\n\t\tuniform float u_invert;\n\t\tuniform float u_colorize;\n\t\tuniform vec2 u_res;\n\t\t\n\t\tvoid main() {\n\t\t\tvec2 total_symbols = u_res / u_symbol_size;\n\t\t\tvec2 uv = floor(v_coord * total_symbols) / total_symbols; //pixelate \n\t\t\tvec2 local_uv = mod(v_coord * u_res, u_symbol_size) / u_symbol_size;\n\t\t\tlowp vec4 textureColor = texture2D(u_texture, uv );\n\t\t\tfloat lum = clamp(u_brightness * (textureColor.x + textureColor.y + textureColor.z)/3.0,0.0,1.0);\n\t\t\tif( u_invert == 1.0 ) lum = 1.0 - lum;\n\t\t\tfloat index = floor( lum * (u_row_simbols * u_row_simbols - 1.0));\n\t\t\tfloat col = mod( index, u_row_simbols );\n\t\t\tfloat row = u_row_simbols - floor( index / u_row_simbols ) - 1.0;\n\t\t\tvec2 simbol_uv = ( vec2( col, row ) + local_uv ) / u_row_simbols;\n\t\t\tvec4 color = texture2D( u_textureB, simbol_uv );\n\t\t\tif(u_colorize == 1.0)\n\t\t\t\tcolor *= textureColor;\n\t\t\tgl_FragColor = color;\n\t\t}\n\t\t",e.registerNodeType("texture/encode",b),x.title="Texture to Channels",x.desc="Split texture channels",x.prototype.onExecute=function(){var t=this.getInputData(0);if(t){this._channels||(this._channels=Array(4));for(var e=gl.RGB,n=0,r=0;r<4;r++)this.isOutputConnected(r)?(this._channels[r]&&this._channels[r].width==t.width&&this._channels[r].height==t.height&&this._channels[r].type==t.type&&this._channels[r].format==e||(this._channels[r]=new GL.Texture(t.width,t.height,{type:t.type,format:e,filter:gl.LINEAR})),n++):this._channels[r]=null;if(n){gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var i=Mesh.getScreenQuad(),o=x._shader,a=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];for(r=0;r<4;r++)this._channels[r]&&(this._channels[r].drawTo((function(){t.bind(0),o.uniforms({u_texture:0,u_mask:a[r]}).draw(i)})),this.setOutputData(r,this._channels[r]))}}},x.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec4 u_mask;\n\t\t\n\t\tvoid main() {\n\t\t   gl_FragColor = vec4( vec3( length( texture2D(u_texture, v_coord) * u_mask )), 1.0 );\n\t\t}\n\t\t",e.registerNodeType("texture/textureChannels",x),w.title="Channels to Texture",w.desc="Split texture channels",w.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},w.prototype.onExecute=function(){var t=r.getWhiteTexture(),e=this.getInputData(0)||t,n=this.getInputData(1)||t,i=this.getInputData(2)||t,o=this.getInputData(3)||t;gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var a=Mesh.getScreenQuad();w._shader||(w._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,w.pixel_shader));var s=w._shader,l=Math.max(e.width,n.width,i.width,o.width),u=Math.max(e.height,n.height,i.height,o.height),c=this.properties.precision==r.HIGH?r.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;this._texture&&this._texture.width==l&&this._texture.height==u&&this._texture.type==c||(this._texture=new GL.Texture(l,u,{type:c,format:gl.RGBA,filter:gl.LINEAR}));var p=this._color;p[0]=this.properties.R,p[1]=this.properties.G,p[2]=this.properties.B,p[3]=this.properties.A;var d=this._uniforms;this._texture.drawTo((function(){e.bind(0),n.bind(1),i.bind(2),o.bind(3),s.uniforms(d).draw(a)})),this.setOutputData(0,this._texture)},w.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_textureR;\n\t\tuniform sampler2D u_textureG;\n\t\tuniform sampler2D u_textureB;\n\t\tuniform sampler2D u_textureA;\n\t\tuniform vec4 u_color;\n\t\t\n\t\tvoid main() {\n\t\t   gl_FragColor = u_color * vec4( \t\t\t\t\ttexture2D(u_textureR, v_coord).r,\t\t\t\t\ttexture2D(u_textureG, v_coord).r,\t\t\t\t\ttexture2D(u_textureB, v_coord).r,\t\t\t\t\ttexture2D(u_textureA, v_coord).r);\n\t\t}\n\t\t",e.registerNodeType("texture/channelsTexture",w),E.title="Color",E.desc="Generates a 1x1 texture with a constant color",E.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},E.prototype.onDrawBackground=function(t){var e=this.properties.color;t.fillStyle="rgb("+Math.floor(255*clamp(e[0],0,1))+","+Math.floor(255*clamp(e[1],0,1))+","+Math.floor(255*clamp(e[2],0,1))+")",this.flags.collapsed?this.boxcolor=t.fillStyle:t.fillRect(0,0,this.size[0],this.size[1])},E.prototype.onExecute=function(){var t=this.properties.precision==r.HIGH?r.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;this._tex&&this._tex.type==t||(this._tex=new GL.Texture(1,1,{format:gl.RGBA,type:t,minFilter:gl.NEAREST}));var e=this.properties.color;if(this.inputs)for(var n=0;n<this.inputs.length;n++){var i=this.inputs[n],o=this.getInputData(n);if(void 0!==o)switch(i.name){case"RGB":case"RGBA":e.set(o);break;case"R":e[0]=o;break;case"G":e[1]=o;break;case"B":e[2]=o;break;case"A":e[3]=o}}vec4.sqrDist(this._tex_color,e)>.001&&(this._tex_color.set(e),this._tex.fill(e)),this.setOutputData(0,this._tex)},E.prototype.onGetInputs=function(){return[["RGB","vec3"],["RGBA","vec4"],["R","number"],["G","number"],["B","number"],["A","number"]]},e.registerNodeType("texture/color",E),T.title="Gradient",T.desc="Generates a gradient",T["@A"]={type:"color"},T["@B"]={type:"color"},T["@texture_size"]={type:"enum",values:[32,64,128,256,512]},T.prototype.onExecute=function(){gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var t=GL.Mesh.getScreenQuad(),e=T._shader,n=this.getInputData(0);n||(n=this.properties.A);var r=this.getInputData(1);r||(r=this.properties.B);for(var i=2;i<this.inputs.length;i++){var o=this.inputs[i],a=this.getInputData(i);void 0!==a&&(this.properties[o.name]=a)}var s=this._uniforms;this._uniforms.u_angle=this.properties.angle*DEG2RAD,this._uniforms.u_scale=this.properties.scale,vec3.copy(s.u_colorA,n),vec3.copy(s.u_colorB,r);var l=parseInt(this.properties.texture_size);this._tex&&this._tex.width==l||(this._tex=new GL.Texture(l,l,{format:gl.RGB,filter:gl.LINEAR})),this._tex.drawTo((function(){e.uniforms(s).draw(t)})),this.setOutputData(0,this._tex)},T.prototype.onGetInputs=function(){return[["angle","number"],["scale","number"]]},T.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform float u_angle;\n\t\tuniform float u_scale;\n\t\tuniform vec3 u_colorA;\n\t\tuniform vec3 u_colorB;\n\t\t\n\t\tvec2 rotate(vec2 v, float angle)\n\t\t{\n\t\t\tvec2 result;\n\t\t\tfloat _cos = cos(angle);\n\t\t\tfloat _sin = sin(angle);\n\t\t\tresult.x = v.x * _cos - v.y * _sin;\n\t\t\tresult.y = v.x * _sin + v.y * _cos;\n\t\t\treturn result;\n\t\t}\n\t\tvoid main() {\n\t\t\tfloat f = (rotate(u_scale * (v_coord - vec2(0.5)), u_angle) + vec2(0.5)).x;\n\t\t\tvec3 color = mix(u_colorA,u_colorB,clamp(f,0.0,1.0));\n\t\t   gl_FragColor = vec4(color,1.0);\n\t\t}\n\t\t",e.registerNodeType("texture/gradient",T),S.title="Mix",S.desc="Generates a texture mixing two textures",S.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},S.prototype.onExecute=function(){var t=this.getInputData(0);if(this.isOutputConnected(0))if(this.properties.precision!==r.PASS_THROUGH){var e=this.getInputData(1);if(t&&e){var n=this.getInputData(2),i=this.getInputData(3);this._tex=r.getTargetTexture(this.properties.size_from_biggest&&e.width>t.width?e:t,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var o=Mesh.getScreenQuad(),a=null,s=this._uniforms;if(n)(a=S._shader_tex)||(a=S._shader_tex=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,S.pixel_shader,{MIX_TEX:""}));else{(a=S._shader_factor)||(a=S._shader_factor=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,S.pixel_shader));var l=null==i?this.properties.factor:i;s.u_mix.set([l,l,l,l])}var u=this.properties.invert;this._tex.drawTo((function(){t.bind(u?1:0),e.bind(u?0:1),n&&n.bind(2),a.uniforms(s).draw(o)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,t)},S.prototype.onGetInputs=function(){return[["factor","number"]]},S.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_textureA;\n\t\tuniform sampler2D u_textureB;\n\t\t#ifdef MIX_TEX\n\t\t\tuniform sampler2D u_textureMix;\n\t\t#else\n\t\t\tuniform vec4 u_mix;\n\t\t#endif\n\t\t\n\t\tvoid main() {\n\t\t\t#ifdef MIX_TEX\n\t\t\t   vec4 f = texture2D(u_textureMix, v_coord);\n\t\t\t#else\n\t\t\t   vec4 f = u_mix;\n\t\t\t#endif\n\t\t   gl_FragColor = mix( texture2D(u_textureA, v_coord), texture2D(u_textureB, v_coord), f );\n\t\t}\n\t\t",e.registerNodeType("texture/mix",S),C.title="Edges",C.desc="Detects edges",C.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},C.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(this.properties.precision!==r.PASS_THROUGH){if(t){this._tex=r.getTargetTexture(t,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var e=Mesh.getScreenQuad(),n=C._shader,i=this.properties.invert,o=this.properties.factor,a=this.properties.threshold?1:0;this._tex.drawTo((function(){t.bind(0),n.uniforms({u_texture:0,u_isize:[1/t.width,1/t.height],u_factor:o,u_threshold:a,u_invert:i?1:0}).draw(e)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,t)}},C.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec2 u_isize;\n\t\tuniform int u_invert;\n\t\tuniform float u_factor;\n\t\tuniform float u_threshold;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 center = texture2D(u_texture, v_coord);\n\t\t\tvec4 up = texture2D(u_texture, v_coord + u_isize * vec2(0.0,1.0) );\n\t\t\tvec4 down = texture2D(u_texture, v_coord + u_isize * vec2(0.0,-1.0) );\n\t\t\tvec4 left = texture2D(u_texture, v_coord + u_isize * vec2(1.0,0.0) );\n\t\t\tvec4 right = texture2D(u_texture, v_coord + u_isize * vec2(-1.0,0.0) );\n\t\t\tvec4 diff = abs(center - up) + abs(center - down) + abs(center - left) + abs(center - right);\n\t\t\tdiff *= u_factor;\n\t\t\tif(u_invert == 1)\n\t\t\t\tdiff.xyz = vec3(1.0) - diff.xyz;\n\t\t\tif( u_threshold == 0.0 )\n\t\t\t\tgl_FragColor = vec4( diff.xyz, center.a );\n\t\t\telse\n\t\t\t\tgl_FragColor = vec4( diff.x > 0.5 ? 1.0 : 0.0, diff.y > 0.5 ? 1.0 : 0.0, diff.z > 0.5 ? 1.0 : 0.0, center.a );\n\t\t}\n\t\t",e.registerNodeType("texture/edges",C),O.title="Depth Range",O.desc="Generates a texture with a depth range",O.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(t){var e=gl.UNSIGNED_BYTE;this.properties.high_precision&&(e=gl.half_float_ext?gl.HALF_FLOAT_OES:gl.FLOAT),this._temp_texture&&this._temp_texture.type==e&&this._temp_texture.width==t.width&&this._temp_texture.height==t.height||(this._temp_texture=new GL.Texture(t.width,t.height,{type:e,format:gl.RGBA,filter:gl.LINEAR}));var n=this._uniforms,r=this.properties.distance;this.isInputConnected(1)&&(r=this.getInputData(1),this.properties.distance=r);var i=this.properties.range;this.isInputConnected(2)&&(i=this.getInputData(2),this.properties.range=i),n.u_distance=r,n.u_range=i,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var o=Mesh.getScreenQuad();O._shader||(O._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,O.pixel_shader),O._shader_onlydepth=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,O.pixel_shader,{ONLY_DEPTH:""}));var a=this.properties.only_depth?O._shader_onlydepth:O._shader,s=null;s=t.near_far_planes?t.near_far_planes:window.LS&&LS.Renderer._main_camera?LS.Renderer._main_camera._uniforms.u_camera_planes:[.1,1e3],n.u_camera_planes=s,this._temp_texture.drawTo((function(){t.bind(0),a.uniforms(n).draw(o)})),this._temp_texture.near_far_planes=s,this.setOutputData(0,this._temp_texture)}}},O.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec2 u_camera_planes;\n\t\tuniform float u_distance;\n\t\tuniform float u_range;\n\t\t\n\t\tfloat LinearDepth()\n\t\t{\n\t\t\tfloat zNear = u_camera_planes.x;\n\t\t\tfloat zFar = u_camera_planes.y;\n\t\t\tfloat depth = texture2D(u_texture, v_coord).x;\n\t\t\tdepth = depth * 2.0 - 1.0;\n\t\t\treturn zNear * (depth + 1.0) / (zFar + zNear - depth * (zFar - zNear));\n\t\t}\n\t\t\n\t\tvoid main() {\n\t\t\tfloat depth = LinearDepth();\n\t\t\t#ifdef ONLY_DEPTH\n\t\t\t   gl_FragColor = vec4(depth);\n\t\t\t#else\n\t\t\t\tfloat diff = abs(depth * u_camera_planes.y - u_distance);\n\t\t\t\tfloat dof = 1.0;\n\t\t\t\tif(diff <= u_range)\n\t\t\t\t\tdof = diff / u_range;\n\t\t\t   gl_FragColor = vec4(dof);\n\t\t\t#endif\n\t\t}\n\t\t",e.registerNodeType("texture/depth_range",O),L.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},L.title="Linear Depth",L.desc="Creates a color texture with linear depth",L.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(t&&(t.format==gl.DEPTH_COMPONENT||t.format==gl.DEPTH_STENCIL)){var e=this.properties.precision==r.HIGH?gl.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;this._temp_texture&&this._temp_texture.type==e&&this._temp_texture.width==t.width&&this._temp_texture.height==t.height||(this._temp_texture=new GL.Texture(t.width,t.height,{type:e,format:gl.RGB,filter:gl.LINEAR}));var n=this._uniforms;n.u_invert=this.properties.invert?1:0,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var i=Mesh.getScreenQuad();L._shader||(L._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,L.pixel_shader));var o=L._shader,a=null;a=t.near_far_planes?t.near_far_planes:window.LS&&LS.Renderer._main_camera?LS.Renderer._main_camera._uniforms.u_camera_planes:[.1,1e3],n.u_camera_planes=a,n.u_ires.set([0,0]),this._temp_texture.drawTo((function(){t.bind(0),o.uniforms(n).draw(i)})),this._temp_texture.near_far_planes=a,this.setOutputData(0,this._temp_texture)}}},L.pixel_shader="precision highp float;\n\t\tprecision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec2 u_camera_planes;\n\t\tuniform int u_invert;\n\t\tuniform vec2 u_ires;\n\t\t\n\t\tvoid main() {\n\t\t\tfloat zNear = u_camera_planes.x;\n\t\t\tfloat zFar = u_camera_planes.y;\n\t\t\tfloat depth = texture2D(u_texture, v_coord + u_ires*0.5).x * 2.0 - 1.0;\n\t\t\tfloat f = zNear * (depth + 1.0) / (zFar + zNear - depth * (zFar - zNear));\n\t\t\tif( u_invert == 1 )\n\t\t\t\tf = 1.0 - f;\n\t\t\tgl_FragColor = vec4(vec3(f),1.0);\n\t\t}\n\t\t",e.registerNodeType("texture/linear_depth",L),k.title="Blur",k.desc="Blur a texture",k.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},k.max_iterations=20,k.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){var n=this._final_texture;n&&n.width==t.width&&n.height==t.height&&n.type==t.type||(n=this._final_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR}));var r=this.properties.iterations;if(this.isInputConnected(1)&&(r=this.getInputData(1),this.properties.iterations=r),0!=(r=Math.min(Math.floor(r),k.max_iterations))){var i=this.properties.intensity;this.isInputConnected(2)&&(i=this.getInputData(2),this.properties.intensity=i);var o=e.camera_aspect;o||void 0===window.gl||(o=gl.canvas.height/gl.canvas.width),o||(o=1),o=this.properties.preserve_aspect?o:1;var a=this.properties.scale||[1,1];t.applyBlur(o*a[0],a[1],i,n);for(var s=1;s<r;++s)n.applyBlur(o*a[0]*(s+1),a[1]*(s+1),i);this.setOutputData(0,n)}else this.setOutputData(0,t)}},e.registerNodeType("texture/blur",k),I.prototype.applyFX=function(t,e,n,r){var i=t.width,o=t.height,a={format:t.format,type:t.type,minFilter:GL.LINEAR,magFilter:GL.LINEAR,wrap:gl.CLAMP_TO_EDGE},s=this._uniforms,l=this._textures;(d=I._cut_shader)||(d=I._cut_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.cut_pixel_shader)),gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),s.u_threshold=this.threshold;var u=l[0]=GL.Texture.getTemporary(i,o,a);t.blit(u,d.uniforms(s));var c=u,p=this.iterations;p=0|clamp(p,1,16);var d,h=s.u_texel_size,f=this.intensity;s.u_intensity=1,s.u_delta=this.scale,(d=I._shader)||(d=I._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.scale_pixel_shader));for(var g=1;g<p&&((0|o)>1&&(o>>=1),!((i>>=1)<2));g++)u=l[g]=GL.Texture.getTemporary(i,o,a),h[0]=1/c.width,h[1]=1/c.height,c.blit(u,d.uniforms(s)),c=u;for(r&&(h[0]=1/c.width,h[1]=1/c.height,s.u_intensity=f,s.u_delta=1,c.blit(r,d.uniforms(s))),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE),s.u_intensity=this.persistence,s.u_delta=.5,g-=2;g>=0;g--)u=l[g],l[g]=null,h[0]=1/c.width,h[1]=1/c.height,c.blit(u,d.uniforms(s)),GL.Texture.releaseTemporary(c),c=u;if(gl.disable(gl.BLEND),n&&c.blit(n),e){var v=e,m=this.dirt_texture,_=this.dirt_factor;s.u_intensity=f,(d=m?I._dirt_final_shader:I._final_shader)||(d=m?I._dirt_final_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.final_pixel_shader,{USE_DIRT:""}):I._final_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.final_pixel_shader)),v.drawTo((function(){t.bind(0),c.bind(1),m&&(d.setUniform("u_dirt_factor",_),d.setUniform("u_dirt_texture",m.bind(2))),d.toViewport(s)}))}GL.Texture.releaseTemporary(c)},I.cut_pixel_shader="precision highp float;\n\tvarying vec2 v_coord;\n\tuniform sampler2D u_texture;\n\tuniform float u_threshold;\n\tvoid main() {\n\t\tgl_FragColor = max( texture2D( u_texture, v_coord ) - vec4( u_threshold ), vec4(0.0) );\n\t}",I.scale_pixel_shader="precision highp float;\n\tvarying vec2 v_coord;\n\tuniform sampler2D u_texture;\n\tuniform vec2 u_texel_size;\n\tuniform float u_delta;\n\tuniform float u_intensity;\n\t\n\tvec4 sampleBox(vec2 uv) {\n\t\tvec4 o = u_texel_size.xyxy * vec2(-u_delta, u_delta).xxyy;\n\t\tvec4 s = texture2D( u_texture, uv + o.xy ) + texture2D( u_texture, uv + o.zy) + texture2D( u_texture, uv + o.xw) + texture2D( u_texture, uv + o.zw);\n\t\treturn s * 0.25;\n\t}\n\tvoid main() {\n\t\tgl_FragColor = u_intensity * sampleBox( v_coord );\n\t}",I.final_pixel_shader="precision highp float;\n\tvarying vec2 v_coord;\n\tuniform sampler2D u_texture;\n\tuniform sampler2D u_glow_texture;\n\t#ifdef USE_DIRT\n\t\tuniform sampler2D u_dirt_texture;\n\t#endif\n\tuniform vec2 u_texel_size;\n\tuniform float u_delta;\n\tuniform float u_intensity;\n\tuniform float u_dirt_factor;\n\t\n\tvec4 sampleBox(vec2 uv) {\n\t\tvec4 o = u_texel_size.xyxy * vec2(-u_delta, u_delta).xxyy;\n\t\tvec4 s = texture2D( u_glow_texture, uv + o.xy ) + texture2D( u_glow_texture, uv + o.zy) + texture2D( u_glow_texture, uv + o.xw) + texture2D( u_glow_texture, uv + o.zw);\n\t\treturn s * 0.25;\n\t}\n\tvoid main() {\n\t\tvec4 glow = sampleBox( v_coord );\n\t\t#ifdef USE_DIRT\n\t\t\tglow = mix( glow, glow * texture2D( u_dirt_texture, v_coord ), u_dirt_factor );\n\t\t#endif\n\t\tgl_FragColor = texture2D( u_texture, v_coord ) + u_intensity * glow;\n\t}",N.title="Glow",N.desc="Filters a texture giving it a glow effect",N.widgets_info={iterations:{type:"number",min:0,max:16,step:1,precision:0},threshold:{type:"number",min:0,max:10,step:.01,precision:2},precision:{widget:"combo",values:r.MODE_VALUES}},N.prototype.onGetInputs=function(){return[["enabled","boolean"],["threshold","number"],["intensity","number"],["persistence","number"],["iterations","number"],["dirt_factor","number"]]},N.prototype.onGetOutputs=function(){return[["average","Texture"]]},N.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isAnyOutputConnected())if(this.properties.precision!==r.PASS_THROUGH&&!1!==this.getInputOrProperty("enabled")){t.width,t.height;var e=this.fx;e.threshold=this.getInputOrProperty("threshold"),e.iterations=this.getInputOrProperty("iterations"),e.intensity=this.getInputOrProperty("intensity"),e.persistence=this.getInputOrProperty("persistence"),e.dirt_texture=this.getInputData(1),e.dirt_factor=this.getInputOrProperty("dirt_factor"),e.scale=this.properties.scale;var n=r.getTextureType(this.properties.precision,t),i=null;this.isOutputConnected(2)&&((i=this._average_texture)&&i.type==t.type&&i.format==t.format||(i=this._average_texture=new GL.Texture(1,1,{type:t.type,format:t.format,filter:gl.LINEAR})));var o=null;this.isOutputConnected(1)&&((o=this._glow_texture)&&o.width==t.width&&o.height==t.height&&o.type==n&&o.format==t.format||(o=this._glow_texture=new GL.Texture(t.width,t.height,{type:n,format:t.format,filter:gl.LINEAR})));var a=null;this.isOutputConnected(0)&&((a=this._final_texture)&&a.width==t.width&&a.height==t.height&&a.type==n&&a.format==t.format||(a=this._final_texture=new GL.Texture(t.width,t.height,{type:n,format:t.format,filter:gl.LINEAR}))),e.applyFX(t,a,o,i),this.isOutputConnected(0)&&this.setOutputData(0,a),this.isOutputConnected(1)&&this.setOutputData(1,i),this.isOutputConnected(2)&&this.setOutputData(2,o)}else this.setOutputData(0,t)},e.registerNodeType("texture/glow",N),D.title="Kuwahara Filter",D.desc="Filters a texture giving an artistic oil canvas painting",D.max_radius=10,D._shaders=[],D.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){var n=this._temp_texture;n&&n.width==t.width&&n.height==t.height&&n.type==t.type||(this._temp_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR}));var r=this.properties.radius;if(0!=(r=Math.min(Math.floor(r),D.max_radius))){var i=this.properties.intensity,o=e.camera_aspect;o||void 0===window.gl||(o=gl.canvas.height/gl.canvas.width),o||(o=1),o=this.properties.preserve_aspect?o:1,D._shaders[r]||(D._shaders[r]=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,D.pixel_shader,{RADIUS:r.toFixed(0)}));var a=D._shaders[r],s=GL.Mesh.getScreenQuad();t.bind(0),this._temp_texture.drawTo((function(){a.uniforms({u_texture:0,u_intensity:i,u_resolution:[t.width,t.height],u_iResolution:[1/t.width,1/t.height]}).draw(s)})),this.setOutputData(0,this._temp_texture)}else this.setOutputData(0,t)}},D.pixel_shader="\nprecision highp float;\nvarying vec2 v_coord;\nuniform sampler2D u_texture;\nuniform float u_intensity;\nuniform vec2 u_resolution;\nuniform vec2 u_iResolution;\n#ifndef RADIUS\n\t#define RADIUS 7\n#endif\nvoid main() {\n\n\tconst int radius = RADIUS;\n\tvec2 fragCoord = v_coord;\n\tvec2 src_size = u_iResolution;\n\tvec2 uv = v_coord;\n\tfloat n = float((radius + 1) * (radius + 1));\n\tint i;\n\tint j;\n\tvec3 m0 = vec3(0.0); vec3 m1 = vec3(0.0); vec3 m2 = vec3(0.0); vec3 m3 = vec3(0.0);\n\tvec3 s0 = vec3(0.0); vec3 s1 = vec3(0.0); vec3 s2 = vec3(0.0); vec3 s3 = vec3(0.0);\n\tvec3 c;\n\t\n\tfor (int j = -radius; j <= 0; ++j)  {\n\t\tfor (int i = -radius; i <= 0; ++i)  {\n\t\t\tc = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;\n\t\t\tm0 += c;\n\t\t\ts0 += c * c;\n\t\t}\n\t}\n\t\n\tfor (int j = -radius; j <= 0; ++j)  {\n\t\tfor (int i = 0; i <= radius; ++i)  {\n\t\t\tc = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;\n\t\t\tm1 += c;\n\t\t\ts1 += c * c;\n\t\t}\n\t}\n\t\n\tfor (int j = 0; j <= radius; ++j)  {\n\t\tfor (int i = 0; i <= radius; ++i)  {\n\t\t\tc = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;\n\t\t\tm2 += c;\n\t\t\ts2 += c * c;\n\t\t}\n\t}\n\t\n\tfor (int j = 0; j <= radius; ++j)  {\n\t\tfor (int i = -radius; i <= 0; ++i)  {\n\t\t\tc = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;\n\t\t\tm3 += c;\n\t\t\ts3 += c * c;\n\t\t}\n\t}\n\t\n\tfloat min_sigma2 = 1e+2;\n\tm0 /= n;\n\ts0 = abs(s0 / n - m0 * m0);\n\t\n\tfloat sigma2 = s0.r + s0.g + s0.b;\n\tif (sigma2 < min_sigma2) {\n\t\tmin_sigma2 = sigma2;\n\t\tgl_FragColor = vec4(m0, 1.0);\n\t}\n\t\n\tm1 /= n;\n\ts1 = abs(s1 / n - m1 * m1);\n\t\n\tsigma2 = s1.r + s1.g + s1.b;\n\tif (sigma2 < min_sigma2) {\n\t\tmin_sigma2 = sigma2;\n\t\tgl_FragColor = vec4(m1, 1.0);\n\t}\n\t\n\tm2 /= n;\n\ts2 = abs(s2 / n - m2 * m2);\n\t\n\tsigma2 = s2.r + s2.g + s2.b;\n\tif (sigma2 < min_sigma2) {\n\t\tmin_sigma2 = sigma2;\n\t\tgl_FragColor = vec4(m2, 1.0);\n\t}\n\t\n\tm3 /= n;\n\ts3 = abs(s3 / n - m3 * m3);\n\t\n\tsigma2 = s3.r + s3.g + s3.b;\n\tif (sigma2 < min_sigma2) {\n\t\tmin_sigma2 = sigma2;\n\t\tgl_FragColor = vec4(m3, 1.0);\n\t}\n}\n",e.registerNodeType("texture/kuwahara",D),A.title="XDoG Filter",A.desc="Filters a texture giving an artistic ink style",A.max_radius=10,A._shaders=[],A.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){var e=this._temp_texture;e&&e.width==t.width&&e.height==t.height&&e.type==t.type||(this._temp_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR})),A._xdog_shader||(A._xdog_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,A.xdog_pixel_shader));var n=A._xdog_shader,r=GL.Mesh.getScreenQuad(),i=this.properties.sigma,o=this.properties.k,a=this.properties.p,s=this.properties.epsilon,l=this.properties.phi;t.bind(0),this._temp_texture.drawTo((function(){n.uniforms({src:0,sigma:i,k:o,p:a,epsilon:s,phi:l,cvsWidth:t.width,cvsHeight:t.height}).draw(r)})),this.setOutputData(0,this._temp_texture)}},A.xdog_pixel_shader="\nprecision highp float;\nuniform sampler2D src;\n\nuniform float cvsHeight;\nuniform float cvsWidth;\n\nuniform float sigma;\nuniform float k;\nuniform float p;\nuniform float epsilon;\nuniform float phi;\nvarying vec2 v_coord;\n\nfloat cosh(float val)\n{\n\tfloat tmp = exp(val);\n\tfloat cosH = (tmp + 1.0 / tmp) / 2.0;\n\treturn cosH;\n}\n\nfloat tanh(float val)\n{\n\tfloat tmp = exp(val);\n\tfloat tanH = (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);\n\treturn tanH;\n}\n\nfloat sinh(float val)\n{\n\tfloat tmp = exp(val);\n\tfloat sinH = (tmp - 1.0 / tmp) / 2.0;\n\treturn sinH;\n}\n\nvoid main(void){\n\tvec3 destColor = vec3(0.0);\n\tfloat tFrag = 1.0 / cvsHeight;\n\tfloat sFrag = 1.0 / cvsWidth;\n\tvec2 Frag = vec2(sFrag,tFrag);\n\tvec2 uv = gl_FragCoord.st;\n\tfloat twoSigmaESquared = 2.0 * sigma * sigma;\n\tfloat twoSigmaRSquared = twoSigmaESquared * k * k;\n\tint halfWidth = int(ceil( 1.0 * sigma * k ));\n\n\tconst int MAX_NUM_ITERATION = 99999;\n\tvec2 sum = vec2(0.0);\n\tvec2 norm = vec2(0.0);\n\n\tfor(int cnt=0;cnt<MAX_NUM_ITERATION;cnt++){\n\t\tif(cnt > (2*halfWidth+1)*(2*halfWidth+1)){break;}\n\t\tint i = int(cnt / (2*halfWidth+1)) - halfWidth;\n\t\tint j = cnt - halfWidth - int(cnt / (2*halfWidth+1)) * (2*halfWidth+1);\n\n\t\tfloat d = length(vec2(i,j));\n\t\tvec2 kernel = vec2( exp( -d * d / twoSigmaESquared ), \n\t\t\t\t\t\t\texp( -d * d / twoSigmaRSquared ));\n\n\t\tvec2 L = texture2D(src, (uv + vec2(i,j)) * Frag).xx;\n\n\t\tnorm += kernel;\n\t\tsum += kernel * L;\n\t}\n\n\tsum /= norm;\n\n\tfloat H = 100.0 * ((1.0 + p) * sum.x - p * sum.y);\n\tfloat edge = ( H > epsilon )? 1.0 : 1.0 + tanh( phi * (H - epsilon));\n\tdestColor = vec3(edge);\n\tgl_FragColor = vec4(destColor, 1.0);\n}",e.registerNodeType("texture/xDoG",A),G.title="Webcam",G.desc="Webcam texture",G.is_webcam_open=!1,G.prototype.openStream=function(){if(navigator.getUserMedia){this._waiting_confirmation=!0;var t={audio:!1,video:{facingMode:this.properties.facingMode}};navigator.mediaDevices.getUserMedia(t).then(this.streamReady.bind(this)).catch((function(t){G.is_webcam_open=!1,console.log("Webcam rejected",t),e._webcam_stream=!1,e.boxcolor="red",e.trigger("stream_error")}));var e=this}},G.prototype.closeStream=function(){if(this._webcam_stream){var t=this._webcam_stream.getTracks();if(t.length)for(var e=0;e<t.length;++e)t[e].stop();G.is_webcam_open=!1,this._webcam_stream=null,this._video=null,this.boxcolor="black",this.trigger("stream_closed")}},G.prototype.streamReady=function(t){this._webcam_stream=t,this.boxcolor="green";var e=this._video;e||((e=document.createElement("video")).autoplay=!0,e.srcObject=t,this._video=e,e.onloadedmetadata=function(t){G.is_webcam_open=!0,console.log(t)}),this.trigger("stream_ready",e)},G.prototype.onPropertyChanged=function(t,e){"facingMode"==t&&(this.properties.facingMode=e,this.closeStream(),this.openStream())},G.prototype.onRemoved=function(){if(this._webcam_stream){var t=this._webcam_stream.getTracks();if(t.length)for(var e=0;e<t.length;++e)t[e].stop();this._webcam_stream=null,this._video=null}},G.prototype.onDrawBackground=function(t){this.flags.collapsed||this.size[1]<=20||this._video&&(t.save(),t.webgl?this._video_texture&&t.drawImage(this._video_texture,0,0,this.size[0],this.size[1]):t.drawImage(this._video,0,0,this.size[0],this.size[1]),t.restore())},G.prototype.onExecute=function(){if(null!=this._webcam_stream||this._waiting_confirmation||this.openStream(),this._video&&this._video.videoWidth){var t=this._video.videoWidth,e=this._video.videoHeight,n=this._video_texture;if(n&&n.width==t&&n.height==e||(this._video_texture=new GL.Texture(t,e,{format:gl.RGB,filter:gl.LINEAR})),this._video_texture.uploadImage(this._video),this._video_texture.version=++this.version,this.properties.texture_name)r.getTexturesContainer()[this.properties.texture_name]=this._video_texture;this.setOutputData(0,this._video_texture);for(var i=1;i<this.outputs.length;++i)if(this.outputs[i])switch(this.outputs[i].name){case"width":this.setOutputData(i,this._video.videoWidth);break;case"height":this.setOutputData(i,this._video.videoHeight)}}},G.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["stream_ready",e.EVENT],["stream_closed",e.EVENT],["stream_error",e.EVENT]]},e.registerNodeType("texture/webcam",G),R.title="Lens FX",R.desc="distortion and chromatic aberration",R.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},R.prototype.onGetInputs=function(){return[["enabled","boolean"]]},R.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0))if(this.properties.precision!==r.PASS_THROUGH&&!1!==this.getInputOrProperty("enabled")){var e=this._temp_texture;e&&e.width==t.width&&e.height==t.height&&e.type==t.type||(e=this._temp_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR}));var n=R._shader;n||(n=R._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,R.pixel_shader));var i=this.getInputData(1);null==i&&(i=this.properties.factor);var o=this._uniforms;o.u_factor=i,gl.disable(gl.DEPTH_TEST),e.drawTo((function(){t.bind(0),n.uniforms(o).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,e)}else this.setOutputData(0,t)},R.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_factor;\n\t\tvec2 barrelDistortion(vec2 coord, float amt) {\n\t\t\tvec2 cc = coord - 0.5;\n\t\t\tfloat dist = dot(cc, cc);\n\t\t\treturn coord + cc * dist * amt;\n\t\t}\n\t\t\n\t\tfloat sat( float t )\n\t\t{\n\t\t\treturn clamp( t, 0.0, 1.0 );\n\t\t}\n\t\t\n\t\tfloat linterp( float t ) {\n\t\t\treturn sat( 1.0 - abs( 2.0*t - 1.0 ) );\n\t\t}\n\t\t\n\t\tfloat remap( float t, float a, float b ) {\n\t\t\treturn sat( (t - a) / (b - a) );\n\t\t}\n\t\t\n\t\tvec4 spectrum_offset( float t ) {\n\t\t\tvec4 ret;\n\t\t\tfloat lo = step(t,0.5);\n\t\t\tfloat hi = 1.0-lo;\n\t\t\tfloat w = linterp( remap( t, 1.0/6.0, 5.0/6.0 ) );\n\t\t\tret = vec4(lo,1.0,hi, 1.) * vec4(1.0-w, w, 1.0-w, 1.);\n\t\t\n\t\t\treturn pow( ret, vec4(1.0/2.2) );\n\t\t}\n\t\t\n\t\tconst float max_distort = 2.2;\n\t\tconst int num_iter = 12;\n\t\tconst float reci_num_iter_f = 1.0 / float(num_iter);\n\t\t\n\t\tvoid main()\n\t\t{\t\n\t\t\tvec2 uv=v_coord;\n\t\t\tvec4 sumcol = vec4(0.0);\n\t\t\tvec4 sumw = vec4(0.0);\t\n\t\t\tfor ( int i=0; i<num_iter;++i )\n\t\t\t{\n\t\t\t\tfloat t = float(i) * reci_num_iter_f;\n\t\t\t\tvec4 w = spectrum_offset( t );\n\t\t\t\tsumw += w;\n\t\t\t\tsumcol += w * texture2D( u_texture, barrelDistortion(uv, .6 * max_distort*t * u_factor ) );\n\t\t\t}\n\t\t\tgl_FragColor = sumcol / sumw;\n\t\t}",e.registerNodeType("texture/lensfx",R),P.title="Data->Tex",P.desc="Generates or applies a curve to a texture",P.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},P.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(t){var e=this.properties.channels,n=this.properties.width,i=this.properties.height;n&&i||(n=Math.floor(t.length/e),i=1);var o=gl.RGBA;3==e?o=gl.RGB:1==e&&(o=gl.LUMINANCE);var a=this._temp_texture,s=r.getTextureType(this.properties.precision);a&&a.width==n&&a.height==i&&a.type==s||(a=this._temp_texture=new GL.Texture(n,i,{type:s,format:o,filter:gl.LINEAR})),a.uploadData(t),this.setOutputData(0,a)}}},e.registerNodeType("texture/fromdata",P),M.title="Curve",M.desc="Generates or applies a curve to a texture",M.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},M.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0),e=this._temp_texture;if(!t)return!this._must_update&&this._curve_texture||this.updateCurve(),void this.setOutputData(0,this._curve_texture);var n=r.getTextureType(this.properties.precision,t);e&&e.type==n&&e.width==t.width&&e.height==t.height&&e.format==t.format||(e=this._temp_texture=new GL.Texture(t.width,t.height,{type:n,format:t.format,filter:gl.LINEAR}));var i=M._shader;i||(i=M._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,M.pixel_shader)),!this._must_update&&this._curve_texture||this.updateCurve();var o=this._uniforms,a=this._curve_texture;e.drawTo((function(){gl.disable(gl.DEPTH_TEST),t.bind(0),a.bind(1),i.uniforms(o).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,e)}},M.prototype.sampleCurve=function(t,e){if(e=e||this._points.RGB){for(var n=0;n<e.length-1;++n){var r=e[n],i=e[n+1];if(!(i[0]<t)){var o=i[0]-r[0];if(Math.abs(o)<1e-5)return r[1];var a=(t-r[0])/o;return r[1]*(1-a)+i[1]*a}}return 0}},M.prototype.updateCurve=function(){for(var t=this._values,e=t.length/4,n=this.properties.split_channels,r=0;r<e;++r){if(n)t[4*r]=clamp(255*this.sampleCurve(r/e,this._points.R),0,255),t[4*r+1]=clamp(255*this.sampleCurve(r/e,this._points.G),0,255),t[4*r+2]=clamp(255*this.sampleCurve(r/e,this._points.B),0,255);else{var i=this.sampleCurve(r/e);t[4*r]=t[4*r+1]=t[4*r+2]=clamp(255*i,0,255)}t[4*r+3]=255}this._curve_texture||(this._curve_texture=new GL.Texture(256,1,{format:gl.RGBA,magFilter:gl.LINEAR,wrap:gl.CLAMP_TO_EDGE})),this._curve_texture.uploadData(t,null,!0)},M.prototype.onSerialize=function(t){var e={};for(var n in this._points)e[n]=this._points[n].concat();t.curves=e},M.prototype.onConfigure=function(t){this._points=t.curves,this.curve_editor&&(curve_editor.points=this._points),this._must_update=!0},M.prototype.onMouseDown=function(t,e,n){if(this.curve_editor){var r=this.curve_editor.onMouseDown([e[0],e[1]-this.curve_offset],n);return r&&this.captureInput(!0),r}},M.prototype.onMouseMove=function(t,e,n){if(this.curve_editor)return this.curve_editor.onMouseMove([e[0],e[1]-this.curve_offset],n)},M.prototype.onMouseUp=function(t,e,n){if(this.curve_editor)return this.curve_editor.onMouseUp([e[0],e[1]-this.curve_offset],n);this.captureInput(!1)},M.channel_line_colors={RGB:"#666",R:"#F33",G:"#3F3",B:"#33F"},M.prototype.onDrawBackground=function(t,n){if(!this.flags.collapsed){this.curve_editor||(this.curve_editor=new e.CurveEditor(this._points.R)),t.save(),t.translate(0,this.curve_offset);var r=this.widgets[1].value;this.properties.split_channels?("RGB"==r&&(this.widgets[1].value=r="R",this.widgets[1].disabled=!1),this.curve_editor.points=this._points.R,this.curve_editor.draw(t,[this.size[0],this.size[1]-this.curve_offset],n,"#111",M.channel_line_colors.R,!0),t.globalCompositeOperation="lighten",this.curve_editor.points=this._points.G,this.curve_editor.draw(t,[this.size[0],this.size[1]-this.curve_offset],n,null,M.channel_line_colors.G,!0),this.curve_editor.points=this._points.B,this.curve_editor.draw(t,[this.size[0],this.size[1]-this.curve_offset],n,null,M.channel_line_colors.B,!0),t.globalCompositeOperation="source-over"):(this.widgets[1].value=r="RGB",this.widgets[1].disabled=!0),this.curve_editor.points=this._points[r],this.curve_editor.draw(t,[this.size[0],this.size[1]-this.curve_offset],n,this.properties.split_channels?null:"#111",M.channel_line_colors[r]),t.restore()}},M.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform sampler2D u_curve;\n\t\tuniform float u_range;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D( u_texture, v_coord ) * u_range;\n\t\t\tcolor.x = texture2D( u_curve, vec2( color.x, 0.5 ) ).x;\n\t\t\tcolor.y = texture2D( u_curve, vec2( color.y, 0.5 ) ).y;\n\t\t\tcolor.z = texture2D( u_curve, vec2( color.z, 0.5 ) ).z;\n\t\t\t//color.w = texture2D( u_curve, vec2( color.w, 0.5 ) ).w;\n\t\t\tgl_FragColor = color;\n\t\t}",e.registerNodeType("texture/curve",M),z.title="Exposition",z.desc="Controls texture exposition",z.widgets_info={exposition:{widget:"slider",min:0,max:3},precision:{widget:"combo",values:r.MODE_VALUES}},z.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0)){var e=this._temp_texture;e&&e.width==t.width&&e.height==t.height&&e.type==t.type||(e=this._temp_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR}));var n=z._shader;n||(n=z._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,z.pixel_shader));this.properties.exposition;var r=this.getInputData(1);null!=r&&(this.properties.exposition=r);var i=this._uniforms;e.drawTo((function(){gl.disable(gl.DEPTH_TEST),t.bind(0),n.uniforms(i).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,e)}},z.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_exposition;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D( u_texture, v_coord );\n\t\t\tgl_FragColor = vec4( color.xyz * u_exposition, color.a );\n\t\t}",e.registerNodeType("texture/exposition",z),F.title="Tone Mapping",F.desc="Applies Tone Mapping to convert from high to low",F.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES}},F.prototype.onGetInputs=function(){return[["enabled","boolean"]]},F.prototype.onExecute=function(){var t=this.getInputData(0);if(t&&this.isOutputConnected(0))if(this.properties.precision!==r.PASS_THROUGH&&!1!==this.getInputOrProperty("enabled")){var e=this._temp_texture;e&&e.width==t.width&&e.height==t.height&&e.type==t.type||(e=this._temp_texture=new GL.Texture(t.width,t.height,{type:t.type,format:gl.RGBA,filter:gl.LINEAR}));var n=this.getInputData(1);null==n&&(n=this.properties.average_lum);var i=this._uniforms,o=null;n.constructor===Number?(this.properties.average_lum=n,i.u_average_lum=this.properties.average_lum,(o=F._shader)||(o=F._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,F.pixel_shader))):n.constructor===GL.Texture&&(i.u_average_texture=n.bind(1),(o=F._shader_texture)||(o=F._shader_texture=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,F.pixel_shader,{AVG_TEXTURE:""}))),i.u_lumwhite2=this.properties.lum_white*this.properties.lum_white,i.u_scale=this.properties.scale,i.u_igamma=1/this.properties.gamma,gl.disable(gl.DEPTH_TEST),e.drawTo((function(){t.bind(0),o.uniforms(i).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,this._temp_texture)}else this.setOutputData(0,t)},F.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform float u_scale;\n\t\t#ifdef AVG_TEXTURE\n\t\t\tuniform sampler2D u_average_texture;\n\t\t#else\n\t\t\tuniform float u_average_lum;\n\t\t#endif\n\t\tuniform float u_lumwhite2;\n\t\tuniform float u_igamma;\n\t\tvec3 RGB2xyY (vec3 rgb)\n\t\t{\n\t\t\t const mat3 RGB2XYZ = mat3(0.4124, 0.3576, 0.1805,\n\t\t\t\t\t\t\t\t\t   0.2126, 0.7152, 0.0722,\n\t\t\t\t\t\t\t\t\t   0.0193, 0.1192, 0.9505);\n\t\t\tvec3 XYZ = RGB2XYZ * rgb;\n\t\t\t\n\t\t\tfloat f = (XYZ.x + XYZ.y + XYZ.z);\n\t\t\treturn vec3(XYZ.x / f,\n\t\t\t\t\t\tXYZ.y / f,\n\t\t\t\t\t\tXYZ.y);\n\t\t}\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 color = texture2D( u_texture, v_coord );\n\t\t\tvec3 rgb = color.xyz;\n\t\t\tfloat average_lum = 0.0;\n\t\t\t#ifdef AVG_TEXTURE\n\t\t\t\tvec3 pixel = texture2D(u_average_texture,vec2(0.5)).xyz;\n\t\t\t\taverage_lum = (pixel.x + pixel.y + pixel.z) / 3.0;\n\t\t\t#else\n\t\t\t\taverage_lum = u_average_lum;\n\t\t\t#endif\n\t\t\t//Ld - this part of the code is the same for both versions\n\t\t\tfloat lum = dot(rgb, vec3(0.2126, 0.7152, 0.0722));\n\t\t\tfloat L = (u_scale / average_lum) * lum;\n\t\t\tfloat Ld = (L * (1.0 + L / u_lumwhite2)) / (1.0 + L);\n\t\t\t//first\n\t\t\t//vec3 xyY = RGB2xyY(rgb);\n\t\t\t//xyY.z *= Ld;\n\t\t\t//rgb = xyYtoRGB(xyY);\n\t\t\t//second\n\t\t\trgb = (rgb / lum) * Ld;\n\t\t\trgb = max(rgb,vec3(0.001));\n\t\t\trgb = pow( rgb, vec3( u_igamma ) );\n\t\t\tgl_FragColor = vec4( rgb, color.a );\n\t\t}",e.registerNodeType("texture/tonemapping",F),B.title="Perlin",B.desc="Generates a perlin noise texture",B.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES},width:{type:"number",precision:0,step:1},height:{type:"number",precision:0,step:1},octaves:{type:"number",precision:0,step:1,min:1,max:50}},B.prototype.onGetInputs=function(){return[["seed","number"],["persistence","number"],["octaves","number"],["scale","number"],["amplitude","number"],["offset","vec2"]]},B.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=0|this.properties.width,e=0|this.properties.height;0==t&&(t=gl.viewport_data[2]),0==e&&(e=gl.viewport_data[3]);var n=r.getTextureType(this.properties.precision),i=this._texture;i&&i.width==t&&i.height==e&&i.type==n||(i=this._texture=new GL.Texture(t,e,{type:n,format:gl.RGB,filter:gl.LINEAR}));var o=this.getInputOrProperty("persistence"),a=this.getInputOrProperty("octaves"),s=this.getInputOrProperty("offset"),l=this.getInputOrProperty("scale"),u=this.getInputOrProperty("amplitude"),c=this.getInputOrProperty("seed"),p=""+t+e+n+o+a+l+c+s[0]+s[1]+u;if(p!=this._key){this._key=p;var d=this._uniforms;d.u_persistence=o,d.u_octaves=a,d.u_offset.set(s),d.u_scale=l,d.u_amplitude=u,d.u_seed=128*c,d.u_viewport[0]=t,d.u_viewport[1]=e;var h=B._shader;h||(h=B._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,B.pixel_shader)),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),i.drawTo((function(){h.uniforms(d).draw(GL.Mesh.getScreenQuad())})),this.setOutputData(0,i)}else this.setOutputData(0,i)}},B.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform vec2 u_offset;\n\t\tuniform float u_scale;\n\t\tuniform float u_persistence;\n\t\tuniform int u_octaves;\n\t\tuniform float u_amplitude;\n\t\tuniform vec2 u_viewport;\n\t\tuniform float u_seed;\n\t\t#define M_PI 3.14159265358979323846\n\t\t\n\t\tfloat rand(vec2 c){\treturn fract(sin(dot(c.xy ,vec2( 12.9898 + u_seed,78.233 + u_seed))) * 43758.5453); }\n\t\t\n\t\tfloat noise(vec2 p, float freq ){\n\t\t\tfloat unit = u_viewport.x/freq;\n\t\t\tvec2 ij = floor(p/unit);\n\t\t\tvec2 xy = mod(p,unit)/unit;\n\t\t\t//xy = 3.*xy*xy-2.*xy*xy*xy;\n\t\t\txy = .5*(1.-cos(M_PI*xy));\n\t\t\tfloat a = rand((ij+vec2(0.,0.)));\n\t\t\tfloat b = rand((ij+vec2(1.,0.)));\n\t\t\tfloat c = rand((ij+vec2(0.,1.)));\n\t\t\tfloat d = rand((ij+vec2(1.,1.)));\n\t\t\tfloat x1 = mix(a, b, xy.x);\n\t\t\tfloat x2 = mix(c, d, xy.x);\n\t\t\treturn mix(x1, x2, xy.y);\n\t\t}\n\t\t\n\t\tfloat pNoise(vec2 p, int res){\n\t\t\tfloat persistance = u_persistence;\n\t\t\tfloat n = 0.;\n\t\t\tfloat normK = 0.;\n\t\t\tfloat f = 4.;\n\t\t\tfloat amp = 1.0;\n\t\t\tint iCount = 0;\n\t\t\tfor (int i = 0; i<50; i++){\n\t\t\t\tn+=amp*noise(p, f);\n\t\t\t\tf*=2.;\n\t\t\t\tnormK+=amp;\n\t\t\t\tamp*=persistance;\n\t\t\t\tif (iCount >= res)\n\t\t\t\t\tbreak;\n\t\t\t\tiCount++;\n\t\t\t}\n\t\t\tfloat nf = n/normK;\n\t\t\treturn nf*nf*nf*nf;\n\t\t}\n\t\tvoid main() {\n\t\t\tvec2 uv = v_coord * u_scale * u_viewport + u_offset * u_scale;\n\t\t\tvec4 color = vec4( pNoise( uv, u_octaves ) * u_amplitude );\n\t\t\tgl_FragColor = color;\n\t\t}",e.registerNodeType("texture/perlin",B),j.title="Canvas2D",j.desc="Executes Canvas2D code inside a texture or the viewport.",j.help="Set width and height to 0 to match viewport size.",j.default_code="//vars: canvas,ctx,time\nctx.fillStyle='red';\nctx.fillRect(0,0,50,50);\n",j.widgets_info={precision:{widget:"combo",values:r.MODE_VALUES},code:{type:"code"},width:{type:"number",precision:0,step:1},height:{type:"number",precision:0,step:1}},j.prototype.onPropertyChanged=function(t,e){"code"==t&&this.compileCode(e)},j.prototype.compileCode=function(t){if(this._func=null,e.allow_scripts)try{this._func=new Function("canvas","ctx","time","script","v",t),this.boxcolor="#00FF00"}catch(n){this.boxcolor="#FF0000",console.error("Error parsing script"),console.error(n)}},j.prototype.onExecute=function(){var t=this._func;t&&this.isOutputConnected(0)&&this.executeDraw(t)},j.prototype.executeDraw=function(e){var n=this.properties.width||gl.canvas.width,i=this.properties.height||gl.canvas.height,o=this._temp_texture,a=r.getTextureType(this.properties.precision);o&&o.width==n&&o.height==i&&o.type==a||(o=this._temp_texture=new GL.Texture(n,i,{format:gl.RGBA,filter:gl.LINEAR,type:a}));var s=this.getInputData(0),l=this.properties,u=this,c=this.graph.getTime(),p=gl,d=gl.canvas;if(!this.properties.use_html_canvas&&t.enableWebGLCanvas||(this._canvas?(d=this._canvas,p=this._ctx):(d=this._canvas=createCanvas(n.height),p=this._ctx=d.getContext("2d")),d.width=n,d.height=i),p==gl)o.drawTo((function(){gl.start2D(),l.clear&&(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT));try{e.draw?e.draw.call(u,d,p,c,e,s):e.call(u,d,p,c,e,s),u.boxcolor="#00FF00"}catch(t){u.boxcolor="#FF0000",console.error("Error executing script"),console.error(t)}gl.finish2D()}));else{l.clear&&p.clearRect(0,0,d.width,d.height);try{e.draw?e.draw.call(this,d,p,c,e,s):e.call(this,d,p,c,e,s),this.boxcolor="#00FF00"}catch(h){this.boxcolor="#FF0000",console.error("Error executing script"),console.error(h)}o.uploadImage(d)}this.setOutputData(0,o)},e.registerNodeType("texture/canvas2D",j),H.title="Matte",H.desc="Extracts background",H.widgets_info={key_color:{widget:"color"},precision:{widget:"combo",values:r.MODE_VALUES}},H.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(this.properties.precision!==r.PASS_THROUGH){if(t){this._tex=r.getTargetTexture(t,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),this._uniforms||(this._uniforms={u_texture:0,u_key_color:this.properties.key_color,u_threshold:1,u_slope:1});var e=this._uniforms,n=Mesh.getScreenQuad(),i=H._shader;i||(i=H._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,H.pixel_shader)),e.u_key_color=this.properties.key_color,e.u_threshold=this.properties.threshold,e.u_slope=this.properties.slope,this._tex.drawTo((function(){t.bind(0),i.uniforms(e).draw(n)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,t)}},H.pixel_shader="precision highp float;\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tuniform vec3 u_key_color;\n\t\tuniform float u_threshold;\n\t\tuniform float u_slope;\n\t\t\n\t\tvoid main() {\n\t\t\tvec3 color = texture2D( u_texture, v_coord ).xyz;\n\t\t\tfloat diff = length( normalize(color) - normalize(u_key_color) );\n\t\t\tfloat edge = u_threshold * (1.0 - u_slope);\n\t\t\tfloat alpha = smoothstep( edge, u_threshold, diff);\n\t\t\tgl_FragColor = vec4( color, alpha );\n\t\t}",e.registerNodeType("texture/matte",H),U.title="CubemapToTexture2D",U.desc="Transforms a CUBEMAP texture into a TEXTURE2D in Polar Representation",U.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);if(t&&t.texture_type==GL.TEXTURE_CUBE_MAP){!this._last_tex||this._last_tex.height==t.height&&this._last_tex.type==t.type||(this._last_tex=null);var e=this.getInputOrProperty("yaw");this._last_tex=GL.Texture.cubemapToTexture2D(t,t.height,this._last_tex,!0,e),this.setOutputData(0,this._last_tex)}}},e.registerNodeType("texture/cubemapToTexture2D",U))}(this),function(t){if("undefined"!=typeof GL){var e=t.LiteGraph,n=(t.LGraphCanvas,"#345"),r=e.Shaders={},i=(r.GLSL_types=["float","vec2","vec3","vec4","mat3","mat4","sampler2D","samplerCube"],r.GLSL_types_const=["float","vec2","vec3","vec4"]),o={radians:"T radians(T degrees)",degrees:"T degrees(T radians)",sin:"T sin(T angle)",cos:"T cos(T angle)",tan:"T tan(T angle)",asin:"T asin(T x)",acos:"T acos(T x)",atan:"T atan(T x)",atan2:"T atan(T x,T y)",pow:"T pow(T x,T y)",exp:"T exp(T x)",log:"T log(T x)",exp2:"T exp2(T x)",log2:"T log2(T x)",sqrt:"T sqrt(T x)",inversesqrt:"T inversesqrt(T x)",abs:"T abs(T x)",sign:"T sign(T x)",floor:"T floor(T x)",round:"T round(T x)",ceil:"T ceil(T x)",fract:"T fract(T x)",mod:"T mod(T x,T y)",min:"T min(T x,T y)",max:"T max(T x,T y)",clamp:"T clamp(T x,T minVal = 0.0,T maxVal = 1.0)",mix:"T mix(T x,T y,T a)",step:"T step(T edge, T edge2, T x)",smoothstep:"T smoothstep(T edge, T edge2, T x)",length:"float length(T x)",distance:"float distance(T p0, T p1)",normalize:"T normalize(T x)",dot:"float dot(T x,T y)",cross:"vec3 cross(vec3 x,vec3 y)",reflect:"vec3 reflect(vec3 V,vec3 N)",refract:"vec3 refract(vec3 V,vec3 N, float IOR)"},a={},s=[];d(),r.ALL_TYPES="float,vec2,vec3,vec4",r.registerShaderNode=h,r.getInputLinkID=g,r.getOutputLinkID=v,r.getShaderNodeVarName=f,r.parseGLSLDescriptions=d;var l=e.valueToGLSL=function(t,e,n){var r=5;if(null!=n&&(r=n),!e)if(t.constructor===Number)e="float";else{if(!t.length)throw"unknown type for glsl value: "+t.constructor;switch(t.length){case 2:e="vec2";break;case 3:e="vec3";break;case 4:e="vec4";break;case 9:e="mat3";break;case 16:e="mat4";break;default:throw"unknown type for glsl value size"}}switch(e){case"float":return t.toFixed(r);case"vec2":return"vec2("+t[0].toFixed(r)+","+t[1].toFixed(r)+")";case"color3":case"vec3":return"vec3("+t[0].toFixed(r)+","+t[1].toFixed(r)+","+t[2].toFixed(r)+")";case"color4":case"vec4":return"vec4("+t[0].toFixed(r)+","+t[1].toFixed(r)+","+t[2].toFixed(r)+","+t[3].toFixed(r)+")";case"mat3":return"mat3(1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0)";case"mat4":return"mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0)";default:throw e}return""},u=e.varToTypeGLSL=function(t,e,n){if(e==n)return t;if(null==t)switch(n){case"float":return"0.0";case"vec2":return"vec2(0.0)";case"vec3":return"vec3(0.0)";case"vec4":return"vec4(0.0,0.0,0.0,1.0)";default:return null}if(!n)throw"error: no output type specified";if("float"==n)switch(e){case"vec2":case"vec3":case"vec4":return t+".x";default:return"0.0"}else if("vec2"==n)switch(e){case"float":return"vec2("+t+")";case"vec3":case"vec4":return t+".xy";default:return"vec2(0.0)"}else if("vec3"==n)switch(e){case"float":return"vec3("+t+")";case"vec2":return"vec3("+t+",0.0)";case"vec4":return t+".xyz";default:return"vec3(0.0)"}else if("vec4"==n)switch(e){case"float":return"vec4("+t+")";case"vec2":return"vec4("+t+",0.0,1.0)";case"vec3":return"vec4("+t+",1.0)";default:return"vec4(0.0,0.0,0.0,1.0)"}throw"type cannot be converted"},c=e.convertVarToGLSLType=function(t,e,n){if(e==n)return t;if("float"==e)return n+"("+t+")";if("vec2"==n)return"vec2("+t+".xy)";if("vec3"==n){if("vec2"==e)return"vec3("+t+",0.0)";if("vec4"==e)return"vec4("+t+".xyz)"}if("vec4"==n){if("vec2"==e)return"vec4("+t+",0.0,0.0)";if("vec3"==n)return"vec4("+t+",1.0)"}return null};m.prototype.clear=function(){this._uniforms={},this._functions={},this._codeparts={},this._uniform_value=null,this.extra={}},m.prototype.addUniform=function(t,e,n){this._uniforms[t]=e,null!=n&&(this._uniform_value||(this._uniform_value={}),this._uniform_value[t]=n)},m.prototype.addFunction=function(t,e){this._functions[t]=e},m.prototype.addCode=function(t,e,n){for(var r in n=n||{"":""}){var i=r?r+"_"+t:t;this._codeparts[i]?this._codeparts[i]+=e+"\n":this._codeparts[i]=e+"\n"}},m.prototype.computeCodeBlocks=function(t,e){this.clear();var n=t.findNodesByType("shader::output/vertex");n=n&&n.length?n[0]:null;var r=t.findNodesByType("shader::output/fragcolor");if(!(r=r&&r.length?r[0]:null))return null;t.sendEventToAllNodes("clearDestination"),n&&n.propagateDestination("vs"),r&&r.propagateDestination("fs"),t.sendEventToAllNodes("onGetCode",this);var i="";for(var o in this._uniforms)i+="uniform "+this._uniforms[o]+" "+o+";\n";if(e)for(var o in e)i+="uniform "+e[o]+" "+o+";\n";var a="";for(var o in this._functions)a+="//"+o+"\n"+this._functions[o]+"\n";var s=this._codeparts;return s.uniforms=i,s.functions=a,s},m.prototype.computeShaderCode=function(t){var e=this.computeCodeBlocks(t);return{vs_code:GL.Shader.replaceCodeUsingContext(this.vs_template,e),fs_code:GL.Shader.replaceCodeUsingContext(this.fs_template,e)}},m.prototype.computeShader=function(t,n){var r=this.computeShaderCode(t);if(console.log(r.vs_code,r.fs_code),!e.catch_exceptions)return this._shader_error=!0,n?n.updateShader(r.vs_code,r.fs_code):n=new GL.Shader(r.vs_code,r.fs_code),this._shader_error=!1,n;try{return n?n.updateShader(r.vs_code,r.fs_code):n=new GL.Shader(r.vs_code,r.fs_code),this._shader_error=!1,n}catch(i){return this._shader_error||(console.error(i),-1!=i.indexOf("Fragment shader")?console.log(r.fs_code.split("\n").map((function(t,e){return e+".- "+t})).join("\n")):console.log(r.vs_code)),this._shader_error=!0,null}return null},m.prototype.getShader=function(t){if(this._shader&&this._shader._version==t._version)return this._shader;var e=this.computeShader(t,this._shader);return e?(this._shader=e,e._version=t._version,e):null},m.prototype.fillUniforms=function(t,e){if(this._uniform_value)for(var n in this._uniform_value){var r=this._uniform_value[n];null!=r&&(r.constructor===Function?t[n]=r.call(this,e):r.constructor===GL.Texture||(t[n]=r))}},e.ShaderContext=e.Shaders.Context=m,_.template="\n#define FRAGMENT\nprecision highp float;\nvarying vec2 v_coord;\n{{varying}}\n{{uniforms}}\n{{functions}}\n{{fs_functions}}\nvoid main() {\n\nvec2 uv = v_coord;\nvec4 fragcolor = vec4(0.0);\nvec4 fragcolor1 = vec4(0.0);\n{{fs_code}}\ngl_FragColor = fragcolor;\n}\n\t",_.widgets_info={precision:{widget:"combo",values:LGraphTexture.MODE_VALUES}},_.title="ShaderGraph",_.desc="Builds a shader using a graph",_.input_node_type="input/uniform",_.output_node_type="output/fragcolor",_.title_color=n,_.prototype.onSerialize=function(t){t.subgraph=this.subgraph.serialize()},_.prototype.onConfigure=function(t){this.subgraph.configure(t.subgraph)},_.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputData(0);t&&t.constructor!=GL.Texture&&(t=null);var e=0|this.properties.width,n=0|this.properties.height;0==e&&(e=t?t.width:gl.viewport_data[2]),0==n&&(n=t?t.height:gl.viewport_data[3]);var r=LGraphTexture.getTextureType(this.properties.precision,t),i=this._texture;i&&i.width==e&&i.height==n&&i.type==r||(i=this._texture=new GL.Texture(e,n,{type:r,format:this.alpha?gl.RGBA:gl.RGB,filter:gl.LINEAR}));var o=this.getShader(this.subgraph);if(o){var a=this._uniforms;this._context.fillUniforms(a);var s=0;if(this.inputs)for(var l=0;l<this.inputs.length;++l){var u=this.inputs[l],c=this.getInputData(l);"texture"==u.type&&(c||(c=GL.Texture.getWhiteTexture()),c=c.bind(s++)),null!=c&&(a["u_"+u.name]=c)}var p=GL.Mesh.getScreenQuad();gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),i.drawTo((function(){o.uniforms(a),o.draw(p)})),this.setOutputData(0,i)}}},_.prototype.onInputAdded=function(t){var n=e.createNode("shader::input/uniform");n.setProperty("name",t.name),n.setProperty("type",t.type),this.subgraph.add(n)},_.prototype.onInputRemoved=function(t,e){for(var n=this.subgraph.findNodesByType("shader::input/uniform"),r=0;r<n.length;++r){var i=n[r];i.properties.name==e.name&&this.subgraph.remove(i)}},_.prototype.computeSize=function(){var t=this.inputs?this.inputs.length:0,n=this.outputs?this.outputs.length:0;return[200,Math.max(t,n)*e.NODE_SLOT_HEIGHT+e.NODE_TITLE_HEIGHT+10]},_.prototype.getShader=function(){var t=this._context.getShader(this.subgraph);return this.boxcolor=t?null:"red",t},_.prototype.onDrawBackground=function(t,n,r,i){if(!this.flags.collapsed){var o=this.getOutputData(0),a=this.inputs?this.inputs.length*e.NODE_SLOT_HEIGHT:0;o&&t==o.gl&&this.size[1]>a+e.NODE_TITLE_HEIGHT&&t.drawImage(o,10,s,this.size[0]-20,this.size[1]-a-e.NODE_TITLE_HEIGHT);var s=this.size[1]-e.NODE_TITLE_HEIGHT+.5,l=e.isInsideRectangle(i[0],i[1],this.pos[0],this.pos[1]+s,this.size[0],e.NODE_TITLE_HEIGHT);t.fillStyle=l?"#555":"#222",t.beginPath(),this._shape==e.BOX_SHAPE?t.rect(0,s,this.size[0]+1,e.NODE_TITLE_HEIGHT):t.roundRect(0,s,this.size[0]+1,e.NODE_TITLE_HEIGHT,0,8),t.fill(),t.textAlign="center",t.font="24px Arial",t.fillStyle=l?"#DDD":"#999",t.fillText("+",.5*this.size[0],s+24)}},_.prototype.onMouseDown=function(t,n,r){var i=this.size[1]-e.NODE_TITLE_HEIGHT+.5;n[1]>i&&r.showSubgraphPropertiesDialog(this)},_.prototype.onDrawSubgraphBackground=function(t){},_.prototype.getExtraMenuOptions=function(t){var e=this;return[{content:"Print Code",callback:function(){var t=e._context.computeShaderCode();console.log(t.vs_code,t.fs_code)}}]},e.registerNodeType("texture/shaderGraph",_),y.title="Uniform",y.desc="Input data for the shader",y.prototype.getTitle=function(){return this.properties.name&&this.flags.collapsed?this.properties.type+" "+this.properties.name:"Uniform"},y.prototype.onPropertyChanged=function(t,e){this.outputs[0].name=this.properties.type+" "+this.properties.name},y.prototype.onGetCode=function(t){if(this.shader_destination){var e=this.properties.type;if(!e){if(!t.onGetPropertyInfo)return;var n=t.onGetPropertyInfo(this.property.name);if(!n)return;e=n.type}"number"==e?e="float":"texture"==e&&(e="sampler2D"),-1!=r.GLSL_types.indexOf(e)&&(t.addUniform("u_"+this.properties.name,e),this.setOutputData(0,e))}},y.prototype.getOutputVarName=function(t){return"u_"+this.properties.name},h("input/uniform",y),b.title="Attribute",b.desc="Input data from mesh attribute",b.prototype.getTitle=function(){return"att. "+this.properties.name},b.prototype.onGetCode=function(t){if(this.shader_destination){var e=this.properties.type;e&&-1!=r.GLSL_types.indexOf(e)&&("number"==e&&(e="float"),"coord"!=this.properties.name&&t.addCode("varying"," varying "+e+" v_"+this.properties.name+";"),this.setOutputData(0,e))}},b.prototype.getOutputVarName=function(t){return"v_"+this.properties.name},h("input/attribute",b),x.title="Sampler2D",x.desc="Reads a pixel from a texture",x.prototype.onGetCode=function(t){if(this.shader_destination){var e=g(this,0),n=f(this),r="vec4 "+n+" = vec4(0.0);\n";if(e)r+=n+" = texture2D("+e+","+(g(this,1)||t.buffer_names.uvs)+");\n";v(this,0)&&(r+="vec4 "+v(this,0)+" = "+n+";\n"),v(this,1)&&(r+="vec3 "+v(this,1)+" = "+n+".xyz;\n"),t.addCode("code",r,this.shader_destination),this.setOutputData(0,"vec4"),this.setOutputData(1,"vec3")}},h("texture/sampler2D",x),w.title="const",w.prototype.getTitle=function(){return this.flags.collapsed?l(this.properties.value,this.properties.type,2):"Const"},w.prototype.onPropertyChanged=function(t,e){"type"==t&&(this.outputs[0].type!=e&&(this.disconnectOutput(0),this.outputs[0].type=e),this.widgets.length=1,this.updateWidgets()),"value"==t&&(e.length?(this.widgets[1].value=e[1],e.length>2&&(this.widgets[2].value=e[2]),e.length>3&&(this.widgets[3].value=e[3])):this.widgets[1].value=e)},w.prototype.updateWidgets=function(t){var e=this,n=(t=this.properties.value,{step:.01});switch(this.properties.type){case"float":this.properties.value=0,this.addWidget("number","v",0,{step:.01,property:"value"});break;case"vec2":this.properties.value=t&&2==t.length?[t[0],t[1]]:[0,0,0],this.addWidget("number","x",this.properties.value[0],(function(t){e.properties.value[0]=t}),n),this.addWidget("number","y",this.properties.value[1],(function(t){e.properties.value[1]=t}),n);break;case"vec3":this.properties.value=t&&3==t.length?[t[0],t[1],t[2]]:[0,0,0],this.addWidget("number","x",this.properties.value[0],(function(t){e.properties.value[0]=t}),n),this.addWidget("number","y",this.properties.value[1],(function(t){e.properties.value[1]=t}),n),this.addWidget("number","z",this.properties.value[2],(function(t){e.properties.value[2]=t}),n);break;case"vec4":this.properties.value=t&&4==t.length?[t[0],t[1],t[2],t[3]]:[0,0,0,0],this.addWidget("number","x",this.properties.value[0],(function(t){e.properties.value[0]=t}),n),this.addWidget("number","y",this.properties.value[1],(function(t){e.properties.value[1]=t}),n),this.addWidget("number","z",this.properties.value[2],(function(t){e.properties.value[2]=t}),n),this.addWidget("number","w",this.properties.value[3],(function(t){e.properties.value[3]=t}),n);break;default:console.error("unknown type for constant")}},w.prototype.onGetCode=function(t){if(this.shader_destination){var e=l(this.properties.value,this.properties.type),n=v(this,0);if(n){var r="\t"+this.properties.type+" "+n+" = "+e+";";t.addCode("code",r,this.shader_destination),this.setOutputData(0,this.properties.type)}}},h("const/const",w),E.title="vec2",E.varmodes=["xy","x","y"],E.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},E.prototype.onGetCode=function(t){if(this.shader_destination){for(var e=this.properties,n=f(this),r="\tvec2 "+n+" = "+l([e.x,e.y])+";\n",o=0;o<E.varmodes.length;++o){var a=E.varmodes[o],s=g(this,o);s&&(r+="\t"+n+"."+a+" = "+s+";\n")}for(o=0;o<E.varmodes.length;++o){a=E.varmodes[o];var u=v(this,o);if(u){var c=i[a.length-1];r+="\t"+c+" "+u+" = "+n+"."+a+";\n",this.setOutputData(o,c)}}t.addCode("code",r,this.shader_destination)}},h("const/vec2",E),T.title="vec3",T.varmodes=["xyz","x","y","z","xy","xz","yz"],T.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},T.prototype.onGetCode=function(t){if(this.shader_destination){for(var e=this.properties,n=f(this),r="vec3 "+n+" = "+l([e.x,e.y,e.z])+";\n",o=0;o<T.varmodes.length;++o){var a=T.varmodes[o],s=g(this,o);s&&(r+="\t"+n+"."+a+" = "+s+";\n")}for(o=0;o<T.varmodes.length;++o){a=T.varmodes[o];var u=v(this,o);if(u){var c=i[a.length-1];r+="\t"+c+" "+u+" = "+n+"."+a+";\n",this.setOutputData(o,c)}}t.addCode("code",r,this.shader_destination)}},h("const/vec3",T),S.title="vec4",S.varmodes=["xyzw","xyz","x","y","z","w","xy","yz","zw"],S.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},S.prototype.onGetCode=function(t){if(this.shader_destination){for(var e=this.properties,n=f(this),r="vec4 "+n+" = "+l([e.x,e.y,e.z,e.w])+";\n",o=0;o<S.varmodes.length;++o){var a=S.varmodes[o],s=g(this,o);s&&(r+="\t"+n+"."+a+" = "+s+";\n")}for(o=0;o<S.varmodes.length;++o){a=S.varmodes[o];var u=v(this,o);if(u){var c=i[a.length-1];r+="\t"+c+" "+u+" = "+n+"."+a+";\n",this.setOutputData(o,c)}}t.addCode("code",r,this.shader_destination)}},h("const/vec4",S),C.title="FragColor",C.desc="Pixel final color",C.prototype.onGetCode=function(t){var e=g(this,0);if(e){var n=this.getInputData(0),r=u(e,n,"vec4");t.addCode("fs_code","fragcolor = "+r+";")}},h("output/fragcolor",C),O.title="Operation",O.operations=["+","-","*","/"],O.prototype.getTitle=function(){return this.flags.collapsed?"A"+this.properties.operation+"B":"Operation"},O.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){for(var e=[],n=0;n<3;++n)e.push({name:g(this,n),type:this.getInputData(n)||"float"});var r=v(this,0);if(r){var i=e[0].type,o=i,a=this.properties.operation,s=[];for(n=0;n<2;++n){var l=e[n].name;null==l&&(l=null!=p.value?p.value:"(1.0)",e[n].type="float"),e[n].type!=i&&("float"!=e[n].type||"*"!=a&&"/"!=a)&&(l=c(l,e[n].type,i)),s.push(l)}t.addCode("code",o+" "+r+" = "+s[0]+a+s[1]+";",this.shader_destination),this.setOutputData(0,o)}}},h("math/operation",O),L.title="Func",L.prototype.onPropertyChanged=function(t,e){if(this.graph&&this.graph._version++,"func"==t){var n=a[e];if(!n)return;for(var i=n.params.length;i<this.inputs.length;++i)this.removeInput(i);for(i=0;i<n.params.length;++i){var o=n.params[i];this.inputs[i]?this.inputs[i].name=o.name+(o.value?" ("+o.value+")":""):this.addInput(o.name,r.ALL_TYPES)}}},L.prototype.getTitle=function(){return this.flags.collapsed?this.properties.func:"Func"},L.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){for(var e=[],n=0;n<3;++n)e.push({name:g(this,n),type:this.getInputData(n)||"float"});var r=v(this,0);if(r){var i=a[this.properties.func];if(i){var o=e[0].type,s=i.return_type;"T"==s&&(s=o);var l=[];for(n=0;n<i.params.length;++n){var u=i.params[n],p=e[n].name;null==p&&(p=null!=u.value?u.value:"(1.0)",e[n].type="float"),("T"==u.type&&e[n].type!=o||"T"!=u.type&&e[n].type!=o)&&(p=c(p,e[n].type,o)),l.push(p)}t.addFunction("round","float round(float v){ return floor(v+0.5); }\nvec2 round(vec2 v){ return floor(v+vec2(0.5));}\nvec3 round(vec3 v){ return floor(v+vec3(0.5));}\nvec4 round(vec4 v){ return floor(v+vec4(0.5)); }\n"),t.addCode("code",s+" "+r+" = "+i.func+"("+l.join(",")+");",this.shader_destination),this.setOutputData(0,s)}}}},h("math/func",L),k.title="Snippet",k.prototype.onPropertyChanged=function(t,e){this.graph&&this.graph._version++,"type"==t&&this.outputs[0].type!=e&&(this.disconnectOutput(0),this.outputs[0].type=e)},k.prototype.getTitle=function(){return this.flags.collapsed?this.properties.code:"Snippet"},k.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=g(this,0);e||(e="1.0");var n=g(this,1);n||(n="1.0");var r=v(this,0);if(r){var i=this.getInputData(0)||"float",o=this.getInputData(1)||"float",a=this.properties.type;if("T"==i||"T"==o)return null;var s="funcSnippet"+this.id,l="\n"+a+" "+s+"( "+i+" A, "+o+" B) {\n";l+="\t"+a+" C = "+a+"(0.0);\n",l+="\t"+this.properties.code+";\n",l+="\treturn C;\n}\n",t.addCode("functions",l,this.shader_destination),t.addCode("code",a+" "+r+" = "+s+"("+e+","+n+");",this.shader_destination),this.setOutputData(0,a)}}},h("utils/snippet",k),I.title="Rand",I.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=v(this,0);t.addUniform("u_rand"+this.id,"float",(function(){return Math.random()})),t.addCode("code","float "+e+" = u_rand"+this.id+";",this.shader_destination),this.setOutputData(0,"float")}},h("input/rand",I),N.NOISE_TYPES=["noise","rand"],N.title="noise",N.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=g(this,0),n=v(this,0),r=this.getInputData(0);e||(r="vec2",e=t.buffer_names.uvs),t.addFunction("noise",N.shader_functions),t.addUniform("u_noise_scale"+this.id,"float",this.properties.scale),"float"==r?t.addCode("code","float "+n+" = snoise( vec2("+e+") * u_noise_scale"+this.id+");",this.shader_destination):"vec2"==r||"vec3"==r?t.addCode("code","float "+n+" = snoise("+e+" * u_noise_scale"+this.id+");",this.shader_destination):"vec4"==r&&t.addCode("code","float "+n+" = snoise("+e+".xyz * u_noise_scale"+this.id+");",this.shader_destination),this.setOutputData(0,"float")}},h("math/noise",N),N.shader_functions="\nvec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,-0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),dot(p2,x2), dot(p3,x3) ) );\n}\n\nvec3 hash3( vec2 p ){\n    vec3 q = vec3( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)), \n\t\t\t\t   dot(p,vec2(419.2,371.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\nvec4 hash4( vec3 p ){\n    vec4 q = vec4( dot(p,vec3(127.1,311.7,257.3)), \n\t\t\t\t   dot(p,vec3(269.5,183.3,335.1)), \n\t\t\t\t   dot(p,vec3(314.5,235.1,467.3)), \n\t\t\t\t   dot(p,vec3(419.2,371.9,114.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\n\nfloat iqnoise( in vec2 x, float u, float v ){\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n\t\n\tfloat k = 1.0+63.0*pow(1.0-v,4.0);\n\t\n\tfloat va = 0.0;\n\tfloat wt = 0.0;\n    for( int j=-2; j<=2; j++ )\n    for( int i=-2; i<=2; i++ )\n    {\n        vec2 g = vec2( float(i),float(j) );\n\t\tvec3 o = hash3( p + g )*vec3(u,u,1.0);\n\t\tvec2 r = g - f + o.xy;\n\t\tfloat d = dot(r,r);\n\t\tfloat ww = pow( 1.0-smoothstep(0.0,1.414,sqrt(d)), k );\n\t\tva += o.z*ww;\n\t\twt += ww;\n    }\n\t\n    return va/wt;\n}\n",D.title="Time",D.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=v(this,0);t.addUniform("u_time"+this.id,"float",(function(){return.001*getTime()})),t.addCode("code","float "+e+" = u_time"+this.id+";",this.shader_destination),this.setOutputData(0,"float")}},h("input/time",D),A.title="Dither",A.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=g(this,0),n="float",r=v(this,0),i=this.getInputData(0);e=u(e,i,"float"),t.addFunction("dither8x8",A.dither_func),t.addCode("code",n+" "+r+" = dither8x8("+e+");",this.shader_destination),this.setOutputData(0,n)}},A.dither_values=[.515625,.140625,.640625,.046875,.546875,.171875,.671875,.765625,.265625,.890625,.390625,.796875,.296875,.921875,.421875,.203125,.703125,.078125,.578125,.234375,.734375,.109375,.609375,.953125,.453125,.828125,.328125,.984375,.484375,.859375,.359375,.0625,.5625,.1875,.6875,.03125,.53125,.15625,.65625,.8125,.3125,.9375,.4375,.78125,.28125,.90625,.40625,.25,.75,.125,.625,.21875,.71875,.09375,.59375,1.0001,.5,.875,.375,.96875,.46875,.84375,.34375],A.dither_func="\n\t\tfloat dither8x8(float brightness) {\n\t\t  vec2 position = vec2(0.0);\n\t\t  #ifdef FRAGMENT\n\t\t\tposition = gl_FragCoord.xy;\n\t\t  #endif\n\t\t  int x = int(mod(position.x, 8.0));\n\t\t  int y = int(mod(position.y, 8.0));\n\t\t  int index = x + y * 8;\n\t\t  float limit = 0.0;\n\t\t  if (x < 8) {\n\t\t\tif(index==0) limit = 0.015625;\n\t\t\t"+A.dither_values.map((function(t,e){return"else if(index== "+(e+1)+") limit = "+t+";"})).join("\n")+"\n\t\t  }\n\t\t  return brightness < limit ? 0.0 : 1.0;\n\t\t}\n",h("math/dither",A),G.title="Remap",G.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},G.prototype.onConnectionsChange=function(){var t=this.getInputDataType(0);this.outputs[0].type=t||"T"},G.prototype.onGetCode=function(t){if(this.shader_destination&&this.isOutputConnected(0)){var e=g(this,0),n=v(this,0);if(e||n){var r=this.getInputDataType(0);if(this.outputs[0].type=r,"T"!=r)if(e){var i=l(this.properties.min_value),o=l(this.properties.max_value),a=l(this.properties.min_value2),s=l(this.properties.max_value2);t.addCode("code",r+" "+n+" = ( ("+e+" - "+i+") / ("+o+" - "+i+") ) * ("+s+" - "+a+") + "+a+";",this.shader_destination),this.setOutputData(0,r)}else t.addCode("code","\t"+r+" "+n+" = "+r+"(0.0);\n");else console.warn("node type is T and cannot be resolved")}}},h("math/remap",G)}function d(){for(var t in s.length=0,o){var e=o[t],n=e.indexOf(" "),r=e.substr(0,n),i=e.indexOf("(",n),l=e.substr(n,i-n).trim(),u=e.substr(i+1,e.length-i-2).split(",");for(var c in u){var p=u[c].split(" ").filter((function(t){return t}));u[c]={type:p[0].trim(),name:p[1].trim()},"="==p[2]&&(u[c].value=p[3].trim())}a[t]={return_type:r,func:l,params:u},s.push(l)}}function h(t,r){r.color=n,r.filter="shader",r.prototype.clearDestination=function(){this.shader_destination={}},r.prototype.propagateDestination=function(t){if(this.shader_destination[t]=!0,this.inputs)for(var e=0;e<this.inputs.length;++e){var n=this.getInputNode(e);n&&n.propagateDestination(t)}},r.prototype.onPropertyChanged||(r.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++}),e.registerNodeType("shader::"+t,r)}function f(t,e){return"VAR_"+(e||"TEMP")+"_"+t.id}function g(t,e){if(!t.inputs)return null;var n=t.getInputLink(e);if(!n)return null;var r=t.graph.getNodeById(n.origin_id);return r?r.getOutputVarName?r.getOutputVarName(n.origin_slot):"link_"+r.id+"_"+n.origin_slot:null}function v(t,e){return t.isOutputConnected(e)?"link_"+t.id+"_"+e:null}function m(){this.vs_template="",this.fs_template="",this.buffer_names={uvs:"v_coord"},this.extra={},this._functions={},this._uniforms={},this._codeparts={},this._uniform_value=null}function _(){this.subgraph=new e.LGraph,this.subgraph._subgraph_node=this,this.subgraph._is_subgraph=!0,this.subgraph.filter="shader",this.addInput("in","texture"),this.addOutput("out","texture"),this.properties={width:0,height:0,alpha:!1,precision:"undefined"!=typeof LGraphTexture?LGraphTexture.DEFAULT:2};var t=this.subgraph.findNodesByType("shader::input/uniform")[0];t.pos=[200,300];var n=e.createNode("shader::texture/sampler2D");n.pos=[400,300],this.subgraph.add(n);var r=e.createNode("shader::output/fragcolor");r.pos=[600,300],this.subgraph.add(r),t.connect(0,n),n.connect(0,r),this.size=[180,60],this.redraw_on_mouse=!0,this._uniforms={},this._shader=null,this._context=new m,this._context.vs_template="#define VERTEX\n"+GL.Shader.SCREEN_VERTEX_SHADER,this._context.fs_template=_.template}function y(){this.addOutput("out",""),this.properties={name:"",type:""}}function b(){this.addOutput("out","vec2"),this.properties={name:"coord",type:"vec2"}}function x(){this.addInput("tex","sampler2D"),this.addInput("uv","vec2"),this.addOutput("rgba","vec4"),this.addOutput("rgb","vec3")}function w(){this.addOutput("","float"),this.properties={type:"float",value:0},this.addWidget("combo","type","float",null,{values:i,property:"type"}),this.updateWidgets()}function E(){this.addInput("xy","vec2"),this.addInput("x","float"),this.addInput("y","float"),this.addOutput("xy","vec2"),this.addOutput("x","float"),this.addOutput("y","float"),this.properties={x:0,y:0}}function T(){this.addInput("xyz","vec3"),this.addInput("x","float"),this.addInput("y","float"),this.addInput("z","float"),this.addInput("xy","vec2"),this.addInput("xz","vec2"),this.addInput("yz","vec2"),this.addOutput("xyz","vec3"),this.addOutput("x","float"),this.addOutput("y","float"),this.addOutput("z","float"),this.addOutput("xy","vec2"),this.addOutput("xz","vec2"),this.addOutput("yz","vec2"),this.properties={x:0,y:0,z:0}}function S(){this.addInput("xyzw","vec4"),this.addInput("xyz","vec3"),this.addInput("x","float"),this.addInput("y","float"),this.addInput("z","float"),this.addInput("w","float"),this.addInput("xy","vec2"),this.addInput("yz","vec2"),this.addInput("zw","vec2"),this.addOutput("xyzw","vec4"),this.addOutput("xyz","vec3"),this.addOutput("x","float"),this.addOutput("y","float"),this.addOutput("z","float"),this.addOutput("xy","vec2"),this.addOutput("yz","vec2"),this.addOutput("zw","vec2"),this.properties={x:0,y:0,z:0,w:0}}function C(){this.addInput("color",r.ALL_TYPES),this.block_delete=!0}function O(){this.addInput("A",r.ALL_TYPES),this.addInput("B",r.ALL_TYPES),this.addOutput("out",""),this.properties={operation:"*"},this.addWidget("combo","op.",this.properties.operation,{property:"operation",values:O.operations})}function L(){this.addInput("A",r.ALL_TYPES),this.addInput("B",r.ALL_TYPES),this.addOutput("out",""),this.properties={func:"floor"},this._current="floor",this.addWidget("combo","func",this.properties.func,{property:"func",values:s})}function k(){this.addInput("A",r.ALL_TYPES),this.addInput("B",r.ALL_TYPES),this.addOutput("C","vec4"),this.properties={code:"C = A+B",type:"vec4"},this.addWidget("text","code",this.properties.code,{property:"code"}),this.addWidget("combo","type",this.properties.type,{values:["float","vec2","vec3","vec4"],property:"type"})}function I(){this.addOutput("out","float")}function N(){this.addInput("out",r.ALL_TYPES),this.addInput("scale","float"),this.addOutput("out","float"),this.properties={type:"noise",scale:1},this.addWidget("combo","type",this.properties.type,{property:"type",values:N.NOISE_TYPES}),this.addWidget("number","scale",this.properties.scale,{property:"scale"})}function D(){this.addOutput("out","float")}function A(){this.addInput("in","T"),this.addOutput("out","float")}function G(){this.addInput("",r.ALL_TYPES),this.addOutput("",""),this.properties={min_value:0,max_value:1,min_value2:0,max_value2:1},this.addWidget("number","min",0,{step:.1,property:"min_value"}),this.addWidget("number","max",1,{step:.1,property:"max_value"}),this.addWidget("number","min2",0,{step:.1,property:"min_value2"}),this.addWidget("number","max2",1,{step:.1,property:"max_value2"})}}(this),function(t){var e=t.LiteGraph,n=new Float32Array(16),r=new Float32Array(16),o=new Float32Array(16),a=new Float32Array(16),s={u_view:n,u_projection:r,u_viewprojection:o,u_model:a};function l(){return 1e5*Math.random()|0}function u(){this.addInput("obj",""),this.addInput("radius","number"),this.addOutput("out","geometry"),this.addOutput("points","[vec3]"),this.properties={radius:1,num_points:4096,generate_normals:!0,regular:!1,mode:u.SPHERE,force_update:!1},this.points=new Float32Array(3*this.properties.num_points),this.normals=new Float32Array(3*this.properties.num_points),this.must_update=!0,this.version=0;var t=this;this.addWidget("button","update",null,(function(){t.must_update=!0})),this.geometry={vertices:null,_id:l()},this._old_obj=null,this._last_radius=null}function c(t,e){var n=t.length,r=0,i=0,o=n;if(0==n)return-1;if(1==n)return 0;for(;o>=r;){var a=t[i=.5*(o+r)|0];if(a==e)return i;if(r==o-1)return r;a<e?r=i:o=i}return i}function p(){this.addInput("points","geometry"),this.addOutput("instances","[mat4]"),this.properties={mode:1,autoupdate:!0},this.must_update=!0,this.matrices=[],this.first_time=!0}function d(){this.addInput("in","geometry,[mat4]"),this.addInput("mat4","mat4"),this.addOutput("out","geometry"),this.properties={},this.geometry={type:"triangles",vertices:null,_id:l(),_version:0},this._last_geometry_id=-1,this._last_version=-1,this._last_key="",this.must_update=!0}function h(){this.addInput("sides","number"),this.addInput("radius","number"),this.addOutput("out","geometry"),this.properties={sides:6,radius:1,uvs:!1},this.geometry={type:"line_loop",vertices:null,_id:l()},this.geometry_id=-1,this.version=-1,this.must_update=!0,this.last_info={sides:-1,radius:-1}}function f(){this.addInput("","geometry"),this.addOutput("","geometry"),this.properties={top_cap:!0,bottom_cap:!0,offset:[0,100,0]},this.version=-1,this._last_geo_version=-1,this._must_update=!0}function g(){this.addInput("in","geometry"),this.addOutput("out","geometry"),this.properties={code:"V[1] += 0.01 * Math.sin(I + T*0.001);",execute_every_frame:!1},this.geometry=null,this.geometry_id=-1,this.version=-1,this.must_update=!0,this.vertices=null,this.func=null}function v(){this.addInput("in","geometry"),this.addOutput("out","geometry"),this.properties={min_dist:.4,max_dist:.5,max_connections:0,probability:1},this.geometry_id=-1,this.version=-1,this.my_version=1,this.must_update=!0}function m(){this.addInput("mesh","mesh"),this.addOutput("out","geometry"),this.geometry={},this.last_mesh=null}function _(){this.addInput("in","geometry"),this.addOutput("mesh","mesh"),this.properties={},this.version=-1,this.mesh=null}function y(){this.addInput("mesh","mesh"),this.addInput("mat4","mat4"),this.addInput("tex","texture"),this.properties={enabled:!0,primitive:GL.TRIANGLES,additive:!1,color:[1,1,1],opacity:1},this.color=vec4.create([1,1,1,1]),this.model_matrix=mat4.create(),this.uniforms={u_color:this.color,u_model:this.model_matrix}}function b(){this.addInput("size","number"),this.addOutput("out","mesh"),this.properties={type:1,size:1,subdivisions:32},this.version=1e5*Math.random()|0,this.last_info={type:-1,size:-1,subdivisions:-1}}function x(){this.addInput("in","geometry"),this.addInput("mat4","mat4"),this.addInput("tex","texture"),this.properties={enabled:!0,point_size:.1,fixed_size:!1,additive:!0,color:[1,1,1],opacity:1},this.color=vec4.create([1,1,1,1]),this.uniforms={u_point_size:1,u_perspective:1,u_point_perspective:1,u_color:this.color},this.geometry_id=-1,this.version=-1,this.mesh=null}e.LGraphRender={onRequestCameraMatrices:null},t.LGraphPoints3D=u,u.RECTANGLE=1,u.CIRCLE=2,u.CUBE=10,u.SPHERE=11,u.HEMISPHERE=12,u.INSIDE_SPHERE=13,u.OBJECT=20,u.OBJECT_UNIFORMLY=21,u.OBJECT_INSIDE=22,u.MODE_VALUES={rectangle:u.RECTANGLE,circle:u.CIRCLE,cube:u.CUBE,sphere:u.SPHERE,hemisphere:u.HEMISPHERE,inside_sphere:u.INSIDE_SPHERE,object:u.OBJECT,object_uniformly:u.OBJECT_UNIFORMLY,object_inside:u.OBJECT_INSIDE},u.widgets_info={mode:{widget:"combo",values:u.MODE_VALUES}},u.title="list of points",u.desc="returns an array of points",u.prototype.onPropertyChanged=function(t,e){this.must_update=!0},u.prototype.onExecute=function(){var t=this.getInputData(0);(t!=this._old_obj||t&&t._version!=this._old_obj_version)&&(this._old_obj=t,this.must_update=!0);var e=this.getInputData(1);null==e&&(e=this.properties.radius),this._last_radius!=e&&(this._last_radius=e,this.must_update=!0),(this.must_update||this.properties.force_update)&&(this.must_update=!1,this.updatePoints()),this.geometry.vertices=this.points,this.geometry.normals=this.normals,this.geometry._version=this.version,this.setOutputData(0,this.geometry)},u.prototype.updatePoints=function(){var t=0|this.properties.num_points;t<1&&(t=1),this.points&&this.points.length==3*t||(this.points=new Float32Array(3*t)),this.properties.generate_normals?this.normals&&this.normals.length==this.points.length||(this.normals=new Float32Array(this.points.length)):this.normals=null;var e=this._last_radius||this.properties.radius,n=this.properties.mode,r=this.getInputData(0);this._old_obj_version=r?r._version:null,this.points=u.generatePoints(e,t,n,this.points,this.normals,this.properties.regular,r),this.version++},u.generatePoints=function(t,e,n,r,i,o,a){var s=3*e;r&&r.length==s||(r=new Float32Array(s));var l=new Float32Array(3),c=new Float32Array([0,1,0]);if(o){if(n==u.RECTANGLE){for(var p=Math.floor(Math.sqrt(e)),d=0;d<p;++d)for(var h=0;h<p;++h){r[f=3*d+3*h*p]=(d/p-.5)*t*2,r[f+1]=0,r[f+2]=(h/p-.5)*t*2}if(r=new Float32Array(r.subarray(0,p*p*3)),i)for(d=0;d<i.length;d+=3)i.set(c,d)}else if(n==u.SPHERE){for(p=Math.floor(Math.sqrt(e)),d=0;d<p;++d)for(h=0;h<p;++h){var f=3*d+3*h*p;polarToCartesian(l,d/p*2*Math.PI,2*(h/p-.5)*Math.PI,t),r[f]=l[0],r[f+1]=l[1],r[f+2]=l[2]}r=new Float32Array(r.subarray(0,p*p*3)),i&&u.generateSphericalNormals(r,i)}else if(n==u.CIRCLE){for(d=0;d<s;d+=3){var g=2*Math.PI*(d/s);r[d]=Math.cos(g)*t,r[d+1]=0,r[d+2]=Math.sin(g)*t}if(i)for(d=0;d<i.length;d+=3)i.set(c,d)}}else if(n==u.RECTANGLE){for(d=0;d<s;d+=3)r[d]=(Math.random()-.5)*t*2,r[d+1]=0,r[d+2]=(Math.random()-.5)*t*2;if(i)for(d=0;d<i.length;d+=3)i.set(c,d)}else if(n==u.CUBE){for(d=0;d<s;d+=3)r[d]=(Math.random()-.5)*t*2,r[d+1]=(Math.random()-.5)*t*2,r[d+2]=(Math.random()-.5)*t*2;if(i)for(d=0;d<i.length;d+=3)i.set(c,d)}else n==u.SPHERE?(u.generateSphere(r,s,t),i&&u.generateSphericalNormals(r,i)):n==u.HEMISPHERE?(u.generateHemisphere(r,s,t),i&&u.generateSphericalNormals(r,i)):n==u.CIRCLE?(u.generateInsideCircle(r,s,t),i&&u.generateSphericalNormals(r,i)):n==u.INSIDE_SPHERE?(u.generateInsideSphere(r,s,t),i&&u.generateSphericalNormals(r,i)):n==u.OBJECT?u.generateFromObject(r,i,s,a,!1):n==u.OBJECT_UNIFORMLY?u.generateFromObject(r,i,s,a,!0):n==u.OBJECT_INSIDE?u.generateFromInsideObject(r,s,a):console.warn("wrong mode in LGraphPoints3D");return r},u.generateSphericalNormals=function(t,e){for(var n=new Float32Array(3),r=0;r<e.length;r+=3)n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],vec3.normalize(n,n),e.set(n,r)},u.generateSphere=function(t,e,n){for(var r=0;r<e;r+=3){var i=Math.random(),o=Math.random(),a=2*Math.cos(2*Math.PI*i)*Math.sqrt(o*(1-o)),s=1-2*o,l=2*Math.sin(2*Math.PI*i)*Math.sqrt(o*(1-o));t[r]=a*n,t[r+1]=s*n,t[r+2]=l*n}},u.generateHemisphere=function(t,e,n){for(var r=0;r<e;r+=3){var i=Math.random(),o=Math.random(),a=Math.cos(2*Math.PI*i)*Math.sqrt(1-o*o),s=o,l=Math.sin(2*Math.PI*i)*Math.sqrt(1-o*o);t[r]=a*n,t[r+1]=s*n,t[r+2]=l*n}},u.generateInsideCircle=function(t,e,n){for(var r=0;r<e;r+=3){var i=Math.random(),o=Math.random(),a=Math.cos(2*Math.PI*i)*Math.sqrt(1-o*o),s=Math.sin(2*Math.PI*i)*Math.sqrt(1-o*o);t[r]=a*n,t[r+1]=0,t[r+2]=s*n}},u.generateInsideSphere=function(t,e,n){for(var r=0;r<e;r+=3){var i=Math.random(),o=Math.random(),a=2*i*Math.PI,s=Math.acos(2*o-1),l=Math.cbrt(Math.random())*n,u=Math.sin(a),c=Math.cos(a),p=Math.sin(s),d=Math.cos(s);t[r]=l*p*c,t[r+1]=l*p*u,t[r+2]=l*d}},u.generateFromObject=function(t,e,n,r,i){if(r){var o=null,a=null,s=null,l=null;if(r.constructor===GL.Mesh&&(o=r.vertexBuffers.vertices.data,a=r.vertexBuffers.normals?r.vertexBuffers.normals.data:null,(s=r.indexBuffers.indices?r.indexBuffers.indices.data:null)||(s=r.indexBuffers.triangles?r.indexBuffers.triangles.data:null)),!o)return null;var u=s?s.length/3:o.length/9,p=0;if(i){l=new Float32Array(u);for(var d=0;d<u;++d){s?(w=3*s[3*d],E=3*s[3*d+1],T=3*s[3*d+2]):(w=9*d,E=9*d+3,T=9*d+6);var h=o.subarray(w,w+3),f=o.subarray(E,E+3),g=o.subarray(T,T+3),v=vec3.distance(h,f),m=vec3.distance(f,g),_=vec3.distance(g,h),y=(v+m+_)/2;p+=Math.sqrt(y*(y-v)*(y-m)*(y-_)),l[d]=p}for(d=0;d<u;++d)l[d]/=p}for(d=0;d<n;d+=3){var b=Math.random(),x=i?c(l,b):Math.floor(b*u),w=0,E=0,T=0;s?(w=3*s[3*x],E=3*s[3*x+1],T=3*s[3*x+2]):(w=9*x,E=9*x+3,T=9*x+6);y=Math.random();var S=Math.random(),C=Math.sqrt(y),O=1-C,L=C*(1-S),k=S*C;if(t[d]=O*o[w]+L*o[E]+k*o[T],t[d+1]=O*o[w+1]+L*o[E+1]+k*o[T+1],t[d+2]=O*o[w+2]+L*o[E+2]+k*o[T+2],e&&a){e[d]=O*a[w]+L*a[E]+k*a[T],e[d+1]=O*a[w+1]+L*a[E+1]+k*a[T+1],e[d+2]=O*a[w+2]+L*a[E+2]+k*a[T+2];var I=e.subarray(d,d+3);vec3.normalize(I,I)}}}},u.generateFromInsideObject=function(t,e,n){if(n&&n.constructor===GL.Mesh){var r=n.getBoundingBox();n.octree||(n.octree=new GL.Octree(n));for(var i=n.octree,o=vec3.create(),a=vec3.fromValues(1,0,0),s=vec3.create(),l=0,u=0;l<e&&u<10*t.length;){u+=1;var c=vec3.random(s);c[0]=(2*c[0]-1)*r[3]+r[0],c[1]=(2*c[1]-1)*r[4]+r[1],c[2]=(2*c[2]-1)*r[5]+r[2],o.set(c);var p=i.testRay(o,a,0,1e4,!0,GL.Octree.ALL);p&&p.length%2!=0&&(t.set(c,l),l+=3)}}},e.registerNodeType("geometry/points3D",u),p.NORMAL=0,p.VERTICAL=1,p.SPHERICAL=2,p.RANDOM=3,p.RANDOM_VERTICAL=4,p.modes={normal:0,vertical:1,spherical:2,random:3,random_vertical:4},p.widgets_info={mode:{widget:"combo",values:p.modes}},p.title="points to inst",p.prototype.onExecute=function(){var t=this.getInputData(0);t?this.isOutputConnected(0)&&(((t._version!=this._version||t._id!=this._geometry_id)&&this.properties.autoupdate||this.first_time)&&(this.first_time=!1,this.updateInstances(t)),this.setOutputData(0,this.matrices)):this.setOutputData(0,null)},p.prototype.updateInstances=function(t){var e=t.vertices;if(!e)return null;var n=t.normals,r=this.matrices,i=e.length/3;r.length!=i&&(r.length=i);for(var o=mat4.create(),a=vec3.create(),s=(vec3.create(),vec3.fromValues(0,1,0)),l=vec3.fromValues(0,0,-1),u=(vec3.fromValues(1,0,0),quat.create()),c=vec3.create(),d=vec3.create(),h=vec3.create(),f=0;f<e.length;f+=3){var g=f/3,v=r[g];v||(v=r[g]=mat4.create()),v.set(o);var m=e.subarray(f,f+3);switch(this.properties.mode){case p.NORMAL:if(mat4.setTranslation(v,m),n){var _=n.subarray(f,f+3);h.set(_),vec3.normalize(h,h),vec3.cross(d,l,h),vec3.normalize(d,d),vec3.cross(c,d,h),vec3.normalize(c,c),v.set(d,0),v.set(h,4),v.set(c,8),mat4.setTranslation(v,m)}break;case p.VERTICAL:mat4.setTranslation(v,m);break;case p.SPHERICAL:c.set(m),vec3.normalize(c,c),vec3.cross(d,s,c),vec3.normalize(d,d),vec3.cross(h,c,d),vec3.normalize(h,h),v.set(d,0),v.set(h,4),v.set(c,8),mat4.setTranslation(v,m);break;case p.RANDOM:a[0]=2*Math.random()-1,a[1]=2*Math.random()-1,a[2]=2*Math.random()-1,vec3.normalize(a,a),quat.setAxisAngle(u,a,2*Math.random()*Math.PI),mat4.fromQuat(v,u),mat4.setTranslation(v,m);break;case p.RANDOM_VERTICAL:quat.setAxisAngle(u,s,2*Math.random()*Math.PI),mat4.fromQuat(v,u),mat4.setTranslation(v,m)}}this._version=t._version,this._geometry_id=t._id},e.registerNodeType("geometry/points_to_instances",p),d.title="Transform",d.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1);if(t)if(t.constructor!==Array){if(t.vertices&&t.vertices.length){var n=t;if(this.outputs[0].type="geometry",this.isOutputConnected(0))if(e){var r=typedArrayToArray(e).join(",");(this.must_update||n._id!=this._last_geometry_id||n._version!=this._last_version||r!=this._last_key)&&(this.updateGeometry(n,e),this._last_key=r,this._last_version=n._version,this._last_geometry_id=n._id,this.must_update=!1),this.setOutputData(0,this.geometry)}else this.setOutputData(0,n)}}else{if(0==t.length)return;if(this.outputs[0].type="[mat4]",!this.isOutputConnected(0))return;if(!e)return void this.setOutputData(0,t);this._output||(this._output=new Array),this._output.length!=t.length&&(this._output.length=t.length);for(var i=0;i<t.length;++i){var o=this._output[i];o||(o=this._output[i]=mat4.create()),mat4.multiply(o,t[i],e)}this.setOutputData(0,this._output)}},d.prototype.updateGeometry=function(t,e){var n=t.vertices,r=this.geometry.vertices;r&&r.length==n.length||(r=this.geometry.vertices=new Float32Array(n.length));for(var i=vec3.create(),o=0,a=r.length;o<a;o+=3)i[0]=n[o],i[1]=n[o+1],i[2]=n[o+2],mat4.multiplyVec3(i,e,i),r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2];if(t.normals){this.geometry.normals&&this.geometry.normals.length==t.normals.length||(this.geometry.normals=new Float32Array(t.normals.length));var s=this.geometry.normals,l=mat4.invert(mat4.create(),e);l&&mat4.transpose(l,l);var u=t.normals;for(o=0,a=s.length;o<a;o+=3)i[0]=u[o],i[1]=u[o+1],i[2]=u[o+2],mat4.multiplyVec3(i,l,i),s[o]=i[0],s[o+1]=i[1],s[o+2]=i[2]}this.geometry.type=t.type,this.geometry._version++},e.registerNodeType("geometry/transform",d),h.title="Polygon",h.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputOrProperty("sides"),e=this.getInputOrProperty("radius");t=0|Math.max(3,t),this.last_info.sides==t&&this.last_info.radius==e||this.updateGeometry(t,e),this.setOutputData(0,this.geometry)}},h.prototype.updateGeometry=function(t,e){var n=3*t,r=this.geometry.vertices;r&&r.length==n||(r=this.geometry.vertices=new Float32Array(3*t));var i=2*Math.PI/t,o=this.properties.uvs;o&&(uvs=this.geometry.coords=new Float32Array(3*t));for(var a=0;a<t;++a){var s=i*-a,l=Math.cos(s)*e,u=Math.sin(s)*e;r[3*a]=l,r[3*a+1]=0,r[3*a+2]=u}this.geometry._id=++this.geometry_id,this.geometry._version=++this.version,this.last_info.sides=t,this.last_info.radius=e},e.registerNodeType("geometry/polygon",h),f.title="extrude",f.prototype.onPropertyChanged=function(t,e){this._must_update=!0},f.prototype.onExecute=function(){var t=this.getInputData(0);t&&this.isOutputConnected(0)&&((t.version!=this._last_geo_version||this._must_update)&&(this._geo=this.extrudeGeometry(t,this._geo),this._geo&&(this._geo.version=this.version++),this._must_update=!1),this.setOutputData(0,this._geo))},f.prototype.extrudeGeometry=function(t){var e=t.vertices,n=e.length/3,r=vec3.create(),i=vec3.create(),o=vec3.create(),a=vec3.create(),s=new Float32Array(this.properties.offset);if("line_loop"==t.type)for(var u=new Float32Array(6*n*3),c=0,p=0,d=e.length;p<d;p+=3)r[0]=e[p],r[1]=e[p+1],r[2]=e[p+2],p+3<d?(i[0]=e[p+3],i[1]=e[p+4],i[2]=e[p+5]):(i[0]=e[0],i[1]=e[1],i[2]=e[2]),vec3.add(o,r,s),vec3.add(a,i,s),u.set(r,c),c+=3,u.set(i,c),c+=3,u.set(o,c),c+=3,u.set(i,c),c+=3,u.set(a,c),c+=3,u.set(o,c),c+=3;return{_id:l(),type:"triangles",vertices:u}},e.registerNodeType("geometry/extrude",f),g.title="geoeval",g.desc="eval code",g.widgets_info={code:{widget:"code"}},g.prototype.onConfigure=function(t){this.compileCode()},g.prototype.compileCode=function(){if(this.properties.code)try{this.func=new Function("V","I","T",this.properties.code),this.boxcolor="#AFA",this.must_update=!0}catch(t){this.boxcolor="red"}},g.prototype.onPropertyChanged=function(t,e){"code"==t&&(this.properties.code=e,this.compileCode())},g.prototype.onExecute=function(){var t=this.getInputData(0);if(t)if(this.func){if(this.geometry_id!=t._id||this.version!=t._version||this.must_update||this.properties.execute_every_frame){this.must_update=!1,this.geometry_id=t._id,this.properties.execute_every_frame?this.version++:this.version=t._version;var e=this.func,n=getTime();for(var r in this.geometry||(this.geometry={}),t)null!=t[r]&&(t[r].constructor==Float32Array?this.geometry[r]=new Float32Array(t[r]):this.geometry[r]=t[r]);this.geometry._id=t._id,this.properties.execute_every_frame?this.geometry._version=this.version:this.geometry._version=t._version+1;var i=vec3.create(),o=this.vertices;o&&this.vertices.length==t.vertices.length?o.set(t.vertices):o=this.vertices=new Float32Array(t.vertices);for(r=0;r<o.length;r+=3)i[0]=o[r],i[1]=o[r+1],i[2]=o[r+2],e(i,r/3,n),o[r]=i[0],o[r+1]=i[1],o[r+2]=i[2];this.geometry.vertices=o}this.setOutputData(0,this.geometry)}else this.setOutputData(0,t)},e.registerNodeType("geometry/eval",g),v.title="connect points",v.desc="adds indices between near points",v.prototype.onPropertyChanged=function(t,e){this.must_update=!0},v.prototype.onExecute=function(){var t=this.getInputData(0);if(t){if(this.geometry_id!=t._id||this.version!=t._version||this.must_update){for(var e in this.must_update=!1,this.geometry_id=t._id,this.version=t._version,this.geometry={},t)this.geometry[e]=t[e];this.geometry._id=l(),this.geometry._version=this.my_version++;var n=t.vertices,r=n.length,i=this.properties.min_dist,o=this.properties.max_dist,a=this.properties.probability,s=this.properties.max_connections,u=[];for(e=0;e<r;e+=3)for(var c=n[e],p=n[e+1],d=n[e+2],h=0,f=e+3;f<r;f+=3){var g=n[f],v=n[f+1],m=n[f+2],_=Math.sqrt((c-g)*(c-g)+(p-v)*(p-v)+(d-m)*(d-m));if(!(_>o||_<i||a<1&&a<Math.random())&&(u.push(e/3,f/3),h+=1,s&&h>s))break}this.geometry.indices=this.indices=new Uint32Array(u)}this.indices&&this.indices.length?(this.geometry.indices=this.indices,this.setOutputData(0,this.geometry)):this.setOutputData(0,null)}},e.registerNodeType("geometry/connectPoints",v),"undefined"!=typeof GL&&(m.title="to geometry",m.desc="converts a mesh to geometry",m.prototype.onExecute=function(){var t=this.getInputData(0);if(t){if(t!=this.last_mesh){for(i in this.last_mesh=t,t.vertexBuffers){var e=t.vertexBuffers[i];this.geometry[i]=e.data}t.indexBuffers.triangles&&(this.geometry.indices=t.indexBuffers.triangles.data),this.geometry._id=l(),this.geometry._version=0}this.setOutputData(0,this.geometry),this.geometry&&this.setOutputData(1,this.geometry.vertices)}},e.registerNodeType("geometry/toGeometry",m),_.title="Geo to Mesh",_.prototype.updateMesh=function(t){for(var e in this.mesh||(this.mesh=new GL.Mesh),t)if("_"!=e[0]){var n=t[e],r=GL.Mesh.common_buffers[e];if(r||"indices"==e){var i=r?r.spacing:3,o=this.mesh.vertexBuffers[e];o&&o.data.length==n.length?(o.data.set(n),o.upload(GL.DYNAMIC_DRAW)):o=new GL.Buffer("indices"==e?GL.ELEMENT_ARRAY_BUFFER:GL.ARRAY_BUFFER,n,i,GL.DYNAMIC_DRAW),this.mesh.addBuffer(e,o)}}if(this.mesh.vertexBuffers.normals&&this.mesh.vertexBuffers.normals.data.length!=this.mesh.vertexBuffers.vertices.data.length){var a=new Float32Array([0,1,0]),s=new Float32Array(this.mesh.vertexBuffers.vertices.data.length);for(e=0;e<s.length;e+=3)s.set(a,e);o=new GL.Buffer(GL.ARRAY_BUFFER,s,3),this.mesh.addBuffer("normals",o)}return this.mesh.updateBoundingBox(),this.geometry_id=this.mesh.id=t._id,this.version=this.mesh.version=t._version,this.mesh},_.prototype.onExecute=function(){var t=this.getInputData(0);t&&(this.version==t._version&&this.geometry_id==t._id||this.updateMesh(t),this.setOutputData(0,this.mesh))},e.registerNodeType("geometry/toMesh",_),y.title="Render Mesh",y.desc="renders a mesh flat",y.PRIMITIVE_VALUES={points:GL.POINTS,lines:GL.LINES,line_loop:GL.LINE_LOOP,line_strip:GL.LINE_STRIP,triangles:GL.TRIANGLES,triangle_fan:GL.TRIANGLE_FAN,triangle_strip:GL.TRIANGLE_STRIP},y.widgets_info={primitive:{widget:"combo",values:y.PRIMITIVE_VALUES},color:{widget:"color"}},y.prototype.onExecute=function(){if(this.properties.enabled){var t=this.getInputData(0);if(t)if(e.LGraphRender.onRequestCameraMatrices){e.LGraphRender.onRequestCameraMatrices(n,r,o);var i=null;this.getInputData(2)?(i=gl.shaders.textured)||(i=gl.shaders.textured=new GL.Shader(x.vertex_shader_code,x.fragment_shader_code,{USE_TEXTURE:""})):(i=gl.shaders.flat)||(i=gl.shaders.flat=new GL.Shader(x.vertex_shader_code,x.fragment_shader_code)),this.color.set(this.properties.color),this.color[3]=this.properties.opacity;var a=this.model_matrix,l=this.getInputData(1);l?a.set(l):mat4.identity(a),this.uniforms.u_point_size=1;var u=this.properties.primitive;i.uniforms(s),i.uniforms(this.uniforms),this.properties.opacity>=1?gl.disable(gl.BLEND):gl.enable(gl.BLEND),gl.enable(gl.DEPTH_TEST),this.properties.additive?(gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.depthMask(!1)):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var c="indices";t.indexBuffers.triangles&&(c="triangles"),i.draw(t,u,c),gl.disable(gl.BLEND),gl.depthMask(!0)}else console.warn("cannot render geometry, LiteGraph.onRequestCameraMatrices is null, remember to fill this with a callback(view_matrix, projection_matrix,viewprojection_matrix) to use 3D rendering from the graph")}},e.registerNodeType("geometry/render_mesh",y),b.title="Primitive",b.VALID={CUBE:1,PLANE:2,CYLINDER:3,SPHERE:4,CIRCLE:5,HEMISPHERE:6,ICOSAHEDRON:7,CONE:8,QUAD:9},b.widgets_info={type:{widget:"combo",values:b.VALID}},b.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.getInputOrProperty("size");this.last_info.type==this.properties.type&&this.last_info.size==t&&this.last_info.subdivisions==this.properties.subdivisions||this.updateMesh(this.properties.type,t,this.properties.subdivisions),this.setOutputData(0,this._mesh)}},b.prototype.updateMesh=function(t,e,n){switch(n=0|Math.max(0,n),t){case 1:this._mesh=GL.Mesh.cube({size:e,normals:!0,coords:!0});break;case 2:this._mesh=GL.Mesh.plane({size:e,xz:!0,detail:n,normals:!0,coords:!0});break;case 3:this._mesh=GL.Mesh.cylinder({size:e,subdivisions:n,normals:!0,coords:!0});break;case 4:this._mesh=GL.Mesh.sphere({size:e,long:n,lat:n,normals:!0,coords:!0});break;case 5:this._mesh=GL.Mesh.circle({size:e,slices:n,normals:!0,coords:!0});break;case 6:this._mesh=GL.Mesh.sphere({size:e,long:n,lat:n,normals:!0,coords:!0,hemi:!0});break;case 7:this._mesh=GL.Mesh.icosahedron({size:e,subdivisions:n});break;case 8:this._mesh=GL.Mesh.cone({radius:e,height:e,subdivisions:n});break;case 9:this._mesh=GL.Mesh.plane({size:e,xz:!1,detail:n,normals:!0,coords:!0})}this.last_info.type=t,this.last_info.size=e,this.last_info.subdivisions=n,this._mesh.version=this.version++},e.registerNodeType("geometry/mesh_primitive",b),x.title="renderPoints",x.desc="render points with a texture",x.widgets_info={color:{widget:"color"}},x.prototype.updateMesh=function(t){this.buffer;this.buffer&&this.buffer.data&&this.buffer.data.length==t.vertices.length?(this.buffer.data.set(t.vertices),this.buffer.upload(GL.DYNAMIC_DRAW)):this.buffer=new GL.Buffer(GL.ARRAY_BUFFER,t.vertices,3,GL.DYNAMIC_DRAW),this.mesh||(this.mesh=new GL.Mesh),this.mesh.addBuffer("vertices",this.buffer),this.geometry_id=this.mesh.id=t._id,this.version=this.mesh.version=t._version},x.prototype.onExecute=function(){if(this.properties.enabled){var t=this.getInputData(0);if(t)if(this.version==t._version&&this.geometry_id==t._id||this.updateMesh(t),e.LGraphRender.onRequestCameraMatrices){e.LGraphRender.onRequestCameraMatrices(n,r,o);var i=null;this.getInputData(2)?(i=gl.shaders.textured_points)||(i=gl.shaders.textured_points=new GL.Shader(x.vertex_shader_code,x.fragment_shader_code,{USE_TEXTURED_POINTS:""})):(i=gl.shaders.points)||(i=gl.shaders.points=new GL.Shader(x.vertex_shader_code,x.fragment_shader_code,{USE_POINTS:""})),this.color.set(this.properties.color),this.color[3]=this.properties.opacity;var l=this.getInputData(1);l?a.set(l):mat4.identity(a),this.uniforms.u_point_size=this.properties.point_size,this.uniforms.u_point_perspective=this.properties.fixed_size?0:1,this.uniforms.u_perspective=gl.viewport_data[3]*r[5],i.uniforms(s),i.uniforms(this.uniforms),this.properties.opacity>=1?gl.disable(gl.BLEND):gl.enable(gl.BLEND),gl.enable(gl.DEPTH_TEST),this.properties.additive?(gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.depthMask(!1)):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),i.draw(this.mesh,GL.POINTS),gl.disable(gl.BLEND),gl.depthMask(!0)}else console.warn("cannot render geometry, LiteGraph.onRequestCameraMatrices is null, remember to fill this with a callback(view_matrix, projection_matrix,viewprojection_matrix) to use 3D rendering from the graph")}},e.registerNodeType("geometry/render_points",x),x.vertex_shader_code="\t\tprecision mediump float;\n\t\tattribute vec3 a_vertex;\n\t\tvarying vec3 v_vertex;\n\t\tattribute vec3 a_normal;\n\t\tvarying vec3 v_normal;\n\t\t#ifdef USE_COLOR\n\t\t\tattribute vec4 a_color;\n\t\t\tvarying vec4 v_color;\n\t\t#endif\n\t\tattribute vec2 a_coord;\n\t\tvarying vec2 v_coord;\n\t\t#ifdef USE_SIZE\n\t\t\tattribute float a_extra;\n\t\t#endif\n\t\t#ifdef USE_INSTANCING\n\t\t\tattribute mat4 u_model;\n\t\t#else\n\t\t\tuniform mat4 u_model;\n\t\t#endif\n\t\tuniform mat4 u_viewprojection;\n\t\tuniform float u_point_size;\n\t\tuniform float u_perspective;\n\t\tuniform float u_point_perspective;\n\t\tfloat computePointSize(float radius, float w)\n\t\t{\n\t\t\tif(radius < 0.0)\n\t\t\t\treturn -radius;\n\t\t\treturn u_perspective * radius / w;\n\t\t}\n\t\tvoid main() {\n\t\t\tv_coord = a_coord;\n\t\t\t#ifdef USE_COLOR\n\t\t\t\tv_color = a_color;\n\t\t\t#endif\n\t\t\tv_vertex = ( u_model * vec4( a_vertex, 1.0 )).xyz;\n\t\t\tv_normal = ( u_model * vec4( a_normal, 0.0 )).xyz;\n\t\t\tgl_Position = u_viewprojection * vec4(v_vertex,1.0);\n\t\t\tgl_PointSize = u_point_size;\n\t\t\t#ifdef USE_SIZE\n\t\t\t\tgl_PointSize = a_extra;\n\t\t\t#endif\n\t\t\tif(u_point_perspective != 0.0)\n\t\t\t\tgl_PointSize = computePointSize( gl_PointSize, gl_Position.w );\n\t\t}\t",x.fragment_shader_code="\t\tprecision mediump float;\n\t\tuniform vec4 u_color;\n\t\t#ifdef USE_COLOR\n\t\t\tvarying vec4 v_color;\n\t\t#endif\n\t\tvarying vec2 v_coord;\n\t\tuniform sampler2D u_texture;\n\t\tvoid main() {\n\t\t\tvec4 color = u_color;\n\t\t\t#ifdef USE_TEXTURED_POINTS\n\t\t\t\tcolor *= texture2D(u_texture, gl_PointCoord.xy);\n\t\t\t#else\n\t\t\t\t#ifdef USE_TEXTURE\n\t\t\t\t  color *= texture2D(u_texture, v_coord);\n\t\t\t\t  if(color.a < 0.1)\n\t\t\t\t\tdiscard;\n\t\t\t\t#endif\n\t\t\t\t#ifdef USE_POINTS\n\t\t\t\t\tfloat dist = length( gl_PointCoord.xy - vec2(0.5) );\n\t\t\t\t\tif( dist > 0.45 )\n\t\t\t\t\t\tdiscard;\n\t\t\t\t#endif\n\t\t\t#endif\n\t\t\t#ifdef USE_COLOR\n\t\t\t\tcolor *= v_color;\n\t\t\t#endif\n\t\t\tgl_FragColor = color;\n\t\t}\t")}(this),function(t){var e=t.LiteGraph,n=t.LGraphTexture;if("undefined"!=typeof GL){function r(){this.addInput("Texture","Texture"),this.addInput("Aberration","number"),this.addInput("Distortion","number"),this.addInput("Blur","number"),this.addOutput("Texture","Texture"),this.properties={aberration:1,distortion:1,blur:1,precision:n.DEFAULT},r._shader||(r._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,r.pixel_shader),r._texture=new GL.Texture(3,1,{format:gl.RGB,wrap:gl.CLAMP_TO_EDGE,magFilter:gl.LINEAR,minFilter:gl.LINEAR,pixel_data:[255,0,0,0,255,0,0,0,255]}))}function i(){this.addInput("Texture","Texture"),this.addInput("Blurred","Texture"),this.addInput("Mask","Texture"),this.addInput("Threshold","number"),this.addOutput("Texture","Texture"),this.properties={shape:"",size:10,alpha:1,threshold:1,high_precision:!1}}function o(){this.addInput("Texture","Texture"),this.addInput("value1","number"),this.addInput("value2","number"),this.addOutput("Texture","Texture"),this.properties={fx:"halftone",value1:1,value2:1,precision:n.DEFAULT}}function a(){this.addInput("Tex.","Texture"),this.addInput("intensity","number"),this.addOutput("Texture","Texture"),this.properties={intensity:1,invert:!1,precision:n.DEFAULT},a._shader||(a._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,a.pixel_shader))}r.title="Lens",r.desc="Camera Lens distortion",r.widgets_info={precision:{widget:"combo",values:n.MODE_VALUES}},r.prototype.onExecute=function(){var t=this.getInputData(0);if(this.properties.precision!==n.PASS_THROUGH){if(t){this._tex=n.getTargetTexture(t,this._tex,this.properties.precision);var e=this.properties.aberration;this.isInputConnected(1)&&(e=this.getInputData(1),this.properties.aberration=e);var i=this.properties.distortion;this.isInputConnected(2)&&(i=this.getInputData(2),this.properties.distortion=i);var o=this.properties.blur;this.isInputConnected(3)&&(o=this.getInputData(3),this.properties.blur=o),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var a=Mesh.getScreenQuad(),s=r._shader;this._tex.drawTo((function(){t.bind(0),s.uniforms({u_texture:0,u_aberration:e,u_distortion:i,u_blur:o}).draw(a)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,t)},r.pixel_shader="precision highp float;\n\t\t\tprecision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform vec2 u_camera_planes;\n\t\t\tuniform float u_aberration;\n\t\t\tuniform float u_distortion;\n\t\t\tuniform float u_blur;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec2 coord = v_coord;\n\t\t\t\tfloat dist = distance(vec2(0.5), coord);\n\t\t\t\tvec2 dist_coord = coord - vec2(0.5);\n\t\t\t\tfloat percent = 1.0 + ((0.5 - dist) / 0.5) * u_distortion;\n\t\t\t\tdist_coord *= percent;\n\t\t\t\tcoord = dist_coord + vec2(0.5);\n\t\t\t\tvec4 color = texture2D(u_texture,coord, u_blur * dist);\n\t\t\t\tcolor.r = texture2D(u_texture,vec2(0.5) + dist_coord * (1.0+0.01*u_aberration), u_blur * dist ).r;\n\t\t\t\tcolor.b = texture2D(u_texture,vec2(0.5) + dist_coord * (1.0-0.01*u_aberration), u_blur * dist ).b;\n\t\t\t\tgl_FragColor = color;\n\t\t\t}\n\t\t\t",e.registerNodeType("fx/lens",r),t.LGraphFXLens=r,i.title="Bokeh",i.desc="applies an Bokeh effect",i.widgets_info={shape:{widget:"texture"}},i.prototype.onExecute=function(){var t=this.getInputData(0),e=this.getInputData(1),r=this.getInputData(2);if(t&&r&&this.properties.shape){e||(e=t);var o=n.getTexture(this.properties.shape);if(o){var a=this.properties.threshold;this.isInputConnected(3)&&(a=this.getInputData(3),this.properties.threshold=a);var s=gl.UNSIGNED_BYTE;this.properties.high_precision&&(s=gl.half_float_ext?gl.HALF_FLOAT_OES:gl.FLOAT),this._temp_texture&&this._temp_texture.type==s&&this._temp_texture.width==t.width&&this._temp_texture.height==t.height||(this._temp_texture=new GL.Texture(t.width,t.height,{type:s,format:gl.RGBA,filter:gl.LINEAR}));this.properties.size;var l=i._first_shader;l||(l=i._first_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,i._first_pixel_shader));var u=i._second_shader;u||(u=i._second_shader=new GL.Shader(i._second_vertex_shader,i._second_pixel_shader));var c=this._points_mesh;c&&c._width==t.width&&c._height==t.height&&2==c._spacing||(c=this.createPointsMesh(t.width,t.height,2));var p=Mesh.getScreenQuad(),d=this.properties.size,h=(this.properties.min_light,this.properties.alpha);gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),this._temp_texture.drawTo((function(){t.bind(0),e.bind(1),r.bind(2),l.uniforms({u_texture:0,u_texture_blur:1,u_mask:2,u_texsize:[t.width,t.height]}).draw(p)})),this._temp_texture.drawTo((function(){gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE),t.bind(0),o.bind(3),u.uniforms({u_texture:0,u_mask:2,u_shape:3,u_alpha:h,u_threshold:a,u_pointSize:d,u_itexsize:[1/t.width,1/t.height]}).draw(c,gl.POINTS)})),this.setOutputData(0,this._temp_texture)}}else this.setOutputData(0,t)},i.prototype.createPointsMesh=function(t,e,n){for(var r=Math.round(t/n),i=Math.round(e/n),o=new Float32Array(r*i*2),a=-1,s=2/t*n,l=2/e*n,u=0;u<i;++u){for(var c=-1,p=0;p<r;++p){var d=u*r*2+2*p;o[d]=c,o[d+1]=a,c+=s}a+=l}return this._points_mesh=GL.Mesh.load({vertices2D:o}),this._points_mesh._width=t,this._points_mesh._height=e,this._points_mesh._spacing=n,this._points_mesh},i._first_pixel_shader="precision highp float;\n\t\t\tprecision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform sampler2D u_texture_blur;\n\t\t\tuniform sampler2D u_mask;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tvec4 blurred_color = texture2D(u_texture_blur, v_coord);\n\t\t\t\tfloat mask = texture2D(u_mask, v_coord).x;\n\t\t\t   gl_FragColor = mix(color, blurred_color, mask);\n\t\t\t}\n\t\t\t",i._second_vertex_shader="precision highp float;\n\t\t\tattribute vec2 a_vertex2D;\n\t\t\tvarying vec4 v_color;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform sampler2D u_mask;\n\t\t\tuniform vec2 u_itexsize;\n\t\t\tuniform float u_pointSize;\n\t\t\tuniform float u_threshold;\n\t\t\tvoid main() {\n\t\t\t\tvec2 coord = a_vertex2D * 0.5 + 0.5;\n\t\t\t\tv_color = texture2D( u_texture, coord );\n\t\t\t\tv_color += texture2D( u_texture, coord + vec2(u_itexsize.x, 0.0) );\n\t\t\t\tv_color += texture2D( u_texture, coord + vec2(0.0, u_itexsize.y));\n\t\t\t\tv_color += texture2D( u_texture, coord + u_itexsize);\n\t\t\t\tv_color *= 0.25;\n\t\t\t\tfloat mask = texture2D(u_mask, coord).x;\n\t\t\t\tfloat luminance = length(v_color) * mask;\n\t\t\t\t/*luminance /= (u_pointSize*u_pointSize)*0.01 */;\n\t\t\t\tluminance -= u_threshold;\n\t\t\t\tif(luminance < 0.0)\n\t\t\t\t{\n\t\t\t\t\tgl_Position.x = -100.0;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgl_PointSize = u_pointSize;\n\t\t\t\tgl_Position = vec4(a_vertex2D,0.0,1.0);\n\t\t\t}\n\t\t\t",i._second_pixel_shader="precision highp float;\n\t\t\tvarying vec4 v_color;\n\t\t\tuniform sampler2D u_shape;\n\t\t\tuniform float u_alpha;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D( u_shape, gl_PointCoord );\n\t\t\t\tcolor *= v_color * u_alpha;\n\t\t\t\tgl_FragColor = color;\n\t\t\t}\n",e.registerNodeType("fx/bokeh",i),t.LGraphFXBokeh=i,o.title="FX",o.desc="applies an FX from a list",o.widgets_info={fx:{widget:"combo",values:["halftone","pixelate","lowpalette","noise","gamma"]},precision:{widget:"combo",values:n.MODE_VALUES}},o.shaders={},o.prototype.onExecute=function(){if(this.isOutputConnected(0)){var e=this.getInputData(0);if(this.properties.precision!==n.PASS_THROUGH){if(e){this._tex=n.getTargetTexture(e,this._tex,this.properties.precision);var r=this.properties.value1;this.isInputConnected(1)&&(r=this.getInputData(1),this.properties.value1=r);var i=this.properties.value2;this.isInputConnected(2)&&(i=this.getInputData(2),this.properties.value2=i);var a=this.properties.fx,s=o.shaders[a];if(!s){var l=o["pixel_shader_"+a];if(!l)return;s=o.shaders[a]=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,l)}gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var u,c=Mesh.getScreenQuad(),p=t.LS?LS.Renderer._current_camera:null;u=p?[LS.Renderer._current_camera.near,LS.Renderer._current_camera.far]:[1,100];var d=null;"noise"==a&&(d=n.getNoiseTexture()),this._tex.drawTo((function(){e.bind(0),"noise"==a&&d.bind(1),s.uniforms({u_texture:0,u_noise:1,u_size:[e.width,e.height],u_rand:[Math.random(),Math.random()],u_value1:r,u_value2:i,u_camera_planes:u}).draw(c)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,e)}},o.pixel_shader_halftone="precision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform vec2 u_camera_planes;\n\t\t\tuniform vec2 u_size;\n\t\t\tuniform float u_value1;\n\t\t\tuniform float u_value2;\n\t\t\t\n\t\t\tfloat pattern() {\n\t\t\t\tfloat s = sin(u_value1 * 3.1415), c = cos(u_value1 * 3.1415);\n\t\t\t\tvec2 tex = v_coord * u_size.xy;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t   c * tex.x - s * tex.y ,\n\t\t\t\t   s * tex.x + c * tex.y \n\t\t\t\t) * u_value2;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tfloat average = (color.r + color.g + color.b) / 3.0;\n\t\t\t\tgl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n\t\t\t}\n",o.pixel_shader_pixelate="precision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform vec2 u_camera_planes;\n\t\t\tuniform vec2 u_size;\n\t\t\tuniform float u_value1;\n\t\t\tuniform float u_value2;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec2 coord = vec2( floor(v_coord.x * u_value1) / u_value1, floor(v_coord.y * u_value2) / u_value2 );\n\t\t\t\tvec4 color = texture2D(u_texture, coord);\n\t\t\t\tgl_FragColor = color;\n\t\t\t}\n",o.pixel_shader_lowpalette="precision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform vec2 u_camera_planes;\n\t\t\tuniform vec2 u_size;\n\t\t\tuniform float u_value1;\n\t\t\tuniform float u_value2;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tgl_FragColor = floor(color * u_value1) / u_value1;\n\t\t\t}\n",o.pixel_shader_noise="precision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform sampler2D u_noise;\n\t\t\tuniform vec2 u_size;\n\t\t\tuniform float u_value1;\n\t\t\tuniform float u_value2;\n\t\t\tuniform vec2 u_rand;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tvec3 noise = texture2D(u_noise, v_coord * vec2(u_size.x / 512.0, u_size.y / 512.0) + u_rand).xyz - vec3(0.5);\n\t\t\t\tgl_FragColor = vec4( color.xyz + noise * u_value1, color.a );\n\t\t\t}\n",o.pixel_shader_gamma="precision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform float u_value1;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tfloat gamma = 1.0 / u_value1;\n\t\t\t\tgl_FragColor = vec4( pow( color.xyz, vec3(gamma) ), color.a );\n\t\t\t}\n",e.registerNodeType("fx/generic",o),t.LGraphFXGeneric=o,a.title="Vigneting",a.desc="Vigneting",a.widgets_info={precision:{widget:"combo",values:n.MODE_VALUES}},a.prototype.onExecute=function(){var t=this.getInputData(0);if(this.properties.precision!==n.PASS_THROUGH){if(t){this._tex=n.getTargetTexture(t,this._tex,this.properties.precision);var e=this.properties.intensity;this.isInputConnected(1)&&(e=this.getInputData(1),this.properties.intensity=e),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var r=Mesh.getScreenQuad(),i=a._shader,o=this.properties.invert;this._tex.drawTo((function(){t.bind(0),i.uniforms({u_texture:0,u_intensity:e,u_isize:[1/t.width,1/t.height],u_invert:o?1:0}).draw(r)})),this.setOutputData(0,this._tex)}}else this.setOutputData(0,t)},a.pixel_shader="precision highp float;\n\t\t\tprecision highp float;\n\t\t\tvarying vec2 v_coord;\n\t\t\tuniform sampler2D u_texture;\n\t\t\tuniform float u_intensity;\n\t\t\tuniform int u_invert;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tfloat luminance = 1.0 - length( v_coord - vec2(0.5) ) * 1.414;\n\t\t\t\tvec4 color = texture2D(u_texture, v_coord);\n\t\t\t\tif(u_invert == 1)\n\t\t\t\t\tluminance = 1.0 - luminance;\n\t\t\t\tluminance = mix(1.0, luminance, u_intensity);\n\t\t\t   gl_FragColor = vec4( luminance * color.xyz, color.a);\n\t\t\t}\n\t\t\t",e.registerNodeType("fx/vigneting",a),t.LGraphFXVigneting=a}}(this),function(t){var e=t.LiteGraph,n="#243";function r(t){this.channel=0,this.cmd=0,this.data=new Uint32Array(3),t&&this.setup(t)}for(var i in e.MIDIEvent=r,r.prototype.fromJSON=function(t){this.setup(t.data)},r.prototype.setup=function(t){var e=t;t.constructor===Object&&(e=t.data),this.data.set(e);var n=e[0];this.status=n;var i=240&n;this.cmd=n>=240?n:i,this.cmd==r.NOTEON&&0==this.velocity&&(this.cmd=r.NOTEOFF),this.cmd_str=r.commands[this.cmd]||"",(i>=r.NOTEON||i<=r.NOTEOFF)&&(this.channel=15&n)},Object.defineProperty(r.prototype,"velocity",{get:function(){return this.cmd==r.NOTEON?this.data[2]:-1},set:function(t){this.data[2]=t},enumerable:!0}),r.notes=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],r.note_to_index={A:0,"A#":1,B:2,C:3,"C#":4,D:5,"D#":6,E:7,F:8,"F#":9,G:10,"G#":11},Object.defineProperty(r.prototype,"note",{get:function(){return this.cmd!=r.NOTEON?-1:r.toNoteString(this.data[1],!0)},set:function(t){throw"notes cannot be assigned this way, must modify the data[1]"},enumerable:!0}),Object.defineProperty(r.prototype,"octave",{get:function(){if(this.cmd!=r.NOTEON)return-1;var t=this.data[1]-24;return Math.floor(t/12+1)},set:function(t){throw"octave cannot be assigned this way, must modify the data[1]"},enumerable:!0}),r.prototype.getPitch=function(){return 440*Math.pow(2,(this.data[1]-69)/12)},r.computePitch=function(t){return 440*Math.pow(2,(t-69)/12)},r.prototype.getCC=function(){return this.data[1]},r.prototype.getCCValue=function(){return this.data[2]},r.prototype.getPitchBend=function(){return this.data[1]+(this.data[2]<<7)-8192},r.computePitchBend=function(t,e){return t+(e<<7)-8192},r.prototype.setCommandFromString=function(t){this.cmd=r.computeCommandFromString(t)},r.computeCommandFromString=function(t){if(!t)return 0;if(t&&t.constructor===Number)return t;switch(t=t.toUpperCase()){case"NOTE ON":case"NOTEON":case"NOTE OFF":case"NOTEOFF":return r.NOTEON;case"KEY PRESSURE":case"KEYPRESSURE":return r.KEYPRESSURE;case"CONTROLLER CHANGE":case"CONTROLLERCHANGE":case"CC":return r.CONTROLLERCHANGE;case"PROGRAM CHANGE":case"PROGRAMCHANGE":case"PC":return r.PROGRAMCHANGE;case"CHANNEL PRESSURE":case"CHANNELPRESSURE":return r.CHANNELPRESSURE;case"PITCH BEND":case"PITCHBEND":return r.PITCHBEND;case"TIME TICK":case"TIMETICK":return r.TIMETICK;default:return Number(t)}},r.toNoteString=function(t,e){var n=(t=Math.round(t))-21,i=Math.floor((t-24)/12+1);return(n%=12)<0&&(n=12+n),r.notes[n]+(e?"":i)},r.NoteStringToPitch=function(t){var e=(t=t.toUpperCase())[0],n=4;"#"==t[1]?(e+="#",t.length>2&&(n=Number(t[2]))):t.length>1&&(n=Number(t[1]));var i=r.note_to_index[e];return null==i?null:12*(n-1)+i+21},r.prototype.toString=function(){var t=this.channel+". ";switch(this.cmd){case r.NOTEON:t+="NOTEON "+r.toNoteString(this.data[1]);break;case r.NOTEOFF:t+="NOTEOFF "+r.toNoteString(this.data[1]);break;case r.CONTROLLERCHANGE:t+="CC "+this.data[1]+" "+this.data[2];break;case r.PROGRAMCHANGE:t+="PC "+this.data[1];break;case r.PITCHBEND:t+="PITCHBEND "+this.getPitchBend();break;case r.KEYPRESSURE:t+="KEYPRESS "+this.data[1]}return t},r.prototype.toHexString=function(){for(var t=0;t<this.data.length;t++)this.data[t].toString(16)+" "},r.prototype.toJSON=function(){return{data:[this.data[0],this.data[1],this.data[2]],object_class:"MIDIEvent"}},r.NOTEOFF=128,r.NOTEON=144,r.KEYPRESSURE=160,r.CONTROLLERCHANGE=176,r.PROGRAMCHANGE=192,r.CHANNELPRESSURE=208,r.PITCHBEND=224,r.TIMETICK=248,r.commands={128:"note off",144:"note on",160:"key pressure",176:"controller change",192:"program change",208:"channel pressure",224:"pitch bend",240:"system",242:"Song pos",243:"Song select",246:"Tune request",248:"time tick",250:"Start Song",251:"Continue Song",252:"Stop Song",254:"Sensing",255:"Reset"},r.commands_short={128:"NOTEOFF",144:"NOTEOFF",160:"KEYP",176:"CC",192:"PC",208:"CP",224:"PB",240:"SYS",242:"POS",243:"SELECT",246:"TUNEREQ",248:"TT",250:"START",251:"CONTINUE",252:"STOP",254:"SENS",255:"RESET"},r.commands_reversed={},r.commands)r.commands_reversed[r.commands[i]]=i;function o(t,e){if(!navigator.requestMIDIAccess)return this.error="not suppoorted",void(e?e("Not supported"):console.error("MIDI NOT SUPPORTED, enable by chrome://flags"));this.on_ready=t,this.state={note:[],cc:[]},this.input_ports=null,this.input_ports_info=[],this.output_ports=null,this.output_ports_info=[],navigator.requestMIDIAccess().then(this.onMIDISuccess.bind(this),this.onMIDIFailure.bind(this))}function a(){this.addOutput("on_midi",e.EVENT),this.addOutput("out","midi"),this.properties={port:0},this._last_midi_event=null,this._current_midi_event=null,this.boxcolor="#AAA",this._last_time=0;var t=this;new o((function(e){t._midi=e,t._waiting&&t.onStart(),t._waiting=!1}))}function s(){this.addInput("send",e.EVENT),this.properties={port:0};var t=this;new o((function(e){t._midi=e,t.widget.options.values=t.getMIDIOutputs()})),this.widget=this.addWidget("combo","Device",this.properties.port,{property:"port",values:this.getMIDIOutputs.bind(this)}),this.size=[340,60]}function l(){this.addInput("on_midi",e.EVENT),this._str="",this.size=[200,40]}function u(){this.properties={channel:-1,cmd:-1,min_value:-1,max_value:-1};var t=this;this._learning=!1,this.addWidget("button","Learn","",(function(){t._learning=!0,t.boxcolor="#FA3"})),this.addInput("in",e.EVENT),this.addOutput("on_midi",e.EVENT),this.boxcolor="#AAA"}function c(){this.properties={channel:0,cmd:144,value1:1,value2:1},this.addInput("send",e.EVENT),this.addInput("assign",e.EVENT),this.addOutput("on_midi",e.EVENT),this.midi_event=new r,this.gate=!1}function p(){this.properties={cc:1,value:0},this.addOutput("value","number")}function d(){this.addInput("generate",e.ACTION),this.addInput("scale","string"),this.addInput("octave","number"),this.addOutput("note",e.EVENT),this.properties={notes:"A,A#,B,C,C#,D,D#,E,F,F#,G,G#",octave:2,duration:.5,mode:"sequence"},this.notes_pitches=d.processScale(this.properties.notes),this.sequence_index=0}function h(){this.properties={amount:0},this.addInput("in",e.ACTION),this.addInput("amount","number"),this.addOutput("out",e.EVENT),this.midi_event=new r}function f(){this.properties={scale:"A,A#,B,C,C#,D,D#,E,F,F#,G,G#"},this.addInput("note",e.ACTION),this.addInput("scale","string"),this.addOutput("out",e.EVENT),this.valid_notes=new Array(12),this.offset_notes=new Array(12),this.processScale(this.properties.scale)}function g(){this.properties={url:"",autoplay:!0},this.addInput("play",e.ACTION),this.addInput("pause",e.ACTION),this.addOutput("note",e.EVENT),this._midi=null,this._current_time=0,this._playing=!1,"undefined"==typeof MidiParser&&(console.error("midi-parser.js not included, LGMidiPlay requires that library: https://raw.githubusercontent.com/colxi/midi-parser-js/master/src/main.js"),this.boxcolor="red")}function v(){if(this.properties={volume:.5,duration:1},this.addInput("note",e.ACTION),this.addInput("volume","number"),this.addInput("duration","number"),this.addOutput("note",e.EVENT),"undefined"==typeof AudioSynth)console.error("Audiosynth.js not included, LGMidiPlay requires that library"),this.boxcolor="red";else{var t=this.synth=new AudioSynth;this.instrument=t.createInstrument("piano")}}function m(){this.properties={num_octaves:2,start_octave:2},this.addInput("note",e.ACTION),this.addInput("reset",e.ACTION),this.addOutput("note",e.EVENT),this.size=[400,100],this.keys=[],this._last_key=-1}o.input=null,o.MIDIEvent=r,o.prototype.onMIDISuccess=function(t){console.log("MIDI ready!"),console.log(t),this.midi=t,this.updatePorts(),this.on_ready&&this.on_ready(this)},o.prototype.updatePorts=function(){var t=this.midi;this.input_ports=t.inputs,this.input_ports_info=[],this.output_ports=t.outputs,this.output_ports_info=[];for(var e=0,n=(i=this.input_ports.values()).next();n&&!1===n.done;){var r=n.value;this.input_ports_info.push(r),console.log("Input port [type:'"+r.type+"'] id:'"+r.id+"' manufacturer:'"+r.manufacturer+"' name:'"+r.name+"' version:'"+r.version+"'"),e++,n=i.next()}this.num_input_ports=e,e=0;var i;for(n=(i=this.output_ports.values()).next();n&&!1===n.done;){r=n.value;this.output_ports_info.push(r),console.log("Output port [type:'"+r.type+"'] id:'"+r.id+"' manufacturer:'"+r.manufacturer+"' name:'"+r.name+"' version:'"+r.version+"'"),e++,n=i.next()}this.num_output_ports=e},o.prototype.onMIDIFailure=function(t){console.error("Failed to get MIDI access - "+t)},o.prototype.openInputPort=function(t,e){var n=this.input_ports.get("input-"+t);if(!n)return!1;o.input=this;var i=this;return n.onmidimessage=function(t){var n=new r(t.data);i.updateState(n),e&&e(t.data,n),o.on_message&&o.on_message(t.data,n)},console.log("port open: ",n),!0},o.parseMsg=function(t){},o.prototype.updateState=function(t){switch(t.cmd){case r.NOTEON:this.state.note[0|t.value1]=t.value2;break;case r.NOTEOFF:this.state.note[0|t.value1]=0;break;case r.CONTROLLERCHANGE:this.state.cc[t.getCC()]=t.getCCValue()}},o.prototype.sendMIDI=function(t,e){if(e){var n=this.output_ports_info[t];n&&(o.output=this,e.constructor===r?n.send(e.data):n.send(e))}},a.MIDIInterface=o,a.title="MIDI Input",a.desc="Reads MIDI from a input port",a.color=n,a.prototype.getPropertyInfo=function(t){if(this._midi&&"port"==t){for(var e={},n=0;n<this._midi.input_ports_info.length;++n){var r=this._midi.input_ports_info[n];e[n]=n+".- "+r.name+" version:"+r.version}return{type:"enum",values:e}}},a.prototype.onStart=function(){this._midi?this._midi.openInputPort(this.properties.port,this.onMIDIEvent.bind(this)):this._waiting=!0},a.prototype.onMIDIEvent=function(t,n){this._last_midi_event=n,this.boxcolor="#AFA",this._last_time=e.getTime(),this.trigger("on_midi",n),n.cmd==r.NOTEON?this.trigger("on_noteon",n):n.cmd==r.NOTEOFF?this.trigger("on_noteoff",n):n.cmd==r.CONTROLLERCHANGE?this.trigger("on_cc",n):n.cmd==r.PROGRAMCHANGE?this.trigger("on_pc",n):n.cmd==r.PITCHBEND&&this.trigger("on_pitchbend",n)},a.prototype.onDrawBackground=function(t){if(this.boxcolor="#AAA",!this.flags.collapsed&&this._last_midi_event){t.fillStyle="white";var n=e.getTime(),r=1-Math.max(0,.001*(n-this._last_time));if(r>0){var i=t.globalAlpha;t.globalAlpha*=r,t.font="12px Tahoma",t.fillText(this._last_midi_event.toString(),2,.5*this.size[1]+3),t.globalAlpha=i}}},a.prototype.onExecute=function(){if(this.outputs)for(var t=this._last_midi_event,e=0;e<this.outputs.length;++e){var n=null;switch(this.outputs[e].name){case"midi":n=this._midi;break;case"last_midi":n=t;break;default:continue}this.setOutputData(e,n)}},a.prototype.onGetOutputs=function(){return[["last_midi","midi"],["on_midi",e.EVENT],["on_noteon",e.EVENT],["on_noteoff",e.EVENT],["on_cc",e.EVENT],["on_pc",e.EVENT],["on_pitchbend",e.EVENT]]},e.registerNodeType("midi/input",a),s.MIDIInterface=o,s.title="MIDI Output",s.desc="Sends MIDI to output channel",s.color=n,s.prototype.onGetPropertyInfo=function(t){if(this._midi&&"port"==t)return{type:"enum",values:this.getMIDIOutputs()}},s.default_ports={0:"unknown"},s.prototype.getMIDIOutputs=function(){var t={};if(!this._midi)return s.default_ports;if(this._midi.output_ports_info)for(var e=0;e<this._midi.output_ports_info.length;++e){var n=this._midi.output_ports_info[e];if(n){var r=e+".- "+n.name+" version:"+n.version;t[e]=r}}return t},s.prototype.onAction=function(t,e){this._midi&&("send"==t&&this._midi.sendMIDI(this.properties.port,e),this.trigger("midi",e))},s.prototype.onGetInputs=function(){return[["send",e.ACTION]]},s.prototype.onGetOutputs=function(){return[["on_midi",e.EVENT]]},e.registerNodeType("midi/output",s),l.title="MIDI Show",l.desc="Shows MIDI in the graph",l.color=n,l.prototype.getTitle=function(){return this.flags.collapsed?this._str:this.title},l.prototype.onAction=function(t,e){e&&(e.constructor===r?this._str=e.toString():this._str="???")},l.prototype.onDrawForeground=function(t){this._str&&!this.flags.collapsed&&(t.font="30px Arial",t.fillText(this._str,10,.8*this.size[1]))},l.prototype.onGetInputs=function(){return[["in",e.ACTION]]},l.prototype.onGetOutputs=function(){return[["on_midi",e.EVENT]]},e.registerNodeType("midi/show",l),u.title="MIDI Filter",u.desc="Filters MIDI messages",u.color=n,u["@cmd"]={type:"enum",title:"Command",values:r.commands_reversed},u.prototype.getTitle=function(){var t=null;return t=-1==this.properties.cmd?"Nothing":r.commands_short[this.properties.cmd]||"Unknown",-1!=this.properties.min_value&&-1!=this.properties.max_value&&(t+=" "+(this.properties.min_value==this.properties.max_value?this.properties.max_value:this.properties.min_value+".."+this.properties.max_value)),"Filter: "+t},u.prototype.onPropertyChanged=function(t,e){if("cmd"==t){var n=Number(e);isNaN(n)&&(n=r.commands[e]||0),this.properties.cmd=n}},u.prototype.onAction=function(t,e){if(e&&e.constructor===r){if(this._learning)this._learning=!1,this.boxcolor="#AAA",this.properties.channel=e.channel,this.properties.cmd=e.cmd,this.properties.min_value=this.properties.max_value=e.data[1];else{if(-1!=this.properties.channel&&e.channel!=this.properties.channel)return;if(-1!=this.properties.cmd&&e.cmd!=this.properties.cmd)return;if(-1!=this.properties.min_value&&e.data[1]<this.properties.min_value)return;if(-1!=this.properties.max_value&&e.data[1]>this.properties.max_value)return}this.trigger("on_midi",e)}},e.registerNodeType("midi/filter",u),c.title="MIDIEvent",c.desc="Create a MIDI Event",c.color=n,c.prototype.onAction=function(t,e){if("assign"==t)return this.properties.channel=e.channel,this.properties.cmd=e.cmd,this.properties.value1=e.data[1],this.properties.value2=e.data[2],void(e.cmd==r.NOTEON?this.gate=!0:e.cmd==r.NOTEOFF&&(this.gate=!1));(e=this.midi_event).channel=this.properties.channel,this.properties.cmd&&this.properties.cmd.constructor===String?e.setCommandFromString(this.properties.cmd):e.cmd=this.properties.cmd,e.data[0]=e.cmd|e.channel,e.data[1]=Number(this.properties.value1),e.data[2]=Number(this.properties.value2),this.trigger("on_midi",e)},c.prototype.onExecute=function(){var t=this.properties;if(this.inputs)for(var e=0;e<this.inputs.length;++e){var n=this.inputs[e];if(-1!=n.link)switch(n.name){case"note":null!=(i=this.getInputData(e))&&(i.constructor===String&&(i=r.NoteStringToPitch(i)),this.properties.value1=(0|i)%255);break;case"cmd":null!=(i=this.getInputData(e))&&(this.properties.cmd=i);break;case"value1":null!=(i=this.getInputData(e))&&(this.properties.value1=clamp(0|i,0,127));break;case"value2":null!=(i=this.getInputData(e))&&(this.properties.value2=clamp(0|i,0,127))}}if(this.outputs)for(e=0;e<this.outputs.length;++e){var i=null;switch(this.outputs[e].name){case"midi":(i=new r).setup([t.cmd,t.value1,t.value2]),i.channel=t.channel;break;case"command":i=t.cmd;break;case"cc":i=t.value1;break;case"cc_value":i=t.value2;break;case"note":i=t.cmd==r.NOTEON||t.cmd==r.NOTEOFF?t.value1:null;break;case"velocity":i=t.cmd==r.NOTEON?t.value2:null;break;case"pitch":i=t.cmd==r.NOTEON?r.computePitch(t.value1):null;break;case"pitchbend":i=t.cmd==r.PITCHBEND?r.computePitchBend(t.value1,t.value2):null;break;case"gate":i=this.gate;break;default:continue}null!==i&&this.setOutputData(e,i)}},c.prototype.onPropertyChanged=function(t,e){"cmd"==t&&(this.properties.cmd=r.computeCommandFromString(e))},c.prototype.onGetInputs=function(){return[["cmd","number"],["note","number"],["value1","number"],["value2","number"]]},c.prototype.onGetOutputs=function(){return[["midi","midi"],["on_midi",e.EVENT],["command","number"],["note","number"],["velocity","number"],["cc","number"],["cc_value","number"],["pitch","number"],["gate","bool"],["pitchbend","number"]]},e.registerNodeType("midi/event",c),p.title="MIDICC",p.desc="gets a Controller Change",p.color=n,p.prototype.onExecute=function(){this.properties;o.input&&(this.properties.value=o.input.state.cc[this.properties.cc]),this.setOutputData(0,this.properties.value)},e.registerNodeType("midi/cc",p),d.title="MIDI Generator",d.desc="Generates a random MIDI note",d.color=n,d.processScale=function(t){for(var n=t.split(","),i=0;i<n.length;++i){var o=n[i];2==o.length&&"#"!=o[1]||o.length>2?n[i]=-e.MIDIEvent.NoteStringToPitch(o):n[i]=r.note_to_index[o]||0}return n},d.prototype.onPropertyChanged=function(t,e){"notes"==t&&(this.notes_pitches=d.processScale(e))},d.prototype.onExecute=function(){var t=this.getInputData(2);null!=t&&(this.properties.octave=t);var e=this.getInputData(1);e&&(this.notes_pitches=d.processScale(e))},d.prototype.onAction=function(t,e){var n=0,i=this.notes_pitches.length,o=0;"sequence"==this.properties.mode?o=this.sequence_index=(this.sequence_index+1)%i:"random"==this.properties.mode&&(o=Math.floor(Math.random()*i));var a=this.notes_pitches[o];n=a>=0?a+12*(this.properties.octave-1)+33:-a,(e=new r).setup([r.NOTEON,n,10]);var s=this.properties.duration||1;this.trigger("note",e),setTimeout(function(){var t=new r;t.setup([r.NOTEOFF,n,0]),this.trigger("note",t)}.bind(this),1e3*s)},e.registerNodeType("midi/generator",d),h.title="MIDI Transpose",h.desc="Transpose a MIDI note",h.color=n,h.prototype.onAction=function(t,e){e&&e.constructor===r&&(e.data[0]==r.NOTEON||e.data[0]==r.NOTEOFF?(this.midi_event=new r,this.midi_event.setup(e.data),this.midi_event.data[1]=Math.round(this.midi_event.data[1]+this.properties.amount),this.trigger("out",this.midi_event)):this.trigger("out",e))},h.prototype.onExecute=function(){var t=this.getInputData(1);null!=t&&(this.properties.amount=t)},e.registerNodeType("midi/transpose",h),f.title="MIDI Quantize Pitch",f.desc="Transpose a MIDI note tp fit an scale",f.color=n,f.prototype.onPropertyChanged=function(t,e){"scale"==t&&this.processScale(e)},f.prototype.processScale=function(t){this._current_scale=t,this.notes_pitches=d.processScale(t);for(var e=0;e<12;++e)this.valid_notes[e]=-1!=this.notes_pitches.indexOf(e);for(e=0;e<12;++e)if(this.valid_notes[e])this.offset_notes[e]=0;else for(var n=1;n<12;++n){if(this.valid_notes[(e-n)%12]){this.offset_notes[e]=-n;break}if(this.valid_notes[(e+n)%12]){this.offset_notes[e]=n;break}}},f.prototype.onAction=function(t,e){if(e&&e.constructor===r)if(e.data[0]==r.NOTEON||e.data[0]==r.NOTEOFF){this.midi_event=new r,this.midi_event.setup(e.data);var n=e.note,i=r.note_to_index[n],o=this.offset_notes[i];this.midi_event.data[1]+=o,this.trigger("out",this.midi_event)}else this.trigger("out",e)},f.prototype.onExecute=function(){var t=this.getInputData(1);null!=t&&t!=this._current_scale&&this.processScale(t)},e.registerNodeType("midi/quantize",f),g.title="MIDI fromFile",g.desc="Plays a MIDI file",g.color=n,g.prototype.onAction=function(t){"play"==t?this.play():"pause"==t&&(this._playing=!this._playing)},g.prototype.onPropertyChanged=function(t,e){"url"==t&&this.loadMIDIFile(e)},g.prototype.onExecute=function(){if(this._midi&&this._playing){this._current_time+=this.graph.elapsed_time;for(var t=100*this._current_time,e=0;e<this._midi.tracks;++e){var n=this._midi.track[e];n._last_pos||(n._last_pos=0,n._time=0);var i=n.event[n._last_pos];if(i&&n._time+i.deltaTime<=t&&(n._last_pos++,n._time+=i.deltaTime,i.data)){var o=i.type<<4+i.channel,a=new r;a.setup([o,i.data[0],i.data[1]]),this.trigger("note",a)}}}},g.prototype.play=function(){if(this._playing=!0,this._current_time=0,this._midi)for(var t=0;t<this._midi.tracks;++t){var e=this._midi.track[t];e._last_pos=0,e._time=0}},g.prototype.loadMIDIFile=function(t){var n=this;e.fetchFile(t,"arraybuffer",(function(t){n.boxcolor="#AFA",n._midi=MidiParser.parse(new Uint8Array(t)),n.properties.autoplay&&n.play()}),(function(t){n.boxcolor="#FAA",n._midi=null}))},g.prototype.onDropFile=function(t){this.properties.url="",this.loadMIDIFile(t)},e.registerNodeType("midi/fromFile",g),v.title="MIDI Play",v.desc="Plays a MIDI note",v.color=n,v.prototype.onAction=function(t,e){if(e&&e.constructor===r){if(this.instrument&&e.data[0]==r.NOTEON){var n=e.note;if(!n||"undefined"==n||n.constructor!==String)return;this.instrument.play(n,e.octave,this.properties.duration,this.properties.volume)}this.trigger("note",e)}},v.prototype.onExecute=function(){var t=this.getInputData(1);null!=t&&(this.properties.volume=t);var e=this.getInputData(2);null!=e&&(this.properties.duration=e)},e.registerNodeType("midi/play",v),m.title="MIDI Keys",m.desc="Keyboard to play notes",m.color=n,m.keys=[{x:0,w:1,h:1,t:0},{x:.75,w:.5,h:.6,t:1},{x:1,w:1,h:1,t:0},{x:1.75,w:.5,h:.6,t:1},{x:2,w:1,h:1,t:0},{x:2.75,w:.5,h:.6,t:1},{x:3,w:1,h:1,t:0},{x:4,w:1,h:1,t:0},{x:4.75,w:.5,h:.6,t:1},{x:5,w:1,h:1,t:0},{x:5.75,w:.5,h:.6,t:1},{x:6,w:1,h:1,t:0}],m.prototype.onDrawForeground=function(t){if(!this.flags.collapsed){var e=12*this.properties.num_octaves;this.keys.length=e;var n=this.size[0]/(7*this.properties.num_octaves),r=this.size[1];t.globalAlpha=1;for(var i=0;i<2;i++)for(var o=0;o<e;++o){var a=m.keys[o%12];if(a.t==i){var s=7*Math.floor(o/12)*n+a.x*n;t.fillStyle=0==i?this.keys[o]?"#CCC":"white":this.keys[o]?"#333":"black",t.fillRect(s+1,0,n*a.w-2,r*a.h)}}}},m.prototype.getKeyIndex=function(t){this.properties.num_octaves;for(var e=this.size[0]/(7*this.properties.num_octaves),n=this.size[1],r=1;r>=0;r--)for(var i=0;i<this.keys.length;++i){var o=m.keys[i%12];if(o.t==r){var a=7*Math.floor(i/12)*e+o.x*e,s=e*o.w,l=n*o.h;if(!(t[0]<a||t[0]>a+s||t[1]>l))return i}}return-1},m.prototype.onAction=function(t,e){if("reset"!=t){if(e&&e.constructor===r){var n=e,i=12*(this.properties.start_octave-1)+29,o=n.data[1]-i;o>=0&&o<this.keys.length&&(n.data[0]==r.NOTEON?this.keys[o]=!0:n.data[0]==r.NOTEOFF&&(this.keys[o]=!1)),this.trigger("note",n)}}else for(var a=0;a<this.keys.length;++a)this.keys[a]=!1},m.prototype.onMouseDown=function(t,e){if(!(e[1]<0)){var n=this.getKeyIndex(e);this.keys[n]=!0,this._last_key=n;var i=12*(this.properties.start_octave-1)+29+n,o=new r;return o.setup([r.NOTEON,i,100]),this.trigger("note",o),!0}},m.prototype.onMouseMove=function(t,e){if(!(e[1]<0||-1==this._last_key)){this.setDirtyCanvas(!0);var n=this.getKeyIndex(e);if(this._last_key==n)return!0;this.keys[this._last_key]=!1;var i=12*(this.properties.start_octave-1)+29+this._last_key;(o=new r).setup([r.NOTEOFF,i,100]),this.trigger("note",o),this.keys[n]=!0;var o;i=12*(this.properties.start_octave-1)+29+n;return(o=new r).setup([r.NOTEON,i,100]),this.trigger("note",o),this._last_key=n,!0}},m.prototype.onMouseUp=function(t,e){if(!(e[1]<0)){var n=this.getKeyIndex(e);this.keys[n]=!1,this._last_key=-1;var i=12*(this.properties.start_octave-1)+29+n,o=new r;return o.setup([r.NOTEOFF,i,100]),this.trigger("note",o),!0}},e.registerNodeType("midi/keys",m)}(this),function(t){var e=t.LiteGraph,n={};function r(){this.properties={src:"",gain:.5,loop:!0,autoplay:!0,playbackRate:1},this._loading_audio=!1,this._audiobuffer=null,this._audionodes=[],this._last_sourcenode=null,this.addOutput("out","audio"),this.addInput("gain","number");var t=n.getAudioContext();this.audionode=t.createGain(),this.audionode.graphnode=this,this.audionode.gain.value=this.properties.gain,this.properties.src&&this.loadSound(this.properties.src)}function i(){this.properties={gain:.5},this._audionodes=[],this._media_stream=null,this.addOutput("out","audio"),this.addInput("gain","number");var t=n.getAudioContext();this.audionode=t.createGain(),this.audionode.graphnode=this,this.audionode.gain.value=this.properties.gain}function o(){this.properties={fftSize:2048,minDecibels:-100,maxDecibels:-10,smoothingTimeConstant:.5};var t=n.getAudioContext();this.audionode=t.createAnalyser(),this.audionode.graphnode=this,this.audionode.fftSize=this.properties.fftSize,this.audionode.minDecibels=this.properties.minDecibels,this.audionode.maxDecibels=this.properties.maxDecibels,this.audionode.smoothingTimeConstant=this.properties.smoothingTimeConstant,this.addInput("in","audio"),this.addOutput("freqs","array"),this.addOutput("samples","array"),this._freq_bin=null,this._time_bin=null}function a(){this.properties={gain:1},this.audionode=n.getAudioContext().createGain(),this.addInput("in","audio"),this.addInput("gain","number"),this.addOutput("out","audio")}function s(){this.properties={impulse_src:"",normalize:!0},this.audionode=n.getAudioContext().createConvolver(),this.addInput("in","audio"),this.addOutput("out","audio")}function l(){this.properties={threshold:-50,knee:40,ratio:12,reduction:-20,attack:0,release:.25},this.audionode=n.getAudioContext().createDynamicsCompressor(),this.addInput("in","audio"),this.addOutput("out","audio")}function u(){this.properties={},this.audionode=n.getAudioContext().createWaveShaper(),this.addInput("in","audio"),this.addInput("shape","waveshape"),this.addOutput("out","audio")}function c(){this.properties={gain1:.5,gain2:.5},this.audionode=n.getAudioContext().createGain(),this.audionode1=n.getAudioContext().createGain(),this.audionode1.gain.value=this.properties.gain1,this.audionode2=n.getAudioContext().createGain(),this.audionode2.gain.value=this.properties.gain2,this.audionode1.connect(this.audionode),this.audionode2.connect(this.audionode),this.addInput("in1","audio"),this.addInput("in1 gain","number"),this.addInput("in2","audio"),this.addInput("in2 gain","number"),this.addOutput("out","audio")}function p(){this.properties={A:.1,D:.1,S:.1,R:.1},this.audionode=n.getAudioContext().createGain(),this.audionode.gain.value=0,this.addInput("in","audio"),this.addInput("gate","boolean"),this.addOutput("out","audio"),this.gate=!1}function d(){this.properties={delayTime:.5},this.audionode=n.getAudioContext().createDelay(10),this.audionode.delayTime.value=this.properties.delayTime,this.addInput("in","audio"),this.addInput("time","number"),this.addOutput("out","audio")}function h(){this.properties={frequency:350,detune:0,Q:1},this.addProperty("type","lowpass","enum",{values:["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]}),this.audionode=n.getAudioContext().createBiquadFilter(),this.addInput("in","audio"),this.addOutput("out","audio")}function f(){this.properties={frequency:440,detune:0,type:"sine"},this.addProperty("type","sine","enum",{values:["sine","square","sawtooth","triangle","custom"]}),this.audionode=n.getAudioContext().createOscillator(),this.addOutput("out","audio")}function g(){this.properties={continuous:!0,mark:-1},this.addInput("data","array"),this.addInput("mark","number"),this.size=[300,200],this._last_buffer=null}function v(){this.properties={band:440,amplitude:1},this.addInput("freqs","array"),this.addOutput("signal","number")}function m(){if(!m.default_code){var t=m.default_function.toString(),e=t.indexOf("{")+1,r=t.lastIndexOf("}");m.default_code=t.substr(e,r-e)}this.properties={code:m.default_code};var i=n.getAudioContext();i.createScriptProcessor?this.audionode=i.createScriptProcessor(4096,1,1):(console.warn("ScriptProcessorNode deprecated"),this.audionode=i.createGain()),this.processCode(),m._bypass_function||(m._bypass_function=this.audionode.onaudioprocess),this.addInput("in","audio"),this.addOutput("out","audio")}function _(){this.audionode=n.getAudioContext().destination,this.addInput("in","audio")}t.LGAudio=n,n.getAudioContext=function(){if(!this._audio_context){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return console.error("AudioContext not supported by browser"),null;this._audio_context=new AudioContext,this._audio_context.onmessage=function(t){console.log("msg",t)},this._audio_context.onended=function(t){console.log("ended",t)},this._audio_context.oncomplete=function(t){console.log("complete",t)}}return this._audio_context},n.connect=function(t,e){try{t.connect(e)}catch(n){console.warn("LGraphAudio:",n)}},n.disconnect=function(t,e){try{t.disconnect(e)}catch(n){console.warn("LGraphAudio:",n)}},n.changeAllAudiosConnections=function(t,e){if(t.inputs)for(var r=0;r<t.inputs.length;++r){var i=t.inputs[r];if(c=t.graph.links[i.link]){var o=t.graph.getNodeById(c.origin_id),a=null;a=o.getAudioNodeInOutputSlot?o.getAudioNodeInOutputSlot(c.origin_slot):o.audionode;var s=null;s=t.getAudioNodeInInputSlot?t.getAudioNodeInInputSlot(r):t.audionode,e?n.connect(a,s):n.disconnect(a,s)}}if(t.outputs)for(r=0;r<t.outputs.length;++r)for(var l=t.outputs[r],u=0;u<l.links.length;++u){var c;if(c=t.graph.links[l.links[u]]){a=null;a=t.getAudioNodeInOutputSlot?t.getAudioNodeInOutputSlot(r):t.audionode;var p=t.graph.getNodeById(c.target_id);s=null;s=p.getAudioNodeInInputSlot?p.getAudioNodeInInputSlot(c.target_slot):p.audionode,e?n.connect(a,s):n.disconnect(a,s)}}},n.onConnectionsChange=function(t,r,i,o){if(t==e.OUTPUT){var a=null;if(o&&(a=this.graph.getNodeById(o.target_id)),a){var s=null;s=this.getAudioNodeInOutputSlot?this.getAudioNodeInOutputSlot(r):this.audionode;var l=null;l=a.getAudioNodeInInputSlot?a.getAudioNodeInInputSlot(o.target_slot):a.audionode,i?n.connect(s,l):n.disconnect(s,l)}}},n.createAudioNodeWrapper=function(t){var e=t.prototype.onPropertyChanged;t.prototype.onPropertyChanged=function(t,n){e&&e.call(this,t,n),this.audionode&&void 0!==this.audionode[t]&&(void 0!==this.audionode[t].value?this.audionode[t].value=n:this.audionode[t]=n)},t.prototype.onConnectionsChange=n.onConnectionsChange},n.cached_audios={},n.loadSound=function(t,e,r){if(!n.cached_audios[t]||-1!=t.indexOf("blob:")){n.onProcessAudioURL&&(t=n.onProcessAudioURL(t));var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var o=n.getAudioContext();return i.onload=function(){console.log("AudioSource loaded"),o.decodeAudioData(i.response,(function(r){console.log("AudioSource decoded"),n.cached_audios[t]=r,e&&e(r)}),a)},i.send(),i}function a(t){console.log("Audio loading sample error:",t),r&&r(t)}e&&e(n.cached_audios[t])},r.desc="Plays an audio file",r["@src"]={widget:"resource"},r.supported_extensions=["wav","ogg","mp3"],r.prototype.onAdded=function(t){t.status===LGraph.STATUS_RUNNING&&this.onStart()},r.prototype.onStart=function(){this._audiobuffer&&this.properties.autoplay&&this.playBuffer(this._audiobuffer)},r.prototype.onStop=function(){this.stopAllSounds()},r.prototype.onPause=function(){this.pauseAllSounds()},r.prototype.onUnpause=function(){this.unpauseAllSounds()},r.prototype.onRemoved=function(){this.stopAllSounds(),this._dropped_url&&URL.revokeObjectURL(this._url)},r.prototype.stopAllSounds=function(){for(var t=0;t<this._audionodes.length;++t)this._audionodes[t].started&&(this._audionodes[t].started=!1,this._audionodes[t].stop());this._audionodes.length=0},r.prototype.pauseAllSounds=function(){n.getAudioContext().suspend()},r.prototype.unpauseAllSounds=function(){n.getAudioContext().resume()},r.prototype.onExecute=function(){if(this.inputs)for(var t=0;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link){var n=this.getInputData(t);if(void 0!==n)if("gain"==e.name)this.audionode.gain.value=n;else if("src"==e.name)this.setProperty("src",n);else if("playbackRate"==e.name){this.properties.playbackRate=n;for(var r=0;r<this._audionodes.length;++r)this._audionodes[r].playbackRate.value=n}}}if(this.outputs)for(t=0;t<this.outputs.length;++t){"buffer"==this.outputs[t].name&&this._audiobuffer&&this.setOutputData(t,this._audiobuffer)}},r.prototype.onAction=function(t){this._audiobuffer&&("Play"==t?this.playBuffer(this._audiobuffer):"Stop"==t&&this.stopAllSounds())},r.prototype.onPropertyChanged=function(t,e){if("src"==t)this.loadSound(e);else if("gain"==t)this.audionode.gain.value=e;else if("playbackRate"==t)for(var n=0;n<this._audionodes.length;++n)this._audionodes[n].playbackRate.value=e},r.prototype.playBuffer=function(t){var e=this,r=n.getAudioContext().createBufferSource();return this._last_sourcenode=r,r.graphnode=this,r.buffer=t,r.loop=this.properties.loop,r.playbackRate.value=this.properties.playbackRate,this._audionodes.push(r),r.connect(this.audionode),this._audionodes.push(r),this.trigger("start"),r.onended=function(){e.trigger("ended");var t=e._audionodes.indexOf(r);-1!=t&&e._audionodes.splice(t,1)},r.started||(r.started=!0,r.start()),r},r.prototype.loadSound=function(t){var r=this;this._request&&(this._request.abort(),this._request=null),this._audiobuffer=null,this._loading_audio=!1,t&&(this._request=n.loadSound(t,(function(t){this.boxcolor=e.NODE_DEFAULT_BOXCOLOR,r._audiobuffer=t,r._loading_audio=!1,r.graph&&r.graph.status===LGraph.STATUS_RUNNING&&r.onStart()})),this._loading_audio=!0,this.boxcolor="#AA4")},r.prototype.onConnectionsChange=n.onConnectionsChange,r.prototype.onGetInputs=function(){return[["playbackRate","number"],["src","string"],["Play",e.ACTION],["Stop",e.ACTION]]},r.prototype.onGetOutputs=function(){return[["buffer","audiobuffer"],["start",e.EVENT],["ended",e.EVENT]]},r.prototype.onDropFile=function(t){this._dropped_url&&URL.revokeObjectURL(this._dropped_url);var e=URL.createObjectURL(t);this.properties.src=e,this.loadSound(e),this._dropped_url=e},r.title="Source",r.desc="Plays audio",e.registerNodeType("audio/source",r),i.prototype.onAdded=function(t){t.status===LGraph.STATUS_RUNNING&&this.onStart()},i.prototype.onStart=function(){null!=this._media_stream||this._waiting_confirmation||this.openStream()},i.prototype.onStop=function(){this.audionode.gain.value=0},i.prototype.onPause=function(){this.audionode.gain.value=0},i.prototype.onUnpause=function(){this.audionode.gain.value=this.properties.gain},i.prototype.onRemoved=function(){if(this.audionode.gain.value=0,this.audiosource_node&&(this.audiosource_node.disconnect(this.audionode),this.audiosource_node=null),this._media_stream){var t=this._media_stream.getTracks();t.length&&t[0].stop()}},i.prototype.openStream=function(){if(navigator.mediaDevices){this._waiting_confirmation=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.streamReady.bind(this)).catch((function(e){console.log("Media rejected",e),t._media_stream=!1,t.boxcolor="red"}));var t=this}else console.log("getUserMedia() is not supported in your browser, use chrome and enable WebRTC from about://flags")},i.prototype.streamReady=function(t){this._media_stream=t,this.audiosource_node&&this.audiosource_node.disconnect(this.audionode);var e=n.getAudioContext();this.audiosource_node=e.createMediaStreamSource(t),this.audiosource_node.graphnode=this,this.audiosource_node.connect(this.audionode),this.boxcolor="white"},i.prototype.onExecute=function(){if(null!=this._media_stream||this._waiting_confirmation||this.openStream(),this.inputs)for(var t=0;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link){var n=this.getInputData(t);void 0!==n&&"gain"==e.name&&(this.audionode.gain.value=this.properties.gain=n)}}},i.prototype.onAction=function(t){"Play"==t?this.audionode.gain.value=this.properties.gain:"Stop"==t&&(this.audionode.gain.value=0)},i.prototype.onPropertyChanged=function(t,e){"gain"==t&&(this.audionode.gain.value=e)},i.prototype.onConnectionsChange=n.onConnectionsChange,i.prototype.onGetInputs=function(){return[["playbackRate","number"],["Play",e.ACTION],["Stop",e.ACTION]]},i.title="MediaSource",i.desc="Plays microphone",e.registerNodeType("audio/media_source",i),o.prototype.onPropertyChanged=function(t,e){this.audionode[t]=e},o.prototype.onExecute=function(){if(this.isOutputConnected(0)){var t=this.audionode.frequencyBinCount;this._freq_bin&&this._freq_bin.length==t||(this._freq_bin=new Uint8Array(t)),this.audionode.getByteFrequencyData(this._freq_bin),this.setOutputData(0,this._freq_bin)}if(this.isOutputConnected(1)){t=this.audionode.frequencyBinCount;this._time_bin&&this._time_bin.length==t||(this._time_bin=new Uint8Array(t)),this.audionode.getByteTimeDomainData(this._time_bin),this.setOutputData(1,this._time_bin)}for(var e=1;e<this.inputs.length;++e){var n=this.inputs[e];if(null!=n.link){var r=this.getInputData(e);void 0!==r&&(this.audionode[n.name].value=r)}}},o.prototype.onGetInputs=function(){return[["minDecibels","number"],["maxDecibels","number"],["smoothingTimeConstant","number"]]},o.prototype.onGetOutputs=function(){return[["freqs","array"],["samples","array"]]},o.title="Analyser",o.desc="Audio Analyser",e.registerNodeType("audio/analyser",o),a.prototype.onExecute=function(){if(this.inputs&&this.inputs.length)for(var t=1;t<this.inputs.length;++t){var e=this.inputs[t],n=this.getInputData(t);void 0!==n&&(this.audionode[e.name].value=n)}},n.createAudioNodeWrapper(a),a.title="Gain",a.desc="Audio gain",e.registerNodeType("audio/gain",a),n.createAudioNodeWrapper(s),s.prototype.onRemove=function(){this._dropped_url&&URL.revokeObjectURL(this._dropped_url)},s.prototype.onPropertyChanged=function(t,e){"impulse_src"==t?this.loadImpulse(e):"normalize"==t&&(this.audionode.normalize=e)},s.prototype.onDropFile=function(t){this._dropped_url&&URL.revokeObjectURL(this._dropped_url),this._dropped_url=URL.createObjectURL(t),this.properties.impulse_src=this._dropped_url,this.loadImpulse(this._dropped_url)},s.prototype.loadImpulse=function(t){var e=this;this._request&&(this._request.abort(),this._request=null),this._impulse_buffer=null,this._loading_impulse=!1,t&&(this._request=n.loadSound(t,(function(t){e._impulse_buffer=t,e.audionode.buffer=t,console.log("Impulse signal set"),e._loading_impulse=!1})),this._loading_impulse=!0)},s.title="Convolver",s.desc="Convolves the signal (used for reverb)",e.registerNodeType("audio/convolver",s),n.createAudioNodeWrapper(l),l.prototype.onExecute=function(){if(this.inputs&&this.inputs.length)for(var t=1;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link){var n=this.getInputData(t);void 0!==n&&(this.audionode[e.name].value=n)}}},l.prototype.onGetInputs=function(){return[["threshold","number"],["knee","number"],["ratio","number"],["reduction","number"],["attack","number"],["release","number"]]},l.title="DynamicsCompressor",l.desc="Dynamics Compressor",e.registerNodeType("audio/dynamicsCompressor",l),u.prototype.onExecute=function(){if(this.inputs&&this.inputs.length){var t=this.getInputData(1);void 0!==t&&(this.audionode.curve=t)}},u.prototype.setWaveShape=function(t){this.audionode.curve=t},n.createAudioNodeWrapper(u),c.prototype.getAudioNodeInInputSlot=function(t){return 0==t?this.audionode1:2==t?this.audionode2:void 0},c.prototype.onPropertyChanged=function(t,e){"gain1"==t?this.audionode1.gain.value=e:"gain2"==t&&(this.audionode2.gain.value=e)},c.prototype.onExecute=function(){if(this.inputs&&this.inputs.length)for(var t=1;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link&&"audio"!=e.type){var n=this.getInputData(t);void 0!==n&&(1==t?this.audionode1.gain.value=n:3==t&&(this.audionode2.gain.value=n))}}},n.createAudioNodeWrapper(c),c.title="Mixer",c.desc="Audio mixer",e.registerNodeType("audio/mixer",c),p.prototype.onExecute=function(){var t=n.getAudioContext().currentTime,e=this.audionode.gain,r=this.getInputData(1),i=this.getInputOrProperty("A"),o=this.getInputOrProperty("D"),a=this.getInputOrProperty("S"),s=this.getInputOrProperty("R");!this.gate&&r?(e.cancelScheduledValues(0),e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+i),e.linearRampToValueAtTime(a,t+i+o)):this.gate&&!r&&(e.cancelScheduledValues(0),e.setValueAtTime(e.value,t),e.linearRampToValueAtTime(0,t+s)),this.gate=r},p.prototype.onGetInputs=function(){return[["A","number"],["D","number"],["S","number"],["R","number"]]},n.createAudioNodeWrapper(p),p.title="ADSR",p.desc="Audio envelope",e.registerNodeType("audio/adsr",p),n.createAudioNodeWrapper(d),d.prototype.onExecute=function(){var t=this.getInputData(1);void 0!==t&&(this.audionode.delayTime.value=t)},d.title="Delay",d.desc="Audio delay",e.registerNodeType("audio/delay",d),h.prototype.onExecute=function(){if(this.inputs&&this.inputs.length)for(var t=1;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link){var n=this.getInputData(t);void 0!==n&&(this.audionode[e.name].value=n)}}},h.prototype.onGetInputs=function(){return[["frequency","number"],["detune","number"],["Q","number"]]},n.createAudioNodeWrapper(h),h.title="BiquadFilter",h.desc="Audio filter",e.registerNodeType("audio/biquadfilter",h),f.prototype.onStart=function(){if(!this.audionode.started){this.audionode.started=!0;try{this.audionode.start()}catch(t){}}},f.prototype.onStop=function(){this.audionode.started&&(this.audionode.started=!1,this.audionode.stop())},f.prototype.onPause=function(){this.onStop()},f.prototype.onUnpause=function(){this.onStart()},f.prototype.onExecute=function(){if(this.inputs&&this.inputs.length)for(var t=0;t<this.inputs.length;++t){var e=this.inputs[t];if(null!=e.link){var n=this.getInputData(t);void 0!==n&&(this.audionode[e.name].value=n)}}},f.prototype.onGetInputs=function(){return[["frequency","number"],["detune","number"],["type","string"]]},n.createAudioNodeWrapper(f),f.title="Oscillator",f.desc="Oscillator",e.registerNodeType("audio/oscillator",f),g.prototype.onExecute=function(){this._last_buffer=this.getInputData(0);var t=this.getInputData(1);void 0!==t&&(this.properties.mark=t),this.setDirtyCanvas(!0,!1)},g.prototype.onDrawForeground=function(t){if(this._last_buffer){var e=this._last_buffer,r=e.length/this.size[0],i=this.size[1];t.fillStyle="black",t.fillRect(0,0,this.size[0],this.size[1]),t.strokeStyle="white",t.beginPath();var o=0;if(this.properties.continuous){t.moveTo(o,i);for(var a=0;a<e.length;a+=r)t.lineTo(o,i-e[0|a]/255*i),o++}else for(a=0;a<e.length;a+=r)t.moveTo(o+.5,i),t.lineTo(o+.5,i-e[0|a]/255*i),o++;if(t.stroke(),this.properties.mark>=0){var s=n.getAudioContext().sampleRate/e.length;(o=this.properties.mark/s*2/r)>=this.size[0]&&(o=this.size[0]-1),t.strokeStyle="red",t.beginPath(),t.moveTo(o,i),t.lineTo(o,0),t.stroke()}}},g.title="Visualization",g.desc="Audio Visualization",e.registerNodeType("audio/visualization",g),v.prototype.onExecute=function(){if(this._freqs=this.getInputData(0),this._freqs){var t=this.properties.band;void 0!==(r=this.getInputData(1))&&(t=r);var e=t/(n.getAudioContext().sampleRate/this._freqs.length)*2,r=0;if(e<0&&(r=this._freqs[0]),e>=this._freqs.length)r=this._freqs[this._freqs.length-1];else{var i=0|e,o=e-i;r=this._freqs[i]*(1-o)+this._freqs[i+1]*o}this.setOutputData(0,r/255*this.properties.amplitude)}},v.prototype.onGetInputs=function(){return[["band","number"]]},v.title="Signal",v.desc="extract the signal of some frequency",e.registerNodeType("audio/signal",v),m.prototype.onAdded=function(t){t.status==LGraph.STATUS_RUNNING&&(this.audionode.onaudioprocess=this._callback)},m["@code"]={widget:"code",type:"code"},m.prototype.onStart=function(){this.audionode.onaudioprocess=this._callback},m.prototype.onStop=function(){this.audionode.onaudioprocess=m._bypass_function},m.prototype.onPause=function(){this.audionode.onaudioprocess=m._bypass_function},m.prototype.onUnpause=function(){this.audionode.onaudioprocess=this._callback},m.prototype.onExecute=function(){},m.prototype.onRemoved=function(){this.audionode.onaudioprocess=m._bypass_function},m.prototype.processCode=function(){try{var t=new Function("properties",this.properties.code);this._script=new t(this.properties),this._old_code=this.properties.code,this._callback=this._script.onaudioprocess}catch(e){console.error("Error in onaudioprocess code",e),this._callback=m._bypass_function,this.audionode.onaudioprocess=this._callback}},m.prototype.onPropertyChanged=function(t,e){"code"==t&&(this.properties.code=e,this.processCode(),this.graph&&this.graph.status==LGraph.STATUS_RUNNING&&(this.audionode.onaudioprocess=this._callback))},m.default_function=function(){this.onaudioprocess=function(t){for(var e=t.inputBuffer,n=t.outputBuffer,r=0;r<n.numberOfChannels;r++)for(var i=e.getChannelData(r),o=n.getChannelData(r),a=0;a<e.length;a++)o[a]=i[a]}},n.createAudioNodeWrapper(m),m.title="Script",m.desc="apply script to signal",e.registerNodeType("audio/script",m),_.title="Destination",_.desc="Audio output",e.registerNodeType("audio/destination",_)}(this),function(t){var e=t.LiteGraph;function n(){this.size=[60,20],this.addInput("send",e.ACTION),this.addOutput("received",e.EVENT),this.addInput("in",0),this.addOutput("out",0),this.properties={url:"",room:"lgraph",only_send_changes:!0},this._ws=null,this._last_sent_data=[],this._last_received_data=[]}function r(){this.room_widget=this.addWidget("text","Room","lgraph",this.setRoom.bind(this)),this.addWidget("button","Reconnect",null,this.connectSocket.bind(this)),this.addInput("send",e.ACTION),this.addOutput("received",e.EVENT),this.addInput("in",0),this.addOutput("out",0),this.properties={url:"tamats.com:55000",room:"lgraph",only_send_changes:!0},this._server=null,this.connectSocket(),this._last_sent_data=[],this._last_received_data=[],"undefined"==typeof SillyClient&&console.warn("remember to add SillyClient.js to your project: https://tamats.com/projects/sillyserver/src/sillyclient.js")}function i(){this.addInput("request",e.ACTION),this.addInput("url","string"),this.addProperty("url",""),this.addOutput("ready",e.EVENT),this.addOutput("data","string"),this.addWidget("button","Fetch",null,this.fetch.bind(this)),this._data=null,this._fetching=null}n.title="WebSocket",n.desc="Send data through a websocket",n.prototype.onPropertyChanged=function(t,e){"url"==t&&this.connectSocket()},n.prototype.onExecute=function(){if(!this._ws&&this.properties.url&&this.connectSocket(),this._ws&&this._ws.readyState==WebSocket.OPEN){for(var t=this.properties.room,e=this.properties.only_send_changes,n=1;n<this.inputs.length;++n){var r=this.getInputData(n);if(null!=r){var i;try{i=JSON.stringify({type:0,room:t,channel:n,data:r})}catch(o){continue}e&&this._last_sent_data[n]==i||(this._last_sent_data[n]=i,this._ws.send(i))}}for(n=1;n<this.outputs.length;++n)this.setOutputData(n,this._last_received_data[n]);"#AFA"==this.boxcolor&&(this.boxcolor="#6C6")}},n.prototype.connectSocket=function(){var t=this,n=this.properties.url;"ws"!=n.substr(0,2)&&(n="ws://"+n),this._ws=new WebSocket(n),this._ws.onopen=function(){console.log("ready"),t.boxcolor="#6C6"},this._ws.onmessage=function(n){t.boxcolor="#AFA";var r=JSON.parse(n.data);if(!r.room||r.room==t.properties.room)if(1==r.type)if(r.data.object_class&&e[r.data.object_class]){var i=null;try{i=new e[r.data.object_class](r.data),t.triggerSlot(0,i)}catch(o){return}}else t.triggerSlot(0,r.data);else t._last_received_data[r.channel||0]=r.data},this._ws.onerror=function(e){console.log("couldnt connect to websocket"),t.boxcolor="#E88"},this._ws.onclose=function(e){console.log("connection closed"),t.boxcolor="#000"}},n.prototype.send=function(t){this._ws&&this._ws.readyState==WebSocket.OPEN&&this._ws.send(JSON.stringify({type:1,msg:t}))},n.prototype.onAction=function(t,e){this._ws&&this._ws.readyState==WebSocket.OPEN&&this._ws.send({type:1,room:this.properties.room,action:t,data:e})},n.prototype.onGetInputs=function(){return[["in",0]]},n.prototype.onGetOutputs=function(){return[["out",0]]},e.registerNodeType("network/websocket",n),r.title="SillyClient",r.desc="Connects to SillyServer to broadcast messages",r.prototype.onPropertyChanged=function(t,e){"room"==t&&(this.room_widget.value=e),this.connectSocket()},r.prototype.setRoom=function(t){this.properties.room=t,this.room_widget.value=t,this.connectSocket()},r.prototype.onDrawForeground=function(){for(var t=1;t<this.inputs.length;++t){this.inputs[t].label="in_"+t}for(t=1;t<this.outputs.length;++t){this.outputs[t].label="out_"+t}},r.prototype.onExecute=function(){if(this._server&&this._server.is_connected){for(var t=this.properties.only_send_changes,e=1;e<this.inputs.length;++e){var n=this.getInputData(e),r=this._last_sent_data[e];if(null!=n){if(t){var i=!0;if(n&&n.length&&r&&r.length==n.length&&n.constructor!==String){for(var o=0;o<n.length;++o)if(r[o]!=n[o]){i=!1;break}}else this._last_sent_data[e]!=n&&(i=!1);if(i)continue}if(this._server.sendMessage({type:0,channel:e,data:n}),n.length&&n.constructor!==String)if(this._last_sent_data[e]){this._last_sent_data[e].length=n.length;for(o=0;o<n.length;++o)this._last_sent_data[e][o]=n[o]}else n.constructor===Array?this._last_sent_data[e]=n.concat():this._last_sent_data[e]=new n.constructor(n);else this._last_sent_data[e]=n}}for(e=1;e<this.outputs.length;++e)this.setOutputData(e,this._last_received_data[e]);"#AFA"==this.boxcolor&&(this.boxcolor="#6C6")}},r.prototype.connectSocket=function(){var t=this;if("undefined"==typeof SillyClient)return this._error||console.error("SillyClient node cannot be used, you must include SillyServer.js"),void(this._error=!0);if(this._server=new SillyClient,this._server.on_ready=function(){console.log("ready"),t.boxcolor="#6C6"},this._server.on_message=function(n,r){var i=null;try{i=JSON.parse(r)}catch(a){return}if(1==i.type)if(i.data.object_class&&e[i.data.object_class]){var o=null;try{o=new e[i.data.object_class](i.data),t.triggerSlot(0,o)}catch(a){return}}else t.triggerSlot(0,i.data);else t._last_received_data[i.channel||0]=i.data;t.boxcolor="#AFA"},this._server.on_error=function(e){console.log("couldnt connect to websocket"),t.boxcolor="#E88"},this._server.on_close=function(e){console.log("connection closed"),t.boxcolor="#000"},this.properties.url&&this.properties.room){try{this._server.connect(this.properties.url,this.properties.room)}catch(n){return console.error("SillyServer error: "+n),void(this._server=null)}this._final_url=this.properties.url+"/"+this.properties.room}},r.prototype.send=function(t){this._server&&this._server.is_connected&&this._server.sendMessage({type:1,data:t})},r.prototype.onAction=function(t,e){this._server&&this._server.is_connected&&this._server.sendMessage({type:1,action:t,data:e})},r.prototype.onGetInputs=function(){return[["in",0]]},r.prototype.onGetOutputs=function(){return[["out",0]]},e.registerNodeType("network/sillyclient",r),i.title="HTTP Request",i.desc="Fetch data through HTTP",i.prototype.fetch=function(){var t=this.properties.url;if(t){this.boxcolor="#FF0";var e=this;this._fetching=fetch(t).then((t=>{if(t.ok)return this.boxcolor="#0F0",t.text();this.boxcolor="#F00",e.trigger("error")})).then((t=>{e._data=t,e._fetching=null,e.trigger("ready")}))}},i.prototype.onAction=function(t){"request"==t&&this.fetch()},i.prototype.onExecute=function(){this.setOutputData(1,this._data)},i.prototype.onGetOutputs=function(){return[["error",e.EVENT]]},e.registerNodeType("network/httprequest",i)}(this)},463:(t,e,n)=>{"use strict";var r=n(791),i=n(296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function y(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!p.call(f,t)||!p.call(h,t)&&(d.test(t)?f[t]=!0:(h[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,_);v[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,_);v[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,_);v[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var G=Symbol.iterator;function R(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=G&&t[G]||t["@@iterator"])?t:null}var P,M=Object.assign;function z(t){if(void 0===P)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P=e&&e[1]||""}return"\n"+P+t}var F=!1;function B(t,e){if(!t||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function j(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case w:return"Portal";case S:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case L:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case N:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case D:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function U(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function V(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=V(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return M({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&y(t,"checked",e,!1)}function J(t,e){Q(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return M({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,pt=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ht.hasOwnProperty(t)&&ht[t]?(""+e).trim():e+"px"}function vt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ht).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ht[e]=ht[t]}))}));var mt=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(t,e){if(e){if(mt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function yt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,Et=null,Tt=null;function St(t){if(t=yi(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),wt(t.stateNode,t.type,e))}}function Ct(t){Et?Tt?Tt.push(t):Tt=[t]:Et=t}function Ot(){if(Et){var t=Et,e=Tt;if(Tt=Et=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function Lt(t,e){return t(e)}function kt(){}var It=!1;function Nt(t,e,n){if(It)return t(e,n);It=!0;try{return Lt(t,e,n)}finally{It=!1,(null!==Et||null!==Tt)&&(kt(),Ot())}}function Dt(t,e){var n=t.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var At=!1;if(c)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){At=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch(ct){At=!1}function Rt(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Pt=!1,Mt=null,zt=!1,Ft=null,Bt={onError:function(t){Pt=!0,Mt=t}};function jt(t,e,n,r,i,o,a,s,l){Pt=!1,Mt=null,Rt.apply(Bt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ut(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Ht(t)!==t)throw Error(o(188))}function Vt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Wt(i),t;if(a===r)return Wt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,$t=i.unstable_requestPaint,Qt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Zt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function pe(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=pe(s):0!==(o&=a)&&(r=pe(o))}else 0!==(a=n&~i)?r=pe(a):0!==o&&(r=pe(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function he(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ve(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function me(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function _e(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,we,Ee,Te,Se,Ce=!1,Oe=[],Le=null,ke=null,Ie=null,Ne=new Map,De=new Map,Ae=[],Ge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":Le=null;break;case"dragenter":case"dragleave":ke=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Ne.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(e.pointerId)}}function Pe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=yi(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Me(t){var e=_i(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ut(n)))return t.blockedOn=e,void Se(t.priority,(function(){Ee(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=yi(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Fe(t,e,n){ze(t)&&n.delete(e)}function Be(){Ce=!1,null!==Le&&ze(Le)&&(Le=null),null!==ke&&ze(ke)&&(ke=null),null!==Ie&&ze(Ie)&&(Ie=null),Ne.forEach(Fe),De.forEach(Fe)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Ce||(Ce=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function He(t){function e(e){return je(e,t)}if(0<Oe.length){je(Oe[0],t);for(var n=1;n<Oe.length;n++){var r=Oe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Le&&je(Le,t),null!==ke&&je(ke,t),null!==Ie&&je(Ie,t),Ne.forEach(e),De.forEach(e),n=0;n<Ae.length;n++)(r=Ae[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ae.length&&null===(n=Ae[0]).blockedOn;)Me(n),null===n.blockedOn&&Ae.shift()}var Ue=b.ReactCurrentBatchConfig,We=!0;function Ve(t,e,n,r){var i=ye,o=Ue.transition;Ue.transition=null;try{ye=1,Xe(t,e,n,r)}finally{ye=i,Ue.transition=o}}function qe(t,e,n,r){var i=ye,o=Ue.transition;Ue.transition=null;try{ye=4,Xe(t,e,n,r)}finally{ye=i,Ue.transition=o}}function Xe(t,e,n,r){if(We){var i=Ke(t,e,n,r);if(null===i)Wr(t,e,r,Ye,n),Re(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Le=Pe(Le,t,e,n,r,i),!0;case"dragenter":return ke=Pe(ke,t,e,n,r,i),!0;case"mouseover":return Ie=Pe(Ie,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ne.set(o,Pe(Ne.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,De.set(o,Pe(De.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Re(t,r),4&e&&-1<Ge.indexOf(t)){for(;null!==i;){var o=yi(i);if(null!==o&&xe(o),null===(o=Ke(t,e,n,r))&&Wr(t,e,r,Ye,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var Ye=null;function Ke(t,e,n,r){if(Ye=null,null!==(t=_i(t=xt(r))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ut(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function $e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,r=n.length,i="value"in Qe?Qe.value:Qe.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Ze=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),pn=M({},un,{view:0,detail:0}),dn=on(pn),hn=M({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),fn=on(hn),gn=on(M({},hn,{dataTransfer:0})),vn=on(M({},pn,{relatedTarget:0})),mn=on(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=M({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yn=on(_n),bn=on(M({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function Sn(){return Tn}var Cn=M({},pn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),On=on(Cn),Ln=on(M({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=on(M({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=on(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},hn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Nn),An=[9,13,27,32],Gn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Pn=c&&"TextEvent"in window&&!Rn,Mn=c&&(!Gn||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Fn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==An.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Un[t.type]:"textarea"===e}function Vn(t,e,n,r){Ct(r),0<(e=qr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Yn(t){zr(t,0)}function Kn(t){if(X(bi(t)))return t}function $n(t,e){if("change"===t)return e}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zn="function"===typeof tr.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(t){if("value"===t.propertyName&&Kn(Xn)){var e=[];Vn(e,Xn,t,xt(t)),Nt(Yn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(qn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Xn)}function or(t,e){if("click"===t)return Kn(e)}function ar(t,e){if("input"===t||"change"===t)return Kn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!p.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function pr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?pr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function hr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,mr=null,_r=null,yr=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=qr(mr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Tr={};function Sr(t){if(Er[t])return Er[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Tr)return Er[t]=n[e];return t}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Sr("animationend"),Or=Sr("animationiteration"),Lr=Sr("animationstart"),kr=Sr("transitionend"),Ir=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){Ir.set(t,e),l(e,[t])}for(var Ar=0;Ar<Nr.length;Ar++){var Gr=Nr[Ar];Dr(Gr.toLowerCase(),"on"+(Gr[0].toUpperCase()+Gr.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(Or,"onAnimationIteration"),Dr(Lr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(kr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Mr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,u){if(jt.apply(this,arguments),Pt){if(!Pt)throw Error(o(198));var c=Mt;Pt=!1,Mt=null,zt||(zt=!0,Ft=c)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Mr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Mr(i,s,u),o=l}}}if(zt)throw t=Ft,zt=!1,Ft=null,t}function Fr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Ur(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Ur(n,t,r,e)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Hr(t){if(!t[jr]){t[jr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Pr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jr]||(e[jr]=!0,Br("selectionchange",!1,e))}}function Ur(t,e,n,r){switch($e(e)){case 1:var i=Ve;break;case 4:i=qe;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!At||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=_i(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}Nt((function(){var r=o,i=xt(n),a=[];t:{var s=Ir.get(t);if(void 0!==s){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=On;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Cr:case Or:case Lr:l=mn;break;case kr:l=In;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ln}var c=0!==(4&e),p=!c&&"scroll"===t,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,f=r;null!==f;){var g=(h=f).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==d&&(null!=(g=Dt(f,d))&&c.push(Vr(f,g,h)))),p)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===bt||!(u=n.relatedTarget||n.fromElement)||!_i(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?_i(u):null)&&(u!==(p=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Ln,g="onPointerLeave",d="onPointerEnter",f="pointer"),p=null==l?s:bi(l),h=null==u?s:bi(u),(s=new c(g,f+"leave",l,n,i)).target=p,s.relatedTarget=h,g=null,_i(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=h,c.relatedTarget=p,g=c),p=g,l&&u)t:{for(d=u,f=0,h=c=l;h;h=Xr(h))f++;for(h=0,g=d;g;g=Xr(g))h++;for(;0<f-h;)c=Xr(c),f--;for(;0<h-f;)d=Xr(d),h--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&Yr(a,s,l,c,!1),null!==u&&null!==p&&Yr(a,p,u,c,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=$n;else if(Wn(s))if(Qn)v=ar;else{v=ir;var m=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=or);switch(v&&(v=v(t,r))?Vn(a,v,n,i):(m&&m(t,s,r),"focusout"===t&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&tt(s,"number",s.value)),m=r?bi(r):window,t){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(vr=m,mr=r,_r=null);break;case"focusout":_r=mr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,i)}var _;if(Gn)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Hn?Bn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(Mn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(_=tn()):(Je="value"in(Qe=i)?Qe.value:Qe.textContent,Hn=!0)),0<(m=qr(r,y)).length&&(y=new bn(y,t,null,n,i),a.push({event:y,listeners:m}),_?y.data=_:null!==(_=jn(n))&&(y.data=_))),(_=Pn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(Fn=!0,zn);case"textInput":return(t=e.data)===zn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Gn&&Bn(t,e)?(t=tn(),Ze=Je=Qe=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=_))}zr(a,e)}))}function Vr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Dt(t,n))&&r.unshift(Vr(t,o,i)),null!=(o=Dt(t,e))&&r.push(Vr(t,o,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Dt(n,o))&&a.unshift(Vr(n,l,s)):i||null!=(l=Dt(n,o))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Kr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(t){return("string"===typeof t?t:""+t).replace(Kr,"\n").replace($r,"")}function Jr(t,e,n){if(e=Qr(e),Qr(t)!==e&&n)throw Error(o(425))}function Zr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void He(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);He(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),di="__reactFiber$"+pi,hi="__reactProps$"+pi,fi="__reactContainer$"+pi,gi="__reactEvents$"+pi,vi="__reactListeners$"+pi,mi="__reactHandles$"+pi;function _i(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[di])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function yi(t){return!(t=t[di]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[hi]||null}var wi=[],Ei=-1;function Ti(t){return{current:t}}function Si(t){0>Ei||(t.current=wi[Ei],wi[Ei]=null,Ei--)}function Ci(t,e){Ei++,wi[Ei]=t.current,t.current=e}var Oi={},Li=Ti(Oi),ki=Ti(!1),Ii=Oi;function Ni(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Di(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ai(){Si(ki),Si(Li)}function Gi(t,e,n){if(Li.current!==Oi)throw Error(o(168));Ci(Li,e),Ci(ki,n)}function Ri(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,U(t)||"Unknown",i));return M({},n,r)}function Pi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,Ii=Li.current,Ci(Li,t),Ci(ki,ki.current),!0}function Mi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ri(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Si(ki),Si(Li),Ci(Li,t)):Si(ki),Ci(ki,n)}var zi=null,Fi=!1,Bi=!1;function ji(t){null===zi?zi=[t]:zi.push(t)}function Hi(){if(!Bi&&null!==zi){Bi=!0;var t=0,e=ye;try{var n=zi;for(ye=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Fi=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Xt(Zt,Hi),i}finally{ye=e,Bi=!1}}return null}var Ui=[],Wi=0,Vi=null,qi=0,Xi=[],Yi=0,Ki=null,$i=1,Qi="";function Ji(t,e){Ui[Wi++]=qi,Ui[Wi++]=Vi,Vi=t,qi=e}function Zi(t,e,n){Xi[Yi++]=$i,Xi[Yi++]=Qi,Xi[Yi++]=Ki,Ki=t;var r=$i;t=Qi;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$i=1<<32-ae(e)+i|n<<i|r,Qi=o+t}else $i=1<<o|n<<i|r,Qi=t}function to(t){null!==t.return&&(Ji(t,1),Zi(t,1,0))}function eo(t){for(;t===Vi;)Vi=Ui[--Wi],Ui[Wi]=null,qi=Ui[--Wi],Ui[Wi]=null;for(;t===Ki;)Ki=Xi[--Yi],Xi[Yi]=null,Qi=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Du(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Ki?{id:$i,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Du(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function po(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw ho(),Error(o(418));for(;e;)ao(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function ho(){for(var t=ro;t;)t=ui(t.nextSibling)}function fo(){ro=no=null,io=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var vo=b.ReactCurrentBatchConfig;function mo(t,e){if(t&&t.defaultProps){for(var n in e=M({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var _o=Ti(null),yo=null,bo=null,xo=null;function wo(){xo=bo=yo=null}function Eo(t){var e=_o.current;Si(_o),t._currentValue=e}function To(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function So(t,e){yo=t,xo=bo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bs=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===bo){if(null===yo)throw Error(o(308));bo=t,yo.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var Oo=null;function Lo(t){null===Oo?Oo=[t]:Oo.push(t)}function ko(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Lo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Io(t,r)}function Io(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var No=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Io(t,n)}return null===(i=r.interleaved)?(e.next=e,Lo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Io(t,n)}function Po(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,_e(t,n)}}function Mo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var i=t.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var p=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,g=s;switch(d=e,h=n,g.tag){case 1:if("function"===typeof(f=g.payload)){p=f.call(h,p,d);break t}p=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(h,p,d):f)||void 0===d)break t;p=M({},p,d);break t;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=p):c=c.next=h,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Ml|=a,t.lanes=a,t.memoizedState=p}}function Fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function jo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:M({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ho={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Go(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Ro(t,o,i))&&(ru(e,t,i,r),Po(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Go(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Ro(t,o,i))&&(ru(e,t,i,r),Po(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),r=nu(t),i=Go(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Ro(t,i,r))&&(ru(e,t,r,n),Po(e,t,r))}};function Uo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(t,e,n){var r=!1,i=Oi,o=e.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Di(e)?Ii:Li.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ni(t,i):Oi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ho,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Vo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ho.enqueueReplaceState(e,e.state,null)}function qo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Bo,Do(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Di(e)?Ii:Li.current,i.context=Ni(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(jo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ho.enqueueReplaceState(i,i.state,null),zo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===Bo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function $o(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Gu(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=zu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===E?p(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Ko(o)===e.type)?((r=i(e,n.props)).ref=Xo(t,e,n),r.return=t,r):((r=Ru(n.type,n.key,n.props,null,t.mode,r)).ref=Xo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Fu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function p(t,e,n,r,o){return null===e||7!==e.tag?((e=Pu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Ru(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case w:return(e=Fu(e,t.mode,n)).return=t,e;case D:return d(t,(0,e._init)(e._payload),n)}if(et(e)||R(e))return(e=Pu(e,t.mode,n,null)).return=t,e;Yo(t,e)}return null}function h(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(t,e,n,r):null;case w:return n.key===i?c(t,e,n,r):null;case D:return h(t,e,(i=n._init)(n._payload),r)}if(et(n)||R(n))return null!==i?null:p(t,e,n,r,null);Yo(t,n)}return null}function f(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case D:return f(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||R(r))return p(e,t=t.get(n)||null,r,i,null);Yo(e,r)}return null}function g(i,o,s,l){for(var u=null,c=null,p=o,g=o=0,v=null;null!==p&&g<s.length;g++){p.index>g?(v=p,p=null):v=p.sibling;var m=h(i,p,s[g],l);if(null===m){null===p&&(p=v);break}t&&p&&null===m.alternate&&e(i,p),o=a(m,o,g),null===c?u=m:c.sibling=m,c=m,p=v}if(g===s.length)return n(i,p),io&&Ji(i,g),u;if(null===p){for(;g<s.length;g++)null!==(p=d(i,s[g],l))&&(o=a(p,o,g),null===c?u=p:c.sibling=p,c=p);return io&&Ji(i,g),u}for(p=r(i,p);g<s.length;g++)null!==(v=f(p,i,g,s[g],l))&&(t&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===c?u=v:c.sibling=v,c=v);return t&&p.forEach((function(t){return e(i,t)})),io&&Ji(i,g),u}function v(i,s,l,u){var c=R(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var p=c=null,g=s,v=s=0,m=null,_=l.next();null!==g&&!_.done;v++,_=l.next()){g.index>v?(m=g,g=null):m=g.sibling;var y=h(i,g,_.value,u);if(null===y){null===g&&(g=m);break}t&&g&&null===y.alternate&&e(i,g),s=a(y,s,v),null===p?c=y:p.sibling=y,p=y,g=m}if(_.done)return n(i,g),io&&Ji(i,v),c;if(null===g){for(;!_.done;v++,_=l.next())null!==(_=d(i,_.value,u))&&(s=a(_,s,v),null===p?c=_:p.sibling=_,p=_);return io&&Ji(i,v),c}for(g=r(i,g);!_.done;v++,_=l.next())null!==(_=f(g,i,v,_.value,u))&&(t&&null!==_.alternate&&g.delete(null===_.key?v:_.key),s=a(_,s,v),null===p?c=_:p.sibling=_,p=_);return t&&g.forEach((function(t){return e(i,t)})),io&&Ji(i,v),c}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===E){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Ko(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===E?((o=Pu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Ru(a.type,a.key,a.props,null,r.mode,l)).ref=Xo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Fu(a,r.mode,l)).return=r,r=o}return s(r);case D:return t(r,o,(c=a._init)(a._payload),l)}if(et(a))return g(r,o,a,l);if(R(a))return v(r,o,a,l);Yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Qo=$o(!0),Jo=$o(!1),Zo={},ta=Ti(Zo),ea=Ti(Zo),na=Ti(Zo);function ra(t){if(t===Zo)throw Error(o(174));return t}function ia(t,e){switch(Ci(na,e),Ci(ea,t),Ci(ta,Zo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Si(ta),Ci(ta,e)}function oa(){Si(ta),Si(ea),Si(na)}function aa(t){ra(na.current);var e=ra(ta.current),n=lt(e,t.type);e!==n&&(Ci(ea,t),Ci(ta,n))}function sa(t){ea.current===t&&(Si(ta),Si(ea))}var la=Ti(0);function ua(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=[];function pa(){for(var t=0;t<ca.length;t++)ca[t]._workInProgressVersionPrimary=null;ca.length=0}var da=b.ReactCurrentDispatcher,ha=b.ReactCurrentBatchConfig,fa=0,ga=null,va=null,ma=null,_a=!1,ya=!1,ba=0,xa=0;function wa(){throw Error(o(321))}function Ea(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Ta(t,e,n,r,i,a){if(fa=a,ga=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),ya){a=0;do{if(ya=!1,ba=0,25<=a)throw Error(o(301));a+=1,ma=va=null,e.updateQueue=null,da.current=us,t=n(r,i)}while(ya)}if(da.current=as,e=null!==va&&null!==va.next,fa=0,ma=va=ga=null,_a=!1,e)throw Error(o(300));return t}function Sa(){var t=0!==ba;return ba=0,t}function Ca(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ma?ga.memoizedState=ma=t:ma=ma.next=t,ma}function Oa(){if(null===va){var t=ga.alternate;t=null!==t?t.memoizedState:null}else t=va.next;var e=null===ma?ga.memoizedState:ma.next;if(null!==e)ma=e,va=t;else{if(null===t)throw Error(o(310));t={memoizedState:(va=t).memoizedState,baseState:va.baseState,baseQueue:va.baseQueue,queue:va.queue,next:null},null===ma?ga.memoizedState=ma=t:ma=ma.next=t}return ma}function La(t,e){return"function"===typeof e?e(t):e}function ka(t){var e=Oa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=va,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var p=c.lane;if((fa&p)===p)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,ga.lanes|=p,Ml|=p}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,ga.lanes|=a,Ml|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ia(t){var e=Oa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(bs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Da(t,e){var n=ga,r=Oa(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Wa(Ra.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==ma&&1&ma.memoizedState.tag){if(n.flags|=2048,Fa(9,Ga.bind(null,n,r,i,e),void 0,null),null===Il)throw Error(o(349));0!==(30&fa)||Aa(n,e,i)}return i}function Aa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ga(t,e,n,r){e.value=n,e.getSnapshot=r,Pa(e)&&Ma(t)}function Ra(t,e,n){return n((function(){Pa(e)&&Ma(t)}))}function Pa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Ma(t){var e=Io(t,1);null!==e&&ru(e,t,1,-1)}function za(t){var e=Ca();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,ga,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ba(){return Oa().memoizedState}function ja(t,e,n,r){var i=Ca();ga.flags|=t,i.memoizedState=Fa(1|e,n,void 0,void 0===r?null:r)}function Ha(t,e,n,r){var i=Oa();r=void 0===r?null:r;var o=void 0;if(null!==va){var a=va.memoizedState;if(o=a.destroy,null!==r&&Ea(r,a.deps))return void(i.memoizedState=Fa(e,n,o,r))}ga.flags|=t,i.memoizedState=Fa(1|e,n,o,r)}function Ua(t,e){return ja(8390656,8,t,e)}function Wa(t,e){return Ha(2048,8,t,e)}function Va(t,e){return Ha(4,2,t,e)}function qa(t,e){return Ha(4,4,t,e)}function Xa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ya(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ha(4,4,Xa.bind(null,e,t),n)}function Ka(){}function $a(t,e){var n=Oa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qa(t,e){var n=Oa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ja(t,e,n){return 0===(21&fa)?(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n):(sr(n,e)||(n=ge(),ga.lanes|=n,Ml|=n,t.baseState=!0),e)}function Za(t,e){var n=ye;ye=0!==n&&4>n?n:4,t(!0);var r=ha.transition;ha.transition={};try{t(!1),e()}finally{ye=n,ha.transition=r}}function ts(){return Oa().memoizedState}function es(t,e,n){var r=nu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=ko(t,e,n,r))){ru(n,t,r,eu()),os(n,e,r)}}function ns(t,e,n){var r=nu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,Lo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=ko(t,e,i,r))&&(ru(n,t,r,i=eu()),os(n,e,r))}}function rs(t){var e=t.alternate;return t===ga||null!==e&&e===ga}function is(t,e){ya=_a=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,_e(t,n)}}var as={readContext:Co,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(t,e){return Ca().memoizedState=[t,void 0===e?null:e],t},useContext:Co,useEffect:Ua,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ja(4194308,4,Xa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return ja(4,2,t,e)},useMemo:function(t,e){var n=Ca();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ca();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,ga,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ca().memoizedState=t},useState:za,useDebugValue:Ka,useDeferredValue:function(t){return Ca().memoizedState=t},useTransition:function(){var t=za(!1),e=t[0];return t=Za.bind(null,t[1]),Ca().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ga,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Il)throw Error(o(349));0!==(30&fa)||Aa(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ua(Ra.bind(null,r,a,t),[t]),r.flags|=2048,Fa(9,Ga.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ca(),e=Il.identifierPrefix;if(io){var n=Qi;e=":"+e+"R"+(n=($i&~(1<<32-ae($i)-1)).toString(32)+n),0<(n=ba++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=xa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:$a,useContext:Co,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:Va,useLayoutEffect:qa,useMemo:Qa,useReducer:ka,useRef:Ba,useState:function(){return ka(La)},useDebugValue:Ka,useDeferredValue:function(t){return Ja(Oa(),va.memoizedState,t)},useTransition:function(){return[ka(La)[0],Oa().memoizedState]},useMutableSource:Na,useSyncExternalStore:Da,useId:ts,unstable_isNewReconciler:!1},us={readContext:Co,useCallback:$a,useContext:Co,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:Va,useLayoutEffect:qa,useMemo:Qa,useReducer:Ia,useRef:Ba,useState:function(){return Ia(La)},useDebugValue:Ka,useDeferredValue:function(t){var e=Oa();return null===va?e.memoizedState=t:Ja(e,va.memoizedState,t)},useTransition:function(){return[Ia(La)[0],Oa().memoizedState]},useMutableSource:Na,useSyncExternalStore:Da,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var n="",r=e;do{n+=j(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ps(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ds(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=Go(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vl||(Vl=!0,ql=r),ds(0,e)},n}function gs(t,e,n){(n=Go(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,e),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function vs(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new hs;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cu.bind(null,t,e,n),e.then(t,t))}function ms(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function _s(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Go(-1,1)).tag=2,Ro(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ys=b.ReactCurrentOwner,bs=!1;function xs(t,e,n,r){e.child=null===t?Jo(e,null,n,r):Qo(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var o=e.ref;return So(e,i),r=Ta(t,e,n,r,o,i),n=Sa(),null===t||bs?(io&&n&&to(e),e.flags|=1,xs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function Es(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Au(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ru(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ts(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Vs(t,e,i)}return e.flags|=1,(t=Gu(o,r)).ref=e.ref,t.return=e,e.child=t}function Ts(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(bs=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Vs(t,e,i);0!==(131072&t.flags)&&(bs=!0)}}return Os(t,e,n,r,i)}function Ss(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Gl,Al),Al|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ci(Gl,Al),Al|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Gl,Al),Al|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ci(Gl,Al),Al|=r;return xs(t,e,i,n),e.child}function Cs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Os(t,e,n,r,i){var o=Di(n)?Ii:Li.current;return o=Ni(e,o),So(e,i),n=Ta(t,e,n,r,o,i),r=Sa(),null===t||bs?(io&&r&&to(e),e.flags|=1,xs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function Ls(t,e,n,r,i){if(Di(n)){var o=!0;Pi(e)}else o=!1;if(So(e,i),null===e.stateNode)Ws(t,e),Wo(e,n,r),qo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Co(u):u=Ni(e,u=Di(n)?Ii:Li.current);var c=n.getDerivedStateFromProps,p="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Vo(e,a,r,u),No=!1;var d=e.memoizedState;a.state=d,zo(e,r,a,i),l=e.memoizedState,s!==r||d!==l||ki.current||No?("function"===typeof c&&(jo(e,n,c,r),l=e.memoizedState),(s=No||Uo(e,n,s,r,d,l,u))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ao(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:mo(e.type,s),a.props=u,p=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Ni(e,l=Di(n)?Ii:Li.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==p||d!==l)&&Vo(e,a,r,l),No=!1,d=e.memoizedState,a.state=d,zo(e,r,a,i);var f=e.memoizedState;s!==p||d!==f||ki.current||No?("function"===typeof h&&(jo(e,n,h,r),f=e.memoizedState),(u=No||Uo(e,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return ks(t,e,n,r,o,i)}function ks(t,e,n,r,i,o){Cs(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Mi(e,n,!1),Vs(t,e,o);r=e.stateNode,ys.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,s,o)):xs(t,e,s,o),e.memoizedState=r.state,i&&Mi(e,n,!0),e.child}function Is(t){var e=t.stateNode;e.pendingContext?Gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Gi(0,e.context,!1),ia(t,e.containerInfo)}function Ns(t,e,n,r,i){return fo(),go(i),e.flags|=256,xs(t,e,n,r),e.child}var Ds,As,Gs,Rs,Ps={dehydrated:null,treeContext:null,retryLane:0};function Ms(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ci(la,1&a),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mu(l,i,0,null),t=Pu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ms(n),e.memoizedState=Ps,t):Fs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,Bs(t,e,s,r=ps(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(a=Pu(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&Qo(e,t.child,null,s),e.child.memoizedState=Ms(s),e.memoizedState=Ps,a);if(0===(1&e.mode))return Bs(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(t,e,s,r=ps(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Io(t,i),ru(r,t,i,-1))}return vu(),Bs(t,e,s,r=ps(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Lu.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Xi[Yi++]=$i,Xi[Yi++]=Qi,Xi[Yi++]=Ki,$i=t.id,Qi=t.overflow,Ki=e),e=Fs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Gu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Gu(r,s):(s=Pu(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ps,i}return t=(s=t.child).sibling,i=Gu(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Fs(t,e){return(e=Mu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Bs(t,e,n,r){return null!==r&&go(r),Qo(e,t.child,null,n),(t=Fs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function js(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),To(t.return,e,n)}function Hs(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Us(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xs(t,e,r.children,n),0!==(2&(r=la.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&js(t,n,e);else if(19===t.tag)js(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ci(la,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ua(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hs(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ua(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hs(e,!0,n,null,o);break;case"together":Hs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ws(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ml|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Gu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Gu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qs(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ys(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Di(e.type)&&Ai(),Xs(e),null;case 3:return r=e.stateNode,oa(),Si(ki),Si(Li),pa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(po(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),As(t,e),Xs(e),null;case 5:sa(e);var i=ra(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Gs(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Xs(e),null}if(t=ra(ta.current),po(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[di]=e,r[hi]=a,t=0!==(1&e.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Fr(Rr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":it(r,a),Fr("invalid",r)}for(var l in _t(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[hi]=r,Ds(t,e,!1,!1),e.stateNode=t;t:{switch(l=yt(n,r),n){case"dialog":Fr("cancel",t),Fr("close",t),i=r;break;case"iframe":case"object":case"embed":Fr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Fr(Rr[i],t);i=r;break;case"source":Fr("error",t),i=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),i=r;break;case"details":Fr("toggle",t),i=r;break;case"input":$(t,r),i=K(t,r),Fr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Fr("invalid",t)}for(a in _t(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?vt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&pt(t,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&dt(t,c):"number"===typeof c&&dt(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Fr("scroll",t):null!=c&&y(t,a,c,l))}switch(n){case"input":q(t),Z(t,r,!1);break;case"textarea":q(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Rs(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ta.current),po(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Xs(e),null;case 13:if(Si(la),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))ho(),fo(),e.flags|=98560,a=!1;else if(a=po(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Rl&&(Rl=3):vu())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return oa(),As(t,e),null===t&&Hr(e.stateNode.containerInfo),Xs(e),null;case 10:return Eo(e.type._context),Xs(e),null;case 19:if(Si(la),null===(a=e.memoizedState))return Xs(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)qs(a,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ua(t))){for(e.flags|=128,qs(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ci(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Qt()>Ul&&(e.flags|=128,r=!0,qs(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ua(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Xs(e),null}else 2*Qt()-a.renderingStartTime>Ul&&1073741824!==n&&(e.flags|=128,r=!0,qs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,n=la.current,Ci(la,r?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return du(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Al)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ks(t,e){switch(eo(e),e.tag){case 1:return Di(e.type)&&Ai(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Si(ki),Si(Li),pa(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Si(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Si(la),null;case 4:return oa(),null;case 10:return Eo(e.type._context),null;case 22:case 23:return du(),null;default:return null}}Ds=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(){},Gs=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(ta.current);var o,a=null;switch(n){case"input":i=K(t,i),r=K(t,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Zr)}for(c in _t(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Rs=function(t,e,n,r){n!==r&&(e.flags|=4)};var $s=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Su(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[hi],delete e[gi],delete e[vi],delete e[mi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zr));else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var pl=null,dl=!1;function hl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Qs||tl(n,e);case 6:var r=pl,i=dl;pl=null,hl(t,e,n),dl=i,null!==(pl=r)&&(dl?(t=pl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(dl?(t=pl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),He(t)):li(pl,n.stateNode));break;case 4:r=pl,i=dl,pl=n.stateNode.containerInfo,dl=!0,hl(t,e,n),pl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),i=i.next}while(i!==r)}hl(t,e,n);break;case 1:if(!Qs&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,e,s)}hl(t,e,n);break;case 21:hl(t,e,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hl(t,e,n),Qs=r):hl(t,e,n);break;default:hl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Js),e.forEach((function(e){var r=ku.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function vl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,dl=!1;break t;case 3:case 4:pl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===pl)throw Error(o(160));fl(a,s,i),pl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vl(e,t),_l(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(v){Su(t,t.return,v)}try{rl(5,t,t.return)}catch(v){Su(t,t.return,v)}}break;case 1:vl(e,t),_l(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(vl(e,t),_l(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(v){Su(t,t.return,v)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),yt(l,s);var c=yt(l,a);for(s=0;s<u.length;s+=2){var p=u[s],d=u[s+1];"style"===p?vt(i,d):"dangerouslySetInnerHTML"===p?pt(i,d):"children"===p?dt(i,d):y(i,p,d,c)}switch(l){case"input":J(i,a);break;case"textarea":ot(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(i,!!a.multiple,f,!1):h!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[hi]=a}catch(v){Su(t,t.return,v)}}break;case 6:if(vl(e,t),_l(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){Su(t,t.return,v)}}break;case 3:if(vl(e,t),_l(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(v){Su(t,t.return,v)}break;case 4:default:vl(e,t),_l(t);break;case 13:vl(e,t),_l(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Qt())),4&r&&gl(t);break;case 22:if(p=null!==n&&null!==n.memoizedState,1&t.mode?(Qs=(c=Qs)||p,vl(e,t),Qs=c):vl(e,t),_l(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!p&&0!==(1&t.mode))for(Zs=t,p=t.child;null!==p;){for(d=Zs=p;null!==Zs;){switch(f=(h=Zs).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:tl(h,h.return);var g=h.stateNode;if("function"===typeof g.componentWillUnmount){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Su(r,n,v)}}break;case 5:tl(h,h.return);break;case 22:if(null!==h.memoizedState){wl(d);continue}}null!==f?(f.return=h,Zs=f):wl(d)}p=p.sibling}t:for(p=null,d=t;;){if(5===d.tag){if(null===p){p=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=gt("display",s))}catch(v){Su(t,t.return,v)}}}else if(6===d.tag){if(null===p)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Su(t,t.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vl(e,t),_l(t),4&r&&gl(t);case 21:}}function _l(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Su(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Zs=t,bl(t,e,n)}function bl(t,e,n){for(var r=0!==(1&t.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$s;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=$s;var u=Qs;if($s=a,(Qs=l)&&!u)for(Zs=i;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Zs=l):El(i);for(;null!==o;)Zs=o,bl(o,e,n),o=o.sibling;Zs=i,$s=s,Qs=u}xl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xl(t)}}function xl(t){for(;null!==Zs;){var e=Zs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qs||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Fo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Fo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var p=c.memoizedState;if(null!==p){var d=p.dehydrated;null!==d&&He(d)}}}break;default:throw Error(o(163))}Qs||512&e.flags&&ol(e)}catch(h){Su(e,e.return,h)}}if(e===t){Zs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Zs=n;break}Zs=e.return}}function wl(t){for(;null!==Zs;){var e=Zs;if(e===t){Zs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Zs=n;break}Zs=e.return}}function El(t){for(;null!==Zs;){var e=Zs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Su(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Su(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Su(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Su(e,a,l)}}}catch(l){Su(e,e.return,l)}if(e===t){Zs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Zs=s;break}Zs=e.return}}var Tl,Sl=Math.ceil,Cl=b.ReactCurrentDispatcher,Ol=b.ReactCurrentOwner,Ll=b.ReactCurrentBatchConfig,kl=0,Il=null,Nl=null,Dl=0,Al=0,Gl=Ti(0),Rl=0,Pl=null,Ml=0,zl=0,Fl=0,Bl=null,jl=null,Hl=0,Ul=1/0,Wl=null,Vl=!1,ql=null,Xl=null,Yl=!1,Kl=null,$l=0,Ql=0,Jl=null,Zl=-1,tu=0;function eu(){return 0!==(6&kl)?Qt():-1!==Zl?Zl:Zl=Qt()}function nu(t){return 0===(1&t.mode)?1:0!==(2&kl)&&0!==Dl?Dl&-Dl:null!==vo.transition?(0===tu&&(tu=ge()),tu):0!==(t=ye)?t:t=void 0===(t=window.event)?16:$e(t.type)}function ru(t,e,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(o(185));me(t,n,r),0!==(2&kl)&&t===Il||(t===Il&&(0===(2&kl)&&(zl|=n),4===Rl&&lu(t,Dl)),iu(t,r),1===n&&0===kl&&0===(1&e.mode)&&(Ul=Qt()+500,Fi&&Hi()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=he(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===Il?Dl:0);if(0===r)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Fi=!0,ji(t)}(uu.bind(null,t)):ji(uu.bind(null,t)),ai((function(){0===(6&kl)&&Hi()})),n=null;else{switch(be(r)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Iu(n,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ou(t,e){if(Zl=-1,tu=0,0!==(6&kl))throw Error(o(327));var n=t.callbackNode;if(Eu()&&t.callbackNode!==n)return null;var r=de(t,t===Il?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=mu(t,r);else{e=r;var i=kl;kl|=2;var a=gu();for(Il===t&&Dl===e||(Wl=null,Ul=Qt()+500,hu(t,e));;)try{yu();break}catch(l){fu(t,l)}wo(),Cl.current=a,kl=i,null!==Nl?e=0:(Il=null,Dl=0,e=Rl)}if(0!==e){if(2===e&&(0!==(i=fe(t))&&(r=i,e=au(t,i))),1===e)throw n=Pl,hu(t,0),lu(t,r),iu(t,Qt()),n;if(6===e)lu(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=mu(t,r))&&(0!==(a=fe(t))&&(r=a,e=au(t,a))),1===e))throw n=Pl,hu(t,0),lu(t,r),iu(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wu(t,jl,Wl);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=Hl+500-Qt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wu.bind(null,t,jl,Wl),e);break}wu(t,jl,Wl);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){t.timeoutHandle=ri(wu.bind(null,t,jl,Wl),r);break}wu(t,jl,Wl);break;default:throw Error(o(329))}}}return iu(t,Qt()),t.callbackNode===n?ou.bind(null,t):null}function au(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(hu(t,e).flags|=256),2!==(t=mu(t,e))&&(e=jl,jl=n,null!==e&&su(e)),t}function su(t){null===jl?jl=t:jl.push.apply(jl,t)}function lu(t,e){for(e&=~Fl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function uu(t){if(0!==(6&kl))throw Error(o(327));Eu();var e=de(t,0);if(0===(1&e))return iu(t,Qt()),null;var n=mu(t,e);if(0!==t.tag&&2===n){var r=fe(t);0!==r&&(e=r,n=au(t,r))}if(1===n)throw n=Pl,hu(t,0),lu(t,e),iu(t,Qt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,jl,Wl),iu(t,Qt()),null}function cu(t,e){var n=kl;kl|=1;try{return t(e)}finally{0===(kl=n)&&(Ul=Qt()+500,Fi&&Hi())}}function pu(t){null!==Kl&&0===Kl.tag&&0===(6&kl)&&Eu();var e=kl;kl|=1;var n=Ll.transition,r=ye;try{if(Ll.transition=null,ye=1,t)return t()}finally{ye=r,Ll.transition=n,0===(6&(kl=e))&&Hi()}}function du(){Al=Gl.current,Si(Gl)}function hu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:oa(),Si(ki),Si(Li),pa();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Si(la);break;case 10:Eo(r.type._context);break;case 22:case 23:du()}n=n.return}if(Il=t,Nl=t=Gu(t.current,null),Dl=Al=e,Rl=0,Pl=null,Fl=zl=Ml=0,jl=Bl=null,null!==Oo){for(e=0;e<Oo.length;e++)if(null!==(r=(n=Oo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Oo=null}return t}function fu(t,e){for(;;){var n=Nl;try{if(wo(),da.current=as,_a){for(var r=ga.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}_a=!1}if(fa=0,ma=va=ga=null,ya=!1,ba=0,Ol.current=null,null===n||null===n.return){Rl=1,Pl=e,Nl=null;break}t:{var a=t,s=n.return,l=n,u=e;if(e=Dl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,p=l,d=p.tag;if(0===(1&p.mode)&&(0===d||11===d||15===d)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,_s(f,s,l,0,e),1&f.mode&&vs(a,c,e),u=c;var g=(e=f).updateQueue;if(null===g){var v=new Set;v.add(u),e.updateQueue=v}else g.add(u);break t}if(0===(1&e)){vs(a,c,e),vu();break t}u=Error(o(426))}else if(io&&1&l.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),_s(m,s,l,0,e),go(cs(u,l));break t}}a=u=cs(u,l),4!==Rl&&(Rl=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Mo(a,fs(0,u,e));break t;case 1:l=u;var _=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof _.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Xl||!Xl.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e,Mo(a,gs(a,l,e));break t}}a=a.return}while(null!==a)}xu(n)}catch(b){e=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function gu(){var t=Cl.current;return Cl.current=as,null===t?as:t}function vu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&Ml)&&0===(268435455&zl)||lu(Il,Dl)}function mu(t,e){var n=kl;kl|=2;var r=gu();for(Il===t&&Dl===e||(Wl=null,hu(t,e));;)try{_u();break}catch(i){fu(t,i)}if(wo(),kl=n,Cl.current=r,null!==Nl)throw Error(o(261));return Il=null,Dl=0,Rl}function _u(){for(;null!==Nl;)bu(Nl)}function yu(){for(;null!==Nl&&!Kt();)bu(Nl)}function bu(t){var e=Tl(t.alternate,t,Al);t.memoizedProps=t.pendingProps,null===e?xu(t):Nl=e,Ol.current=null}function xu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ys(n,e,Al)))return void(Nl=n)}else{if(null!==(n=Ks(n,e)))return n.flags&=32767,void(Nl=n);if(null===t)return Rl=6,void(Nl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Nl=e);Nl=e=t}while(null!==e);0===Rl&&(Rl=5)}function wu(t,e,n){var r=ye,i=Ll.transition;try{Ll.transition=null,ye=1,function(t,e,n,r){do{Eu()}while(null!==Kl);if(0!==(6&kl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Il&&(Nl=Il=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Iu(ee,(function(){return Eu(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var s=ye;ye=1;var l=kl;kl|=4,Ol.current=null,function(t,e){if(ti=We,hr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var s=0,l=-1,u=-1,c=0,p=0,d=t,h=null;e:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===t)break e;if(h===n&&++c===i&&(l=s),h===a&&++p===r&&(u=s),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,Zs=e;null!==Zs;)if(t=(e=Zs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Zs=t;else for(;null!==Zs;){e=Zs;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var v=g.memoizedProps,m=g.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:mo(e.type,v),m);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Su(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Zs=t;break}Zs=e.return}g=nl,nl=!1}(t,n),ml(n,t),fr(ei),We=!!ti,ei=ti=null,t.current=n,yl(n,t,i),$t(),kl=l,ye=s,Ll.transition=a}else t.current=n;if(Yl&&(Yl=!1,Kl=t,$l=i),a=t.pendingLanes,0===a&&(Xl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,Qt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,t=ql,ql=null,t;0!==(1&$l)&&0!==t.tag&&Eu(),a=t.pendingLanes,0!==(1&a)?t===Jl?Ql++:(Ql=0,Jl=t):Ql=0,Hi()}(t,e,n,r)}finally{Ll.transition=i,ye=r}return null}function Eu(){if(null!==Kl){var t=be($l),e=Ll.transition,n=ye;try{if(Ll.transition=null,ye=16>t?16:t,null===Kl)var r=!1;else{if(t=Kl,Kl=null,$l=0,0!==(6&kl))throw Error(o(331));var i=kl;for(kl|=4,Zs=t.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zs=c;null!==Zs;){var p=Zs;switch(p.tag){case 0:case 11:case 15:rl(8,p,a)}var d=p.child;if(null!==d)d.return=p,Zs=d;else for(;null!==Zs;){var h=(p=Zs).sibling,f=p.return;if(al(p),p===c){Zs=null;break}if(null!==h){h.return=f,Zs=h;break}Zs=f}}}var g=a.alternate;if(null!==g){var v=g.child;if(null!==v){g.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(null!==v)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else t:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,Zs=_;break t}Zs=a.return}}var y=t.current;for(Zs=y;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else t:for(s=y;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Su(l,l.return,w)}if(l===s){Zs=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Zs=x;break t}Zs=l.return}}if(kl=i,Hi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{ye=n,Ll.transition=e}}return!1}function Tu(t,e,n){t=Ro(t,e=fs(0,e=cs(n,e),1),1),e=eu(),null!==t&&(me(t,1,e),iu(t,e))}function Su(t,e,n){if(3===t.tag)Tu(t,t,n);else for(;null!==e;){if(3===e.tag){Tu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){e=Ro(e,t=gs(e,t=cs(n,t),1),1),t=eu(),null!==e&&(me(e,1,t),iu(e,t));break}}e=e.return}}function Cu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Il===t&&(Dl&n)===n&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Qt()-Hl?hu(t,0):Fl|=n),iu(t,e)}function Ou(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Io(t,e))&&(me(t,e,n),iu(t,n))}function Lu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ou(t,n)}function ku(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Ou(t,n)}function Iu(t,e){return Xt(t,e)}function Nu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(t,e,n,r){return new Nu(t,e,n,r)}function Au(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Gu(t,e){var n=t.alternate;return null===n?((n=Du(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Au(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return Pu(n.children,i,a,e);case T:s=8,i|=8;break;case S:return(t=Du(12,n,e,2|i)).elementType=S,t.lanes=a,t;case k:return(t=Du(13,n,e,i)).elementType=k,t.lanes=a,t;case I:return(t=Du(19,n,e,i)).elementType=I,t.lanes=a,t;case A:return Mu(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case O:s=9;break t;case L:s=11;break t;case N:s=14;break t;case D:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Du(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Pu(t,e,n,r){return(t=Du(7,t,r,e)).lanes=n,t}function Mu(t,e,n,r){return(t=Du(22,t,r,e)).elementType=A,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return(t=Du(6,t,null,e)).lanes=n,t}function Fu(t,e,n){return(e=Du(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bu(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(t,e,n,r,i,o,a,s,l){return t=new Bu(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Du(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),t}function Hu(t){if(!t)return Oi;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Di(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Di(n))return Ri(t,n,e)}return e}function Uu(t,e,n,r,i,o,a,s,l){return(t=ju(n,r,!0,t,0,o,0,s,l)).context=Hu(null),n=t.current,(o=Go(r=eu(),i=nu(n))).callback=void 0!==e&&null!==e?e:null,Ro(n,o,i),t.current.lanes=i,me(t,i,r),iu(t,r),t}function Wu(t,e,n,r){var i=e.current,o=eu(),a=nu(i);return n=Hu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Go(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Ro(i,e,a))&&(ru(t,i,a,o),Po(t,i,a)),a}function Vu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xu(t,e){qu(t,e),(t=t.alternate)&&qu(t,e)}Tl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||ki.current)bs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:Is(e),fo();break;case 5:aa(e);break;case 1:Di(e.type)&&Pi(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ci(_o,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ci(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zs(t,e,n):(Ci(la,1&la.current),null!==(t=Vs(t,e,n))?t.sibling:null);Ci(la,1&la.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Us(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(la,la.current),r)break;return null;case 22:case 23:return e.lanes=0,Ss(t,e,n)}return Vs(t,e,n)}(t,e,n);bs=0!==(131072&t.flags)}else bs=!1,io&&0!==(1048576&e.flags)&&Zi(e,qi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ws(t,e),t=e.pendingProps;var i=Ni(e,Li.current);So(e,n),i=Ta(null,e,r,t,i,n);var a=Sa();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Di(r)?(a=!0,Pi(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(e),i.updater=Ho,e.stateNode=i,i._reactInternals=e,qo(e,r,t,n),e=ks(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),xs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ws(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Au(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===L)return 11;if(t===N)return 14}return 2}(r),t=mo(r,t),i){case 0:e=Os(null,e,r,t,n);break t;case 1:e=Ls(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=Es(null,e,r,mo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Os(t,e,r,i=e.elementType===r?i:mo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ls(t,e,r,i=e.elementType===r?i:mo(r,i),n);case 3:t:{if(Is(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Ao(t,e),zo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ns(t,e,r,n,i=cs(Error(o(423)),e));break t}if(r!==i){e=Ns(t,e,r,n,i=cs(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Jo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Vs(t,e,n);break t}xs(t,e,r,n)}e=e.child}return e;case 5:return aa(e),null===t&&uo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),Cs(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&uo(e),null;case 13:return zs(t,e,n);case 4:return ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Qo(e,null,r,n):xs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:mo(r,i),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ci(_o,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!ki.current){e=Vs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Go(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var p=(c=c.shared).pending;null===p?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),To(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),To(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,So(e,n),r=r(i=Co(i)),e.flags|=1,xs(t,e,r,n),e.child;case 14:return i=mo(r=e.type,e.pendingProps),Es(t,e,r,i=mo(r.type,i),n);case 15:return Ts(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mo(r,i),Ws(t,e),e.tag=1,Di(r)?(t=!0,Pi(e)):t=!1,So(e,n),Wo(e,r,i),qo(e,r,i,n),ks(null,e,r,!0,t,n);case 19:return Us(t,e,n);case 22:return Ss(t,e,n)}throw Error(o(156,e.tag))};var Yu="function"===typeof reportError?reportError:function(t){console.error(t)};function Ku(t){this._internalRoot=t}function $u(t){this._internalRoot=t}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zu(){}function tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Vu(a);s.call(t)}}Wu(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Vu(a);o.call(t)}}var a=Uu(e,r,t,0,null,!1,0,"",Zu);return t._reactRootContainer=a,t[fi]=a.current,Hr(8===t.nodeType?t.parentNode:t),pu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Vu(l);s.call(t)}}var l=ju(t,0,!1,null,0,!1,0,"",Zu);return t._reactRootContainer=l,t[fi]=l.current,Hr(8===t.nodeType?t.parentNode:t),pu((function(){Wu(e,l,n,r)})),l}(n,e,t,i,r);return Vu(a)}$u.prototype.render=Ku.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wu(t,e,null,null)},$u.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;pu((function(){Wu(null,t,null,null)})),e[fi]=null}},$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Te();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ae.length&&0!==e&&e<Ae[n].priority;n++);Ae.splice(n,0,t),0===n&&Me(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pe(e.pendingLanes);0!==n&&(_e(e,1|n),iu(e,Qt()),0===(6&kl)&&(Ul=Qt()+500,Hi()))}break;case 13:pu((function(){var e=Io(t,1);if(null!==e){var n=eu();ru(e,t,1,n)}})),Xu(t,1)}},we=function(t){if(13===t.tag){var e=Io(t,134217728);if(null!==e)ru(e,t,134217728,eu());Xu(t,134217728)}},Ee=function(t){if(13===t.tag){var e=nu(t),n=Io(t,e);if(null!==n)ru(n,t,e,eu());Xu(t,e)}},Te=function(){return ye},Se=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xi(r);if(!i)throw Error(o(90));X(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Lt=cu,kt=pu;var ec={usingClientEntryPoint:!1,Events:[yi,bi,xi,Ct,Ot,cu]},nc={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Vt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qu(t))throw Error(o(299));var n=!1,r="",i=Yu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=ju(t,1,!1,null,0,n,0,r,i),t[fi]=e.current,Hr(8===t.nodeType?t.parentNode:t),new Ku(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Vt(e))?null:t.stateNode},e.flushSync=function(t){return pu(t)},e.hydrate=function(t,e,n){if(!Ju(e))throw Error(o(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qu(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Uu(e,null,t,1,null!=n?n:null,i,0,a,s),t[fi]=e.current,Hr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $u(e)},e.render=function(t,e,n){if(!Ju(e))throw Error(o(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(o(40));return!!t._reactRootContainer&&(pu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},250:(t,e,n)=>{"use strict";var r=n(164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},164:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(463)},374:(t,e,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.jsx=u,e.jsxs=u},117:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function m(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||f}function _(){}function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||f}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=m.prototype;var b=y.prototype=new _;b.constructor=y,g(b,m.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!T.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:E.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var O=/\/+/g;function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function k(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+L(l,0):o,x(a)?(i="",null!=t&&(i=t.replace(O,"$&/")+"/"),k(a,e,i,"",(function(t){return t}))):null!=a&&(C(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",x(t))for(var u=0;u<t.length;u++){var c=o+L(s=t[u],u);l+=k(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=h&&t[h]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=k(s=s.value,e,i,c=o+L(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,n){if(null==t)return t;var r=[],i=0;return k(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function N(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D={current:null},A={transition:null},G={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:A,ReactCurrentOwner:E};e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=m,e.Fragment=i,e.Profiler=a,e.PureComponent=y,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=E.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:N}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=A.transition;A.transition={};try{t()}finally{A.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return D.current.useCallback(t,e)},e.useContext=function(t){return D.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return D.current.useDeferredValue(t)},e.useEffect=function(t,e){return D.current.useEffect(t,e)},e.useId=function(){return D.current.useId()},e.useImperativeHandle=function(t,e,n){return D.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return D.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return D.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return D.current.useMemo(t,e)},e.useReducer=function(t,e,n){return D.current.useReducer(t,e,n)},e.useRef=function(t){return D.current.useRef(t)},e.useState=function(t){return D.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return D.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return D.current.useTransition()},e.version="18.2.0"},791:(t,e,n)=>{"use strict";t.exports=n(117)},184:(t,e,n)=>{"use strict";t.exports=n(374)},813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],p=1,d=null,h=3,f=!1,g=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(v=!1,b(t),!g)if(null!==r(u))g=!0,A(w);else{var e=r(c);null!==e&&G(x,e.startTime-t)}}function w(t,n){g=!1,v&&(v=!1,_(C),C=-1),f=!0;var o=h;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||t&&!k());){var a=d.callback;if("function"===typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var p=r(c);null!==p&&G(x,p.startTime-n),l=!1}return l}finally{d=null,h=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,T=!1,S=null,C=-1,O=5,L=-1;function k(){return!(e.unstable_now()-L<O)}function I(){if(null!==S){var t=e.unstable_now();L=t;var n=!0;try{n=S(!0,t)}finally{n?E():(T=!1,S=null)}}else T=!1}if("function"===typeof y)E=function(){y(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=I,E=function(){D.postMessage(null)}}else E=function(){m(I,0)};function A(t){S=t,T||(T=!0,E())}function G(t,n){C=m((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,A(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(h){case 1:case 2:case 3:var e=3;break;default:e=h}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:p++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(v?(_(C),C=-1):v=!0,G(x,o-a))):(t.sortIndex=s,n(u,t),g||f||(g=!0,A(w))),t},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(t){var e=h;return function(){var n=h;h=e;try{return t.apply(this,arguments)}finally{h=n}}}},296:(t,e,n)=>{"use strict";t.exports=n(813)}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>n[t]));return o.default=()=>n,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(791),e=__webpack_require__.t(t,2),n=__webpack_require__(250);function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}function i(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function o(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function a(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function s(t){if(!a(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=s(t[n])})),e}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=n.clone?r({},t):t;return a(t)&&a(e)&&Object.keys(e).forEach((r=>{"__proto__"!==r&&(a(e[r])&&r in t&&a(t[r])?i[r]=l(t[r],e[r],n):n.clone?i[r]=a(e[r])?s(e[r]):e[r]:i[r]=e[r])})),i}const u=["values","unit","step"],c=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>r({},t,{[e.key]:e.val})),{})};const p={borderRadius:4},d={xs:0,sm:600,md:900,lg:1200,xl:1536},h={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(d[t],"px)")};function f(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const t=r.breakpoints||h;return e.reduce(((r,i,o)=>(r[t.up(t.keys[o])]=n(e[o]),r)),{})}if("object"===typeof e){const t=r.breakpoints||h;return Object.keys(e).reduce(((r,i)=>{if(-1!==Object.keys(t.values||d).indexOf(i)){r[t.up(i)]=n(e[i],i)}else{const t=i;r[t]=e[t]}return r}),{})}return n(e)}function g(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function v(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function m(t){let{values:e,breakpoints:n,base:r}=t;const i=r||function(t,e){if("object"!==typeof t)return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach(((e,r)=>{r<t.length&&(n[e]=!0)})):r.forEach((e=>{null!=t[e]&&(n[e]=!0)})),n}(e,n),o=Object.keys(i);if(0===o.length)return e;let a;return o.reduce(((t,n,r)=>(Array.isArray(e)?(t[n]=null!=e[r]?e[r]:e[a],a=r):"object"===typeof e?(t[n]=null!=e[n]?e[n]:e[a],a=n):t[n]=e,t)),{})}function _(t){if("string"!==typeof t)throw new Error(o(7));return t.charAt(0).toUpperCase()+t.slice(1)}function y(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function b(t,e,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:y(t,n)||i,e&&(r=e(r,i,t)),r}const x=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=t=>{if(null==t[e])return null;const o=t[e],a=y(t.theme,r)||{};return f(t,o,(t=>{let r=b(a,i,t);return t===r&&"string"===typeof t&&(r=b(a,i,"".concat(e).concat("default"===t?"":_(t)),t)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[e],o};const w=function(t,e){return e?l(t,e,{clone:!1}):t};const E={m:"margin",p:"padding"},T={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},S={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},C=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!S[t])return[t];t=S[t]}const[e,n]=t.split(""),r=E[e],i=T[n]||"";return Array.isArray(i)?i.map((t=>r+t)):[r+i]})),O=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],k=[...O,...L];function I(t,e,n,r){var i;const o=null!=(i=y(t,e,!1))?i:n;return"number"===typeof o?t=>"string"===typeof t?t:o*t:Array.isArray(o)?t=>"string"===typeof t?t:o[t]:"function"===typeof o?o:()=>{}}function N(t){return I(t,"spacing",8)}function D(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function A(t,e,n,r){if(-1===e.indexOf(n))return null;const i=function(t,e){return n=>t.reduce(((t,r)=>(t[r]=D(e,n),t)),{})}(C(n),r);return f(t,t[n],i)}function G(t,e){const n=N(t.theme);return Object.keys(t).map((r=>A(t,e,r,n))).reduce(w,{})}function R(t){return G(t,O)}function P(t){return G(t,L)}function M(t){return G(t,k)}R.propTypes={},R.filterProps=O,P.propTypes={},P.filterProps=L,M.propTypes={},M.filterProps=k;const z=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),i=t=>Object.keys(t).reduce(((e,n)=>r[n]?w(e,r[n](t)):e),{});return i.propTypes={},i.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),i};function F(t){return"number"!==typeof t?t:"".concat(t,"px solid")}function B(t,e){return x({prop:t,themeKey:"borders",transform:e})}const j=B("border",F),H=B("borderTop",F),U=B("borderRight",F),W=B("borderBottom",F),V=B("borderLeft",F),q=B("borderColor"),X=B("borderTopColor"),Y=B("borderRightColor"),K=B("borderBottomColor"),$=B("borderLeftColor"),Q=B("outline",F),J=B("outlineColor"),Z=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=I(t.theme,"shape.borderRadius",4),n=t=>({borderRadius:D(e,t)});return f(t,t.borderRadius,n)}return null};Z.propTypes={},Z.filterProps=["borderRadius"];z(j,H,U,W,V,q,X,Y,K,$,Z,Q,J);const tt=t=>{if(void 0!==t.gap&&null!==t.gap){const e=I(t.theme,"spacing",8),n=t=>({gap:D(e,t)});return f(t,t.gap,n)}return null};tt.propTypes={},tt.filterProps=["gap"];const et=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=I(t.theme,"spacing",8),n=t=>({columnGap:D(e,t)});return f(t,t.columnGap,n)}return null};et.propTypes={},et.filterProps=["columnGap"];const nt=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=I(t.theme,"spacing",8),n=t=>({rowGap:D(e,t)});return f(t,t.rowGap,n)}return null};nt.propTypes={},nt.filterProps=["rowGap"];z(tt,et,nt,x({prop:"gridColumn"}),x({prop:"gridRow"}),x({prop:"gridAutoFlow"}),x({prop:"gridAutoColumns"}),x({prop:"gridAutoRows"}),x({prop:"gridTemplateColumns"}),x({prop:"gridTemplateRows"}),x({prop:"gridTemplateAreas"}),x({prop:"gridArea"}));function rt(t,e){return"grey"===e?e:t}z(x({prop:"color",themeKey:"palette",transform:rt}),x({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rt}),x({prop:"backgroundColor",themeKey:"palette",transform:rt}));function it(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const ot=x({prop:"width",transform:it}),at=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,r;const i=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||d[e];return i?"px"!==(null==(r=t.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(t.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:it(e)}};return f(t,t.maxWidth,e)}return null};at.filterProps=["maxWidth"];const st=x({prop:"minWidth",transform:it}),lt=x({prop:"height",transform:it}),ut=x({prop:"maxHeight",transform:it}),ct=x({prop:"minHeight",transform:it}),pt=(x({prop:"size",cssProperty:"width",transform:it}),x({prop:"size",cssProperty:"height",transform:it}),z(ot,at,st,lt,ut,ct,x({prop:"boxSizing"})),{border:{themeKey:"borders",transform:F},borderTop:{themeKey:"borders",transform:F},borderRight:{themeKey:"borders",transform:F},borderBottom:{themeKey:"borders",transform:F},borderLeft:{themeKey:"borders",transform:F},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:F},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Z},color:{themeKey:"palette",transform:rt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rt},backgroundColor:{themeKey:"palette",transform:rt},p:{style:P},pt:{style:P},pr:{style:P},pb:{style:P},pl:{style:P},px:{style:P},py:{style:P},padding:{style:P},paddingTop:{style:P},paddingRight:{style:P},paddingBottom:{style:P},paddingLeft:{style:P},paddingX:{style:P},paddingY:{style:P},paddingInline:{style:P},paddingInlineStart:{style:P},paddingInlineEnd:{style:P},paddingBlock:{style:P},paddingBlockStart:{style:P},paddingBlockEnd:{style:P},m:{style:R},mt:{style:R},mr:{style:R},mb:{style:R},ml:{style:R},mx:{style:R},my:{style:R},margin:{style:R},marginTop:{style:R},marginRight:{style:R},marginBottom:{style:R},marginLeft:{style:R},marginX:{style:R},marginY:{style:R},marginInline:{style:R},marginInlineStart:{style:R},marginInlineEnd:{style:R},marginBlock:{style:R},marginBlockStart:{style:R},marginBlockEnd:{style:R},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:tt},rowGap:{style:nt},columnGap:{style:et},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:it},maxWidth:{style:at},minWidth:{transform:it},height:{transform:it},maxHeight:{transform:it},minHeight:{transform:it},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const dt=function(){function t(t,e,n,r){const i={[t]:e,theme:n},o=r[t];if(!o)return{[t]:e};const{cssProperty:a=t,themeKey:s,transform:l,style:u}=o;if(null==e)return null;if("typography"===s&&"inherit"===e)return{[t]:e};const c=y(n,s)||{};if(u)return u(i);return f(i,e,(e=>{let n=b(c,l,e);return e===n&&"string"===typeof e&&(n=b(c,l,"".concat(t).concat("default"===e?"":_(e)),e)),!1===a?n:{[a]:n}}))}return function e(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const a=null!=(r=o.unstable_sxConfig)?r:pt;function s(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const i=g(o.breakpoints),s=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i=(s=r[n],u=o,"function"===typeof s?s(u):s);var s,u;if(null!==i&&void 0!==i)if("object"===typeof i)if(a[n])l=w(l,t(n,i,o,a));else{const t=f({theme:o},i,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),i=new Set(r);return e.every((t=>i.size===Object.keys(t).length))}(t,i)?l=w(l,t):l[n]=e({sx:i,theme:o})}else l=w(l,t(n,i,o,a))})),v(s,l)}return Array.isArray(i)?i.map(s):s(i)}}();dt.filterProps=["sx"];const ht=dt;function ft(t,e){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}}return n.palette.mode===t?e:{}}const gt=["breakpoints","palette","spacing","shape"];const vt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:o,shape:a={}}=t,s=i(t,gt),d=function(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=t,a=i(t,u),s=c(e),l=Object.keys(s);function p(t){const r="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(r).concat(n,")")}function d(t){const r="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(r-o/100).concat(n,")")}function h(t,r){const i=l.indexOf(r);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof e[l[i]]?e[l[i]]:r)-o/100).concat(n,")")}return r({keys:l,values:s,up:p,down:d,between:h,only:function(t){return l.indexOf(t)+1<l.length?h(t,l[l.indexOf(t)+1]):p(t)},not:function(t){const e=l.indexOf(t);return 0===e?p(l[1]):e===l.length-1?d(l[e]):h(t,l[l.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},a)}(e),h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=N({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(o);let f=l({breakpoints:d,direction:"ltr",components:{},palette:r({mode:"light"},n),spacing:h,shape:r({},p,a)},s);f.applyStyles=ft;for(var g=arguments.length,v=new Array(g>1?g-1:0),m=1;m<g;m++)v[m-1]=arguments[m];return f=v.reduce(((t,e)=>l(t,e)),f),f.unstable_sxConfig=r({},pt,null==s?void 0:s.unstable_sxConfig),f.unstable_sx=function(t){return ht({sx:t,theme:this})},f};function mt(t,e){return r({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const _t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(e,Math.min(t,n))};function yt(t){return _t(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function bt(t){if(t.type)return t;if("#"===t.charAt(0))return bt(function(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(o(9,t));let r,i=t.substring(e+1,t.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(o(10,r))}else i=i.split(",");return i=i.map((t=>parseFloat(t))),{type:n,values:i,colorSpace:r}}function xt(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return-1!==e.indexOf("rgb")?r=r.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function wt(t){let e="hsl"===(t=bt(t)).type||"hsla"===t.type?bt(function(t){t=bt(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-o*Math.max(Math.min(e-3,9-e,1),-1)};let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===t.type&&(s+="a",l.push(e[3])),xt({type:s,values:l})}(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Et(t,e){return t=bt(t),e=yt(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,xt(t)}function Tt(t,e){if(t=bt(t),e=yt(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return xt(t)}function St(t,e){if(t=bt(t),e=yt(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return xt(t)}const Ct={black:"#000",white:"#fff"},Ot={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Lt={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},kt={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},It={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Nt={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Dt={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},At={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Gt=["mode","contrastThreshold","tonalOffset"],Rt={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ct.white,default:Ct.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Pt={text:{primary:Ct.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ct.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Mt(t,e,n,r){const i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=St(t.main,i):"dark"===e&&(t.dark=Tt(t.main,o)))}function zt(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:a=.2}=t,s=i(t,Gt),u=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Nt[200],light:Nt[50],dark:Nt[400]}:{main:Nt[700],light:Nt[400],dark:Nt[800]}}(e),c=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Lt[200],light:Lt[50],dark:Lt[400]}:{main:Lt[500],light:Lt[300],dark:Lt[700]}}(e),p=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kt[500],light:kt[300],dark:kt[700]}:{main:kt[700],light:kt[400],dark:kt[800]}}(e),d=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Dt[400],light:Dt[300],dark:Dt[700]}:{main:Dt[700],light:Dt[500],dark:Dt[900]}}(e),h=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:At[400],light:At[300],dark:At[700]}:{main:At[800],light:At[500],dark:At[900]}}(e),f=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:It[400],light:It[300],dark:It[700]}:{main:"#ed6c02",light:It[500],dark:It[900]}}(e);function g(t){const e=function(t,e){const n=wt(t),r=wt(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(t,Pt.text.primary)>=n?Pt.text.primary:Rt.text.primary;return e}const v=t=>{let{color:e,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=t;if(e=r({},e),!e.main&&e[i]&&(e.main=e[i]),!e.hasOwnProperty("main"))throw new Error(o(11,n?" (".concat(n,")"):"",i));if("string"!==typeof e.main)throw new Error(o(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return Mt(e,"light",s,a),Mt(e,"dark",l,a),e.contrastText||(e.contrastText=g(e.main)),e},m={dark:Pt,light:Rt};return l(r({common:r({},Ct),mode:e,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:p,name:"error"}),warning:v({color:f,name:"warning"}),info:v({color:d,name:"info"}),success:v({color:h,name:"success"}),grey:Ot,contrastThreshold:n,getContrastText:g,augmentColor:v,tonalOffset:a},m[e]),s)}const Ft=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Bt={textTransform:"uppercase"},jt='"Roboto", "Helvetica", "Arial", sans-serif';function Ht(t,e){const n="function"===typeof e?e(t):e,{fontFamily:o=jt,fontSize:a=14,fontWeightLight:s=300,fontWeightRegular:u=400,fontWeightMedium:c=500,fontWeightBold:p=700,htmlFontSize:d=16,allVariants:h,pxToRem:f}=n,g=i(n,Ft);const v=a/14,m=f||(t=>"".concat(t/d*v,"rem")),_=(t,e,n,i,a)=>{return r({fontFamily:o,fontWeight:t,fontSize:m(e),lineHeight:n},o===jt?{letterSpacing:"".concat((s=i/e,Math.round(1e5*s)/1e5),"em")}:{},a,h);var s},y={h1:_(s,96,1.167,-1.5),h2:_(s,60,1.2,-.5),h3:_(u,48,1.167,0),h4:_(u,34,1.235,.25),h5:_(u,24,1.334,0),h6:_(c,20,1.6,.15),subtitle1:_(u,16,1.75,.15),subtitle2:_(c,14,1.57,.1),body1:_(u,16,1.5,.15),body2:_(u,14,1.43,.15),button:_(c,14,1.75,.4,Bt),caption:_(u,12,1.66,.4),overline:_(u,12,2.66,1,Bt),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return l(r({htmlFontSize:d,pxToRem:m,fontFamily:o,fontSize:a,fontWeightLight:s,fontWeightRegular:u,fontWeightMedium:c,fontWeightBold:p},y),g,{clone:!1})}function Ut(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const Wt=["none",Ut(0,2,1,-1,0,1,1,0,0,1,3,0),Ut(0,3,1,-2,0,2,2,0,0,1,5,0),Ut(0,3,3,-2,0,3,4,0,0,1,8,0),Ut(0,2,4,-1,0,4,5,0,0,1,10,0),Ut(0,3,5,-1,0,5,8,0,0,1,14,0),Ut(0,3,5,-1,0,6,10,0,0,1,18,0),Ut(0,4,5,-2,0,7,10,1,0,2,16,1),Ut(0,5,5,-3,0,8,10,1,0,3,14,2),Ut(0,5,6,-3,0,9,12,1,0,3,16,2),Ut(0,6,6,-3,0,10,14,1,0,4,18,3),Ut(0,6,7,-4,0,11,15,1,0,4,20,3),Ut(0,7,8,-4,0,12,17,2,0,5,22,4),Ut(0,7,8,-4,0,13,19,2,0,5,24,4),Ut(0,7,9,-4,0,14,21,2,0,5,26,4),Ut(0,8,9,-5,0,15,22,2,0,6,28,5),Ut(0,8,10,-5,0,16,24,2,0,6,30,5),Ut(0,8,11,-5,0,17,26,2,0,6,32,5),Ut(0,9,11,-5,0,18,28,2,0,7,34,6),Ut(0,9,12,-6,0,19,29,2,0,7,36,6),Ut(0,10,13,-6,0,20,31,3,0,8,38,7),Ut(0,10,13,-6,0,21,33,3,0,8,40,7),Ut(0,10,14,-6,0,22,35,3,0,8,42,7),Ut(0,11,14,-7,0,23,36,3,0,9,44,8),Ut(0,11,15,-7,0,24,38,3,0,9,46,8)],Vt=["duration","easing","delay"],qt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Xt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Yt(t){return"".concat(Math.round(t),"ms")}function Kt(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function $t(t){const e=r({},qt,t.easing),n=r({},Xt,t.duration);return r({getAutoHeightDuration:Kt,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=n.standard,easing:a=e.easeInOut,delay:s=0}=r;i(r,Vt);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof o?o:Yt(o)," ").concat(a," ").concat("string"===typeof s?s:Yt(s)))).join(",")}},t,{easing:e,duration:n})}const Qt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Jt=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Zt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:a={},typography:s={}}=t,u=i(t,Jt);if(t.vars)throw new Error(o(18));const c=zt(n),p=vt(t);let d=l(p,{mixins:mt(p.breakpoints,e),palette:c,shadows:Wt.slice(),typography:Ht(c,s),transitions:$t(a),zIndex:r({},Qt)});d=l(d,u);for(var h=arguments.length,f=new Array(h>1?h-1:0),g=1;g<h;g++)f[g-1]=arguments[g];return d=f.reduce(((t,e)=>l(t,e)),d),d.unstable_sxConfig=r({},pt,null==u?void 0:u.unstable_sxConfig),d.unstable_sx=function(t){return ht({sx:t,theme:this})},d}const te=Zt;const ee=t.createContext(null);function ne(){return t.useContext(ee)}const re="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var ie=__webpack_require__(184);const oe=function(e){const{children:n,theme:i}=e,o=ne(),a=t.useMemo((()=>{const t=null===o?i:function(t,e){if("function"===typeof e)return e(t);return r({},t,e)}(o,i);return null!=t&&(t[re]=null!==o),t}),[i,o]);return(0,ie.jsx)(ee.Provider,{value:a,children:n})};var ae=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),se=Math.abs,le=String.fromCharCode,ue=Object.assign;function ce(t){return t.trim()}function pe(t,e,n){return t.replace(e,n)}function de(t,e){return t.indexOf(e)}function he(t,e){return 0|t.charCodeAt(e)}function fe(t,e,n){return t.slice(e,n)}function ge(t){return t.length}function ve(t){return t.length}function me(t,e){return e.push(t),t}var _e=1,ye=1,be=0,xe=0,we=0,Ee="";function Te(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:_e,column:ye,length:a,return:""}}function Se(t,e){return ue(Te("",null,null,"",null,null,0),t,{length:-t.length},e)}function Ce(){return we=xe>0?he(Ee,--xe):0,ye--,10===we&&(ye=1,_e--),we}function Oe(){return we=xe<be?he(Ee,xe++):0,ye++,10===we&&(ye=1,_e++),we}function Le(){return he(Ee,xe)}function ke(){return xe}function Ie(t,e){return fe(Ee,t,e)}function Ne(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function De(t){return _e=ye=1,be=ge(Ee=t),xe=0,[]}function Ae(t){return Ee="",t}function Ge(t){return ce(Ie(xe-1,Me(91===t?t+2:40===t?t+1:t)))}function Re(t){for(;(we=Le())&&we<33;)Oe();return Ne(t)>2||Ne(we)>3?"":" "}function Pe(t,e){for(;--e&&Oe()&&!(we<48||we>102||we>57&&we<65||we>70&&we<97););return Ie(t,ke()+(e<6&&32==Le()&&32==Oe()))}function Me(t){for(;Oe();)switch(we){case t:return xe;case 34:case 39:34!==t&&39!==t&&Me(we);break;case 40:41===t&&Me(t);break;case 92:Oe()}return xe}function ze(t,e){for(;Oe()&&t+we!==57&&(t+we!==84||47!==Le()););return"/*"+Ie(e,xe-1)+"*"+le(47===t?t:Oe())}function Fe(t){for(;!Ne(Le());)Oe();return Ie(t,xe)}var Be="-ms-",je="-moz-",He="-webkit-",Ue="comm",We="rule",Ve="decl",qe="@keyframes";function Xe(t,e){for(var n="",r=ve(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Ye(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case Ve:return t.return=t.return||t.value;case Ue:return"";case qe:return t.return=t.value+"{"+Xe(t.children,r)+"}";case We:t.value=t.props.join(",")}return ge(n=Xe(t.children,r))?t.return=t.value+"{"+n+"}":""}function Ke(t){return Ae($e("",null,null,null,[""],t=De(t),0,[0],t))}function $e(t,e,n,r,i,o,a,s,l){for(var u=0,c=0,p=a,d=0,h=0,f=0,g=1,v=1,m=1,_=0,y="",b=i,x=o,w=r,E=y;v;)switch(f=_,_=Oe()){case 40:if(108!=f&&58==he(E,p-1)){-1!=de(E+=pe(Ge(_),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:E+=Ge(_);break;case 9:case 10:case 13:case 32:E+=Re(f);break;case 92:E+=Pe(ke()-1,7);continue;case 47:switch(Le()){case 42:case 47:me(Je(ze(Oe(),ke()),e,n),l);break;default:E+="/"}break;case 123*g:s[u++]=ge(E)*m;case 125*g:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+c:-1==m&&(E=pe(E,/\f/g,"")),h>0&&ge(E)-p&&me(h>32?Ze(E+";",r,n,p-1):Ze(pe(E," ","")+";",r,n,p-2),l);break;case 59:E+=";";default:if(me(w=Qe(E,e,n,u,c,i,s,y,b=[],x=[],p),o),123===_)if(0===c)$e(E,e,w,w,b,o,p,s,x);else switch(99===d&&110===he(E,3)?100:d){case 100:case 108:case 109:case 115:$e(t,w,w,r&&me(Qe(t,w,w,0,0,i,s,y,i,b=[],p),x),i,x,p,s,r?b:x);break;default:$e(E,w,w,w,[""],x,0,s,x)}}u=c=h=0,g=m=1,y=E="",p=a;break;case 58:p=1+ge(E),h=f;default:if(g<1)if(123==_)--g;else if(125==_&&0==g++&&125==Ce())continue;switch(E+=le(_),_*g){case 38:m=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(ge(E)-1)*m,m=1;break;case 64:45===Le()&&(E+=Ge(Oe())),d=Le(),c=p=ge(y=E+=Fe(ke())),_++;break;case 45:45===f&&2==ge(E)&&(g=0)}}return o}function Qe(t,e,n,r,i,o,a,s,l,u,c){for(var p=i-1,d=0===i?o:[""],h=ve(d),f=0,g=0,v=0;f<r;++f)for(var m=0,_=fe(t,p+1,p=se(g=a[f])),y=t;m<h;++m)(y=ce(g>0?d[m]+" "+_:pe(_,/&\f/g,d[m])))&&(l[v++]=y);return Te(t,e,n,0===i?We:s,l,u,c)}function Je(t,e,n){return Te(t,e,n,Ue,le(we),fe(t,2,-2),0)}function Ze(t,e,n,r){return Te(t,e,n,Ve,fe(t,0,r),fe(t,r+1,-1),r)}var tn=function(t,e,n){for(var r=0,i=0;r=i,i=Le(),38===r&&12===i&&(e[n]=1),!Ne(i);)Oe();return Ie(t,xe)},en=function(t,e){return Ae(function(t,e){var n=-1,r=44;do{switch(Ne(r)){case 0:38===r&&12===Le()&&(e[n]=1),t[n]+=tn(xe-1,e,n);break;case 2:t[n]+=Ge(r);break;case 4:if(44===r){t[++n]=58===Le()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=le(r)}}while(r=Oe());return t}(De(t),e))},nn=new WeakMap,rn=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||nn.get(n))&&!r){nn.set(t,!0);for(var i=[],o=en(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},on=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function an(t,e){switch(function(t,e){return 45^he(t,0)?(((e<<2^he(t,0))<<2^he(t,1))<<2^he(t,2))<<2^he(t,3):0}(t,e)){case 5103:return He+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return He+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return He+t+je+t+Be+t+t;case 6828:case 4268:return He+t+Be+t+t;case 6165:return He+t+Be+"flex-"+t+t;case 5187:return He+t+pe(t,/(\w+).+(:[^]+)/,He+"box-$1$2"+Be+"flex-$1$2")+t;case 5443:return He+t+Be+"flex-item-"+pe(t,/flex-|-self/,"")+t;case 4675:return He+t+Be+"flex-line-pack"+pe(t,/align-content|flex-|-self/,"")+t;case 5548:return He+t+Be+pe(t,"shrink","negative")+t;case 5292:return He+t+Be+pe(t,"basis","preferred-size")+t;case 6060:return He+"box-"+pe(t,"-grow","")+He+t+Be+pe(t,"grow","positive")+t;case 4554:return He+pe(t,/([^-])(transform)/g,"$1"+He+"$2")+t;case 6187:return pe(pe(pe(t,/(zoom-|grab)/,He+"$1"),/(image-set)/,He+"$1"),t,"")+t;case 5495:case 3959:return pe(t,/(image-set\([^]*)/,He+"$1$`$1");case 4968:return pe(pe(t,/(.+:)(flex-)?(.*)/,He+"box-pack:$3"+Be+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+He+t+t;case 4095:case 3583:case 4068:case 2532:return pe(t,/(.+)-inline(.+)/,He+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ge(t)-1-e>6)switch(he(t,e+1)){case 109:if(45!==he(t,e+4))break;case 102:return pe(t,/(.+:)(.+)-([^]+)/,"$1"+He+"$2-$3$1"+je+(108==he(t,e+3)?"$3":"$2-$3"))+t;case 115:return~de(t,"stretch")?an(pe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==he(t,e+1))break;case 6444:switch(he(t,ge(t)-3-(~de(t,"!important")&&10))){case 107:return pe(t,":",":"+He)+t;case 101:return pe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+He+(45===he(t,14)?"inline-":"")+"box$3$1"+He+"$2$3$1"+Be+"$2box$3")+t}break;case 5936:switch(he(t,e+11)){case 114:return He+t+Be+pe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return He+t+Be+pe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return He+t+Be+pe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return He+t+Be+t+t}return t}var sn=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Ve:t.return=an(t.value,t.length);break;case qe:return Xe([Se(t,{value:pe(t.value,"@","@"+He)})],r);case We:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xe([Se(t,{props:[pe(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Xe([Se(t,{props:[pe(e,/:(plac\w+)/,":"+He+"input-$1")]}),Se(t,{props:[pe(e,/:(plac\w+)/,":-moz-$1")]}),Se(t,{props:[pe(e,/:(plac\w+)/,Be+"input-$1")]})],r)}return""}))}}],ln=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||sn;var i,o,a={},s=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;s.push(t)}));var l,u,c=[Ye,(u=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],p=function(t){var e=ve(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([rn,on].concat(r,c));o=function(t,e,n,r){l=n,function(t){Xe(Ke(t),p)}(t?t+"{"+e.styles+"}":e.styles),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new ae({key:e,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return d.sheet.hydrate(s),d};var un={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function cn(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var pn=/[A-Z]|^ms/g,dn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hn=function(t){return 45===t.charCodeAt(1)},fn=function(t){return null!=t&&"boolean"!==typeof t},gn=cn((function(t){return hn(t)?t:t.replace(pn,"-$&").toLowerCase()})),vn=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(dn,(function(t,e,n){return _n={name:e,styles:n,next:_n},e}))}return 1===un[t]||hn(t)||"number"!==typeof e||0===e?e:e+"px"};function mn(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return _n={name:n.name,styles:n.styles,next:_n},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)_n={name:r.name,styles:r.styles,next:_n},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=mn(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":fn(a)&&(r+=gn(o)+":"+vn(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=mn(t,e,a);switch(o){case"animation":case"animationName":r+=gn(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)fn(a[l])&&(r+=gn(o)+":"+vn(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=_n,o=n(t);return _n=i,mn(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var _n,yn=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var bn=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";_n=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=mn(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++)i+=mn(n,e,t[a]),r&&(i+=o[a]);yn.lastIndex=0;for(var s,l="";null!==(s=yn.exec(i));)l+="-"+s[1];var u=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:_n}},xn=!!e.useInsertionEffect&&e.useInsertionEffect,wn=xn||function(t){return t()},En=xn||t.useLayoutEffect,Tn=t.createContext("undefined"!==typeof HTMLElement?ln({key:"css"}):null);Tn.Provider;var Sn=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Tn);return e(n,i,r)}))};var Cn=t.createContext({});const On=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(Cn);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},Ln={};function kn(e,n,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof i){const a=i(t),s=e?r({},n,{[e]:a}):a;return o?()=>s:s}return r({},n,e?{[e]:i}:i)}),[e,n,i,o])}const In=function(t){const{children:e,theme:n,themeId:r}=t,i=On(Ln),o=ne()||Ln,a=kn(r,i,n),s=kn(r,o,n,!0);return(0,ie.jsx)(oe,{theme:s,children:(0,ie.jsx)(Cn.Provider,{value:a,children:e})})},Nn="$$material",Dn=["theme"];function An(t){let{theme:e}=t,n=i(t,Dn);const o=e[Nn];return(0,ie.jsx)(In,r({},n,{themeId:o?Nn:void 0,theme:o||e}))}function Gn(t,e){const n=r({},e);return Object.keys(t).forEach((i=>{if(i.toString().match(/^(components|slots)$/))n[i]=r({},t[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const o=t[i]||{},a=e[i];n[i]={},a&&Object.keys(a)?o&&Object.keys(o)?(n[i]=r({},a),Object.keys(o).forEach((t=>{n[i][t]=Gn(o[t],a[t])}))):n[i]=a:n[i]=o}else void 0===n[i]&&(n[i]=t[i])})),n}const Rn=vt();const Pn=function(){return On(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn)};function Mn(t){let{props:e,name:n,defaultTheme:r,themeId:i}=t,o=Pn(r);i&&(o=o[i]||o);const a=function(t){const{theme:e,name:n,props:r}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?Gn(e.components[n].defaultProps,r):r}({theme:o,name:n,props:e});return a}const zn=te();function Fn(t){let{props:e,name:n}=t;return Mn({props:e,name:n,defaultTheme:zn,themeId:Nn})}var Bn=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},jn=function(t,e,n){Bn(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0),i=i.next}while(void 0!==i)}},Hn=(__webpack_require__(110),Sn((function(e,n){var r=e.styles,i=bn([r],void 0,t.useContext(Cn)),o=t.useRef();return En((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+t+" "+i.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",t),e.hydrate([a])),o.current=[e,r],function(){e.flush()}}),[n]),En((function(){var t=o.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==i.next&&jn(n,i.next,!0),e.tags.length){var r=e.tags[e.tags.length-1].nextElementSibling;e.before=r,e.flush()}n.insert("",i,e,!1)}}),[n,i.name]),null})));function Un(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return bn(e)}var Wn=function(){var t=Un.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Vn(t){const{styles:e,defaultTheme:n={}}=t,r="function"===typeof e?t=>{return e(void 0===(r=t)||null===r||0===Object.keys(r).length?n:t);var r}:e;return(0,ie.jsx)(Hn,{styles:r})}const qn=function(t){let{styles:e,themeId:n,defaultTheme:r={}}=t;const i=Pn(r),o="function"===typeof e?e(n&&i[n]||i):e;return(0,ie.jsx)(Vn,{styles:o})};const Xn=function(t){return(0,ie.jsx)(qn,r({},t,{defaultTheme:zn,themeId:Nn}))},Yn=(t,e)=>r({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),Kn=t=>r({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}});const $n=function(e){const n=Fn({props:e,name:"MuiCssBaseline"}),{children:i,enableColorScheme:o=!1}=n;return(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsx)(Xn,{styles:t=>function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const i={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach((e=>{let[n,r]=e;var o;i[t.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=r.palette)?void 0:o.mode}}));let o=r({html:Yn(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:r({margin:0},Kn(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},i);const a=null==(n=t.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return a&&(o=[o,a]),o}(t,o)}),i]})};var Qn=__webpack_require__(100);const Jn=()=>{Qn.LiteGraph.NODE_DEFAULT_COLOR="#1565c0",Qn.LiteGraph.NODE_DEFAULT_BGCOLOR="#455a64",Qn.LiteGraph.NODE_DEFAULT_BOXCOLOR="#607d8b",Qn.LiteGraph.DEFAULT_SHADOW_COLOR="rgba(0, 0, 0, 0.5)",Qn.LiteGraph.NODE_TITLE_COLOR="#fff",Qn.LiteGraph.NODE_TEXT_COLOR="#fff",Qn.LiteGraph.NODE_DEFAULT_SHAPE="box",Qn.LiteGraph.NODE_TITLE_HEIGHT=30,Qn.LiteGraph.NODE_SLOT_HEIGHT=15,Qn.LiteGraph.NODE_WIDGET_HEIGHT=20,Qn.LiteGraph.NODE_WIDTH=140,Qn.LiteGraph.NODE_MIN_WIDTH=50,Qn.LiteGraph.NODE_COLLAPSED_RADIUS=0,Qn.LiteGraph.NODE_COLLAPSED_WIDTH=80,Qn.LiteGraph.NODE_TEXT_SIZE=14,Qn.LiteGraph.NODE_SUBTEXT_SIZE=12,Qn.LiteGraph.DEFAULT_GROUP_FONT=24};const Zn="C:/Users/Dir/litegraph_2".concat("/"),tr="C:/Users/Dir/litegraph_2".concat("/index.js");function er(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A + B","number"),this.size=[150,70],this.title="\u0421\u043b\u043e\u0436\u0435\u043d\u0438\u0435",this.properties={precision:1},this.render_execution_order=!0,this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}er.prototype.onExecute=function(){let t=this.getInputData(0);void 0===t&&(t=0);let e=this.getInputData(1);void 0===e&&(e=0),this.setOutputData(0,t+e)},er.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/addition",er);function nr(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A - B","number"),this.size=[150,70],this.title="\u0412\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0435",this.properties={precision:1},this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}nr.prototype.onExecute=function(){let t=this.getInputData(0);void 0===t&&(t=0);let e=this.getInputData(1);void 0===e&&(e=0),this.setOutputData(0,t-e)},nr.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/substraction",nr);function rr(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A / B","number"),this.size=[150,70],this.title="\u0414\u0435\u043b\u0435\u043d\u0438\u0435",this.properties={precision:1},this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}rr.prototype.onExecute=function(){let t=this.getInputData(0);void 0===t&&(t=0);let e=this.getInputData(1);void 0===e&&(e=0),this.setOutputData(0,t/e)},rr.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/division",rr);function ir(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A * B","number"),this.size=[150,70],this.title="\u0423\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435",this.properties={precision:1},this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}ir.prototype.onExecute=function(){let t=this.getInputData(0);void 0===t&&(t=0);let e=this.getInputData(1);void 0===e&&(e=0),this.setOutputData(0,t*e)},ir.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/multiplication",ir);function or(){this.value=0,this.size=[60,40],this.title="\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",this.addInput("value",0,{label:""}),this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1),or.title_color="#52b202",or.shape=Qn.LiteGraph.SQUARE_SHAPE}or.prototype.onExecute=function(){this.inputs[0]&&(this.value=this.getInputData(0))},or.prototype.getTitle=function(){return this.flags.collapsed?this.inputs[0].label:this.title},or.toString=function(t){if(null==t)return"null";if(t.constructor===Number)return t.toFixed(3);if(t.constructor===Array){let e="[";for(let n=0;n<t.length;++n)e+=or.toString(t[n])+(n+1!=t.length?",":"");return e+="]",e}return String(t)},or.prototype.onDrawBackground=function(){this.inputs[0].label=or.toString(this.value)},or.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/result",or);function ar(){this.addProperty("value",2),this.addOutput("value","number"),this.title="\u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e",this.widget=this.addWidget("number","value",2,"value"),this.widgets_up=!0,this.size=[180,30],this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1),ar.title_color="#37474f",ar.shape=Qn.LiteGraph.SQUARE_SHAPE}ar.prototype.onExecute=function(){this.setOutputData(0,parseFloat(this.properties.value))},ar.prototype.getTitle=function(){return this.flags.collapsed?this.properties.value:this.title},ar.prototype.setValue=function(t){this.setProperty("value",t)},ar.prototype.onDrawBackground=function(){this.outputs[0].label=this.properties.value.toFixed(3)},ar.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/constNumber",ar);function sr(){this.title="\u0411\u043b\u043e\u043a",this.properties={precision:1},this.render_execution_order=!0,this.addProperty("workDir",Zn),this.addProperty("binaryFile",tr),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}sr.prototype.onDrawForeground=function(t){if(this.order){t.font="14px Arial",t.fillStyle="white";const e="".concat(this.order),n=this.size[0]-15,r=-10;t.fillText(e,n,r)}},Qn.LiteGraph.registerNodeType("basic/base",sr);function lr(){this.addProperty("interval",3e3),this.addProperty("event","tick"),this.addInput("interval","number"),this.addOutput("on_tick",Qn.LiteGraph.EVENT),this.time=0,this.last_interval=3e3,this.triggered=!1,this.addProperty("workDir",""),this.addProperty("binaryFile",""),this.addProperty("cores",""),this.addProperty("flags",""),this.addProperty("checkbox",!1)}function ur(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ur(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}lr.title="\u0422\u0430\u0439\u043c\u0435\u0440",lr.desc="\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0442\u0438\u0435 \u043a\u0430\u0436\u0434\u044b\u0435 N \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434",lr.prototype.onStart=function(){this.time=0},lr.prototype.getTitle=function(){return"\u0422\u0430\u0439\u043c\u0435\u0440: "+this.last_interval.toString()+"ms"},lr.on_color="#AAA",lr.off_color="#222",lr.prototype.onDrawBackground=function(){this.boxcolor=this.triggered?lr.on_color:lr.off_color,this.triggered=!1},lr.prototype.onExecute=function(){const t=1e3*this.graph.elapsed_time,e=0==this.time;this.time+=t,this.last_interval=Math.max(1,0|this.getInputOrProperty("interval")),e||!(this.time<this.last_interval||isNaN(this.last_interval))?(this.triggered=!0,this.time=this.time%this.last_interval,this.trigger("on_tick",this.properties.event),this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!0)):this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!1)},lr.prototype.onGetInputs=function(){return[["interval","number"]]},lr.prototype.onGetOutputs=function(){return[["tick","boolean"]]},Qn.LiteGraph.registerNodeType("basic/timer",lr);const cr=function(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ur(t))&&(r&&(r+=" "),r+=e);return r},pr=t=>t,dr=(()=>{let t=pr;return{configure(e){t=e},generate:e=>t(e),reset(){t=pr}}})(),hr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=hr[e];return r?"".concat(n,"-").concat(r):"".concat(dr.generate(t),"-").concat(e)}function gr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(t).forEach((i=>{r[i]=t[i].reduce(((t,r)=>{if(r){const i=e(r);""!==i&&t.push(i),n&&n[r]&&t.push(n[r])}return t}),[]).join(" ")})),r}var vr=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,mr=cn((function(t){return vr.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),_r=function(t){return"theme"!==t},yr=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?mr:_r},br=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},xr=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return Bn(e,n,r),wn((function(){return jn(e,n,r)})),null},wr=function e(n,i){var o,a,s=n.__emotion_real===n,l=s&&n.__emotion_base||n;void 0!==i&&(o=i.label,a=i.target);var u=br(n,i,s),c=u||yr(l),p=!c("as");return function(){var d=arguments,h=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==o&&h.push("label:"+o+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{0,h.push(d[0][0]);for(var f=d.length,g=1;g<f;g++)h.push(d[g],d[0][g])}var v=Sn((function(e,n,r){var i=p&&e.as||l,o="",s=[],d=e;if(null==e.theme){for(var f in d={},e)d[f]=e[f];d.theme=t.useContext(Cn)}"string"===typeof e.className?o=function(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}(n.registered,s,e.className):null!=e.className&&(o=e.className+" ");var g=bn(h.concat(s),n.registered,d);o+=n.key+"-"+g.name,void 0!==a&&(o+=" "+a);var v=p&&void 0===u?yr(i):c,m={};for(var _ in e)p&&"as"===_||v(_)&&(m[_]=e[_]);return m.className=o,m.ref=r,t.createElement(t.Fragment,null,t.createElement(xr,{cache:n,serialized:g,isStringTag:"string"===typeof i}),t.createElement(i,m))}));return v.displayName=void 0!==o?o:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=l,v.__emotion_styles=h,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,n){return e(t,r({},i,n,{shouldForwardProp:br(v,n,!0)})).apply(void 0,h)},v}}.bind();function Er(t,e){return wr(t,e)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){wr[t]=wr(t)}));const Tr=["variant"];function Sr(t){return 0===t.length}function Cr(t){const{variant:e}=t,n=i(t,Tr);let r=e||"";return Object.keys(n).sort().forEach((e=>{r+="color"===e?Sr(r)?t[e]:_(t[e]):"".concat(Sr(r)?e:_(e)).concat(_(t[e].toString()))})),r}const Or=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];const Lr=t=>{let e=0;const n={};return t&&t.forEach((t=>{let r="";"function"===typeof t.props?(r="callback".concat(e),e+=1):r=Cr(t.props),n[r]=t.style})),n},kr=(t,e,n)=>{const{ownerState:i={}}=t,o=[];let a=0;return n&&n.forEach((n=>{let s=!0;if("function"===typeof n.props){const e=r({},t,i);s=n.props(e)}else Object.keys(n.props).forEach((e=>{i[e]!==n.props[e]&&t[e]!==n.props[e]&&(s=!1)}));s&&("function"===typeof n.props?o.push(e["callback".concat(a)]):o.push(e[Cr(n.props)])),"function"===typeof n.props&&(a+=1)})),o};function Ir(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const Nr=vt(),Dr=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function Ar(t){let{defaultTheme:e,theme:n,themeId:r}=t;return i=n,0===Object.keys(i).length?e:n[r]||n;var i}function Gr(t){return t?(e,n)=>n[t]:null}const Rr=t=>{let{styledArg:e,props:n,defaultTheme:i,themeId:o}=t;const a=e(r({},n,{theme:Ar(r({},n,{defaultTheme:i,themeId:o}))}));let s;if(a&&a.variants&&(s=a.variants,delete a.variants),s){return[a,...kr(n,Lr(s),s)]}return a};function Pr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=Nr,rootShouldForwardProp:o=Ir,slotShouldForwardProp:s=Ir}=t,u=t=>ht(r({},t,{theme:Ar(r({},t,{defaultTheme:n,themeId:e}))}));return u.__mui_systemSx=!0,function(t){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))})(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:p,slot:d,skipVariantsResolver:h,skipSx:f,overridesResolver:g=Gr(Dr(d))}=c,v=i(c,Or),m=void 0!==h?h:d&&"Root"!==d&&"root"!==d||!1,_=f||!1;let y=Ir;"Root"===d||"root"===d?y=o:d?y=s:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(y=void 0);const b=Er(t,r({shouldForwardProp:y,label:undefined},v)),x=function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];const d=s?s.map((t=>{if("function"===typeof t&&t.__emotion_real!==t)return r=>Rr({styledArg:t,props:r,defaultTheme:n,themeId:e});if(a(t)){let e,n=t;return t&&t.variants&&(e=t.variants,delete n.variants,n=n=>{let r=t;return kr(n,Lr(e),e).forEach((t=>{r=l(r,t)})),r}),n}return t})):[];let h=i;if(a(i)){let t;i&&i.variants&&(t=i.variants,delete h.variants,h=e=>{let n=i;return kr(e,Lr(t),t).forEach((t=>{n=l(n,t)})),n})}else"function"===typeof i&&i.__emotion_real!==i&&(h=t=>Rr({styledArg:i,props:t,defaultTheme:n,themeId:e}));p&&g&&d.push((t=>{const i=Ar(r({},t,{defaultTheme:n,themeId:e})),o=((t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null)(p,i);if(o){const e={};return Object.entries(o).forEach((n=>{let[o,a]=n;e[o]="function"===typeof a?a(r({},t,{theme:i})):a})),g(t,e)}return null})),p&&!m&&d.push((t=>{const i=Ar(r({},t,{defaultTheme:n,themeId:e}));return((t,e,n,r)=>{var i;const o=null==n||null==(i=n.components)||null==(i=i[r])?void 0:i.variants;return kr(t,e,o)})(t,((t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),Lr(n)})(p,i),i,p)})),_||d.push(u);const f=d.length-s.length;if(Array.isArray(i)&&f>0){const t=new Array(f).fill("");h=[...i,...t],h.raw=[...i.raw,...t]}const v=b(h,...d);return t.muiName&&(v.muiName=t.muiName),v};return b.withConfig&&(x.withConfig=b.withConfig),x}}const Mr=Pr(),zr=["className","component","disableGutters","fixed","maxWidth","classes"],Fr=vt(),Br=Mr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["maxWidth".concat(_(String(n.maxWidth)))],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),jr=t=>Mn({props:t,name:"MuiContainer",defaultTheme:Fr});const Hr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=Br,useThemeProps:o=jr,componentName:a="MuiContainer"}=e,s=n((t=>{let{theme:e,ownerState:n}=t;return r({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})}),(t=>{let{theme:e,ownerState:n}=t;return n.fixed&&Object.keys(e.breakpoints.values).reduce(((t,n)=>{const r=n,i=e.breakpoints.values[r];return 0!==i&&(t[e.breakpoints.up(r)]={maxWidth:"".concat(i).concat(e.breakpoints.unit)}),t}),{})}),(t=>{let{theme:e,ownerState:n}=t;return r({},"xs"===n.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[e.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(e.breakpoints.values[n.maxWidth]).concat(e.breakpoints.unit)}})})),l=t.forwardRef((function(t,e){const n=o(t),{className:l,component:u="div",disableGutters:c=!1,fixed:p=!1,maxWidth:d="lg"}=n,h=i(n,zr),f=r({},n,{component:u,disableGutters:c,fixed:p,maxWidth:d}),g=((t,e)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=t;return gr({root:["root",o&&"maxWidth".concat(_(String(o))),r&&"fixed",i&&"disableGutters"]},(t=>fr(e,t)),n)})(f,a);return(0,ie.jsx)(s,r({as:u,ownerState:f,className:cr(g.root,l),ref:e},h))}));return l}(),Ur=Hr,Wr={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"};function Vr(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function qr(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((()=>n.every((t=>null==t))?null:t=>{n.forEach((e=>{Vr(e,t)}))}),n)}function Xr(t){return"string"===typeof t}function Yr(t,e,n){return void 0===t||Xr(t)?e:r({},e,{ownerState:r({},e.ownerState,n)})}function Kr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}function $r(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}const Qr=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Jr(t){var e;const{elementType:n,externalSlotProps:o,ownerState:a,skipResolvingSlotProps:s=!1}=t,l=i(t,Qr),u=s?{}:function(t,e,n){return"function"===typeof t?t(e,n):t}(o,a),{props:c,internalRef:p}=function(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:o,className:a}=t;if(!e){const t=cr(null==n?void 0:n.className,a,null==o?void 0:o.className,null==i?void 0:i.className),e=r({},null==n?void 0:n.style,null==o?void 0:o.style,null==i?void 0:i.style),s=r({},n,o,i);return t.length>0&&(s.className=t),Object.keys(e).length>0&&(s.style=e),{props:s,internalRef:void 0}}const s=Kr(r({},o,i)),l=$r(i),u=$r(o),c=e(s),p=cr(null==c?void 0:c.className,null==n?void 0:n.className,a,null==o?void 0:o.className,null==i?void 0:i.className),d=r({},null==c?void 0:c.style,null==n?void 0:n.style,null==o?void 0:o.style,null==i?void 0:i.style),h=r({},c,n,u,l);return p.length>0&&(h.className=p),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}(r({},l,{externalSlotProps:u}));return Yr(n,r({},c,{ref:qr(p,null==u?void 0:u.ref,null==(e=t.additionalProps)?void 0:e.ref)}),a)}function Zr(t){return t&&t.ownerDocument||document}const ti="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;const ei=function(e){const n=t.useRef(e);return ti((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current};function ni(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}),(()=>{}))}function ri(t){return Zr(t).defaultView||window}function ii(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function oi(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function ai(t){return parseInt(ri(t).getComputedStyle(t).paddingRight,10)||0}function si(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,(t=>{const e=-1===o.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&oi(t,i)}))}function li(t,e){let n=-1;return t.some(((t,r)=>!!e(t)&&(n=r,!0))),n}function ui(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(function(t){const e=Zr(t);return e.body===t?ri(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){const t=ii(Zr(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(ai(r)+t,"px");const e=Zr(r).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(ai(e)+t,"px")}))}let t;if(r.parentNode instanceof DocumentFragment)t=Zr(r).body;else{const e=r.parentElement,n=ri(r);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:r}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:r}=t;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}const ci=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&oi(t.modalRef,!1);const r=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);si(e,t.mount,t.modalRef,r,!0);const i=li(this.containers,(t=>t.container===e));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}mount(t,e){const n=li(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[n];r.restore||(r.restore=ui(r,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const r=li(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),t.modalRef&&oi(t.modalRef,e),si(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const t=i.modals[i.modals.length-1];t.modalRef&&oi(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}};function pi(e){const{container:n,disableEscapeKeyDown:i=!1,disableScrollLock:o=!1,manager:a=ci,closeAfterTransition:s=!1,onTransitionEnter:l,onTransitionExited:u,children:c,onClose:p,open:d,rootRef:h}=e,f=t.useRef({}),g=t.useRef(null),v=t.useRef(null),m=qr(v,h),[_,y]=t.useState(!d),b=function(t){return!!t&&t.props.hasOwnProperty("in")}(c);let x=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(x=!1);const w=()=>(f.current.modalRef=v.current,f.current.mount=g.current,f.current),E=()=>{a.mount(w(),{disableScrollLock:o}),v.current&&(v.current.scrollTop=0)},T=ei((()=>{const t=function(t){return"function"===typeof t?t():t}(n)||Zr(g.current).body;a.add(w(),t),v.current&&E()})),S=t.useCallback((()=>a.isTopModal(w())),[a]),C=ei((t=>{g.current=t,t&&(d&&S()?E():v.current&&oi(v.current,x))})),O=t.useCallback((()=>{a.remove(w(),x)}),[x,a]);t.useEffect((()=>()=>{O()}),[O]),t.useEffect((()=>{d?T():b&&s||O()}),[d,O,b,s,T]);const L=t=>e=>{var n;null==(n=t.onKeyDown)||n.call(t,e),"Escape"===e.key&&229!==e.which&&S()&&(i||(e.stopPropagation(),p&&p(e,"escapeKeyDown")))},k=t=>e=>{var n;null==(n=t.onClick)||n.call(t,e),e.target===e.currentTarget&&p&&p(e,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Kr(e);delete n.onTransitionEnter,delete n.onTransitionExited;const i=r({},n,t);return r({role:"presentation"},i,{onKeyDown:L(i),ref:m})},getBackdropProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r({"aria-hidden":!0},t,{onClick:k(t),open:d})},getTransitionProps:()=>({onEnter:ni((()=>{y(!1),l&&l()}),null==c?void 0:c.props.onEnter),onExited:ni((()=>{y(!0),u&&u(),s&&O()}),null==c?void 0:c.props.onExited)}),rootRef:m,portalRef:C,isTopModal:S,exited:_,hasTransition:b}}const di=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function hi(t){const e=[],n=[];return Array.from(t.querySelectorAll(di)).forEach(((t,r)=>{const i=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function fi(){return!0}function gi(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:a=hi,isEnabled:s=fi,open:l}=e,u=t.useRef(!1),c=t.useRef(null),p=t.useRef(null),d=t.useRef(null),h=t.useRef(null),f=t.useRef(!1),g=t.useRef(null),v=qr(n.ref,g),m=t.useRef(null);t.useEffect((()=>{l&&g.current&&(f.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!g.current)return;const t=Zr(g.current);return g.current.contains(t.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),f.current&&g.current.focus()),()=>{o||(d.current&&d.current.focus&&(u.current=!0,d.current.focus()),d.current=null)}}),[l]),t.useEffect((()=>{if(!l||!g.current)return;const t=Zr(g.current),e=e=>{m.current=e,!i&&s()&&"Tab"===e.key&&t.activeElement===g.current&&e.shiftKey&&(u.current=!0,p.current&&p.current.focus())},n=()=>{const e=g.current;if(null===e)return;if(!t.hasFocus()||!s()||u.current)return void(u.current=!1);if(e.contains(t.activeElement))return;if(i&&t.activeElement!==c.current&&t.activeElement!==p.current)return;if(t.activeElement!==h.current)h.current=null;else if(null!==h.current)return;if(!f.current)return;let n=[];if(t.activeElement!==c.current&&t.activeElement!==p.current||(n=a(g.current)),n.length>0){var r,o;const t=Boolean((null==(r=m.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=m.current)?void 0:o.key)),e=n[0],i=n[n.length-1];"string"!==typeof e&&"string"!==typeof i&&(t?i.focus():e.focus())}else e.focus()};t.addEventListener("focusin",n),t.addEventListener("keydown",e,!0);const r=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),t.removeEventListener("focusin",n),t.removeEventListener("keydown",e,!0)}}),[r,i,o,s,l,a]);const _=t=>{null===d.current&&(d.current=t.relatedTarget),f.current=!0};return(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:v,onFocus:t=>{null===d.current&&(d.current=t.relatedTarget),f.current=!0,h.current=t.target;const e=n.props.onFocus;e&&e(t)}}),(0,ie.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:p,"data-testid":"sentinelEnd"})]})}var vi=__webpack_require__(164);const mi=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=t.useState(null),l=qr(t.isValidElement(r)?r.ref:null,n);if(ti((()=>{o||s(function(t){return"function"===typeof t?t():t}(i)||document.body)}),[i,o]),ti((()=>{if(a&&!o)return Vr(n,a),()=>{Vr(n,null)}}),[n,a,o]),o){if(t.isValidElement(r)){const e={ref:l};return t.cloneElement(r,e)}return(0,ie.jsx)(t.Fragment,{children:r})}return(0,ie.jsx)(t.Fragment,{children:a?vi.createPortal(r,a):a})}));const _i=t=>Ir(t)&&"classes"!==t,yi=Ir,bi=Pr({themeId:Nn,defaultTheme:zn,rootShouldForwardProp:_i});function xi(t,e){return xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xi(t,e)}function wi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,xi(t,e)}const Ei=!1,Ti=t.createContext(null);var Si="unmounted",Ci="exited",Oi="entering",Li="entered",ki="exiting",Ii=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Ci,r.appearStatus=Oi):i=Li:i=t.unmountOnExit||t.mountOnEnter?Si:Ci,r.state={status:i},r.nextCallback=null,r}wi(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Si?{status:Ci}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Oi&&n!==Li&&(e=Oi):n!==Oi&&n!==Li||(e=ki)}this.updateStatus(!1,e)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},r.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Oi){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:vi.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ci&&this.setState({status:Si})},r.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[vi.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!t&&!n||Ei?this.safeSetState({status:Li},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Oi},(function(){e.props.onEntering(o,a),e.onTransitionEnd(l,(function(){e.safeSetState({status:Li},(function(){e.props.onEntered(o,a)}))}))})))},r.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:vi.findDOMNode(this);e&&!Ei?(this.props.onExit(r),this.safeSetState({status:ki},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Ci},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:Ci},(function(){t.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},r.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:vi.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Si)return null;var n=this.props,r=n.children,o=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,i(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Ti.Provider,{value:null},"function"===typeof r?r(e,o):t.cloneElement(t.Children.only(r),o))},n}(t.Component);function Ni(){}Ii.contextType=Ti,Ii.propTypes={},Ii.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ni,onEntering:Ni,onEntered:Ni,onExit:Ni,onExiting:Ni,onExited:Ni},Ii.UNMOUNTED=Si,Ii.EXITED=Ci,Ii.ENTERING=Oi,Ii.ENTERED=Li,Ii.EXITING=ki;const Di=Ii;function Ai(){const t=Pn(zn);return t[Nn]||t}const Gi=t=>t.scrollTop;function Ri(t,e){var n,r;const{timeout:i,easing:o,style:a={}}=t;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof o?o[e.mode]:o,delay:a.transitionDelay}}const Pi=qr,Mi=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],zi={entering:{opacity:1},entered:{opacity:1}},Fi=t.forwardRef((function(e,n){const o=Ai(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:s,appear:l=!0,children:u,easing:c,in:p,onEnter:d,onEntered:h,onEntering:f,onExit:g,onExited:v,onExiting:m,style:_,timeout:y=a,TransitionComponent:b=Di}=e,x=i(e,Mi),w=t.useRef(null),E=Pi(w,u.ref,n),T=t=>e=>{if(t){const n=w.current;void 0===e?t(n):t(n,e)}},S=T(f),C=T(((t,e)=>{Gi(t);const n=Ri({style:_,timeout:y,easing:c},{mode:"enter"});t.style.webkitTransition=o.transitions.create("opacity",n),t.style.transition=o.transitions.create("opacity",n),d&&d(t,e)})),O=T(h),L=T(m),k=T((t=>{const e=Ri({style:_,timeout:y,easing:c},{mode:"exit"});t.style.webkitTransition=o.transitions.create("opacity",e),t.style.transition=o.transitions.create("opacity",e),g&&g(t)})),I=T(v);return(0,ie.jsx)(b,r({appear:l,in:p,nodeRef:w,onEnter:C,onEntered:O,onEntering:S,onExit:k,onExited:I,onExiting:L,addEndListener:t=>{s&&s(w.current,t)},timeout:y},x,{children:(e,n)=>t.cloneElement(u,r({style:r({opacity:0,visibility:"exited"!==e||p?void 0:"hidden"},zi[e],_,u.props.style),ref:E},n))}))})),Bi=Fi;function ji(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return e.forEach((e=>{r[e]=fr(t,e,n)})),r}function Hi(t){return fr("MuiBackdrop",t)}ji("MuiBackdrop",["root","invisible"]);const Ui=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Wi=bi("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return r({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),Vi=t.forwardRef((function(t,e){var n,o,a;const s=Fn({props:t,name:"MuiBackdrop"}),{children:l,className:u,component:c="div",components:p={},componentsProps:d={},invisible:h=!1,open:f,slotProps:g={},slots:v={},TransitionComponent:m=Bi,transitionDuration:_}=s,y=i(s,Ui),b=r({},s,{component:c,invisible:h}),x=(t=>{const{classes:e,invisible:n}=t;return gr({root:["root",n&&"invisible"]},Hi,e)})(b),w=null!=(n=g.root)?n:d.root;return(0,ie.jsx)(m,r({in:f,timeout:_},y,{children:(0,ie.jsx)(Wi,r({"aria-hidden":!0},w,{as:null!=(o=null!=(a=v.root)?a:p.Root)?o:c,className:cr(x.root,u,null==w?void 0:w.className),ownerState:r({},b,null==w?void 0:w.ownerState),classes:x,ref:e,children:l}))}))}));function qi(t){return fr("MuiModal",t)}ji("MuiModal",["root","hidden","backdrop"]);const Xi=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Yi=bi("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return r({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Ki=bi(Vi,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),$i=t.forwardRef((function(e,n){var o,a,s,l,u,c;const p=Fn({name:"MuiModal",props:e}),{BackdropComponent:d=Ki,BackdropProps:h,className:f,closeAfterTransition:g=!1,children:v,container:m,component:_,components:y={},componentsProps:b={},disableAutoFocus:x=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:E=!1,disablePortal:T=!1,disableRestoreFocus:S=!1,disableScrollLock:C=!1,hideBackdrop:O=!1,keepMounted:L=!1,onBackdropClick:k,open:I,slotProps:N,slots:D}=p,A=i(p,Xi),G=r({},p,{closeAfterTransition:g,disableAutoFocus:x,disableEnforceFocus:w,disableEscapeKeyDown:E,disablePortal:T,disableRestoreFocus:S,disableScrollLock:C,hideBackdrop:O,keepMounted:L}),{getRootProps:R,getBackdropProps:P,getTransitionProps:M,portalRef:z,isTopModal:F,exited:B,hasTransition:j}=pi(r({},G,{rootRef:n})),H=r({},G,{exited:B}),U=(t=>{const{open:e,exited:n,classes:r}=t;return gr({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},qi,r)})(H),W={};if(void 0===v.props.tabIndex&&(W.tabIndex="-1"),j){const{onEnter:t,onExited:e}=M();W.onEnter=t,W.onExited=e}const V=null!=(o=null!=(a=null==D?void 0:D.root)?a:y.Root)?o:Yi,q=null!=(s=null!=(l=null==D?void 0:D.backdrop)?l:y.Backdrop)?s:d,X=null!=(u=null==N?void 0:N.root)?u:b.root,Y=null!=(c=null==N?void 0:N.backdrop)?c:b.backdrop,K=Jr({elementType:V,externalSlotProps:X,externalForwardedProps:A,getSlotProps:R,additionalProps:{ref:n,as:_},ownerState:H,className:cr(f,null==X?void 0:X.className,null==U?void 0:U.root,!H.open&&H.exited&&(null==U?void 0:U.hidden))}),$=Jr({elementType:q,externalSlotProps:Y,additionalProps:h,getSlotProps:t=>P(r({},t,{onClick:e=>{k&&k(e),null!=t&&t.onClick&&t.onClick(e)}})),className:cr(null==Y?void 0:Y.className,null==h?void 0:h.className,null==U?void 0:U.backdrop),ownerState:H});return L||I||j&&!B?(0,ie.jsx)(mi,{ref:z,container:m,disablePortal:T,children:(0,ie.jsxs)(V,r({},K,{children:[!O&&d?(0,ie.jsx)(q,r({},$)):null,(0,ie.jsx)(gi,{disableEnforceFocus:w,disableAutoFocus:x,disableRestoreFocus:S,isEnabled:F,open:I,children:t.cloneElement(v,W)})]}))}):null})),Qi=$i;function Ji(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(e),e=setTimeout((()=>{t.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(e)},r}const Zi=Ji,to=ri,eo=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function no(t,e,n){var r;const i=function(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=to(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const t=o.getComputedStyle(e);a=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const t=a.split("(")[1].split(")")[0].split(",");s=parseInt(t[4],10),l=parseInt(t[5],10)}return"left"===t?"translateX(".concat(i?i.right+s-r.left:o.innerWidth+s-r.left,"px)"):"right"===t?"translateX(-".concat(i?r.right-i.left-s:r.left+r.width-s,"px)"):"up"===t?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(t,e,"function"===typeof(r=n)?r():r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const ro=t.forwardRef((function(e,n){const o=Ai(),a={enter:o.transitions.easing.easeOut,exit:o.transitions.easing.sharp},s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:l,appear:u=!0,children:c,container:p,direction:d="down",easing:h=a,in:f,onEnter:g,onEntered:v,onEntering:m,onExit:_,onExited:y,onExiting:b,style:x,timeout:w=s,TransitionComponent:E=Di}=e,T=i(e,eo),S=t.useRef(null),C=Pi(c.ref,S,n),O=t=>e=>{t&&(void 0===e?t(S.current):t(S.current,e))},L=O(((t,e)=>{no(d,t,p),Gi(t),g&&g(t,e)})),k=O(((t,e)=>{const n=Ri({timeout:w,style:x,easing:h},{mode:"enter"});t.style.webkitTransition=o.transitions.create("-webkit-transform",r({},n)),t.style.transition=o.transitions.create("transform",r({},n)),t.style.webkitTransform="none",t.style.transform="none",m&&m(t,e)})),I=O(v),N=O(b),D=O((t=>{const e=Ri({timeout:w,style:x,easing:h},{mode:"exit"});t.style.webkitTransition=o.transitions.create("-webkit-transform",e),t.style.transition=o.transitions.create("transform",e),no(d,t,p),_&&_(t)})),A=O((t=>{t.style.webkitTransition="",t.style.transition="",y&&y(t)})),G=t.useCallback((()=>{S.current&&no(d,S.current,p)}),[d,p]);return t.useEffect((()=>{if(f||"down"===d||"right"===d)return;const t=Zi((()=>{S.current&&no(d,S.current,p)})),e=to(S.current);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[d,f,p]),t.useEffect((()=>{f||G()}),[f,G]),(0,ie.jsx)(E,r({nodeRef:S,onEnter:L,onEntered:I,onEntering:k,onExit:D,onExited:A,onExiting:N,addEndListener:t=>{l&&l(S.current,t)},appear:u,in:f,timeout:w},T,{children:(e,n)=>t.cloneElement(c,r({ref:C,style:r({visibility:"exited"!==e||f?void 0:"hidden"},x,c.props.style)},n))}))})),io=ro,oo=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function ao(t){return fr("MuiPaper",t)}ji("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const so=["className","component","elevation","square","variant"],lo=bi("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var i;return r({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&r({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat(Et("#fff",oo(n.elevation)),", ").concat(Et("#fff",oo(n.elevation)),")")},e.vars&&{backgroundImage:null==(i=e.vars.overlays)?void 0:i[n.elevation]}))})),uo=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiPaper"}),{className:o,component:a="div",elevation:s=1,square:l=!1,variant:u="elevation"}=n,c=i(n,so),p=r({},n,{component:a,elevation:s,square:l,variant:u}),d=(t=>{const{square:e,elevation:n,variant:r,classes:i}=t;return gr({root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]},ao,i)})(p);return(0,ie.jsx)(lo,r({as:a,ownerState:p,className:cr(d.root,o),ref:e},c))})),co=_;function po(t){return fr("MuiDrawer",t)}ji("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ho=["BackdropProps"],fo=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],go=(t,e)=>{const{ownerState:n}=t;return[e.root,("permanent"===n.variant||"persistent"===n.variant)&&e.docked,e.modal]},vo=bi(Qi,{name:"MuiDrawer",slot:"Root",overridesResolver:go})((t=>{let{theme:e}=t;return{zIndex:(e.vars||e).zIndex.drawer}})),mo=bi("div",{shouldForwardProp:_i,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:go})({flex:"0 0 auto"}),_o=bi(uo,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["paperAnchor".concat(co(n.anchor))],"temporary"!==n.variant&&e["paperAnchorDocked".concat(co(n.anchor))]]}})((t=>{let{theme:e,ownerState:n}=t;return r({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((e.vars||e).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((e.vars||e).palette.divider)})})),yo={left:"right",right:"left",top:"down",bottom:"up"};const bo=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiDrawer"}),a=Ai(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:u,children:c,className:p,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:f}={},onClose:g,open:v=!1,PaperProps:m={},SlideProps:_,TransitionComponent:y=io,transitionDuration:b=s,variant:x="temporary"}=o,w=i(o.ModalProps,ho),E=i(o,fo),T=t.useRef(!1);t.useEffect((()=>{T.current=!0}),[]);const S=function(t,e){return"rtl"===t.direction&&function(t){return-1!==["left","right"].indexOf(t)}(e)?yo[e]:e}(a,l),C=r({},o,{anchor:l,elevation:d,open:v,variant:x},E),O=(t=>{const{classes:e,anchor:n,variant:r}=t;return gr({root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat(co(n)),"temporary"!==r&&"paperAnchorDocked".concat(co(n))]},po,e)})(C),L=(0,ie.jsx)(_o,r({elevation:"temporary"===x?d:0,square:!0},m,{className:cr(O.paper,m.className),ownerState:C,children:c}));if("permanent"===x)return(0,ie.jsx)(mo,r({className:cr(O.root,O.docked,p),ownerState:C,ref:n},E,{children:L}));const k=(0,ie.jsx)(y,r({in:v,direction:yo[S],timeout:b,appear:T.current},_,{children:L}));return"persistent"===x?(0,ie.jsx)(mo,r({className:cr(O.root,O.docked,p),ownerState:C,ref:n},E,{children:k})):(0,ie.jsx)(vo,r({BackdropProps:r({},u,f,{transitionDuration:b}),className:cr(O.root,O.modal,p),open:v,ownerState:C,onClose:g,hideBackdrop:h,ref:n},E,w,{children:k}))})),xo=bo;const wo=t.createContext({});function Eo(t){return fr("MuiList",t)}ji("MuiList",["root","padding","dense","subheader"]);const To=["children","className","component","dense","disablePadding","subheader"],So=bi("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return r({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),Co=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiList"}),{children:a,className:s,component:l="ul",dense:u=!1,disablePadding:c=!1,subheader:p}=o,d=i(o,To),h=t.useMemo((()=>({dense:u})),[u]),f=r({},o,{component:l,dense:u,disablePadding:c}),g=(t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return gr({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Eo,e)})(f);return(0,ie.jsx)(wo.Provider,{value:h,children:(0,ie.jsxs)(So,r({as:l,className:cr(g.root,s),ref:n,ownerState:f},d,{children:[p,a]}))})})),Oo=ei,Lo={};const ko=[];class Io{constructor(){this.currentId=0,this.clear=()=>{0!==this.currentId&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new Io}start(t,e){this.clear(),this.currentId=setTimeout((()=>{this.currentId=0,e()}),t)}}function No(){const e=function(e,n){const r=t.useRef(Lo);return r.current===Lo&&(r.current=e(n)),r}(Io.create).current;var n;return n=e.disposeEffect,t.useEffect(n,ko),e}let Do=!0,Ao=!1;const Go=new Io,Ro={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Po(t){t.metaKey||t.altKey||t.ctrlKey||(Do=!0)}function Mo(){Do=!1}function zo(){"hidden"===this.visibilityState&&Ao&&(Do=!0)}function Fo(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return Do||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!Ro[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const Bo=function(){const e=t.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",Po,!0),e.addEventListener("mousedown",Mo,!0),e.addEventListener("pointerdown",Mo,!0),e.addEventListener("touchstart",Mo,!0),e.addEventListener("visibilitychange",zo,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(t){return!!Fo(t)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(Ao=!0,Go.start(100,(()=>{Ao=!1})),n.current=!1,!0)},ref:e}};function jo(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Ho(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function Uo(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Wo(e,n,r){var i=Ho(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,u=a in i,c=n[a],p=(0,t.isValidElement)(c)&&!c.props.in;!u||l&&!p?u||!l||p?u&&l&&(0,t.isValidElement)(c)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:Uo(s,"exit",e),enter:Uo(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:Uo(s,"exit",e),enter:Uo(s,"enter",e)})}})),o}var Vo=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},qo=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}wi(n,e);var o=n.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,Ho(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Uo(e,"appear",r),enter:Uo(e,"enter",r),exit:Uo(e,"exit",r)})}))):Wo(e,o,a),firstRender:!1}},o.handleExited=function(t,e){var n=Ho(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=r({},e.children);return delete n[t.key],{children:n}})))},o.render=function(){var e=this.props,n=e.component,r=e.childFactory,o=i(e,["component","childFactory"]),a=this.state.contextValue,s=Vo(this.state.children).map(r);return delete o.appear,delete o.enter,delete o.exit,null===n?t.createElement(Ti.Provider,{value:a},s):t.createElement(Ti.Provider,{value:a},t.createElement(n,o,s))},n}(t.Component);qo.propTypes={},qo.defaultProps={component:"div",childFactory:function(t){return t}};const Xo=qo;const Yo=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:u,timeout:c}=e,[p,d]=t.useState(!1),h=cr(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+o},g=cr(r.child,p&&r.childLeaving,i&&r.childPulsate);return l||p||d(!0),t.useEffect((()=>{if(!l&&null!=u){const t=setTimeout(u,c);return()=>{clearTimeout(t)}}}),[u,l,c]),(0,ie.jsx)("span",{className:h,style:f,children:(0,ie.jsx)("span",{className:g})})};const Ko=ji("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var $o,Qo,Jo,Zo;const ta=["center","classes","className"];let ea,na,ra,ia;const oa=Wn(ea||(ea=$o||($o=jo(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),aa=Wn(na||(na=Qo||(Qo=jo(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),sa=Wn(ra||(ra=Jo||(Jo=jo(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),la=bi("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ua=bi(Yo,{name:"MuiTouchRipple",slot:"Ripple"})(ia||(ia=Zo||(Zo=jo(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Ko.rippleVisible,oa,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),Ko.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),Ko.child,Ko.childLeaving,aa,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),Ko.childPulsate,sa,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),ca=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiTouchRipple"}),{center:a=!1,classes:s={},className:l}=o,u=i(o,ta),[c,p]=t.useState([]),d=t.useRef(0),h=t.useRef(null);t.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[c]);const f=t.useRef(!1),g=No(),v=t.useRef(null),m=t.useRef(null),_=t.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:r,rippleSize:i,cb:o}=t;p((t=>[...t,(0,ie.jsx)(ua,{classes:{ripple:cr(s.ripple,Ko.ripple),rippleVisible:cr(s.rippleVisible,Ko.rippleVisible),ripplePulsate:cr(s.ripplePulsate,Ko.ripplePulsate),child:cr(s.child,Ko.child),childLeaving:cr(s.childLeaving,Ko.childLeaving),childPulsate:cr(s.childPulsate,Ko.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},d.current)])),d.current+=1,h.current=o}),[s]),y=t.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:i=a||e.pulsate,fakeElement:o=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&f.current)return void(f.current=!1);"touchstart"===(null==t?void 0:t.type)&&(f.current=!0);const s=o?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let u,c,p;if(i||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)u=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;u=Math.round(e-l.left),c=Math.round(n-l.top)}if(i)p=Math.sqrt((2*l.width**2+l.height**2)/3),p%2===0&&(p+=1);else{const t=2*Math.max(Math.abs((s?s.clientWidth:0)-u),u)+2,e=2*Math.max(Math.abs((s?s.clientHeight:0)-c),c)+2;p=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===v.current&&(v.current=()=>{_({pulsate:r,rippleX:u,rippleY:c,rippleSize:p,cb:n})},g.start(80,(()=>{v.current&&(v.current(),v.current=null)}))):_({pulsate:r,rippleX:u,rippleY:c,rippleSize:p,cb:n})}),[a,_,g]),b=t.useCallback((()=>{y({},{pulsate:!0})}),[y]),x=t.useCallback(((t,e)=>{if(g.clear(),"touchend"===(null==t?void 0:t.type)&&v.current)return v.current(),v.current=null,void g.start(0,(()=>{x(t,e)}));v.current=null,p((t=>t.length>0?t.slice(1):t)),h.current=e}),[g]);return t.useImperativeHandle(n,(()=>({pulsate:b,start:y,stop:x})),[b,y,x]),(0,ie.jsx)(la,r({className:cr(Ko.root,s.root,l),ref:m},u,{children:(0,ie.jsx)(Xo,{component:null,exit:!0,children:c})}))})),pa=ca;function da(t){return fr("MuiButtonBase",t)}const ha=ji("MuiButtonBase",["root","disabled","focusVisible"]),fa=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],ga=bi("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(ha.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),va=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiButtonBase"}),{action:a,centerRipple:s=!1,children:l,className:u,component:c="button",disabled:p=!1,disableRipple:d=!1,disableTouchRipple:h=!1,focusRipple:f=!1,LinkComponent:g="a",onBlur:v,onClick:m,onContextMenu:_,onDragLeave:y,onFocus:b,onFocusVisible:x,onKeyDown:w,onKeyUp:E,onMouseDown:T,onMouseLeave:S,onMouseUp:C,onTouchEnd:O,onTouchMove:L,onTouchStart:k,tabIndex:I=0,TouchRippleProps:N,touchRippleRef:D,type:A}=o,G=i(o,fa),R=t.useRef(null),P=t.useRef(null),M=Pi(P,D),{isFocusVisibleRef:z,onFocus:F,onBlur:B,ref:j}=Bo(),[H,U]=t.useState(!1);p&&H&&U(!1),t.useImperativeHandle(a,(()=>({focusVisible:()=>{U(!0),R.current.focus()}})),[]);const[W,V]=t.useState(!1);t.useEffect((()=>{V(!0)}),[]);const q=W&&!d&&!p;function X(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return Oo((r=>{e&&e(r);return!n&&P.current&&P.current[t](r),!0}))}t.useEffect((()=>{H&&f&&!d&&W&&P.current.pulsate()}),[d,f,H,W]);const Y=X("start",T),K=X("stop",_),$=X("stop",y),Q=X("stop",C),J=X("stop",(t=>{H&&t.preventDefault(),S&&S(t)})),Z=X("start",k),tt=X("stop",O),et=X("stop",L),nt=X("stop",(t=>{B(t),!1===z.current&&U(!1),v&&v(t)}),!1),rt=Oo((t=>{R.current||(R.current=t.currentTarget),F(t),!0===z.current&&(U(!0),x&&x(t)),b&&b(t)})),it=()=>{const t=R.current;return c&&"button"!==c&&!("A"===t.tagName&&t.href)},ot=t.useRef(!1),at=Oo((t=>{f&&!ot.current&&H&&P.current&&" "===t.key&&(ot.current=!0,P.current.stop(t,(()=>{P.current.start(t)}))),t.target===t.currentTarget&&it()&&" "===t.key&&t.preventDefault(),w&&w(t),t.target===t.currentTarget&&it()&&"Enter"===t.key&&!p&&(t.preventDefault(),m&&m(t))})),st=Oo((t=>{f&&" "===t.key&&P.current&&H&&!t.defaultPrevented&&(ot.current=!1,P.current.stop(t,(()=>{P.current.pulsate(t)}))),E&&E(t),m&&t.target===t.currentTarget&&it()&&" "===t.key&&!t.defaultPrevented&&m(t)}));let lt=c;"button"===lt&&(G.href||G.to)&&(lt=g);const ut={};"button"===lt?(ut.type=void 0===A?"button":A,ut.disabled=p):(G.href||G.to||(ut.role="button"),p&&(ut["aria-disabled"]=p));const ct=Pi(n,j,R);const pt=r({},o,{centerRipple:s,component:c,disabled:p,disableRipple:d,disableTouchRipple:h,focusRipple:f,tabIndex:I,focusVisible:H}),dt=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=gr({root:["root",e&&"disabled",n&&"focusVisible"]},da,i);return n&&r&&(o.root+=" ".concat(r)),o})(pt);return(0,ie.jsxs)(ga,r({as:lt,className:cr(dt.root,u),ownerState:pt,onBlur:nt,onClick:m,onContextMenu:K,onFocus:rt,onKeyDown:at,onKeyUp:st,onMouseDown:Y,onMouseLeave:J,onMouseUp:Q,onDragLeave:$,onTouchEnd:tt,onTouchMove:et,onTouchStart:Z,ref:ct,tabIndex:p?-1:I,type:A},ut,G,{children:[l,q?(0,ie.jsx)(pa,r({ref:M,center:s},N)):null]}))})),ma=va;const _a=function(e,n){var r,i;return t.isValidElement(e)&&-1!==n.indexOf(null!=(r=e.type.muiName)?r:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)},ya=ti;function ba(t){return fr("MuiListItem",t)}const xa=ji("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function wa(t){return fr("MuiListItemButton",t)}const Ea=ji("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Ta(t){return fr("MuiListItemSecondaryAction",t)}ji("MuiListItemSecondaryAction",["root","disableGutters"]);const Sa=["className"],Ca=bi("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return r({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),Oa=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiListItemSecondaryAction"}),{className:a}=o,s=i(o,Sa),l=r({},o,{disableGutters:t.useContext(wo).disableGutters}),u=(t=>{const{disableGutters:e,classes:n}=t;return gr({root:["root",e&&"disableGutters"]},Ta,n)})(l);return(0,ie.jsx)(Ca,r({className:cr(u.root,a),ownerState:l,ref:n},s))}));Oa.muiName="ListItemSecondaryAction";const La=Oa,ka=["className"],Ia=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Na=bi("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return r({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&r({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(Ea.root)]:{paddingRight:48}},{["&.".concat(xa.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(xa.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(xa.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(xa.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(xa.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Da=bi("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Aa=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiListItem"}),{alignItems:a="center",autoFocus:s=!1,button:l=!1,children:u,className:c,component:p,components:d={},componentsProps:h={},ContainerComponent:f="li",ContainerProps:{className:g}={},dense:v=!1,disabled:m=!1,disableGutters:_=!1,disablePadding:y=!1,divider:b=!1,focusVisibleClassName:x,secondaryAction:w,selected:E=!1,slotProps:T={},slots:S={}}=o,C=i(o.ContainerProps,ka),O=i(o,Ia),L=t.useContext(wo),k=t.useMemo((()=>({dense:v||L.dense||!1,alignItems:a,disableGutters:_})),[a,L.dense,v,_]),I=t.useRef(null);ya((()=>{s&&I.current&&I.current.focus()}),[s]);const N=t.Children.toArray(u),D=N.length&&_a(N[N.length-1],["ListItemSecondaryAction"]),A=r({},o,{alignItems:a,autoFocus:s,button:l,dense:k.dense,disabled:m,disableGutters:_,disablePadding:y,divider:b,hasSecondaryAction:D,selected:E}),G=(t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:o,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:u,selected:c}=t;return gr({root:["root",i&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",u&&"secondaryAction",c&&"selected"],container:["container"]},ba,r)})(A),R=Pi(I,n),P=S.root||d.Root||Na,M=T.root||h.root||{},z=r({className:cr(G.root,M.className,c),disabled:m},O);let F=p||"li";return l&&(z.component=p||"div",z.focusVisibleClassName=cr(xa.focusVisible,x),F=ma),D?(F=z.component||p?F:"div","li"===f&&("li"===F?F="div":"li"===z.component&&(z.component="div")),(0,ie.jsx)(wo.Provider,{value:k,children:(0,ie.jsxs)(Da,r({as:f,className:cr(G.container,g),ref:R,ownerState:A},C,{children:[(0,ie.jsx)(P,r({},M,!Xr(P)&&{as:F,ownerState:r({},A,M.ownerState)},z,{children:N})),N.pop()]}))})):(0,ie.jsx)(wo.Provider,{value:k,children:(0,ie.jsxs)(P,r({},M,{as:F,ref:R},!Xr(P)&&{ownerState:r({},A,M.ownerState)},z,{children:[N,w&&(0,ie.jsx)(La,{children:w})]}))})}));function Ga(t){return fr("MuiListItemIcon",t)}const Ra=ji("MuiListItemIcon",["root","alignItemsFlexStart"]),Pa=["className"],Ma=bi("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"flex-start"===n.alignItems&&e.alignItemsFlexStart]}})((t=>{let{theme:e,ownerState:n}=t;return r({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),za=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiListItemIcon"}),{className:a}=o,s=i(o,Pa),l=r({},o,{alignItems:t.useContext(wo).alignItems}),u=(t=>{const{alignItems:e,classes:n}=t;return gr({root:["root","flex-start"===e&&"alignItemsFlexStart"]},Ga,n)})(l);return(0,ie.jsx)(Ma,r({className:cr(u.root,a),ownerState:l,ref:n},s))})),Fa=["sx"],Ba=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:pt;return Object.keys(t).forEach((e=>{i[e]?r.systemProps[e]=t[e]:r.otherProps[e]=t[e]})),r};function ja(t){const{sx:e}=t,n=i(t,Fa),{systemProps:o,otherProps:s}=Ba(n);let l;return l=Array.isArray(e)?[o,...e]:"function"===typeof e?function(){const t=e(...arguments);return a(t)?r({},o,t):o}:r({},o,e),r({},s,{sx:l})}function Ha(t){return fr("MuiTypography",t)}ji("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ua=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Wa=bi("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat(co(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((t=>{let{theme:e,ownerState:n}=t;return r({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Va={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qa={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Xa=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiTypography"}),o=(t=>qa[t]||t)(n.color),a=ja(r({},n,{color:o})),{align:s="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:p=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=Va}=a,g=i(a,Ua),v=r({},a,{align:s,color:o,className:l,component:u,gutterBottom:c,noWrap:p,paragraph:d,variant:h,variantMapping:f}),m=u||(d?"p":f[h]||Va[h])||"span",_=(t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=t;return gr({root:["root",o,"inherit"!==t.align&&"align".concat(co(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Ha,a)})(v);return(0,ie.jsx)(Wa,r({as:m,ref:e,ownerState:v,className:cr(_.root,l)},g))})),Ya=Xa;function Ka(t){return fr("MuiListItemText",t)}const $a=ji("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Qa=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ja=bi("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat($a.primary)]:e.primary},{["& .".concat($a.secondary)]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((t=>{let{ownerState:e}=t;return r({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})})),Za=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiListItemText"}),{children:a,className:s,disableTypography:l=!1,inset:u=!1,primary:c,primaryTypographyProps:p,secondary:d,secondaryTypographyProps:h}=o,f=i(o,Qa),{dense:g}=t.useContext(wo);let v=null!=c?c:a,m=d;const _=r({},o,{disableTypography:l,inset:u,primary:!!v,secondary:!!m,dense:g}),y=(t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return gr({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Ka,e)})(_);return null==v||v.type===Ya||l||(v=(0,ie.jsx)(Ya,r({variant:g?"body2":"body1",className:y.primary,component:null!=p&&p.variant?void 0:"span",display:"block"},p,{children:v}))),null==m||m.type===Ya||l||(m=(0,ie.jsx)(Ya,r({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},h,{children:m}))),(0,ie.jsxs)(Ja,r({className:cr(y.root,s),ownerState:_,ref:n},f,{children:[v,m]}))}));function ts(t){return fr("MuiDivider",t)}const es=ji("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),ns=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],rs=bi("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((t=>{let{theme:e,ownerState:n}=t;return r({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):Et(e.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(t=>{let{ownerState:e}=t;return r({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(t=>{let{theme:e,ownerState:n}=t;return r({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{theme:e,ownerState:n}=t;return r({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{ownerState:e}=t;return r({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),is=bi("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((t=>{let{theme:e,ownerState:n}=t;return r({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),os=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiDivider"}),{absolute:o=!1,children:a,className:s,component:l=(a?"div":"hr"),flexItem:u=!1,light:c=!1,orientation:p="horizontal",role:d=("hr"!==l?"separator":void 0),textAlign:h="center",variant:f="fullWidth"}=n,g=i(n,ns),v=r({},n,{absolute:o,component:l,flexItem:u,light:c,orientation:p,role:d,textAlign:h,variant:f}),m=(t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=t;return gr({root:["root",e&&"absolute",l,o&&"light","vertical"===a&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]},ts,r)})(v);return(0,ie.jsx)(rs,r({as:l,className:cr(m.root,s),role:d,ref:e,ownerState:v},g,{children:a?(0,ie.jsx)(is,{className:m.wrapper,ownerState:v,children:a}):null}))}));os.muiSkipListHighlight=!0;const as=os,ss=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],ls=bi(ma,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiListItemButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((t=>{let{theme:e,ownerState:n}=t;return r({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Ea.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(Ea.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(Ea.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity)}},["&.".concat(Ea.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(Ea.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),us=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:s=!1,component:l="div",children:u,dense:c=!1,disableGutters:p=!1,divider:d=!1,focusVisibleClassName:h,selected:f=!1,className:g}=o,v=i(o,ss),m=t.useContext(wo),_=t.useMemo((()=>({dense:c||m.dense||!1,alignItems:a,disableGutters:p})),[a,m.dense,c,p]),y=t.useRef(null);ya((()=>{s&&y.current&&y.current.focus()}),[s]);const b=r({},o,{alignItems:a,dense:_.dense,disableGutters:p,divider:d,selected:f}),x=(t=>{const{alignItems:e,classes:n,dense:i,disabled:o,disableGutters:a,divider:s,selected:l}=t;return r({},n,gr({root:["root",i&&"dense",!a&&"gutters",s&&"divider",o&&"disabled","flex-start"===e&&"alignItemsFlexStart",l&&"selected"]},wa,n))})(b),w=Pi(y,n);return(0,ie.jsx)(wo.Provider,{value:_,children:(0,ie.jsx)(ls,r({ref:w,href:v.href||v.to,component:(v.href||v.to)&&"div"===l?"button":l,focusVisibleClassName:cr(x.focusVisible,h),ownerState:b,className:cr(x.root,g)},v,{classes:x,children:u}))})}));function cs(t){return fr("MuiCollapse",t)}ji("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ps=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],ds=bi("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],"entered"===n.state&&e.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return r({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===n.state&&r({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),hs=bi("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})((t=>{let{ownerState:e}=t;return r({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),fs=bi("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})((t=>{let{ownerState:e}=t;return r({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),gs=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiCollapse"}),{addEndListener:a,children:s,className:l,collapsedSize:u="0px",component:c,easing:p,in:d,onEnter:h,onEntered:f,onEntering:g,onExit:v,onExited:m,onExiting:_,orientation:y="vertical",style:b,timeout:x=Xt.standard,TransitionComponent:w=Di}=o,E=i(o,ps),T=r({},o,{orientation:y,collapsedSize:u}),S=(t=>{const{orientation:e,classes:n}=t;return gr({root:["root","".concat(e)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(e)],wrapperInner:["wrapperInner","".concat(e)]},cs,n)})(T),C=Ai(),O=No(),L=t.useRef(null),k=t.useRef(),I="number"===typeof u?"".concat(u,"px"):u,N="horizontal"===y,D=N?"width":"height",A=t.useRef(null),G=Pi(n,A),R=t=>e=>{if(t){const n=A.current;void 0===e?t(n):t(n,e)}},P=()=>L.current?L.current[N?"clientWidth":"clientHeight"]:0,M=R(((t,e)=>{L.current&&N&&(L.current.style.position="absolute"),t.style[D]=I,h&&h(t,e)})),z=R(((t,e)=>{const n=P();L.current&&N&&(L.current.style.position="");const{duration:r,easing:i}=Ri({style:b,timeout:x,easing:p},{mode:"enter"});if("auto"===x){const e=C.transitions.getAutoHeightDuration(n);t.style.transitionDuration="".concat(e,"ms"),k.current=e}else t.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");t.style[D]="".concat(n,"px"),t.style.transitionTimingFunction=i,g&&g(t,e)})),F=R(((t,e)=>{t.style[D]="auto",f&&f(t,e)})),B=R((t=>{t.style[D]="".concat(P(),"px"),v&&v(t)})),j=R(m),H=R((t=>{const e=P(),{duration:n,easing:r}=Ri({style:b,timeout:x,easing:p},{mode:"exit"});if("auto"===x){const n=C.transitions.getAutoHeightDuration(e);t.style.transitionDuration="".concat(n,"ms"),k.current=n}else t.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");t.style[D]=I,t.style.transitionTimingFunction=r,_&&_(t)}));return(0,ie.jsx)(w,r({in:d,onEnter:M,onEntered:F,onEntering:z,onExit:B,onExited:j,onExiting:H,addEndListener:t=>{"auto"===x&&O.start(k.current||0,t),a&&a(A.current,t)},nodeRef:A,timeout:"auto"===x?null:x},E,{children:(t,e)=>(0,ie.jsx)(ds,r({as:c,className:cr(S.root,l,{entered:S.entered,exited:!d&&"0px"===I&&S.hidden}[t]),style:r({[N?"minWidth":"minHeight"]:I},b),ownerState:r({},T,{state:t}),ref:G},e,{children:(0,ie.jsx)(hs,{ownerState:r({},T,{state:t}),className:S.wrapper,ref:L,children:(0,ie.jsx)(fs,{ownerState:r({},T,{state:t}),className:S.wrapperInner,children:s})})}))}))}));gs.muiSupportAuto=!0;const vs=gs;function ms(t){return fr("MuiSvgIcon",t)}ji("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _s=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],ys=bi("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat(co(n.color))],e["fontSize".concat(co(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var r,i,o,a,s,l,u,c,p,d,h,f,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=e.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=e.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(a=e.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(l=e.typography)||null==(u=l.pxToRem)?void 0:u.call(l,24))||"1.5rem",large:(null==(c=e.typography)||null==(p=c.pxToRem)?void 0:p.call(c,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(h=(e.vars||e).palette)||null==(h=h[n.color])?void 0:h.main)?d:{action:null==(f=(e.vars||e).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(g=(e.vars||e).palette)||null==(g=g.action)?void 0:g.disabled,inherit:void 0}[n.color]}})),bs=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiSvgIcon"}),{children:a,className:s,color:l="inherit",component:u="svg",fontSize:c="medium",htmlColor:p,inheritViewBox:d=!1,titleAccess:h,viewBox:f="0 0 24 24"}=o,g=i(o,_s),v=t.isValidElement(a)&&"svg"===a.type,m=r({},o,{color:l,component:u,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:f,hasSvgAsChild:v}),_={};d||(_.viewBox=f);const y=(t=>{const{color:e,fontSize:n,classes:r}=t;return gr({root:["root","inherit"!==e&&"color".concat(co(e)),"fontSize".concat(co(n))]},ms,r)})(m);return(0,ie.jsxs)(ys,r({as:u,className:cr(y.root,s),focusable:"false",color:p,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:n},_,g,v&&a.props,{ownerState:m,children:[v?a.props.children:a,h?(0,ie.jsx)("title",{children:h}):null]}))}));bs.muiName="SvgIcon";const xs=bs;function ws(e,n){function i(t,i){return(0,ie.jsx)(xs,r({"data-testid":"".concat(n,"Icon"),ref:i},t,{children:e}))}return i.muiName=xs.muiName,t.memo(t.forwardRef(i))}const Es=ws((0,ie.jsx)("path",{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"}),"Functions"),Ts=ws((0,ie.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"}),"Calculate"),Ss=ws((0,ie.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle"),Cs=ws((0,ie.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Os=ws((0,ie.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Ls=ws((0,ie.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),ks=()=>{const t=Qn.LiteGraph.createNode("basic/constNumber");qh.add(t)},Is=()=>{const t=Qn.LiteGraph.createNode("basic/result");qh.add(t)},Ns=()=>{const t=Qn.LiteGraph.createNode("basic/addition");qh.add(t)},Ds=()=>{const t=Qn.LiteGraph.createNode("basic/substraction");qh.add(t)},As=()=>{const t=Qn.LiteGraph.createNode("basic/multiplication");qh.add(t)},Gs=()=>{const t=Qn.LiteGraph.createNode("basic/division");qh.add(t)},Rs=()=>{const t=Qn.LiteGraph.createNode("basic/timer");qh.add(t)},Ps=()=>{const t=Qn.LiteGraph.createNode("basic/base");qh.add(t)},Ms=e=>{let{menuOpen:n,closeMenu:r}=e;const i=[{name:"\u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438",icon:(0,ie.jsx)(Es,{}),blocks:[{name:"\u0421\u043b\u043e\u0436\u0435\u043d\u0438\u0435",handler:Ns},{name:"\u0412\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0435",handler:Ds},{name:"\u0423\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435",handler:As},{name:"\u0414\u0435\u043b\u0435\u043d\u0438\u0435",handler:Gs}]},{name:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438",icon:(0,ie.jsx)(Ts,{}),blocks:[{name:"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430",handler:ks},{name:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",handler:Is},{name:"\u0422\u0430\u0439\u043c\u0435\u0440",handler:Rs}]},{name:"\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438",icon:(0,ie.jsx)(Ss,{}),blocks:[{name:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u043b\u043e\u043a",handler:Ps}]}],[o,a]=(0,t.useState)([!1,!1]);return(0,ie.jsx)(xo,{anchor:"left",open:n,onClose:r,children:(0,ie.jsxs)(Co,{sx:{width:"350px"},children:[(0,ie.jsxs)(Aa,{children:[(0,ie.jsx)(za,{children:(0,ie.jsx)(Cs,{})}),(0,ie.jsx)(Za,{primary:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"})]}),(0,ie.jsx)(as,{}),i.map(((e,n)=>(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsxs)(us,{onClick:()=>(t=>{a((e=>{const n=[...e];return n[t]=!n[t],n}))})(n),children:[(0,ie.jsx)(za,{children:e.icon}),(0,ie.jsx)(Za,{primary:e.name}),o[n]?(0,ie.jsx)(Os,{}):(0,ie.jsx)(Ls,{})]}),(0,ie.jsx)(vs,{in:o[n],timeout:"auto",unmountOnExit:!0,children:(0,ie.jsx)(Co,{component:"div",disablePadding:!0,children:e.blocks.map((t=>(0,ie.jsx)(us,{sx:{pl:4},onClick:()=>{(0,t.handler)(),r()},children:(0,ie.jsx)(Za,{primary:t.name})},t.name)))})})]},e.name)))]})})},zs=t.memo(Ms),Fs=ws((0,ie.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),Bs=ws((0,ie.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z"}),"CloudDownload"),js=ws((0,ie.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),Hs=ws((0,ie.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),Us=ws((0,ie.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),Ws=ws((0,ie.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");function Vs(t){return fr("MuiAppBar",t)}ji("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const qs=["className","color","enableColorOnDark","position"],Xs=(t,e)=>t?"".concat(null==t?void 0:t.replace(")",""),", ").concat(e,")"):e,Ys=bi(uo,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["position".concat(co(n.position))],e["color".concat(co(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return r({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!e.vars&&r({},"default"===n.color&&{backgroundColor:i,color:e.palette.getContrastText(i)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:e.palette[n.color].main,color:e.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===e.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&r({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&r({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette.AppBar.defaultBg:Xs(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?e.vars.palette.text.primary:Xs(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette[n.color].main:Xs(e.vars.palette.AppBar.darkBg,e.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?e.vars.palette[n.color].contrastText:Xs(e.vars.palette.AppBar.darkColor,e.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),Ks=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiAppBar"}),{className:o,color:a="primary",enableColorOnDark:s=!1,position:l="fixed"}=n,u=i(n,qs),c=r({},n,{color:a,position:l,enableColorOnDark:s}),p=(t=>{const{color:e,position:n,classes:r}=t;return gr({root:["root","color".concat(co(e)),"position".concat(co(n))]},Vs,r)})(c);return(0,ie.jsx)(Ys,r({square:!0,component:"header",ownerState:c,elevation:4,className:cr(p.root,o,"fixed"===l&&"mui-fixed"),ref:e},u))})),$s=Ks;function Qs(t){return fr("MuiToolbar",t)}ji("MuiToolbar",["root","gutters","regular","dense"]);const Js=["className","component","disableGutters","variant"],Zs=bi("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return r({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(t=>{let{theme:e,ownerState:n}=t;return"regular"===n.variant&&e.mixins.toolbar})),tl=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiToolbar"}),{className:o,component:a="div",disableGutters:s=!1,variant:l="regular"}=n,u=i(n,Js),c=r({},n,{component:a,disableGutters:s,variant:l}),p=(t=>{const{classes:e,disableGutters:n,variant:r}=t;return gr({root:["root",!n&&"gutters",r]},Qs,e)})(c);return(0,ie.jsx)(Zs,r({as:a,className:cr(p.root,o),ref:e,ownerState:c},u))}));function el(t){return fr("MuiIconButton",t)}const nl=ji("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),rl=["edge","children","className","color","disabled","disableFocusRipple","size"],il=bi(ma,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e["color".concat(co(n.color))],n.edge&&e["edge".concat(co(n.edge))],e["size".concat(co(n.size))]]}})((t=>{let{theme:e,ownerState:n}=t;return r({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(t=>{let{theme:e,ownerState:n}=t;var i;const o=null==(i=(e.vars||e).palette)?void 0:i[n.color];return r({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&r({color:null==o?void 0:o.main},!n.disableRipple&&{"&:hover":r({},o&&{backgroundColor:e.vars?"rgba(".concat(o.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et(o.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{["&.".concat(nl.disabled)]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),ol=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiIconButton"}),{edge:o=!1,children:a,className:s,color:l="default",disabled:u=!1,disableFocusRipple:c=!1,size:p="medium"}=n,d=i(n,rl),h=r({},n,{edge:o,color:l,disabled:u,disableFocusRipple:c,size:p}),f=(t=>{const{classes:e,disabled:n,color:r,edge:i,size:o}=t;return gr({root:["root",n&&"disabled","default"!==r&&"color".concat(co(r)),i&&"edge".concat(co(i)),"size".concat(co(o))]},el,e)})(h);return(0,ie.jsx)(il,r({className:cr(f.root,s),centerRipple:!0,focusRipple:!c,disabled:u,ref:e,ownerState:h},d,{children:a}))})),al=ol,sl=["className","component"];const ll=ji("MuiBox",["root"]),ul=te(),cl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:o,defaultClassName:a="MuiBox-root",generateClassName:s}=e,l=Er("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(ht),u=t.forwardRef((function(t,e){const u=Pn(o),c=ja(t),{className:p,component:d="div"}=c,h=i(c,sl);return(0,ie.jsx)(l,r({as:d,ref:e,className:cr(p,s?s(a):a),theme:n&&u[n]||u},h))}));return u}({themeId:Nn,defaultTheme:ul,defaultClassName:ll.root,generateClassName:dr.generate}),pl=cl,dl=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function hl(t){return"scale(".concat(t,", ").concat(t**2,")")}const fl={entering:{opacity:1,transform:hl(1)},entered:{opacity:1,transform:"none"}},gl="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),vl=t.forwardRef((function(e,n){const{addEndListener:o,appear:a=!0,children:s,easing:l,in:u,onEnter:c,onEntered:p,onEntering:d,onExit:h,onExited:f,onExiting:g,style:v,timeout:m="auto",TransitionComponent:_=Di}=e,y=i(e,dl),b=No(),x=t.useRef(),w=Ai(),E=t.useRef(null),T=Pi(E,s.ref,n),S=t=>e=>{if(t){const n=E.current;void 0===e?t(n):t(n,e)}},C=S(d),O=S(((t,e)=>{Gi(t);const{duration:n,delay:r,easing:i}=Ri({style:v,timeout:m,easing:l},{mode:"enter"});let o;"auto"===m?(o=w.transitions.getAutoHeightDuration(t.clientHeight),x.current=o):o=n,t.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:gl?o:.666*o,delay:r,easing:i})].join(","),c&&c(t,e)})),L=S(p),k=S(g),I=S((t=>{const{duration:e,delay:n,easing:r}=Ri({style:v,timeout:m,easing:l},{mode:"exit"});let i;"auto"===m?(i=w.transitions.getAutoHeightDuration(t.clientHeight),x.current=i):i=e,t.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:gl?i:.666*i,delay:gl?n:n||.333*i,easing:r})].join(","),t.style.opacity=0,t.style.transform=hl(.75),h&&h(t)})),N=S(f);return(0,ie.jsx)(_,r({appear:a,in:u,nodeRef:E,onEnter:O,onEntered:L,onEntering:C,onExit:I,onExited:N,onExiting:k,addEndListener:t=>{"auto"===m&&b.start(x.current||0,t),o&&o(E.current,t)},timeout:"auto"===m?null:m},y,{children:(e,n)=>t.cloneElement(s,r({style:r({opacity:0,transform:hl(.75),visibility:"exited"!==e||u?void 0:"hidden"},fl[e],v,s.props.style),ref:T},n))}))}));vl.muiSupportAuto=!0;const ml=vl;function _l(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function yl(t){return t instanceof _l(t).Element||t instanceof Element}function bl(t){return t instanceof _l(t).HTMLElement||t instanceof HTMLElement}function xl(t){return"undefined"!==typeof ShadowRoot&&(t instanceof _l(t).ShadowRoot||t instanceof ShadowRoot)}var wl=Math.max,El=Math.min,Tl=Math.round;function Sl(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Cl(){return!/^((?!chrome|android).)*safari/i.test(Sl())}function Ol(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&bl(t)&&(i=t.offsetWidth>0&&Tl(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Tl(r.height)/t.offsetHeight||1);var a=(yl(t)?_l(t):window).visualViewport,s=!Cl()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,u=(r.top+(s&&a?a.offsetTop:0))/o,c=r.width/i,p=r.height/o;return{width:c,height:p,top:u,right:l+c,bottom:u+p,left:l,x:l,y:u}}function Ll(t){var e=_l(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function kl(t){return t?(t.nodeName||"").toLowerCase():null}function Il(t){return((yl(t)?t.ownerDocument:t.document)||window.document).documentElement}function Nl(t){return Ol(Il(t)).left+Ll(t).scrollLeft}function Dl(t){return _l(t).getComputedStyle(t)}function Al(t){var e=Dl(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Gl(t,e,n){void 0===n&&(n=!1);var r=bl(e),i=bl(e)&&function(t){var e=t.getBoundingClientRect(),n=Tl(e.width)/t.offsetWidth||1,r=Tl(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),o=Il(e),a=Ol(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==kl(e)||Al(o))&&(s=function(t){return t!==_l(t)&&bl(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:Ll(t);var e}(e)),bl(e)?((l=Ol(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Nl(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Rl(t){var e=Ol(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Pl(t){return"html"===kl(t)?t:t.assignedSlot||t.parentNode||(xl(t)?t.host:null)||Il(t)}function Ml(t){return["html","body","#document"].indexOf(kl(t))>=0?t.ownerDocument.body:bl(t)&&Al(t)?t:Ml(Pl(t))}function zl(t,e){var n;void 0===e&&(e=[]);var r=Ml(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=_l(r),a=i?[o].concat(o.visualViewport||[],Al(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(zl(Pl(a)))}function Fl(t){return["table","td","th"].indexOf(kl(t))>=0}function Bl(t){return bl(t)&&"fixed"!==Dl(t).position?t.offsetParent:null}function jl(t){for(var e=_l(t),n=Bl(t);n&&Fl(n)&&"static"===Dl(n).position;)n=Bl(n);return n&&("html"===kl(n)||"body"===kl(n)&&"static"===Dl(n).position)?e:n||function(t){var e=/firefox/i.test(Sl());if(/Trident/i.test(Sl())&&bl(t)&&"fixed"===Dl(t).position)return null;var n=Pl(t);for(xl(n)&&(n=n.host);bl(n)&&["html","body"].indexOf(kl(n))<0;){var r=Dl(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var Hl="top",Ul="bottom",Wl="right",Vl="left",ql="auto",Xl=[Hl,Ul,Wl,Vl],Yl="start",Kl="end",$l="clippingParents",Ql="viewport",Jl="popper",Zl="reference",tu=Xl.reduce((function(t,e){return t.concat([e+"-"+Yl,e+"-"+Kl])}),[]),eu=[].concat(Xl,[ql]).reduce((function(t,e){return t.concat([e,e+"-"+Yl,e+"-"+Kl])}),[]),nu=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ru(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function iu(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var ou={placement:"bottom",modifiers:[],strategy:"absolute"};function au(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function su(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?ou:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},ou,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;u(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:yl(t)?zl(t):t.contextElement?zl(t.contextElement):[],popper:zl(e)};var c=function(t){var e=ru(t);return nu.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=c.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:l,options:r}),u=function(){};a.push(s||u)}})),l.update()},forceUpdate:function(){if(!s){var t=i.elements,e=t.reference,n=t.popper;if(au(e,n)){i.rects={reference:Gl(e,jl(n),"fixed"===i.options.strategy),popper:Rl(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,u=o.options,c=void 0===u?{}:u,p=o.name;"function"===typeof a&&(i=a({state:i,options:c,name:p,instance:l})||i)}else i.reset=!1,r=-1}}},update:iu((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){u(),s=!0}};if(!au(t,e))return l;function u(){a.forEach((function(t){return t()})),a=[]}return l.setOptions(n).then((function(t){!s&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var lu={passive:!0};const uu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=_l(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach((function(t){t.addEventListener("scroll",n.update,lu)})),s&&l.addEventListener("resize",n.update,lu),function(){o&&u.forEach((function(t){t.removeEventListener("scroll",n.update,lu)})),s&&l.removeEventListener("resize",n.update,lu)}},data:{}};function cu(t){return t.split("-")[0]}function pu(t){return t.split("-")[1]}function du(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function hu(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?cu(i):null,a=i?pu(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case Hl:e={x:s,y:n.y-r.height};break;case Ul:e={x:s,y:n.y+n.height};break;case Wl:e={x:n.x+n.width,y:l};break;case Vl:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var u=o?du(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case Yl:e[u]=e[u]-(n[c]/2-r[c]/2);break;case Kl:e[u]=e[u]+(n[c]/2-r[c]/2)}}return e}var fu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gu(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,p=t.isFixed,d=a.x,h=void 0===d?0:d,f=a.y,g=void 0===f?0:f,v="function"===typeof c?c({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var m=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),y=Vl,b=Hl,x=window;if(u){var w=jl(n),E="clientHeight",T="clientWidth";if(w===_l(n)&&"static"!==Dl(w=Il(n)).position&&"absolute"===s&&(E="scrollHeight",T="scrollWidth"),i===Hl||(i===Vl||i===Wl)&&o===Kl)b=Ul,g-=(p&&w===x&&x.visualViewport?x.visualViewport.height:w[E])-r.height,g*=l?1:-1;if(i===Vl||(i===Hl||i===Ul)&&o===Kl)y=Wl,h-=(p&&w===x&&x.visualViewport?x.visualViewport.width:w[T])-r.width,h*=l?1:-1}var S,C=Object.assign({position:s},u&&fu),O=!0===c?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Tl(n*i)/i||0,y:Tl(r*i)/i||0}}({x:h,y:g},_l(n)):{x:h,y:g};return h=O.x,g=O.y,l?Object.assign({},C,((S={})[b]=_?"0":"",S[y]=m?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",S)):Object.assign({},C,((e={})[b]=_?g+"px":"",e[y]=m?h+"px":"",e.transform="",e))}const vu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u={placement:cu(e.placement),variation:pu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,gu(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,gu(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};const mu={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];bl(i)&&kl(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});bl(r)&&kl(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};const _u={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,a=eu.reduce((function(t,n){return t[n]=function(t,e,n){var r=cu(t),i=[Vl,Hl].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[Vl,Wl].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,u=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=a}};var yu={left:"right",right:"left",bottom:"top",top:"bottom"};function bu(t){return t.replace(/left|right|bottom|top/g,(function(t){return yu[t]}))}var xu={start:"end",end:"start"};function wu(t){return t.replace(/start|end/g,(function(t){return xu[t]}))}function Eu(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&xl(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Tu(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Su(t,e,n){return e===Ql?Tu(function(t,e){var n=_l(t),r=Il(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=Cl();(u||!u&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Nl(t),y:l}}(t,n)):yl(e)?function(t,e){var n=Ol(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Tu(function(t){var e,n=Il(t),r=Ll(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=wl(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=wl(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Nl(t),l=-r.scrollTop;return"rtl"===Dl(i||n).direction&&(s+=wl(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Il(t)))}function Cu(t,e,n,r){var i="clippingParents"===e?function(t){var e=zl(Pl(t)),n=["absolute","fixed"].indexOf(Dl(t).position)>=0&&bl(t)?jl(t):t;return yl(n)?e.filter((function(t){return yl(t)&&Eu(t,n)&&"body"!==kl(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(e,n){var i=Su(t,n,r);return e.top=wl(i.top,e.top),e.right=El(i.right,e.right),e.bottom=El(i.bottom,e.bottom),e.left=wl(i.left,e.left),e}),Su(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ou(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Lu(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function ku(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,a=void 0===o?t.strategy:o,s=n.boundary,l=void 0===s?$l:s,u=n.rootBoundary,c=void 0===u?Ql:u,p=n.elementContext,d=void 0===p?Jl:p,h=n.altBoundary,f=void 0!==h&&h,g=n.padding,v=void 0===g?0:g,m=Ou("number"!==typeof v?v:Lu(v,Xl)),_=d===Jl?Zl:Jl,y=t.rects.popper,b=t.elements[f?_:d],x=Cu(yl(b)?b:b.contextElement||Il(t.elements.popper),l,c,a),w=Ol(t.elements.reference),E=hu({reference:w,element:y,strategy:"absolute",placement:i}),T=Tu(Object.assign({},y,E)),S=d===Jl?T:w,C={top:x.top-S.top+m.top,bottom:S.bottom-x.bottom+m.bottom,left:x.left-S.left+m.left,right:S.right-x.right+m.right},O=t.modifiersData.offset;if(d===Jl&&O){var L=O[i];Object.keys(C).forEach((function(t){var e=[Wl,Ul].indexOf(t)>=0?1:-1,n=[Hl,Ul].indexOf(t)>=0?"y":"x";C[t]+=L[n]*e}))}return C}const Iu={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,p=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,f=void 0===h||h,g=n.allowedAutoPlacements,v=e.options.placement,m=cu(v),_=l||(m===v||!f?[bu(v)]:function(t){if(cu(t)===ql)return[];var e=bu(t);return[wu(t),e,wu(e)]}(v)),y=[v].concat(_).reduce((function(t,n){return t.concat(cu(n)===ql?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?eu:l,c=pu(r),p=c?s?tu:tu.filter((function(t){return pu(t)===c})):Xl,d=p.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=p);var h=d.reduce((function(e,n){return e[n]=ku(t,{placement:n,boundary:i,rootBoundary:o,padding:a})[cu(n)],e}),{});return Object.keys(h).sort((function(t,e){return h[t]-h[e]}))}(e,{placement:n,boundary:c,rootBoundary:p,padding:u,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),b=e.rects.reference,x=e.rects.popper,w=new Map,E=!0,T=y[0],S=0;S<y.length;S++){var C=y[S],O=cu(C),L=pu(C)===Yl,k=[Hl,Ul].indexOf(O)>=0,I=k?"width":"height",N=ku(e,{placement:C,boundary:c,rootBoundary:p,altBoundary:d,padding:u}),D=k?L?Wl:Vl:L?Ul:Hl;b[I]>x[I]&&(D=bu(D));var A=bu(D),G=[];if(o&&G.push(N[O]<=0),s&&G.push(N[D]<=0,N[A]<=0),G.every((function(t){return t}))){T=C,E=!1;break}w.set(C,G)}if(E)for(var R=function(t){var e=y.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return T=e,"break"},P=f?3:1;P>0;P--){if("break"===R(P))break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Nu(t,e,n){return wl(t,El(e,n))}const Du={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,p=n.padding,d=n.tether,h=void 0===d||d,f=n.tetherOffset,g=void 0===f?0:f,v=ku(e,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),m=cu(e.placement),_=pu(e.placement),y=!_,b=du(m),x="x"===b?"y":"x",w=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,S="function"===typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,C="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(w){if(o){var k,I="y"===b?Hl:Vl,N="y"===b?Ul:Wl,D="y"===b?"height":"width",A=w[b],G=A+v[I],R=A-v[N],P=h?-T[D]/2:0,M=_===Yl?E[D]:T[D],z=_===Yl?-T[D]:-E[D],F=e.elements.arrow,B=h&&F?Rl(F):{width:0,height:0},j=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=j[I],U=j[N],W=Nu(0,E[D],B[D]),V=y?E[D]/2-P-W-H-C.mainAxis:M-W-H-C.mainAxis,q=y?-E[D]/2+P+W+U+C.mainAxis:z+W+U+C.mainAxis,X=e.elements.arrow&&jl(e.elements.arrow),Y=X?"y"===b?X.clientTop||0:X.clientLeft||0:0,K=null!=(k=null==O?void 0:O[b])?k:0,$=A+q-K,Q=Nu(h?El(G,A+V-K-Y):G,A,h?wl(R,$):R);w[b]=Q,L[b]=Q-A}if(s){var J,Z="x"===b?Hl:Vl,tt="x"===b?Ul:Wl,et=w[x],nt="y"===x?"height":"width",rt=et+v[Z],it=et-v[tt],ot=-1!==[Hl,Vl].indexOf(m),at=null!=(J=null==O?void 0:O[x])?J:0,st=ot?rt:et-E[nt]-T[nt]-at+C.altAxis,lt=ot?et+E[nt]+T[nt]-at-C.altAxis:it,ut=h&&ot?function(t,e,n){var r=Nu(t,e,n);return r>n?n:r}(st,et,lt):Nu(h?st:rt,et,h?lt:it);w[x]=ut,L[x]=ut-et}e.modifiersData[r]=L}},requiresIfExists:["offset"]};const Au={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=cu(n.placement),l=du(s),u=[Vl,Wl].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(t,e){return Ou("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Lu(t,Xl))}(i.padding,n),p=Rl(o),d="y"===l?Hl:Vl,h="y"===l?Ul:Wl,f=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],g=a[l]-n.rects.reference[l],v=jl(o),m=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,_=f/2-g/2,y=c[d],b=m-p[u]-c[h],x=m/2-p[u]/2+_,w=Nu(y,x,b),E=l;n.modifiersData[r]=((e={})[E]=w,e.centerOffset=w-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&Eu(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gu(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ru(t){return[Hl,Wl,Ul,Vl].some((function(e){return t[e]>=0}))}var Pu=su({defaultModifiers:[uu,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=hu({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},vu,mu,_u,Iu,Du,Au,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=ku(e,{elementContext:"reference"}),s=ku(e,{altBoundary:!0}),l=Gu(a,r),u=Gu(s,i,o),c=Ru(l),p=Ru(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}}]});const Mu="base";function zu(t,e){const n=hr[e];return n?(r=n,"".concat(Mu,"--").concat(r)):function(t,e){return"".concat(Mu,"-").concat(t,"-").concat(e)}(t,e);var r}const Fu="Popper";function Bu(t){return zu(Fu,t)}!function(t,e){const n={};e.forEach((e=>{n[e]=zu(t,e)}))}(Fu,["root"]);const ju={disableDefaultClasses:!1},Hu=t.createContext(ju);const Uu=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Wu=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Vu(t){return"function"===typeof t?t():t}function qu(t){return void 0!==t.nodeType}const Xu=()=>gr({root:["root"]},function(e){const{disableDefaultClasses:n}=t.useContext(Hu);return t=>n?"":e(t)}(Bu)),Yu={},Ku=t.forwardRef((function(e,n){var o;const{anchorEl:a,children:s,direction:l,disablePortal:u,modifiers:c,open:p,placement:d,popperOptions:h,popperRef:f,slotProps:g={},slots:v={},TransitionProps:m}=e,_=i(e,Uu),y=t.useRef(null),b=qr(y,n),x=t.useRef(null),w=qr(x,f),E=t.useRef(w);ti((()=>{E.current=w}),[w]),t.useImperativeHandle(f,(()=>x.current),[]);const T=function(t,e){if("ltr"===e)return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}(d,l),[S,C]=t.useState(T),[O,L]=t.useState(Vu(a));t.useEffect((()=>{x.current&&x.current.forceUpdate()})),t.useEffect((()=>{a&&L(Vu(a))}),[a]),ti((()=>{if(!O||!p)return;let t=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:t=>{let{state:e}=t;C(e.placement)}}];null!=c&&(t=t.concat(c)),h&&null!=h.modifiers&&(t=t.concat(h.modifiers));const e=Pu(O,y.current,r({placement:T},h,{modifiers:t}));return E.current(e),()=>{e.destroy(),E.current(null)}}),[O,u,c,p,h,T]);const k={placement:S};null!==m&&(k.TransitionProps=m);const I=Xu(),N=null!=(o=v.root)?o:"div",D=Jr({elementType:N,externalSlotProps:g.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:I.root});return(0,ie.jsx)(N,r({},D,{children:"function"===typeof s?s(k):s}))})),$u=t.forwardRef((function(e,n){const{anchorEl:o,children:a,container:s,direction:l="ltr",disablePortal:u=!1,keepMounted:c=!1,modifiers:p,open:d,placement:h="bottom",popperOptions:f=Yu,popperRef:g,style:v,transition:m=!1,slotProps:_={},slots:y={}}=e,b=i(e,Wu),[x,w]=t.useState(!0);if(!c&&!d&&(!m||x))return null;let E;if(s)E=s;else if(o){const t=Vu(o);E=t&&qu(t)?Zr(t).body:Zr(null).body}const T=d||!c||m&&!x?void 0:"none",S=m?{in:d,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,ie.jsx)(mi,{disablePortal:u,container:E,children:(0,ie.jsx)(Ku,r({anchorEl:o,direction:l,disablePortal:u,modifiers:p,ref:n,open:m?!x:d,placement:h,popperOptions:f,popperRef:g,slotProps:_,slots:y},b,{style:r({position:"fixed",top:0,left:0,display:T},v),TransitionProps:S,children:a}))})})),Qu=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Ju=bi($u,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Zu=t.forwardRef((function(t,e){var n;const o=On(),a=Fn({props:t,name:"MuiPopper"}),{anchorEl:s,component:l,components:u,componentsProps:c,container:p,disablePortal:d,keepMounted:h,modifiers:f,open:g,placement:v,popperOptions:m,popperRef:_,transition:y,slots:b,slotProps:x}=a,w=i(a,Qu),E=null!=(n=null==b?void 0:b.root)?n:null==u?void 0:u.Root,T=r({anchorEl:s,container:p,disablePortal:d,keepMounted:h,modifiers:f,open:g,placement:v,popperOptions:m,popperRef:_,transition:y},w);return(0,ie.jsx)(Ju,r({as:l,direction:null==o?void 0:o.direction,slots:{root:E},slotProps:null!=x?x:c},T,{ref:e}))})),tc=Zu;let ec=0;const nc=e["useId".toString()];function rc(e){if(void 0!==nc){const t=nc();return null!=e?e:t}return function(e){const[n,r]=t.useState(e),i=e||n;return t.useEffect((()=>{null==n&&(ec+=1,r("mui-".concat(ec)))}),[n]),i}(e)}const ic=rc;const oc=function(e){let{controlled:n,default:r,name:i,state:o="value"}=e;const{current:a}=t.useRef(void 0!==n),[s,l]=t.useState(r);return[a?n:s,t.useCallback((t=>{a||l(t)}),[])]};function ac(t){return fr("MuiTooltip",t)}const sc=ji("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),lc=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const uc=bi(tc,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})((t=>{let{theme:e,ownerState:n,open:i}=t;return r({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},n.arrow&&{['&[data-popper-placement*="bottom"] .'.concat(sc.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(sc.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(sc.arrow)]:r({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),['&[data-popper-placement*="left"] .'.concat(sc.arrow)]:r({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),cc=bi("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e["tooltipPlacement".concat(co(n.placement.split("-")[0]))]]}})((t=>{let{theme:e,ownerState:n}=t;return r({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Et(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat((i=16/14,Math.round(1e5*i)/1e5),"em"),fontWeight:e.typography.fontWeightRegular},{[".".concat(sc.popper,'[data-popper-placement*="left"] &')]:r({transformOrigin:"right center"},n.isRtl?r({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):r({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[".".concat(sc.popper,'[data-popper-placement*="right"] &')]:r({transformOrigin:"left center"},n.isRtl?r({marginRight:"14px"},n.touch&&{marginRight:"24px"}):r({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[".".concat(sc.popper,'[data-popper-placement*="top"] &')]:r({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[".".concat(sc.popper,'[data-popper-placement*="bottom"] &')]:r({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var i})),pc=bi("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})((t=>{let{theme:e}=t;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Et(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let dc=!1;const hc=new Io;let fc={x:0,y:0};function gc(t,e){return n=>{e&&e(n),t(n)}}const vc=t.forwardRef((function(e,n){var o,a,s,l,u,c,p,d,h,f,g,v,m,_,y,b,x,w,E;const T=Fn({props:e,name:"MuiTooltip"}),{arrow:S=!1,children:C,components:O={},componentsProps:L={},describeChild:k=!1,disableFocusListener:I=!1,disableHoverListener:N=!1,disableInteractive:D=!1,disableTouchListener:A=!1,enterDelay:G=100,enterNextDelay:R=0,enterTouchDelay:P=700,followCursor:M=!1,id:z,leaveDelay:F=0,leaveTouchDelay:B=1500,onClose:j,onOpen:H,open:U,placement:W="bottom",PopperComponent:V,PopperProps:q={},slotProps:X={},slots:Y={},title:K,TransitionComponent:$=ml,TransitionProps:Q}=T,J=i(T,lc),Z=t.isValidElement(C)?C:(0,ie.jsx)("span",{children:C}),tt=Ai(),et="rtl"===tt.direction,[nt,rt]=t.useState(),[it,ot]=t.useState(null),at=t.useRef(!1),st=D||M,lt=No(),ut=No(),ct=No(),pt=No(),[dt,ht]=oc({controlled:U,default:!1,name:"Tooltip",state:"open"});let ft=dt;const gt=ic(z),vt=t.useRef(),mt=Oo((()=>{void 0!==vt.current&&(document.body.style.WebkitUserSelect=vt.current,vt.current=void 0),pt.clear()}));t.useEffect((()=>mt),[mt]);const _t=t=>{hc.clear(),dc=!0,ht(!0),H&&!ft&&H(t)},yt=Oo((t=>{hc.start(800+F,(()=>{dc=!1})),ht(!1),j&&ft&&j(t),lt.start(tt.transitions.duration.shortest,(()=>{at.current=!1}))})),bt=t=>{at.current&&"touchstart"!==t.type||(nt&&nt.removeAttribute("title"),ut.clear(),ct.clear(),G||dc&&R?ut.start(dc?R:G,(()=>{_t(t)})):_t(t))},xt=t=>{ut.clear(),ct.start(F,(()=>{yt(t)}))},{isFocusVisibleRef:wt,onBlur:Et,onFocus:Tt,ref:St}=Bo(),[,Ct]=t.useState(!1),Ot=t=>{Et(t),!1===wt.current&&(Ct(!1),xt(t))},Lt=t=>{nt||rt(t.currentTarget),Tt(t),!0===wt.current&&(Ct(!0),bt(t))},kt=t=>{at.current=!0;const e=Z.props;e.onTouchStart&&e.onTouchStart(t)},It=bt,Nt=xt,Dt=t=>{kt(t),ct.clear(),lt.clear(),mt(),vt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(P,(()=>{document.body.style.WebkitUserSelect=vt.current,bt(t)}))},At=t=>{Z.props.onTouchEnd&&Z.props.onTouchEnd(t),mt(),ct.start(B,(()=>{yt(t)}))};t.useEffect((()=>{if(ft)return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)};function t(t){"Escape"!==t.key&&"Esc"!==t.key||yt(t)}}),[yt,ft]);const Gt=Pi(Z.ref,St,rt,n);K||0===K||(ft=!1);const Rt=t.useRef(),Pt={},Mt="string"===typeof K;k?(Pt.title=ft||!Mt||N?null:K,Pt["aria-describedby"]=ft?gt:null):(Pt["aria-label"]=Mt?K:null,Pt["aria-labelledby"]=ft&&!Mt?gt:null);const zt=r({},Pt,J,Z.props,{className:cr(J.className,Z.props.className),onTouchStart:kt,ref:Gt},M?{onMouseMove:t=>{const e=Z.props;e.onMouseMove&&e.onMouseMove(t),fc={x:t.clientX,y:t.clientY},Rt.current&&Rt.current.update()}}:{});const Ft={};A||(zt.onTouchStart=Dt,zt.onTouchEnd=At),N||(zt.onMouseOver=gc(It,zt.onMouseOver),zt.onMouseLeave=gc(Nt,zt.onMouseLeave),st||(Ft.onMouseOver=It,Ft.onMouseLeave=Nt)),I||(zt.onFocus=gc(Lt,zt.onFocus),zt.onBlur=gc(Ot,zt.onBlur),st||(Ft.onFocus=Lt,Ft.onBlur=Ot));const Bt=t.useMemo((()=>{var t;let e=[{name:"arrow",enabled:Boolean(it),options:{element:it,padding:4}}];return null!=(t=q.popperOptions)&&t.modifiers&&(e=e.concat(q.popperOptions.modifiers)),r({},q.popperOptions,{modifiers:e})}),[it,q]),jt=r({},T,{isRtl:et,arrow:S,disableInteractive:st,placement:W,PopperComponentProp:V,touch:at.current}),Ht=(t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t;return gr({popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat(co(o.split("-")[0]))],arrow:["arrow"]},ac,e)})(jt),Ut=null!=(o=null!=(a=Y.popper)?a:O.Popper)?o:uc,Wt=null!=(s=null!=(l=null!=(u=Y.transition)?u:O.Transition)?l:$)?s:ml,Vt=null!=(c=null!=(p=Y.tooltip)?p:O.Tooltip)?c:cc,qt=null!=(d=null!=(h=Y.arrow)?h:O.Arrow)?d:pc,Xt=Yr(Ut,r({},q,null!=(f=X.popper)?f:L.popper,{className:cr(Ht.popper,null==q?void 0:q.className,null==(g=null!=(v=X.popper)?v:L.popper)?void 0:g.className)}),jt),Yt=Yr(Wt,r({},Q,null!=(m=X.transition)?m:L.transition),jt),Kt=Yr(Vt,r({},null!=(_=X.tooltip)?_:L.tooltip,{className:cr(Ht.tooltip,null==(y=null!=(b=X.tooltip)?b:L.tooltip)?void 0:y.className)}),jt),$t=Yr(qt,r({},null!=(x=X.arrow)?x:L.arrow,{className:cr(Ht.arrow,null==(w=null!=(E=X.arrow)?E:L.arrow)?void 0:w.className)}),jt);return(0,ie.jsxs)(t.Fragment,{children:[t.cloneElement(Z,zt),(0,ie.jsx)(Ut,r({as:null!=V?V:tc,placement:W,anchorEl:M?{getBoundingClientRect:()=>({top:fc.y,left:fc.x,right:fc.x,bottom:fc.y,width:0,height:0})}:nt,popperRef:Rt,open:!!nt&&ft,id:gt,transition:!0},Ft,Xt,{popperOptions:Bt,children:t=>{let{TransitionProps:e}=t;return(0,ie.jsx)(Wt,r({timeout:tt.transitions.duration.shorter},e,Yt,{children:(0,ie.jsxs)(Vt,r({},Kt,{children:[K,S?(0,ie.jsx)(qt,r({},$t,{ref:ot})):null]}))}))}}))]})})),mc=vc;function _c(t){return fr("MuiButton",t)}const yc=ji("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const bc=t.createContext({});const xc=t.createContext(void 0),wc=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ec=t=>r({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Tc=bi(ma,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e["".concat(n.variant).concat(co(n.color))],e["size".concat(co(n.size))],e["".concat(n.variant,"Size").concat(co(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((t=>{let{theme:e,ownerState:n}=t;var i,o;const a="light"===e.palette.mode?e.palette.grey[300]:e.palette.grey[800],s="light"===e.palette.mode?e.palette.grey.A100:e.palette.grey[700];return r({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":r({textDecoration:"none",backgroundColor:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((e.vars||e).palette[n.color].main),backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":r({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[8]}),["&.".concat(yc.focusVisible)]:r({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[6]}),["&.".concat(yc.disabled)]:r({color:(e.vars||e).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.action.disabledBackground)},"contained"===n.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main,border:e.vars?"1px solid rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat(Et(e.palette[n.color].main,.5))},"contained"===n.variant&&{color:e.vars?e.vars.palette.text.primary:null==(i=(o=e.palette).getContrastText)?void 0:i.call(o,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:a,boxShadow:(e.vars||e).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(t=>{let{ownerState:e}=t;return e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(yc.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(yc.disabled)]:{boxShadow:"none"}}})),Sc=bi("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e["iconSize".concat(co(n.size))]]}})((t=>{let{ownerState:e}=t;return r({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ec(e))})),Cc=bi("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e["iconSize".concat(co(n.size))]]}})((t=>{let{ownerState:e}=t;return r({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ec(e))})),Oc=t.forwardRef((function(e,n){const o=t.useContext(bc),a=t.useContext(xc),s=Fn({props:Gn(o,e),name:"MuiButton"}),{children:l,color:u="primary",component:c="button",className:p,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:g,focusVisibleClassName:v,fullWidth:m=!1,size:_="medium",startIcon:y,type:b,variant:x="text"}=s,w=i(s,wc),E=r({},s,{color:u,component:c,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:m,size:_,type:b,variant:x}),T=(t=>{const{color:e,disableElevation:n,fullWidth:i,size:o,variant:a,classes:s}=t;return r({},s,gr({root:["root",a,"".concat(a).concat(co(e)),"size".concat(co(o)),"".concat(a,"Size").concat(co(o)),"inherit"===e&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(co(o))],endIcon:["endIcon","iconSize".concat(co(o))]},_c,s))})(E),S=y&&(0,ie.jsx)(Sc,{className:T.startIcon,ownerState:E,children:y}),C=g&&(0,ie.jsx)(Cc,{className:T.endIcon,ownerState:E,children:g}),O=a||"";return(0,ie.jsxs)(Tc,r({ownerState:E,className:cr(o.className,T.root,p,O),component:c,disabled:d,focusRipple:!f,focusVisibleClassName:cr(T.focusVisible,v),ref:n,type:b},w,{classes:T,children:[S,l,C]}))})),Lc=Oc;__webpack_require__(457);const kc=Zr,Ic=ii,Nc=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Dc(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Ac(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Gc(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function Rc(t,e,n,r,i,o){let a=!1,s=i(t,e,!!e&&n);for(;s;){if(s===t.firstChild){if(a)return!1;a=!0}const e=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Gc(s,o)&&!e)return s.focus(),!0;s=i(t,s,n)}return!1}const Pc=t.forwardRef((function(e,n){const{actions:o,autoFocus:a=!1,autoFocusItem:s=!1,children:l,className:u,disabledItemsFocusable:c=!1,disableListWrap:p=!1,onKeyDown:d,variant:h="selectedMenu"}=e,f=i(e,Nc),g=t.useRef(null),v=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ya((()=>{a&&g.current.focus()}),[a]),t.useImperativeHandle(o,(()=>({adjustStyleForScrollbar:(t,e)=>{const n=!g.current.style.width;if(t.clientHeight<g.current.clientHeight&&n){const n="".concat(Ic(kc(t)),"px");g.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=n,g.current.style.width="calc(100% + ".concat(n,")")}return g.current}})),[]);const m=Pi(g,n);let _=-1;t.Children.forEach(l,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===_)&&(_=n),_===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(_+=1,_>=l.length&&(_=-1))):_===n&&(_+=1,_>=l.length&&(_=-1))}));const y=t.Children.map(l,((e,n)=>{if(n===_){const n={};return s&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,ie.jsx)(Co,r({role:"menu",ref:m,className:u,onKeyDown:t=>{const e=g.current,n=t.key,r=kc(e).activeElement;if("ArrowDown"===n)t.preventDefault(),Rc(e,r,p,c,Dc);else if("ArrowUp"===n)t.preventDefault(),Rc(e,r,p,c,Ac);else if("Home"===n)t.preventDefault(),Rc(e,null,p,c,Dc);else if("End"===n)t.preventDefault(),Rc(e,null,p,c,Ac);else if(1===n.length){const i=v.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&Gc(r,i);i.previousKeyMatched&&(s||Rc(e,r,!1,c,Dc,i))?t.preventDefault():i.previousKeyMatched=!1}d&&d(t)},tabIndex:a?0:-1},f,{children:y}))})),Mc=Pc;function zc(t){return fr("MuiPopover",t)}ji("MuiPopover",["root","paper"]);const Fc=["onEntering"],Bc=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],jc=["slotProps"];function Hc(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function Uc(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function Wc(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function Vc(t){return"function"===typeof t?t():t}const qc=bi(Qi,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Xc=bi(uo,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Yc=t.forwardRef((function(e,n){var o,a,s;const l=Fn({props:e,name:"MuiPopover"}),{action:u,anchorEl:c,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:h="anchorEl",children:f,className:g,container:v,elevation:m=8,marginThreshold:_=16,open:y,PaperProps:b={},slots:x,slotProps:w,transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:T=ml,transitionDuration:S="auto",TransitionProps:{onEntering:C}={},disableScrollLock:O=!1}=l,L=i(l.TransitionProps,Fc),k=i(l,Bc),I=null!=(o=null==w?void 0:w.paper)?o:b,N=t.useRef(),D=Pi(N,I.ref),A=r({},l,{anchorOrigin:p,anchorReference:h,elevation:m,marginThreshold:_,externalPaperSlotProps:I,transformOrigin:E,TransitionComponent:T,transitionDuration:S,TransitionProps:L}),G=(t=>{const{classes:e}=t;return gr({root:["root"],paper:["paper"]},zc,e)})(A),R=t.useCallback((()=>{if("anchorPosition"===h)return d;const t=Vc(c),e=(t&&1===t.nodeType?t:kc(N.current).body).getBoundingClientRect();return{top:e.top+Hc(e,p.vertical),left:e.left+Uc(e,p.horizontal)}}),[c,p.horizontal,p.vertical,d,h]),P=t.useCallback((t=>({vertical:Hc(t,E.vertical),horizontal:Uc(t,E.horizontal)})),[E.horizontal,E.vertical]),M=t.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=P(e);if("none"===h)return{top:null,left:null,transformOrigin:Wc(n)};const r=R();let i=r.top-n.vertical,o=r.left-n.horizontal;const a=i+e.height,s=o+e.width,l=to(Vc(c)),u=l.innerHeight-_,p=l.innerWidth-_;if(null!==_&&i<_){const t=i-_;i-=t,n.vertical+=t}else if(null!==_&&a>u){const t=a-u;i-=t,n.vertical+=t}if(null!==_&&o<_){const t=o-_;o-=t,n.horizontal+=t}else if(s>p){const t=s-p;o-=t,n.horizontal+=t}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:Wc(n)}}),[c,h,R,P,_]),[z,F]=t.useState(y),B=t.useCallback((()=>{const t=N.current;if(!t)return;const e=M(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,F(!0)}),[M]);t.useEffect((()=>(O&&window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B))),[c,O,B]);t.useEffect((()=>{y&&B()})),t.useImperativeHandle(u,(()=>y?{updatePosition:()=>{B()}}:null),[y,B]),t.useEffect((()=>{if(!y)return;const t=Zi((()=>{B()})),e=to(c);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[c,y,B]);let j=S;"auto"!==S||T.muiSupportAuto||(j=void 0);const H=v||(c?kc(Vc(c)).body:void 0),U=null!=(a=null==x?void 0:x.root)?a:qc,W=null!=(s=null==x?void 0:x.paper)?s:Xc,V=Jr({elementType:W,externalSlotProps:r({},I,{style:z?I.style:r({},I.style,{opacity:0})}),additionalProps:{elevation:m,ref:D},ownerState:A,className:cr(G.paper,null==I?void 0:I.className)}),q=Jr({elementType:U,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:k,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:H,open:y},ownerState:A,className:cr(G.root,g)}),{slotProps:X}=q,Y=i(q,jc);return(0,ie.jsx)(U,r({},Y,!Xr(U)&&{slotProps:X,disableScrollLock:O},{children:(0,ie.jsx)(T,r({appear:!0,in:y,onEntering:(t,e)=>{C&&C(t,e),B()},onExited:()=>{F(!1)},timeout:j},L,{children:(0,ie.jsx)(W,r({},V,{children:f}))}))}))})),Kc=Yc;function $c(t){return fr("MuiMenu",t)}ji("MuiMenu",["root","paper","list"]);const Qc=["onEntering"],Jc=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Zc={vertical:"top",horizontal:"right"},tp={vertical:"top",horizontal:"left"},ep=bi(Kc,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),np=bi(Xc,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rp=bi(Mc,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),ip=t.forwardRef((function(e,n){var o,a;const s=Fn({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:c,disableAutoFocusItem:p=!1,MenuListProps:d={},onClose:h,open:f,PaperProps:g={},PopoverClasses:v,transitionDuration:m="auto",TransitionProps:{onEntering:_}={},variant:y="selectedMenu",slots:b={},slotProps:x={}}=s,w=i(s.TransitionProps,Qc),E=i(s,Jc),T=Ai(),S="rtl"===T.direction,C=r({},s,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:d,onEntering:_,PaperProps:g,transitionDuration:m,TransitionProps:w,variant:y}),O=(t=>{const{classes:e}=t;return gr({root:["root"],paper:["paper"],list:["list"]},$c,e)})(C),L=l&&!p&&f,k=t.useRef(null);let I=-1;t.Children.map(u,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===I)&&(I=n))}));const N=null!=(o=b.paper)?o:np,D=null!=(a=x.paper)?a:g,A=Jr({elementType:b.root,externalSlotProps:x.root,ownerState:C,className:[O.root,c]}),G=Jr({elementType:N,externalSlotProps:D,ownerState:C,className:O.paper});return(0,ie.jsx)(ep,r({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?Zc:tp,slots:{paper:N,root:b.root},slotProps:{root:A,paper:G},open:f,ref:n,transitionDuration:m,TransitionProps:r({onEntering:(t,e)=>{k.current&&k.current.adjustStyleForScrollbar(t,T),_&&_(t,e)}},w),ownerState:C},E,{classes:v,children:(0,ie.jsx)(rp,r({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),h&&h(t,"tabKeyDown"))},actions:k,autoFocus:l&&(-1===I||p),autoFocusItem:L,variant:y},d,{className:cr(O.list,d.className),children:u}))}))})),op=ip;function ap(t){return fr("MuiMenuItem",t)}const sp=ji("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),lp=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],up=bi(ma,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiMenuItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((t=>{let{theme:e,ownerState:n}=t;return r({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(sp.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(sp.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(sp.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):Et(e.palette.primary.main,e.palette.action.selectedOpacity)}},["&.".concat(sp.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(sp.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity},["& + .".concat(es.root)]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},["& + .".concat(es.inset)]:{marginLeft:52},["& .".concat($a.root)]:{marginTop:0,marginBottom:0},["& .".concat($a.inset)]:{paddingLeft:36},["& .".concat(Ra.root)]:{minWidth:36}},!n.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&r({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{["& .".concat(Ra.root," svg")]:{fontSize:"1.25rem"}}))})),cp=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiMenuItem"}),{autoFocus:a=!1,component:s="li",dense:l=!1,divider:u=!1,disableGutters:c=!1,focusVisibleClassName:p,role:d="menuitem",tabIndex:h,className:f}=o,g=i(o,lp),v=t.useContext(wo),m=t.useMemo((()=>({dense:l||v.dense||!1,disableGutters:c})),[v.dense,l,c]),_=t.useRef(null);ya((()=>{a&&_.current&&_.current.focus()}),[a]);const y=r({},o,{dense:m.dense,divider:u,disableGutters:c}),b=(t=>{const{disabled:e,dense:n,divider:i,disableGutters:o,selected:a,classes:s}=t;return r({},s,gr({root:["root",n&&"dense",e&&"disabled",!o&&"gutters",i&&"divider",a&&"selected"]},ap,s))})(o),x=Pi(_,n);let w;return o.disabled||(w=void 0!==h?h:-1),(0,ie.jsx)(wo.Provider,{value:m,children:(0,ie.jsx)(up,r({ref:x,role:d,tabIndex:w,component:s,focusVisibleClassName:cr(b.focusVisible,p),className:cr(b.root,f)},g,{ownerState:y,classes:b}))})})),pp=["\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","\u0422\u0435\u0440\u043c\u0438\u043d\u0430\u043b"],dp=["\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b","\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a"],hp=["\u041f\u0440\u043e\u0444\u0438\u043b\u044c","\u0412\u044b\u0445\u043e\u0434"];const fp=function(e){let{graph:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(!1),[u,c]=(0,t.useState)(!1),p=()=>{i(null)},d=()=>{a(null)};return(0,ie.jsxs)($s,{position:"fixed",children:[(0,ie.jsx)(Ur,{maxWidth:"x2",children:(0,ie.jsxs)(tl,{disableGutters:!0,children:[(0,ie.jsx)(al,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:()=>{l(!0)},children:(0,ie.jsx)(Fs,{})}),(0,ie.jsxs)(pl,{sx:{flexGrow:0},children:[(0,ie.jsx)(mc,{children:(0,ie.jsx)(Lc,{color:"inherit",variant:"text",onClick:t=>{a(t.currentTarget)},children:"\u0424\u0430\u0439\u043b"})}),(0,ie.jsx)(op,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:d,children:dp.map((t=>(0,ie.jsx)(cp,{onClick:d,children:(0,ie.jsx)(Ya,{textAlign:"center",children:t})},t)))})]}),(0,ie.jsx)(pl,{sx:{display:{xs:"none",md:"flex"}},children:pp.map((t=>(0,ie.jsx)(Lc,{sx:{my:2,color:"white",display:"block",p:0,margin:0,pl:2},children:t},t)))}),(0,ie.jsxs)(pl,{sx:{display:{xs:"none",md:"flex"},ml:5},children:[(0,ie.jsx)(mc,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443",children:(0,ie.jsx)(al,{size:"large","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443",color:"inherit",onClick:function(){const t=n.serialize(),e=JSON.stringify(t);localStorage.setItem("graphData",e)},children:(0,ie.jsx)(Bs,{})})}),(0,ie.jsx)(mc,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443",children:(0,ie.jsx)(al,{size:"large","aria-label":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443",color:"inherit",onClick:function(){const t=localStorage.getItem("graphData");t&&n.configure(JSON.parse(t))},children:(0,ie.jsx)(js,{})})}),(0,ie.jsx)(mc,{title:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c JSON \u0444\u0430\u0439\u043b",children:(0,ie.jsx)(al,{size:"large","aria-label":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c JSON \u0444\u0430\u0439\u043b",color:"inherit",onClick:function(){const t=n.serialize(),e=JSON.stringify(t),r=new Blob([e],{type:"text/plain;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download="graph.json",i.click()},children:(0,ie.jsx)(Hs,{})})})]}),(0,ie.jsx)(pl,{sx:{flexGrow:1}}),(0,ie.jsxs)(pl,{sx:{display:{xs:"none",md:"flex"},mr:2},children:[(0,ie.jsx)(mc,{title:"\u0417\u0430\u043f\u0443\u0441\u043a \u0437\u0430\u0434\u0430\u0447\u0438",children:(0,ie.jsx)(al,{size:"large","aria-label":"\u0417\u0430\u043f\u0443\u0441\u043a \u0437\u0430\u0434\u0430\u0447\u0438",color:"inherit",onClick:()=>{n.start(),console.log("Start"),c(!0),Qn.LGraph.status=Qn.LGraph.STATUS_RUNNING},children:(0,ie.jsx)(Us,{sx:{color:u?Wr[500]:""}})})}),(0,ie.jsx)(mc,{title:"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0434\u0430\u0447\u0438",children:(0,ie.jsx)(al,{size:"large","aria-label":"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0434\u0430\u0447\u0438",color:"inherit",onClick:()=>{n.stop(),console.log("Stop"),c(!1),Qn.LGraph.status=Qn.LGraph.STATUS_STOPPED},children:(0,ie.jsx)(Ws,{})})})]}),(0,ie.jsxs)(pl,{sx:{flexGrow:0},children:[(0,ie.jsx)(mc,{title:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438",children:(0,ie.jsx)(Lc,{color:"inherit",variant:"outlined",onClick:t=>{i(t.currentTarget)},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),(0,ie.jsx)(op,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:p,children:hp.map((t=>(0,ie.jsx)(cp,{onClick:p,children:(0,ie.jsx)(Ya,{textAlign:"center",children:t})},t)))})]})]})}),(0,ie.jsx)(zs,{menuOpen:s,closeMenu:()=>l(!1)})]})},gp=["onChange","maxRows","minRows","style","value"];function vp(t){return parseInt(t,10)||0}const mp={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function _p(t){return void 0===t||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflow}const yp=t.forwardRef((function(e,n){const{onChange:o,maxRows:a,minRows:s=1,style:l,value:u}=e,c=i(e,gp),{current:p}=t.useRef(null!=u),d=t.useRef(null),h=qr(n,d),f=t.useRef(null),g=t.useRef(0),[v,m]=t.useState({outerHeightStyle:0}),_=t.useCallback((()=>{const t=d.current,n=ri(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0};const r=f.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const i=n.boxSizing,o=vp(n.paddingBottom)+vp(n.paddingTop),l=vp(n.borderBottomWidth)+vp(n.borderTopWidth),u=r.scrollHeight;r.value="x";const c=r.scrollHeight;let p=u;s&&(p=Math.max(Number(s)*c,p)),a&&(p=Math.min(Number(a)*c,p)),p=Math.max(p,c);return{outerHeightStyle:p+("border-box"===i?o+l:0),overflow:Math.abs(p-u)<=1}}),[a,s,e.placeholder]),y=(t,e)=>{const{outerHeightStyle:n,overflow:r}=e;return g.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==r)?(g.current+=1,{overflow:r,outerHeightStyle:n}):t},b=t.useCallback((()=>{const t=_();_p(t)||m((e=>y(e,t)))}),[_]);ti((()=>{const t=()=>{g.current=0,(()=>{const t=_();_p(t)||vi.flushSync((()=>{m((e=>y(e,t)))}))})()};let e;const n=Ji(t),r=d.current,i=ri(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(t),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(e),i.removeEventListener("resize",n),o&&o.disconnect()}}),[_]),ti((()=>{b()})),t.useEffect((()=>{g.current=0}),[u]);return(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsx)("textarea",r({value:u,onChange:t=>{g.current=0,p||b(),o&&o(t)},ref:h,rows:s,style:r({height:v.outerHeightStyle,overflow:v.overflow?"hidden":void 0},l)},c)),(0,ie.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:r({},mp,l,{paddingTop:0,paddingBottom:0})})]})}));function bp(t){let{props:e,states:n,muiFormControl:r}=t;return n.reduce(((t,n)=>(t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t)),{})}const xp=t.createContext(void 0);function wp(){return t.useContext(xp)}function Ep(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function Tp(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(Ep(t.value)&&""!==t.value||e&&Ep(t.defaultValue)&&""!==t.defaultValue)}function Sp(t){return fr("MuiInputBase",t)}const Cp=ji("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Op=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Lp=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat(co(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},kp=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Ip=bi("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Lp})((t=>{let{theme:e,ownerState:n}=t;return r({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(Cp.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&r({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Np=bi("input",{name:"MuiInputBase",slot:"Input",overridesResolver:kp})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode,o=r({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),a={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return r({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(Cp.formControl," &")]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(Cp.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Dp=(0,ie.jsx)(Xn,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Ap=t.forwardRef((function(e,n){var a;const s=Fn({props:e,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:u,autoFocus:c,className:p,components:d={},componentsProps:h={},defaultValue:f,disabled:g,disableInjectingGlobalStyles:v,endAdornment:m,fullWidth:_=!1,id:y,inputComponent:b="input",inputProps:x={},inputRef:w,maxRows:E,minRows:T,multiline:S=!1,name:C,onBlur:O,onChange:L,onClick:k,onFocus:I,onKeyDown:N,onKeyUp:D,placeholder:A,readOnly:G,renderSuffix:R,rows:P,slotProps:M={},slots:z={},startAdornment:F,type:B="text",value:j}=s,H=i(s,Op),U=null!=x.value?x.value:j,{current:W}=t.useRef(null!=U),V=t.useRef(),q=t.useCallback((t=>{0}),[]),X=Pi(V,w,x.ref,q),[Y,K]=t.useState(!1),$=wp();const Q=bp({props:s,muiFormControl:$,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Q.focused=$?$.focused:Y,t.useEffect((()=>{!$&&g&&Y&&(K(!1),O&&O())}),[$,g,Y,O]);const J=$&&$.onFilled,Z=$&&$.onEmpty,tt=t.useCallback((t=>{Tp(t)?J&&J():Z&&Z()}),[J,Z]);ya((()=>{W&&tt({value:U})}),[U,tt,W]);t.useEffect((()=>{tt(V.current)}),[]);let et=b,nt=x;S&&"input"===et&&(nt=r(P?{type:void 0,minRows:P,maxRows:P}:{type:void 0,maxRows:E,minRows:T},nt),et=yp);t.useEffect((()=>{$&&$.setAdornedStart(Boolean(F))}),[$,F]);const rt=r({},s,{color:Q.color||"primary",disabled:Q.disabled,endAdornment:m,error:Q.error,focused:Q.focused,formControl:$,fullWidth:_,hiddenLabel:Q.hiddenLabel,multiline:S,size:Q.size,startAdornment:F,type:B}),it=(t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:p,size:d,startAdornment:h,type:f}=t;return gr({root:["root","color".concat(co(n)),r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&"medium"!==d&&"size".concat(co(d)),c&&"multiline",h&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===d&&"inputSizeSmall",u&&"inputHiddenLabel",h&&"inputAdornedStart",o&&"inputAdornedEnd",p&&"readOnly"]},Sp,e)})(rt),ot=z.root||d.Root||Ip,at=M.root||h.root||{},st=z.input||d.Input||Np;return nt=r({},nt,null!=(a=M.input)?a:h.input),(0,ie.jsxs)(t.Fragment,{children:[!v&&Dp,(0,ie.jsxs)(ot,r({},at,!Xr(ot)&&{ownerState:r({},rt,at.ownerState)},{ref:n,onClick:t=>{V.current&&t.currentTarget===t.target&&V.current.focus(),k&&k(t)}},H,{className:cr(it.root,at.className,p,G&&"MuiInputBase-readOnly"),children:[F,(0,ie.jsx)(xp.Provider,{value:null,children:(0,ie.jsx)(st,r({ownerState:rt,"aria-invalid":Q.error,"aria-describedby":l,autoComplete:u,autoFocus:c,defaultValue:f,disabled:Q.disabled,id:y,onAnimationStart:t=>{tt("mui-auto-fill-cancel"===t.animationName?V.current:{value:"x"})},name:C,placeholder:A,readOnly:G,required:Q.required,rows:P,value:U,onKeyDown:N,onKeyUp:D,type:B},nt,!Xr(st)&&{as:et,ownerState:r({},rt,nt.ownerState)},{ref:X,className:cr(it.input,nt.className,G&&"MuiInputBase-readOnly"),onBlur:t=>{O&&O(t),x.onBlur&&x.onBlur(t),$&&$.onBlur?$.onBlur(t):K(!1)},onChange:function(t){if(!W){const e=t.target||V.current;if(null==e)throw new Error(o(1));tt({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];x.onChange&&x.onChange(t,...n),L&&L(t,...n)},onFocus:t=>{Q.disabled?t.stopPropagation():(I&&I(t),x.onFocus&&x.onFocus(t),$&&$.onFocus?$.onFocus(t):K(!0))}}))}),m,R?R(r({},Q,{startAdornment:F})):null]}))]})})),Gp=Ap;function Rp(t){return fr("MuiInput",t)}const Pp=r({},Cp,ji("MuiInput",["root","underline","input"])),Mp=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],zp=bi(Ip,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Lp(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let i="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),r({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Pp.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Pp.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Pp.disabled,", .").concat(Pp.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(Pp.disabled,":before")]:{borderBottomStyle:"dotted"}})})),Fp=bi(Np,{name:"MuiInput",slot:"Input",overridesResolver:kp})({}),Bp=t.forwardRef((function(t,e){var n,o,a,s;const u=Fn({props:t,name:"MuiInput"}),{disableUnderline:c,components:p={},componentsProps:d,fullWidth:h=!1,inputComponent:f="input",multiline:g=!1,slotProps:v,slots:m={},type:_="text"}=u,y=i(u,Mp),b=(t=>{const{classes:e,disableUnderline:n}=t;return r({},e,gr({root:["root",!n&&"underline"],input:["input"]},Rp,e))})(u),x={root:{ownerState:{disableUnderline:c}}},w=(null!=v?v:d)?l(null!=v?v:d,x):x,E=null!=(n=null!=(o=m.root)?o:p.Root)?n:zp,T=null!=(a=null!=(s=m.input)?s:p.Input)?a:Fp;return(0,ie.jsx)(Gp,r({slots:{root:E,input:T},slotProps:w,fullWidth:h,inputComponent:f,multiline:g,ref:e,type:_},y,{classes:b}))}));Bp.muiName="Input";const jp=Bp;function Hp(t){return fr("MuiFilledInput",t)}const Up=r({},Cp,ji("MuiFilledInput",["root","underline","input"])),Wp=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Vp=bi(Ip,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Lp(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var i;const o="light"===e.palette.mode,a=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return r({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},["&.".concat(Up.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},["&.".concat(Up.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:u}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(i=(e.vars||e).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Up.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Up.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Up.disabled,", .").concat(Up.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(Up.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&r({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),qp=bi(Np,{name:"MuiFilledInput",slot:"Input",overridesResolver:kp})((t=>{let{theme:e,ownerState:n}=t;return r({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Xp=t.forwardRef((function(t,e){var n,o,a,s;const u=Fn({props:t,name:"MuiFilledInput"}),{components:c={},componentsProps:p,fullWidth:d=!1,inputComponent:h="input",multiline:f=!1,slotProps:g,slots:v={},type:m="text"}=u,_=i(u,Wp),y=r({},u,{fullWidth:d,inputComponent:h,multiline:f,type:m}),b=(t=>{const{classes:e,disableUnderline:n}=t;return r({},e,gr({root:["root",!n&&"underline"],input:["input"]},Hp,e))})(u),x={root:{ownerState:y},input:{ownerState:y}},w=(null!=g?g:p)?l(x,null!=g?g:p):x,E=null!=(n=null!=(o=v.root)?o:c.Root)?n:Vp,T=null!=(a=null!=(s=v.input)?s:c.Input)?a:qp;return(0,ie.jsx)(Gp,r({slots:{root:E,input:T},componentsProps:w,fullWidth:d,inputComponent:h,multiline:f,ref:e,type:m},_,{classes:b}))}));Xp.muiName="Input";const Yp=Xp;var Kp;const $p=["children","classes","className","label","notched"],Qp=bi("fieldset",{shouldForwardProp:_i})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Jp=bi("legend",{shouldForwardProp:_i})((t=>{let{ownerState:e,theme:n}=t;return r({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&r({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Zp(t){return fr("MuiOutlinedInput",t)}const td=r({},Cp,ji("MuiOutlinedInput",["root","notchedOutline","input"])),ed=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],nd=bi(Ip,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Lp})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return r({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(td.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(td.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(td.focused," .").concat(td.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(td.error," .").concat(td.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(td.disabled," .").concat(td.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&r({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),rd=bi((function(t){const{className:e,label:n,notched:o}=t,a=i(t,$p),s=null!=n&&""!==n,l=r({},t,{notched:o,withLabel:s});return(0,ie.jsx)(Qp,r({"aria-hidden":!0,className:e,ownerState:l},a,{children:(0,ie.jsx)(Jp,{ownerState:l,children:s?(0,ie.jsx)("span",{children:n}):Kp||(Kp=(0,ie.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),id=bi(Np,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:kp})((t=>{let{theme:e,ownerState:n}=t;return r({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),od=t.forwardRef((function(e,n){var o,a,s,l,u;const c=Fn({props:e,name:"MuiOutlinedInput"}),{components:p={},fullWidth:d=!1,inputComponent:h="input",label:f,multiline:g=!1,notched:v,slots:m={},type:_="text"}=c,y=i(c,ed),b=(t=>{const{classes:e}=t;return r({},e,gr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Zp,e))})(c),x=wp(),w=bp({props:c,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E=r({},c,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:x,fullWidth:d,hiddenLabel:w.hiddenLabel,multiline:g,size:w.size,type:_}),T=null!=(o=null!=(a=m.root)?a:p.Root)?o:nd,S=null!=(s=null!=(l=m.input)?l:p.Input)?s:id;return(0,ie.jsx)(Gp,r({slots:{root:T,input:S},renderSuffix:e=>(0,ie.jsx)(rd,{ownerState:E,className:b.notchedOutline,label:null!=f&&""!==f&&w.required?u||(u=(0,ie.jsxs)(t.Fragment,{children:[f,"\u2009","*"]})):f,notched:"undefined"!==typeof v?v:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:d,inputComponent:h,multiline:g,ref:n,type:_},y,{classes:r({},b,{notchedOutline:null})}))}));od.muiName="Input";const ad=od;function sd(t){return fr("MuiFormLabel",t)}const ld=ji("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),ud=["children","className","color","component","disabled","error","filled","focused","required"],cd=bi("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return r({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return r({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(ld.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(ld.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(ld.error)]:{color:(e.vars||e).palette.error.main}})})),pd=bi("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(ld.error)]:{color:(e.vars||e).palette.error.main}}})),dd=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiFormLabel"}),{children:o,className:a,component:s="label"}=n,l=i(n,ud),u=bp({props:n,muiFormControl:wp(),states:["color","required","focused","disabled","error","filled"]}),c=r({},n,{color:u.color||"primary",component:s,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),p=(t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=t;return gr({root:["root","color".concat(co(n)),i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},sd,e)})(c);return(0,ie.jsxs)(cd,r({as:s,ownerState:c,className:cr(p.root,a),ref:e},l,{children:[o,u.required&&(0,ie.jsxs)(pd,{ownerState:c,"aria-hidden":!0,className:p.asterisk,children:["\u2009","*"]})]}))})),hd=dd;function fd(t){return fr("MuiInputLabel",t)}ji("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const gd=["disableAnimation","margin","shrink","variant","className"],vd=bi(hd,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(ld.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return r({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&r({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&r({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&r({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),md=t.forwardRef((function(t,e){const n=Fn({name:"MuiInputLabel",props:t}),{disableAnimation:o=!1,shrink:a,className:s}=n,l=i(n,gd),u=wp();let c=a;"undefined"===typeof c&&u&&(c=u.filled||u.focused||u.adornedStart);const p=bp({props:n,muiFormControl:u,states:["size","variant","required","focused"]}),d=r({},n,{disableAnimation:o,formControl:u,shrink:c,size:p.size,variant:p.variant,required:p.required,focused:p.focused}),h=(t=>{const{classes:e,formControl:n,size:i,shrink:o,disableAnimation:a,variant:s,required:l}=t;return r({},e,gr({root:["root",n&&"formControl",!a&&"animated",o&&"shrink",i&&"normal"!==i&&"size".concat(co(i)),s],asterisk:[l&&"asterisk"]},fd,e))})(d);return(0,ie.jsx)(vd,r({"data-shrink":c,ownerState:d,ref:e,className:cr(h.root,s)},l,{classes:h}))}));function _d(t){return fr("MuiFormControl",t)}ji("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const yd=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],bd=bi("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return r({},e.root,e["margin".concat(co(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return r({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),xd=t.forwardRef((function(e,n){const o=Fn({props:e,name:"MuiFormControl"}),{children:a,className:s,color:l="primary",component:u="div",disabled:c=!1,error:p=!1,focused:d,fullWidth:h=!1,hiddenLabel:f=!1,margin:g="none",required:v=!1,size:m="medium",variant:_="outlined"}=o,y=i(o,yd),b=r({},o,{color:l,component:u,disabled:c,error:p,fullWidth:h,hiddenLabel:f,margin:g,required:v,size:m,variant:_}),x=(t=>{const{classes:e,margin:n,fullWidth:r}=t;return gr({root:["root","none"!==n&&"margin".concat(co(n)),r&&"fullWidth"]},_d,e)})(b),[w,E]=t.useState((()=>{let e=!1;return a&&t.Children.forEach(a,(t=>{if(!_a(t,["Input","Select"]))return;const n=_a(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[T,S]=t.useState((()=>{let e=!1;return a&&t.Children.forEach(a,(t=>{_a(t,["Input","Select"])&&(Tp(t.props,!0)||Tp(t.props.inputProps,!0))&&(e=!0)})),e})),[C,O]=t.useState(!1);c&&C&&O(!1);const L=void 0===d||c?C:d;let k;const I=t.useMemo((()=>({adornedStart:w,setAdornedStart:E,color:l,disabled:c,error:p,filled:T,focused:L,fullWidth:h,hiddenLabel:f,size:m,onBlur:()=>{O(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{O(!0)},registerEffect:k,required:v,variant:_})),[w,l,c,p,T,L,h,f,k,v,m,_]);return(0,ie.jsx)(xp.Provider,{value:I,children:(0,ie.jsx)(bd,r({as:u,ownerState:b,className:cr(x.root,s),ref:n},y,{children:a}))})})),wd=xd;function Ed(t){return fr("MuiFormHelperText",t)}const Td=ji("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Sd;const Cd=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Od=bi("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat(co(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return r({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Td.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Td.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Ld=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiFormHelperText"}),{children:o,className:a,component:s="p"}=n,l=i(n,Cd),u=bp({props:n,muiFormControl:wp(),states:["variant","size","disabled","error","filled","focused","required"]}),c=r({},n,{component:s,contained:"filled"===u.variant||"outlined"===u.variant,variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),p=(t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=t;return gr({root:["root",i&&"disabled",o&&"error",r&&"size".concat(co(r)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]},Ed,e)})(c);return(0,ie.jsx)(Od,r({as:s,ownerState:c,className:cr(p.root,a),ref:e},l,{children:" "===o?Sd||(Sd=(0,ie.jsx)("span",{className:"notranslate",children:"\u200b"})):o}))}));function kd(t){return fr("MuiNativeSelect",t)}const Id=ji("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Nd=["className","disabled","error","IconComponent","inputRef","variant"],Dd=t=>{let{ownerState:e,theme:n}=t;return r({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":r({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(Id.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},Ad=bi("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:_i,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{["&.".concat(Id.multiple)]:e.multiple}]}})(Dd),Gd=t=>{let{ownerState:e,theme:n}=t;return r({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(Id.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},Rd=bi("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(co(n.variant))],n.open&&e.iconOpen]}})(Gd),Pd=t.forwardRef((function(e,n){const{className:o,disabled:a,error:s,IconComponent:l,inputRef:u,variant:c="standard"}=e,p=i(e,Nd),d=r({},e,{disabled:a,variant:c,error:s}),h=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t;return gr({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon","icon".concat(co(n)),o&&"iconOpen",r&&"disabled"]},kd,e)})(d);return(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsx)(Ad,r({ownerState:d,className:cr(h.select,o),disabled:a,ref:u||n},p)),e.multiple?null:(0,ie.jsx)(Rd,{as:l,ownerState:d,className:h.icon})]})}));function Md(t){return fr("MuiSelect",t)}const zd=ji("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Fd;const Bd=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],jd=bi("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat(zd.select)]:e.select},{["&.".concat(zd.select)]:e[n.variant]},{["&.".concat(zd.error)]:e.error},{["&.".concat(zd.multiple)]:e.multiple}]}})(Dd,{["&.".concat(zd.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Hd=bi("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(co(n.variant))],n.open&&e.iconOpen]}})(Gd),Ud=bi("input",{shouldForwardProp:t=>yi(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Wd(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function Vd(t){return null==t||"string"===typeof t&&!t.trim()}const qd=t.forwardRef((function(e,n){var a;const{"aria-describedby":s,"aria-label":l,autoFocus:u,autoWidth:c,children:p,className:d,defaultOpen:h,defaultValue:f,disabled:g,displayEmpty:v,error:m=!1,IconComponent:_,inputRef:y,labelId:b,MenuProps:x={},multiple:w,name:E,onBlur:T,onChange:S,onClose:C,onFocus:O,onOpen:L,open:k,readOnly:I,renderValue:N,SelectDisplayProps:D={},tabIndex:A,value:G,variant:R="standard"}=e,P=i(e,Bd),[M,z]=oc({controlled:G,default:f,name:"Select"}),[F,B]=oc({controlled:k,default:h,name:"Select"}),j=t.useRef(null),H=t.useRef(null),[U,W]=t.useState(null),{current:V}=t.useRef(null!=k),[q,X]=t.useState(),Y=Pi(n,y),K=t.useCallback((t=>{H.current=t,t&&W(t)}),[]),$=null==U?void 0:U.parentNode;t.useImperativeHandle(Y,(()=>({focus:()=>{H.current.focus()},node:j.current,value:M})),[M]),t.useEffect((()=>{h&&F&&U&&!V&&(X(c?null:$.clientWidth),H.current.focus())}),[U,c]),t.useEffect((()=>{u&&H.current.focus()}),[u]),t.useEffect((()=>{if(!b)return;const t=kc(H.current).getElementById(b);if(t){const e=()=>{getSelection().isCollapsed&&H.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[b]);const Q=(t,e)=>{t?L&&L(e):C&&C(e),V||(X(c?null:$.clientWidth),B(t))},J=t.Children.toArray(p),Z=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(w){n=Array.isArray(M)?M.slice():[];const e=M.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),M!==n&&(z(n),S)){const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:E}}),S(i,t)}w||Q(!1,e)}},tt=null!==U&&F;let et,nt;delete P["aria-invalid"];const rt=[];let it=!1,ot=!1;(Tp({value:M})||v)&&(N?et=N(M):it=!0);const at=J.map((e=>{if(!t.isValidElement(e))return null;let n;if(w){if(!Array.isArray(M))throw new Error(o(2));n=M.some((t=>Wd(t,e.props.value))),n&&it&&rt.push(e.props.children)}else n=Wd(M,e.props.value),n&&it&&(nt=e.props.children);return n&&(ot=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:Z(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));it&&(et=w?0===rt.length?null:rt.reduce(((t,e,n)=>(t.push(e),n<rt.length-1&&t.push(", "),t)),[]):nt);let st,lt=q;!c&&V&&U&&(lt=$.clientWidth),st="undefined"!==typeof A?A:g?null:0;const ut=D.id||(E?"mui-component-select-".concat(E):void 0),ct=r({},e,{variant:R,value:M,open:tt,error:m}),pt=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t;return gr({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon","icon".concat(co(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Md,e)})(ct),dt=r({},x.PaperProps,null==(a=x.slotProps)?void 0:a.paper),ht=rc();return(0,ie.jsxs)(t.Fragment,{children:[(0,ie.jsx)(jd,r({ref:K,tabIndex:st,role:"combobox","aria-controls":ht,"aria-disabled":g?"true":void 0,"aria-expanded":tt?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[b,ut].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:t=>{if(!I){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),Q(!0,t))}},onMouseDown:g||I?null:t=>{0===t.button&&(t.preventDefault(),H.current.focus(),Q(!0,t))},onBlur:t=>{!tt&&T&&(Object.defineProperty(t,"target",{writable:!0,value:{value:M,name:E}}),T(t))},onFocus:O},D,{ownerState:ct,className:cr(D.className,pt.select,d),id:ut,children:Vd(et)?Fd||(Fd=(0,ie.jsx)("span",{className:"notranslate",children:"\u200b"})):et})),(0,ie.jsx)(Ud,r({"aria-invalid":m,value:Array.isArray(M)?M.join(","):M,name:E,ref:j,"aria-hidden":!0,onChange:t=>{const e=J.find((e=>e.props.value===t.target.value));void 0!==e&&(z(e.props.value),S&&S(t,e))},tabIndex:-1,disabled:g,className:pt.nativeInput,autoFocus:u,ownerState:ct},P)),(0,ie.jsx)(Hd,{as:_,className:pt.icon,ownerState:ct}),(0,ie.jsx)(op,r({id:"menu-".concat(E||""),anchorEl:$,open:tt,onClose:t=>{Q(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x,{MenuListProps:r({"aria-labelledby":b,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:ht},x.MenuListProps),slotProps:r({},x.slotProps,{paper:r({},dt,{style:r({minWidth:lt},null!=dt?dt.style:null)})}),children:at}))]})})),Xd=qd,Yd=ws((0,ie.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Kd=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],$d=["root"],Qd={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>_i(t)&&"variant"!==t,slot:"Root"},Jd=bi(jp,Qd)(""),Zd=bi(ad,Qd)(""),th=bi(Yp,Qd)(""),eh=t.forwardRef((function(e,n){const o=Fn({name:"MuiSelect",props:e}),{autoWidth:a=!1,children:s,classes:u={},className:c,defaultOpen:p=!1,displayEmpty:d=!1,IconComponent:h=Yd,id:f,input:g,inputProps:v,label:m,labelId:_,MenuProps:y,multiple:b=!1,native:x=!1,onClose:w,onOpen:E,open:T,renderValue:S,SelectDisplayProps:C,variant:O="outlined"}=o,L=i(o,Kd),k=x?Pd:Xd,I=bp({props:o,muiFormControl:wp(),states:["variant","error"]}),N=I.variant||O,D=r({},o,{variant:N,classes:u}),A=(t=>{const{classes:e}=t;return e})(D),G=i(A,$d),R=g||{standard:(0,ie.jsx)(Jd,{ownerState:D}),outlined:(0,ie.jsx)(Zd,{label:m,ownerState:D}),filled:(0,ie.jsx)(th,{ownerState:D})}[N],P=Pi(n,R.ref);return(0,ie.jsx)(t.Fragment,{children:t.cloneElement(R,r({inputComponent:k,inputProps:r({children:s,error:I.error,IconComponent:h,variant:N,type:void 0,multiple:b},x?{id:f}:{autoWidth:a,defaultOpen:p,displayEmpty:d,labelId:_,MenuProps:y,onClose:w,onOpen:E,open:T,renderValue:S,SelectDisplayProps:r({id:f},C)},v,{classes:v?l(G,v.classes):G},g?g.props.inputProps:{})},(b&&x||d)&&"outlined"===N?{notched:!0}:{},{ref:P,className:cr(R.props.className,c,A.root)},!g&&{variant:N},L))})}));eh.muiName="Select";const nh=eh;function rh(t){return fr("MuiTextField",t)}ji("MuiTextField",["root"]);const ih=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],oh={standard:jp,filled:Yp,outlined:ad},ah=bi(wd,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),sh=t.forwardRef((function(t,e){const n=Fn({props:t,name:"MuiTextField"}),{autoComplete:o,autoFocus:a=!1,children:s,className:l,color:u="primary",defaultValue:c,disabled:p=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:g,id:v,InputLabelProps:m,inputProps:_,InputProps:y,inputRef:b,label:x,maxRows:w,minRows:E,multiline:T=!1,name:S,onBlur:C,onChange:O,onFocus:L,placeholder:k,required:I=!1,rows:N,select:D=!1,SelectProps:A,type:G,value:R,variant:P="outlined"}=n,M=i(n,ih),z=r({},n,{autoFocus:a,color:u,disabled:p,error:d,fullWidth:f,multiline:T,required:I,select:D,variant:P}),F=(t=>{const{classes:e}=t;return gr({root:["root"]},rh,e)})(z);const B={};"outlined"===P&&(m&&"undefined"!==typeof m.shrink&&(B.notched=m.shrink),B.label=x),D&&(A&&A.native||(B.id=void 0),B["aria-describedby"]=void 0);const j=rc(v),H=g&&j?"".concat(j,"-helper-text"):void 0,U=x&&j?"".concat(j,"-label"):void 0,W=oh[P],V=(0,ie.jsx)(W,r({"aria-describedby":H,autoComplete:o,autoFocus:a,defaultValue:c,fullWidth:f,multiline:T,name:S,rows:N,maxRows:w,minRows:E,type:G,value:R,id:j,inputRef:b,onBlur:C,onChange:O,onFocus:L,placeholder:k,inputProps:_},B,y));return(0,ie.jsxs)(ah,r({className:cr(F.root,l),disabled:p,error:d,fullWidth:f,ref:e,required:I,color:u,variant:P,ownerState:z},M,{children:[null!=x&&""!==x&&(0,ie.jsx)(md,r({htmlFor:j,id:U},m,{children:x})),D?(0,ie.jsx)(nh,r({"aria-describedby":H,id:j,labelId:U,value:R,input:V},A,{children:s})):V,g&&(0,ie.jsx)(Ld,r({id:H},h,{children:g}))]}))})),lh=sh,uh=["component","direction","spacing","divider","children","className","useFlexGap"],ch=vt(),ph=Mr("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function dh(t){return Mn({props:t,name:"MuiStack",defaultTheme:ch})}function hh(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,o)=>(e.push(i),o<r.length-1&&e.push(t.cloneElement(n,{key:"separator-".concat(o)})),e)),[])}const fh=t=>{let{ownerState:e,theme:n}=t,i=r({display:"flex",flexDirection:"column"},f({theme:n},m({values:e.direction,breakpoints:n.breakpoints.values}),(t=>({flexDirection:t}))));if(e.spacing){const t=N(n),r=Object.keys(n.breakpoints.values).reduce(((t,n)=>(("object"===typeof e.spacing&&null!=e.spacing[n]||"object"===typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t)),{}),o=m({values:e.direction,base:r}),a=m({values:e.spacing,base:r});"object"===typeof o&&Object.keys(o).forEach(((t,e,n)=>{if(!o[t]){const r=e>0?o[n[e-1]]:"column";o[t]=r}}));i=l(i,f({theme:n},a,((n,r)=>{return e.useFlexGap?{gap:D(t,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:D(t,n)}};var i})))}return i=function(t){const e=g(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=[e,...r].reduce(((t,e)=>l(t,e)),{});return v(Object.keys(e),o)}(n.breakpoints,i),i};const gh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=ph,useThemeProps:o=dh,componentName:a="MuiStack"}=e,s=n(fh),l=t.forwardRef((function(t,e){const n=ja(o(t)),{component:l="div",direction:u="column",spacing:c=0,divider:p,children:d,className:h,useFlexGap:f=!1}=n,g=i(n,uh),v={direction:u,spacing:c,useFlexGap:f},m=gr({root:["root"]},(t=>fr(a,t)),{});return(0,ie.jsx)(s,r({as:l,ownerState:v,ref:e,className:cr(m.root,h)},g,{children:p?hh(d,p):d}))}));return l}({createStyledComponent:bi("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Fn({props:t,name:"MuiStack"})}),vh=gh;function mh(t){return fr("MuiFormControlLabel",t)}const _h=ji("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),yh=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],bh=bi("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(_h.label)]:e.label},e.root,e["labelPlacement".concat(co(n.labelPlacement))]]}})((t=>{let{theme:e,ownerState:n}=t;return r({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(_h.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(_h.label)]:{["&.".concat(_h.disabled)]:{color:(e.vars||e).palette.text.disabled}}})})),xh=bi("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(_h.error)]:{color:(e.vars||e).palette.error.main}}})),wh=t.forwardRef((function(e,n){var o,a;const s=Fn({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:c,disabled:p,disableTypography:d,label:h,labelPlacement:f="end",required:g,slotProps:v={}}=s,m=i(s,yh),_=wp(),y=null!=(o=null!=p?p:c.props.disabled)?o:null==_?void 0:_.disabled,b=null!=g?g:c.props.required,x={disabled:y,required:b};["checked","name","onChange","value","inputRef"].forEach((t=>{"undefined"===typeof c.props[t]&&"undefined"!==typeof s[t]&&(x[t]=s[t])}));const w=bp({props:s,muiFormControl:_,states:["error"]}),E=r({},s,{disabled:y,labelPlacement:f,required:b,error:w.error}),T=(t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t;return gr({root:["root",n&&"disabled","labelPlacement".concat(co(r)),i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]},mh,e)})(E),S=null!=(a=v.typography)?a:u.typography;let C=h;return null==C||C.type===Ya||d||(C=(0,ie.jsx)(Ya,r({component:"span"},S,{className:cr(T.label,null==S?void 0:S.className),children:C}))),(0,ie.jsxs)(bh,r({className:cr(T.root,l),ownerState:E,ref:n},m,{children:[t.cloneElement(c,x),b?(0,ie.jsxs)(vh,{display:"block",children:[C,(0,ie.jsxs)(xh,{ownerState:E,"aria-hidden":!0,className:T.asterisk,children:["\u2009","*"]})]}):C]}))}));function Eh(t){return fr("PrivateSwitchBase",t)}ji("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Th=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Sh=bi(ma)((t=>{let{ownerState:e}=t;return r({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})})),Ch=bi("input",{shouldForwardProp:_i})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Oh=t.forwardRef((function(t,e){const{autoFocus:n,checked:o,checkedIcon:a,className:s,defaultChecked:l,disabled:u,disableFocusRipple:c=!1,edge:p=!1,icon:d,id:h,inputProps:f,inputRef:g,name:v,onBlur:m,onChange:_,onFocus:y,readOnly:b,required:x=!1,tabIndex:w,type:E,value:T}=t,S=i(t,Th),[C,O]=oc({controlled:o,default:Boolean(l),name:"SwitchBase",state:"checked"}),L=wp();let k=u;L&&"undefined"===typeof k&&(k=L.disabled);const I="checkbox"===E||"radio"===E,N=r({},t,{checked:C,disabled:k,disableFocusRipple:c,edge:p}),D=(t=>{const{classes:e,checked:n,disabled:r,edge:i}=t;return gr({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(co(i))],input:["input"]},Eh,e)})(N);return(0,ie.jsxs)(Sh,r({component:"span",className:cr(D.root,s),centerRipple:!0,focusRipple:!c,disabled:k,tabIndex:null,role:void 0,onFocus:t=>{y&&y(t),L&&L.onFocus&&L.onFocus(t)},onBlur:t=>{m&&m(t),L&&L.onBlur&&L.onBlur(t)},ownerState:N,ref:e},S,{children:[(0,ie.jsx)(Ch,r({autoFocus:n,checked:o,defaultChecked:l,className:D.input,disabled:k,id:I?h:void 0,name:v,onChange:t=>{if(t.nativeEvent.defaultPrevented)return;const e=t.target.checked;O(e),_&&_(t,e)},readOnly:b,ref:g,required:x,ownerState:N,tabIndex:w,type:E},"checkbox"===E&&void 0===T?{}:{value:T},f)),C?a:d]}))})),Lh=ws((0,ie.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),kh=ws((0,ie.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ih=ws((0,ie.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Nh(t){return fr("MuiCheckbox",t)}const Dh=ji("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Ah=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Gh=bi(Oh,{shouldForwardProp:t=>_i(t)||"classes"===t,name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e["size".concat(co(n.size))],"default"!==n.color&&e["color".concat(co(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;return r({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat("default"===n.color?e.vars.palette.action.activeChannel:e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):Et("default"===n.color?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(Dh.checked,", &.").concat(Dh.indeterminate)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(Dh.disabled)]:{color:(e.vars||e).palette.action.disabled}})})),Rh=(0,ie.jsx)(kh,{}),Ph=(0,ie.jsx)(Lh,{}),Mh=(0,ie.jsx)(Ih,{}),zh=t.forwardRef((function(e,n){var o,a;const s=Fn({props:e,name:"MuiCheckbox"}),{checkedIcon:l=Rh,color:u="primary",icon:c=Ph,indeterminate:p=!1,indeterminateIcon:d=Mh,inputProps:h,size:f="medium",className:g}=s,v=i(s,Ah),m=p?d:c,_=p?d:l,y=r({},s,{color:u,indeterminate:p,size:f}),b=(t=>{const{classes:e,indeterminate:n,color:i,size:o}=t;return r({},e,gr({root:["root",n&&"indeterminate","color".concat(co(i)),"size".concat(co(o))]},Nh,e))})(y);return(0,ie.jsx)(Gh,r({type:"checkbox",inputProps:r({"data-indeterminate":p},h),icon:t.cloneElement(m,{fontSize:null!=(o=m.props.fontSize)?o:f}),checkedIcon:t.cloneElement(_,{fontSize:null!=(a=_.props.fontSize)?a:f}),ownerState:y,ref:n,className:cr(b.root,g)},v,{classes:b}))})),Fh=zh,Bh=ws((0,ie.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),jh=ws((0,ie.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),Hh=ws((0,ie.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Uh=e=>{let{menuOpen:n,closeMenu:r,node:i}=e;const[o,a]=(0,t.useState)([]),s=(0,t.useRef)(null),[l,u]=(0,t.useState)(i&&i.inputs?i.inputs.map((()=>t.createRef())):[]),[c,p]=(0,t.useState)([!1,!1]),[d,h]=(0,t.useState)(0),[f,g]=(0,t.useState)(0),[v,m]=(0,t.useState)(!0),[_,y]=(0,t.useState)(i?i.title:"\u0443\u0437\u0435\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),[b,x]=(0,t.useState)(i&&i.properties?i.properties.workDir:Zn),[w,E]=(0,t.useState)(i&&i.properties?i.properties.binaryFile:tr),[T,S]=(0,t.useState)(i&&i.properties?i.properties.cores:""),[C,O]=(0,t.useState)(i&&i.properties?i.properties.flags:""),[L,k]=(0,t.useState)(!(!i||!i.properties)&&i.properties.checkbox),[I,N]=(0,t.useState)([]),[D,A]=(0,t.useState)(i&&i.properties?i.properties.workDir:Zn),[G,R]=(0,t.useState)(i&&i.properties?i.properties.binaryFile:tr),[P,M]=(0,t.useState)(i&&i.properties?i.properties.cores:""),[z,F]=(0,t.useState)(i&&i.properties?i.properties.flags:""),B={name:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430",nodeProps:[{id:"nodeTitle",label:"\u0418\u043c\u044f \u0431\u043b\u043e\u043a\u0430",type:"string",setState:y,value:_},{id:"nodeWorkDir",label:"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f",type:"string",setState:x,value:b},{id:"nodeBinaryFile",label:"\u041f\u0443\u0442\u044c \u043a \u0431\u0438\u043d\u0430\u0440\u043d\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443",type:"string",setState:E,value:w},{id:"nodeCores",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044f\u0434\u0435\u0440",type:"number",setState:S,value:T},{id:"nodeFlags",label:"\u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b/\u0424\u043b\u0430\u0433\u0438",type:"string",setState:O,value:C}],outputProps:[{id:"name",label:"\u0418\u043c\u044f \u043f\u043e\u0440\u0442\u0430",type:"string",setState:N,value:I},{id:"workDir",label:"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f",type:"string",setState:A,value:D},{id:"binaryFile",label:"\u041f\u0443\u0442\u044c \u043a \u0431\u0438\u043d\u0430\u0440\u043d\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443",type:"string",setState:R,value:G},{id:"cores",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044f\u0434\u0435\u0440",type:"number",setState:M,value:P},{id:"flags",label:"\u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b/\u0424\u043b\u0430\u0433\u0438",type:"string",setState:F,value:z}]};(0,t.useEffect)((()=>{if(i&&i.properties&&(y(i.title),x(i.properties.workDir),E(i.properties.binaryFile),S(i.properties.cores),O(i.properties.flags),k(i.properties.checkbox),!0===i.properties.checkbox?i.order=1:i.order,i.outputs)){const t=i.outputs.map((t=>t.name));N(t)}}),[i]);return(0,ie.jsxs)(xo,{anchor:"right",open:n,variant:"persistent",children:[(0,ie.jsxs)(Co,{sx:{width:"370px"},children:[(0,ie.jsxs)(Aa,{children:[(0,ie.jsx)(za,{children:(0,ie.jsx)(Bh,{})}),(0,ie.jsx)(Za,{primary:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0443\u0437\u043b\u0430 \xab".concat(i?i.title:"\u0443\u0437\u0435\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d","\xbb")})]}),(0,ie.jsx)(as,{}),(0,ie.jsx)(pl,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"352px"}},noValidate:!0,autoComplete:"off",children:(0,ie.jsxs)("div",{children:[B.nodeProps.map(((t,e)=>(0,ie.jsx)(lh,{id:t.id,label:t.label,type:t.type,onChange:function(e){const n=e.target.value;t.setState(n)},value:t.value,variant:"standard"},t+e))),(0,ie.jsx)(wh,{color:"main",sx:{m:1,width:"332px",justifyContent:"start"},control:(0,ie.jsx)(Fh,{checked:L,onChange:()=>k(!L)}),label:"\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0441\u0440\u0430\u0437\u0443",labelPlacement:"start"})]})})]}),(0,ie.jsx)(as,{}),(0,ie.jsxs)(pl,{sx:{display:{xs:"none",md:"flex",justifyContent:"center"}},children:[(0,ie.jsx)(Ya,{textAlign:"center",sx:{p:1,pr:0},children:"\u0412\u0445\u043e\u0434\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b"}),(0,ie.jsx)(mc,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0445\u043e\u0434\u043d\u043e\u0439 \u043f\u043e\u0440\u0442",children:(0,ie.jsx)(al,{color:"primary","aria-label":"add input",onClick:()=>{const e=d+1;h(e),i.addInput("\u0412\u0445\u043e\u0434 ".concat(e)),u((e=>[...e,t.createRef()])),m(!v)},children:(0,ie.jsx)(jh,{})})})]}),i&&i.inputs&&i.inputs.length>0&&i.inputs.map(((t,e)=>(0,ie.jsxs)(pl,{sx:{m:1,display:{xs:"none",md:"flex"}},children:[(0,ie.jsx)(lh,{type:"string",onChange:e=>{const n=e.target.value;((t,e)=>{t.name=e,s.current&&s.current.focus(),m(!v)})(t,n)},value:t.name,variant:"standard",sx:{flexGrow:1,pr:1},InputProps:{disableUnderline:!0},inputRef:l[e]}),(0,ie.jsx)(al,{color:"primary","aria-label":"remove input",sx:{p:0},onClick:()=>{return t=e,i.removeInput(t),void m(!v);var t},children:(0,ie.jsx)(Hh,{})})]},e))),(0,ie.jsx)(as,{}),(0,ie.jsxs)(pl,{sx:{display:{xs:"none",md:"flex",justifyContent:"center"}},children:[(0,ie.jsx)(Ya,{textAlign:"center",sx:{p:1,pr:0},children:"\u0412\u044b\u0445\u043e\u0434\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b"}),(0,ie.jsx)(mc,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u043f\u043e\u0440\u0442",children:(0,ie.jsx)(al,{color:"primary","aria-label":"add output",onClick:()=>{const t=f+1;g(t);const e={id:t,name:"\u0412\u044b\u0445\u043e\u0434 ".concat(t),workDir:"",binaryFile:"",cores:"",flags:""};i.addOutput(e.name);const n=i.outputs.map((t=>(t.name===e.name&&Object.assign(t,e),t)));a(n),p([...c,!1]),m(!v)},children:(0,ie.jsx)(jh,{})})})]}),i&&i.outputs&&i.outputs.length>0&&i.outputs.map(((t,e)=>(0,ie.jsxs)(pl,{sx:{m:1,display:{xs:"none",md:"flex",flexDirection:"column"}},children:[(0,ie.jsxs)(pl,{sx:{m:0,display:{xs:"none",md:"flex"}},children:[(0,ie.jsxs)(us,{sx:{p:0},onClick:()=>{return t=e,void p((e=>{const n=[...e];return n[t]=!n[t],n}));var t},children:[(0,ie.jsx)(Za,{primary:t.name,sx:{maxWidth:"320px",overflowWrap:"break-word"}}),c[e]?(0,ie.jsx)(Os,{}):(0,ie.jsx)(Ls,{})]}),(0,ie.jsx)(al,{color:"primary","aria-label":"remove output",sx:{p:0},onClick:()=>(t=>{i.removeOutput(t),a(o.filter(((e,n)=>n!==t))),p(c.filter(((e,n)=>n!==t))),m(!v)})(e),children:(0,ie.jsx)(Hh,{})})]},e),(0,ie.jsx)(vs,{in:c[e],timeout:"auto",unmountOnExit:!0,children:(0,ie.jsx)(Co,{component:"div",disablePadding:!0,sx:{pl:2,width:"352px"},children:B.outputProps.map(((e,n)=>{var r;return(0,ie.jsx)(lh,{id:e.id,label:e.label,type:e.type,onChange:function(n){const r=n.target.value;((t,e,n)=>{a((r=>r.map((r=>{if(r.id===t){const o={...r,[e]:n},a=i.outputs.find((e=>e.id===t));return a&&(a[e]=n),o}return r}))))})(t.id,e.id,r)},value:(null===(r=o.find((e=>e.id===t.id)))||void 0===r?void 0:r[e.id])||"",variant:"standard",sx:{mt:1,width:"100%"}},e+n)}))})})]},e))),(0,ie.jsx)(pl,{sx:{flexGrow:1,minHeight:"52.5px"}}),(0,ie.jsx)(Lc,{sx:{m:1,width:"352px",position:"fixed",bottom:0},variant:"contained",onClick:()=>{i.getTitle=function(){return i?(i.title=_,_):"\u041e\u0448\u0438\u0431\u043a\u0430"},i.setProperty("workDir",b),i.setProperty("binaryFile",w),i.setProperty("cores",T),i.setProperty("flags",C),i.setProperty("checkbox",L),!0===L?i.order=1:i.order,r()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},Wh=t.memo(Uh);const Vh=function(t){let{selectedNode:e,isSideMenuPropertiesOpen:n,setSideMenuPropertiesOpen:r}=t;return(0,ie.jsxs)("main",{className:"Main",children:[(0,ie.jsx)("div",{className:"page"}),(0,ie.jsx)(Wh,{menuOpen:n,closeMenu:()=>r(!1),node:e||null})]})};Jn();const qh=new Qn.LGraph,Xh=new Qn.LGraphCanvas("#mycanvas",qh);Qn.LGraphCanvas.prototype.showSearchBox=function(){return!1},Qn.LGraphCanvas.prototype.processContextMenu=function(){return!1},console.log(Qn.LiteGraph.registered_node_types);const Yh=function(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null);return Xh.onNodeDeselected=function(){n(!1),i(null)},(0,t.useEffect)((()=>(Xh.onNodeSelected=function(t){i(t),n(!0),console.log(t)},()=>{Xh.onNodeSelected=null})),[]),(0,t.useEffect)((()=>{function t(){Xh.resize(window.innerWidth,window.innerHeight),Xh.draw(!0)}return window.onload=t,window.onresize=t,()=>{window.onload=null,window.onresize=null}}),[]),(0,ie.jsxs)("div",{className:"App",children:[(0,ie.jsx)(fp,{graph:qh}),(0,ie.jsx)(Vh,{selectedNode:r,isSideMenuPropertiesOpen:e,setSideMenuPropertiesOpen:n})]})},Kh=te({overrides:{MuiCssBaseline:{"@global":{body:{backgroundColor:"black"}}}}});n.createRoot(document.getElementById("root")).render((0,ie.jsxs)(An,{theme:Kh,children:[(0,ie.jsx)($n,{}),(0,ie.jsx)(Xn,{styles:{body:{backgroundColor:"black"}}}),(0,ie.jsx)(Yh,{})]}))})()})();
//# sourceMappingURL=main.67c59c97.js.map